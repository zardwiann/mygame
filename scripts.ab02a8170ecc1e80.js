!function(ct,pt){"object"==typeof exports&&"object"==typeof module?module.exports=pt():"function"==typeof define&&define.amd?define("Phaser",[],pt):"object"==typeof exports?exports.Phaser=pt():ct.Phaser=pt()}(this,function(){return gt={},ct.m=pt=[function(g,b){function t(s,l,e,r){for(var o in l)if(l.hasOwnProperty(o)){var a=(d=l,f=o,m=v=void 0,m=(p=e)?d[f]:Object.getOwnPropertyDescriptor(d,f),!p&&m.value&&"object"==typeof m.value&&(m=m.value),!(!m||!((v=m).get&&"function"==typeof v.get||v.set&&"function"==typeof v.set))&&(void 0===m.enumerable&&(m.enumerable=!0),void 0===m.configurable&&(m.configurable=!0),m));if(!1!==a){if(c=void 0,(c=Object.getOwnPropertyDescriptor((r||s).prototype,o))&&(c.value&&"object"==typeof c.value&&(c=c.value),!1===c.configurable)){if(n.ignoreFinals)continue;throw new Error("cannot override final property '"+o+"', set Class.ignoreFinals = true to skip")}Object.defineProperty(s.prototype,o,a)}else s.prototype[o]=l[o]}var c,d,f,p,v,m}function h(s,l){if(l){Array.isArray(l)||(l=[l]);for(var e=0;e<l.length;e++)t(s,l[e].prototype||l[e])}}function n(s){var l,e,r;if((s=s||{}).initialize){if("function"!=typeof s.initialize)throw new Error("initialize must be a function");r=s.initialize,delete s.initialize}else r=s.Extends?(e=s.Extends,function(){e.apply(this,arguments)}):function(){};s.Extends?(r.prototype=Object.create(s.Extends.prototype),r.prototype.constructor=r,l=s.Extends,delete s.Extends):r.prototype.constructor=r;var o=null;return s.Mixins&&(o=s.Mixins,delete s.Mixins),h(r,o),t(r,s,!0,l),r}n.extend=t,n.mixin=h,n.ignoreFinals=!1,g.exports=n},function(g,b){g.exports=function(){}},function(g,b){g.exports=function(t,h,n){var s=typeof t;return t&&"number"!=s&&"string"!=s&&t.hasOwnProperty(h)&&void 0!==t[h]?t[h]:n}},function(g,b,t){var h=t(0),n=t(124),s=new h({initialize:function(l,e){this.x=0,this.y=0,"object"==typeof l?(this.x=l.x||0,this.y=l.y||0):(void 0===e&&(e=l),this.x=l||0,this.y=e||0)},clone:function(){return new s(this.x,this.y)},copy:function(l){return this.x=l.x||0,this.y=l.y||0,this},setFromObject:function(l){return this.x=l.x||0,this.y=l.y||0,this},set:function(l,e){return void 0===e&&(e=l),this.x=l,this.y=e,this},setTo:function(l,e){return this.set(l,e)},setToPolar:function(l,e){return null==e&&(e=1),this.x=Math.cos(l)*e,this.y=Math.sin(l)*e,this},equals:function(l){return this.x===l.x&&this.y===l.y},fuzzyEquals:function(l,e){return n(this.x,l.x,e)&&n(this.y,l.y,e)},angle:function(){var l=Math.atan2(this.y,this.x);return l<0&&(l+=2*Math.PI),l},setAngle:function(l){return this.setToPolar(l,this.length())},add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.x-=l.x,this.y-=l.y,this},multiply:function(l){return this.x*=l.x,this.y*=l.y,this},scale:function(l){return isFinite(l)?(this.x*=l,this.y*=l):(this.x=0,this.y=0),this},divide:function(l){return this.x/=l.x,this.y/=l.y,this},negate:function(){return this.x=-this.x,this.y=-this.y,this},distance:function(l){var e=l.x-this.x,r=l.y-this.y;return Math.sqrt(e*e+r*r)},distanceSq:function(l){var e=l.x-this.x,r=l.y-this.y;return e*e+r*r},length:function(){var l=this.x,e=this.y;return Math.sqrt(l*l+e*e)},setLength:function(l){return this.normalize().scale(l)},lengthSq:function(){var l=this.x,e=this.y;return l*l+e*e},normalize:function(){var l=this.x,e=this.y,r=l*l+e*e;return 0<r&&(r=1/Math.sqrt(r),this.x=l*r,this.y=e*r),this},normalizeRightHand:function(){var l=this.x;return this.x=-1*this.y,this.y=l,this},normalizeLeftHand:function(){var l=this.x;return this.x=this.y,this.y=-1*l,this},dot:function(l){return this.x*l.x+this.y*l.y},cross:function(l){return this.x*l.y-this.y*l.x},lerp:function(l,e){void 0===e&&(e=0);var r=this.x,o=this.y;return this.x=r+e*(l.x-r),this.y=o+e*(l.y-o),this},transformMat3:function(l){var e=this.x,r=this.y,o=l.val;return this.x=o[0]*e+o[3]*r+o[6],this.y=o[1]*e+o[4]*r+o[7],this},transformMat4:function(l){var e=this.x,r=this.y,o=l.val;return this.x=o[0]*e+o[4]*r+o[12],this.y=o[1]*e+o[5]*r+o[13],this},reset:function(){return this.x=0,this.y=0,this},limit:function(l){var e=this.length();return e&&l<e&&this.scale(l/e),this},reflect:function(l){return l=l.clone().normalize(),this.subtract(l.scale(2*this.dot(l)))},mirror:function(l){return this.reflect(l).negate()},rotate:function(l){var e=Math.cos(l),r=Math.sin(l);return this.set(e*this.x-r*this.y,r*this.x+e*this.y)}});s.ZERO=new s,s.RIGHT=new s(1,0),s.LEFT=new s(-1,0),s.UP=new s(0,-1),s.DOWN=new s(0,1),s.ONE=new s(1,1),g.exports=s},function(g,b,t){var h=t(0),n=t(56),s=new h({initialize:function(l,e){void 0===l&&(l=0),void 0===e&&(e=l),this.type=n.POINT,this.x=l,this.y=e},setTo:function(l,e){return void 0===l&&(l=0),void 0===e&&(e=l),this.x=l,this.y=e,this}});g.exports=s},function(g,b,t){var h=t(0),n=t(24),s=t(20),l=new h({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},existing:function(e){return(e.renderCanvas||e.renderWebGL)&&this.displayList.add(e),e.preUpdate&&this.updateList.add(e),e},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(e,r){l.prototype.hasOwnProperty(e)||(l.prototype[e]=r)},l.remove=function(e){l.prototype.hasOwnProperty(e)&&delete l.prototype[e]},n.register("GameObjectFactory",l,"add"),g.exports=l},function(g,b){g.exports=function(t,h,n){if(t&&"number"!=typeof t){if(t.hasOwnProperty(h))return t[h];if(-1===h.indexOf("."))return n;for(var s=h.split("."),l=t,e=n,r=0;r<s.length;r++){if(!l.hasOwnProperty(s[r])){e=n;break}e=l[s[r]],l=l[s[r]]}return e}return n}},function(g,b){g.exports=function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch{return!1}return!0}},function(g,b){var t={};g.exports={install:function(n){for(var s in t)n[s]=t[s]},register:function(n,s){t[n]=s},destroy:function(){t={}}}},function(g,b,t){"use strict";var h=Object.prototype.hasOwnProperty,n="~";function s(){}function l(a,i,u){this.fn=a,this.context=i,this.once=u||!1}function e(a,i,u,c,d){if("function"!=typeof u)throw new TypeError("The listener must be a function");var f=new l(u,c||a,d),p=n?n+i:i;return a._events[p]?a._events[p].fn?a._events[p]=[a._events[p],f]:a._events[p].push(f):(a._events[p]=f,a._eventsCount++),a}function r(a,i){0==--a._eventsCount?a._events=new s:delete a._events[i]}function o(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(n=!1)),o.prototype.eventNames=function(){var a,i,u=[];if(0===this._eventsCount)return u;for(i in a=this._events)h.call(a,i)&&u.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(a)):u},o.prototype.listeners=function(a){var u=this._events[n?n+a:a];if(!u)return[];if(u.fn)return[u.fn];for(var c=0,d=u.length,f=new Array(d);c<d;c++)f[c]=u[c].fn;return f},o.prototype.listenerCount=function(a){var u=this._events[n?n+a:a];return u?u.fn?1:u.length:0},o.prototype.emit=function(a,i,u,c,d,f){var p=n?n+a:a;if(!this._events[p])return!1;var v,m=this._events[p],T=arguments.length;if(m.fn){switch(m.once&&this.removeListener(a,m.fn,void 0,!0),T){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,i),!0;case 3:return m.fn.call(m.context,i,u),!0;case 4:return m.fn.call(m.context,i,u,c),!0;case 5:return m.fn.call(m.context,i,u,c,d),!0;case 6:return m.fn.call(m.context,i,u,c,d,f),!0}for(w=1,v=new Array(T-1);w<T;w++)v[w-1]=arguments[w];m.fn.apply(m.context,v)}else for(var y,x=m.length,w=0;w<x;w++)switch(m[w].once&&this.removeListener(a,m[w].fn,void 0,!0),T){case 1:m[w].fn.call(m[w].context);break;case 2:m[w].fn.call(m[w].context,i);break;case 3:m[w].fn.call(m[w].context,i,u);break;case 4:m[w].fn.call(m[w].context,i,u,c);break;default:if(!v)for(y=1,v=new Array(T-1);y<T;y++)v[y-1]=arguments[y];m[w].fn.apply(m[w].context,v)}return!0},o.prototype.on=function(a,i,u){return e(this,a,i,u,!1)},o.prototype.once=function(a,i,u){return e(this,a,i,u,!0)},o.prototype.removeListener=function(a,i,u,c){var d=n?n+a:a;if(!this._events[d])return this;if(!i)return r(this,d),this;var f=this._events[d];if(f.fn)f.fn!==i||c&&!f.once||u&&f.context!==u||r(this,d);else{for(var p=0,v=[],m=f.length;p<m;p++)(f[p].fn!==i||c&&!f[p].once||u&&f[p].context!==u)&&v.push(f[p]);v.length?this._events[d]=1===v.length?v[0]:v:r(this,d)}return this},o.prototype.removeAllListeners=function(a){var i;return a?this._events[i=n?n+a:a]&&r(this,i):(this._events=new s,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,g.exports=o},function(g,b,t){var h=t(0),n=t(57),s=t(171),l=t(306),e=t(56),r=t(47),o=t(174),a=new h({initialize:function(i,u,c,d){void 0===i&&(i=0),void 0===u&&(u=0),void 0===c&&(c=0),void 0===d&&(d=0),this.type=e.RECTANGLE,this.x=i,this.y=u,this.width=c,this.height=d},contains:function(i,u){return n(this,i,u)},getPoint:function(i,u){return s(this,i,u)},getPoints:function(i,u,c){return l(this,i,u,c)},getRandomPoint:function(i){return o(this,i)},setTo:function(i,u,c,d){return this.x=i,this.y=u,this.width=c,this.height=d,this},setEmpty:function(){return this.setTo(0,0,0,0)},setPosition:function(i,u){return void 0===u&&(u=i),this.x=i,this.y=u,this},setSize:function(i,u){return void 0===u&&(u=i),this.width=i,this.height=u,this},isEmpty:function(){return this.width<=0||this.height<=0},getLineA:function(i){return void 0===i&&(i=new r),i.setTo(this.x,this.y,this.right,this.y),i},getLineB:function(i){return void 0===i&&(i=new r),i.setTo(this.right,this.y,this.right,this.bottom),i},getLineC:function(i){return void 0===i&&(i=new r),i.setTo(this.right,this.bottom,this.x,this.bottom),i},getLineD:function(i){return void 0===i&&(i=new r),i.setTo(this.x,this.bottom,this.x,this.y),i},left:{get:function(){return this.x},set:function(i){this.width=i>=this.right?0:this.right-i,this.x=i}},right:{get:function(){return this.x+this.width},set:function(i){this.width=i<=this.x?0:i-this.x}},top:{get:function(){return this.y},set:function(i){this.height=i>=this.bottom?0:this.bottom-i,this.y=i}},bottom:{get:function(){return this.y+this.height},set:function(i){this.height=i<=this.y?0:i-this.y}},centerX:{get:function(){return this.x+this.width/2},set:function(i){this.x=i-this.width/2}},centerY:{get:function(){return this.y+this.height/2},set:function(i){this.y=i-this.height/2}}});g.exports=a},function(g,b,t){g.exports={Alpha:t(607),AlphaSingle:t(303),BlendMode:t(304),ComputedSize:t(608),Crop:t(609),Depth:t(305),Flip:t(610),GetBounds:t(611),Mask:t(309),Origin:t(632),PathFollower:t(633),Pipeline:t(167),ScrollFactor:t(312),Size:t(634),Texture:t(635),TextureCrop:t(636),Tint:t(637),ToJSON:t(176),Transform:t(313),TransformMatrix:t(25),Visible:t(314)}},function(g,b){g.exports={getTintFromFloats:function(t,h,n,s){return((255&(255*s|0))<<24|(255&(255*t|0))<<16|(255&(255*h|0))<<8|255&(255*n|0))>>>0},getTintAppendFloatAlpha:function(t,h){return((255&(255*h|0))<<24|t)>>>0},getTintAppendFloatAlphaAndSwap:function(t,h){return((255&(255*h|0))<<24|(255&(0|t))<<16|(255&(t>>8|0))<<8|255&(t>>16|0))>>>0},getFloatsFromUintRGB:function(t){return[(255&(t>>16|0))/255,(255&(t>>8|0))/255,(255&(0|t))/255]},checkShaderMax:function(t,h){h&&-1!==h||(h=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS));for(var n=t.createShader(t.FRAGMENT_SHADER),s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");;){var l=s.replace(/%forloop%/gi,function(e){for(var r="",o=0;o<e;++o)0<o&&(r+="\nelse "),o<e-1&&(r+="if(test == "+o+".0){}");return r}(h));if(t.shaderSource(n,l),t.compileShader(n),t.getShaderParameter(n,t.COMPILE_STATUS))break;h=h/2|0}return h},parseFragmentShaderMaxTextures:function(t,h){if(!t)return"";for(var n="",s=0;s<h;s++)0<s&&(n+="\n\telse "),s<h-1&&(n+="if (outTexId < "+s+".5)"),n+="\n\t{",n+="\n\t\ttexture = texture2D(uMainSampler["+s+"], outTexCoord);",n+="\n\t}";return(t=t.replace(/%count%/gi,h.toString())).replace(/%forloop%/gi,n)}}},function(g,b,t){var h=t(193),n=t(6);g.exports=function(s,l,e){var r=n(s,l,null);if(null===r)return e;if(Array.isArray(r))return h.RND.pick(r);if("object"==typeof r){if(r.hasOwnProperty("randInt"))return h.RND.integerInRange(r.randInt[0],r.randInt[1]);if(r.hasOwnProperty("randFloat"))return h.RND.realInRange(r.randFloat[0],r.randFloat[1])}else if("function"==typeof r)return r(l);return r}},function(g,b){var t={PI2:2*Math.PI,TAU:.5*Math.PI,EPSILON:1e-6,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,RND:null,MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER||-9007199254740991,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991};g.exports=t},function(g,b,t){var h=t(0),n=t(176),s=t(101),l=t(9),e=t(75),r=t(20),o=new h({Extends:l,initialize:function(a,i){l.call(this),this.scene=a,this.displayList=null,this.type=i,this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.on(e.ADDED_TO_SCENE,this.addedToScene,this),this.on(e.REMOVED_FROM_SCENE,this.removedFromScene,this),a.sys.queueDepthSort()},setActive:function(a){return this.active=a,this},setName:function(a){return this.name=a,this},setState:function(a){return this.state=a,this},setDataEnabled:function(){return this.data||(this.data=new s(this)),this},setData:function(a,i){return this.data||(this.data=new s(this)),this.data.set(a,i),this},incData:function(a,i){return this.data||(this.data=new s(this)),this.data.inc(a,i),this},toggleData:function(a){return this.data||(this.data=new s(this)),this.data.toggle(a),this},getData:function(a){return this.data||(this.data=new s(this)),this.data.get(a)},setInteractive:function(a,i,u){return this.scene.sys.input.enable(this,a,i,u),this},disableInteractive:function(){return this.input&&(this.input.enabled=!1),this},removeInteractive:function(){return this.scene.sys.input.clear(this),this.input=void 0,this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return n(this)},willRender:function(a){return!(o.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&a.id)},getIndexList:function(){for(var a=this,i=this.parentContainer,u=[];i&&(u.unshift(i.getIndex(a)),(a=i).parentContainer);)i=i.parentContainer;return u.unshift(this.displayList?this.displayList.getIndex(a):this.scene.sys.displayList.getIndex(a)),u},addToDisplayList:function(a){return void 0===a&&(a=this.scene.sys.displayList),this.displayList&&this.displayList!==a&&this.removeFromDisplayList(),a.exists(this)||((this.displayList=a).add(this,!0),a.queueDepthSort(),this.emit(e.ADDED_TO_SCENE,this,this.scene),a.events.emit(r.ADDED_TO_SCENE,this,this.scene)),this},addToUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.add(this),this},removeFromDisplayList:function(){var a=this.displayList||this.scene.sys.displayList;return a.exists(this)&&(a.remove(this,!0),a.queueDepthSort(),this.displayList=null,this.emit(e.REMOVED_FROM_SCENE,this,this.scene),a.events.emit(r.REMOVED_FROM_SCENE,this,this.scene)),this},removeFromUpdateList:function(){return this.scene&&this.preUpdate&&this.scene.sys.updateList.remove(this),this},destroy:function(a){this.scene&&!this.ignoreDestroy&&(void 0===a&&(a=!1),this.preDestroy&&this.preDestroy.call(this),this.emit(e.DESTROY,this,a),this.removeAllListeners(),this.postPipelines&&this.resetPostPipeline(!0),this.removeFromDisplayList(),this.removeFromUpdateList(),this.input&&(this.scene.sys.input.clear(this),this.input=void 0),this.data&&(this.data.destroy(),this.data=void 0),this.body&&(this.body.destroy(),this.body=void 0),this.active=!1,this.visible=!1,this.scene=void 0,this.parentContainer=void 0)}});o.RENDER_MASK=15,g.exports=o},function(g,b,t){var h=t(0),n=t(24),s=t(20),l=new h({initialize:function(e){this.scene=e,this.systems=e.sys,this.events=e.sys.events,this.events.once(s.BOOT,this.boot,this),this.events.on(s.START,this.start,this)},boot:function(){this.displayList=this.systems.displayList,this.updateList=this.systems.updateList,this.events.once(s.DESTROY,this.destroy,this)},start:function(){this.events.once(s.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.events.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.events=null,this.displayList=null,this.updateList=null}});l.register=function(e,r){l.prototype.hasOwnProperty(e)||(l.prototype[e]=r)},l.remove=function(e){l.prototype.hasOwnProperty(e)&&delete l.prototype[e]},n.register("GameObjectCreator",l,"make"),g.exports=l},function(g,b,t){var h=t(7),n=function(){var s,l,e,r,o,a,i=arguments[0]||{},u=1,c=arguments.length,d=!1;for("boolean"==typeof i&&(d=i,i=arguments[1]||{},u=2),c===u&&(i=this,--u);u<c;u++)if(null!=(s=arguments[u]))for(l in s)e=i[l],i!==(r=s[l])&&(d&&r&&(h(r)||(o=Array.isArray(r)))?(a=o?(o=!1,e&&Array.isArray(e)?e:[]):e&&h(e)?e:{},i[l]=n(d,a,r)):void 0!==r&&(i[l]=r));return i};g.exports=n},function(g,b){g.exports=function(t,h,n){return Math.max(h,Math.min(n,t))}},function(g,b,t){var h=t(25),n=new h,s=new h,l=new h,e={camera:n,sprite:s,calc:l};g.exports=function(r,o,a){var i=n,u=s,c=l;return u.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),i.copyFrom(o.matrix),a?(i.multiplyWithOffset(a,-o.scrollX*r.scrollFactorX,-o.scrollY*r.scrollFactorY),u.e=r.x,u.f=r.y):(u.e-=o.scrollX*r.scrollFactorX,u.f-=o.scrollY*r.scrollFactorY),i.multiply(u,c),e}},function(g,b,t){g.exports={ADDED_TO_SCENE:t(656),BOOT:t(657),CREATE:t(658),DESTROY:t(659),PAUSE:t(660),POST_UPDATE:t(661),PRE_RENDER:t(662),PRE_UPDATE:t(663),READY:t(664),REMOVED_FROM_SCENE:t(665),RENDER:t(666),RESUME:t(667),SHUTDOWN:t(668),SLEEP:t(669),START:t(670),TRANSITION_COMPLETE:t(671),TRANSITION_INIT:t(672),TRANSITION_OUT:t(673),TRANSITION_START:t(674),TRANSITION_WAKE:t(675),UPDATE:t(676),WAKE:t(677)}},function(g,b){g.exports={LOADER_IDLE:0,LOADER_LOADING:1,LOADER_PROCESSING:2,LOADER_COMPLETE:3,LOADER_SHUTDOWN:4,LOADER_DESTROYED:5,FILE_PENDING:10,FILE_LOADING:11,FILE_LOADED:12,FILE_FAILED:13,FILE_PROCESSING:14,FILE_ERRORED:16,FILE_COMPLETE:17,FILE_DESTROYED:18,FILE_POPULATED:19}},function(g,b,t){g.exports={BLUR:t(612),BOOT:t(613),CONTEXT_LOST:t(614),CONTEXT_RESTORED:t(615),DESTROY:t(616),FOCUS:t(617),HIDDEN:t(618),PAUSE:t(619),POST_RENDER:t(620),POST_STEP:t(621),PRE_RENDER:t(622),PRE_STEP:t(623),READY:t(624),RESUME:t(625),STEP:t(626),VISIBLE:t(627)}},function(g,b,t){var h=t(0),n=t(21),s=t(95),l=t(2),e=t(155),r=t(240),o=t(517),a=t(156),i=new h({initialize:function(u,c){this.loader=u,this.cache=l(c,"cache",!1),this.type=l(c,"type",!1),this.key=l(c,"key",!1);var d=this.key;if(u.prefix&&""!==u.prefix&&(this.key=u.prefix+d),!this.type||!this.key)throw new Error("Invalid Loader."+this.type+" key");var f=l(c,"url");void 0===f?f=u.path+d+"."+l(c,"extension",""):"string"!=typeof f||f.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)||(f=u.path+f),this.url=f,this.src="",this.xhrSettings=a(l(c,"responseType",void 0)),l(c,"xhrSettings",!1)&&(this.xhrSettings=r(this.xhrSettings,l(c,"xhrSettings",{}))),this.xhrLoader=null,this.state="function"==typeof this.url?n.FILE_POPULATED:n.FILE_PENDING,this.bytesTotal=0,this.bytesLoaded=-1,this.percentComplete=-1,this.crossOrigin=void 0,this.data=void 0,this.config=l(c,"config",{})},setLink:function(u){(this.linkFile=u).linkFile=this},resetXHR:function(){this.xhrLoader&&(this.xhrLoader.onload=void 0,this.xhrLoader.onerror=void 0,this.xhrLoader.onprogress=void 0)},load:function(){this.state===n.FILE_POPULATED?this.loader.nextFile(this,!0):(this.state=n.FILE_LOADING,this.src=e(this,this.loader.baseURL),0===this.src.indexOf("data:")?console.warn("Local data URIs are not supported: "+this.key):this.xhrLoader=o(this,this.loader.xhr))},onLoad:function(u,c){var d=u.responseURL&&(0===u.responseURL.indexOf("file://")||0===u.responseURL.indexOf("capacitor://"))&&0===c.target.status,f=!(c.target&&200!==c.target.status)||d;4===u.readyState&&400<=u.status&&u.status<=599&&(f=!1),this.state=n.FILE_LOADED,this.resetXHR(),this.loader.nextFile(this,f)},onError:function(){this.resetXHR(),this.loader.nextFile(this,!1)},onProgress:function(u){u.lengthComputable&&(this.bytesLoaded=u.loaded,this.bytesTotal=u.total,this.percentComplete=Math.min(this.bytesLoaded/this.bytesTotal,1),this.loader.emit(s.FILE_PROGRESS,this,this.percentComplete))},onProcess:function(){this.state=n.FILE_PROCESSING,this.onProcessComplete()},onProcessComplete:function(){this.state=n.FILE_COMPLETE,this.multiFile&&this.multiFile.onFileComplete(this),this.loader.fileProcessComplete(this)},onProcessError:function(){this.state=n.FILE_ERRORED,this.multiFile&&this.multiFile.onFileFailed(this),this.loader.fileProcessComplete(this)},hasCacheConflict:function(){return this.cache&&this.cache.exists(this.key)},addToCache:function(){this.cache&&this.cache.add(this.key,this.data),this.pendingDestroy()},pendingDestroy:function(u){void 0===u&&(u=this.data);var c=this.key,d=this.type;this.loader.emit(s.FILE_COMPLETE,c,d,u),this.loader.emit(s.FILE_KEY_COMPLETE+d+"-"+c,c,d,u),this.loader.flagForRemoval(this)},destroy:function(){this.loader=null,this.cache=null,this.xhrSettings=null,this.multiFile=null,this.linkFile=null,this.data=null}});i.createObjectURL=function(u,c,d){var f;"function"==typeof URL?u.src=URL.createObjectURL(c):((f=new FileReader).onload=function(){u.removeAttribute("crossOrigin"),u.src="data:"+(c.type||d)+";base64,"+f.result.split(",")[1]},f.onerror=u.onerror,f.readAsDataURL(c))},i.revokeObjectURL=function(u){"function"==typeof URL&&URL.revokeObjectURL(u.src)},g.exports=i},function(g,b){var t={},h={};g.exports={register:function(s,l,e,r){void 0===r&&(r=!1),t[s]={plugin:l,mapping:e,custom:r}},registerCustom:function(s,l,e,r){h[s]={plugin:l,mapping:e,data:r}},hasCore:function(s){return t.hasOwnProperty(s)},hasCustom:function(s){return h.hasOwnProperty(s)},getCore:function(s){return t[s]},getCustom:function(s){return h[s]},getCustomClass:function(s){return h.hasOwnProperty(s)?h[s].plugin:null},remove:function(s){t.hasOwnProperty(s)&&delete t[s]},removeCustom:function(s){h.hasOwnProperty(s)&&delete h[s]},destroyCorePlugins:function(){for(var s in t)t.hasOwnProperty(s)&&delete t[s]},destroyCustomPlugins:function(){for(var s in h)h.hasOwnProperty(s)&&delete h[s]}}},function(g,b,t){var h=t(0),n=t(14),s=t(3),l=new h({initialize:function(e,r,o,a,i,u){void 0===e&&(e=1),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=1),void 0===i&&(i=0),void 0===u&&(u=0),this.matrix=new Float32Array([e,r,o,a,i,u,0,0,1]),this.decomposedMatrix={translateX:0,translateY:0,scaleX:1,scaleY:1,rotation:0}},a:{get:function(){return this.matrix[0]},set:function(e){this.matrix[0]=e}},b:{get:function(){return this.matrix[1]},set:function(e){this.matrix[1]=e}},c:{get:function(){return this.matrix[2]},set:function(e){this.matrix[2]=e}},d:{get:function(){return this.matrix[3]},set:function(e){this.matrix[3]=e}},e:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},f:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},tx:{get:function(){return this.matrix[4]},set:function(e){this.matrix[4]=e}},ty:{get:function(){return this.matrix[5]},set:function(e){this.matrix[5]=e}},rotation:{get:function(){return Math.acos(this.a/this.scaleX)*(Math.atan(-this.c/this.a)<0?-1:1)}},rotationNormalized:{get:function(){var e=this.matrix,r=e[0],o=e[1],a=e[2],i=e[3];return r||o?0<o?Math.acos(r/this.scaleX):-Math.acos(r/this.scaleX):a||i?n.TAU-(0<i?Math.acos(-a/this.scaleY):-Math.acos(a/this.scaleY)):0}},scaleX:{get:function(){return Math.sqrt(this.a*this.a+this.b*this.b)}},scaleY:{get:function(){return Math.sqrt(this.c*this.c+this.d*this.d)}},loadIdentity:function(){var e=this.matrix;return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,this},translate:function(e,r){var o=this.matrix;return o[4]=o[0]*e+o[2]*r+o[4],o[5]=o[1]*e+o[3]*r+o[5],this},scale:function(e,r){var o=this.matrix;return o[0]*=e,o[1]*=e,o[2]*=r,o[3]*=r,this},rotate:function(e){var r=Math.sin(e),o=Math.cos(e),a=this.matrix,i=a[0],u=a[1],c=a[2],d=a[3];return a[0]=i*o+c*r,a[1]=u*o+d*r,a[2]=i*-r+c*o,a[3]=u*-r+d*o,this},multiply:function(e,r){var o=this.matrix,a=e.matrix,i=o[0],u=o[1],c=o[2],d=o[3],f=o[4],p=o[5],v=a[0],m=a[1],T=a[2],y=a[3],x=a[4],w=a[5],E=void 0===r?this:r;return E.a=v*i+m*c,E.b=v*u+m*d,E.c=T*i+y*c,E.d=T*u+y*d,E.e=x*i+w*c+f,E.f=x*u+w*d+p,E},multiplyWithOffset:function(e,r,o){var a=this.matrix,i=e.matrix,u=a[0],c=a[1],d=a[2],f=a[3],p=r*u+o*d+a[4],v=r*c+o*f+a[5],m=i[0],T=i[1],y=i[2],x=i[3],w=i[4],E=i[5];return a[0]=m*u+T*d,a[1]=m*c+T*f,a[2]=y*u+x*d,a[3]=y*c+x*f,a[4]=w*u+E*d+p,a[5]=w*c+E*f+v,this},transform:function(e,r,o,a,i,u){var c=this.matrix,d=c[0],f=c[1],p=c[2],v=c[3],m=c[4],T=c[5];return c[0]=e*d+r*p,c[1]=e*f+r*v,c[2]=o*d+a*p,c[3]=o*f+a*v,c[4]=i*d+u*p+m,c[5]=i*f+u*v+T,this},transformPoint:function(e,r,o){void 0===o&&(o={x:0,y:0});var a=this.matrix,u=a[1],d=a[3],p=a[5];return o.x=e*a[0]+r*a[2]+a[4],o.y=e*u+r*d+p,o},invert:function(){var e=this.matrix,r=e[0],o=e[1],a=e[2],i=e[3],u=e[4],c=e[5],d=r*i-o*a;return e[0]=i/d,e[1]=-o/d,e[2]=-a/d,e[3]=r/d,e[4]=(a*c-i*u)/d,e[5]=-(r*c-o*u)/d,this},copyFrom:function(e){var r=this.matrix;return r[0]=e.a,r[1]=e.b,r[2]=e.c,r[3]=e.d,r[4]=e.e,r[5]=e.f,this},copyFromArray:function(e){var r=this.matrix;return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],this},copyToContext:function(e){var r=this.matrix;return e.transform(r[0],r[1],r[2],r[3],r[4],r[5]),e},setToContext:function(e){var r=this.matrix;return e.setTransform(r[0],r[1],r[2],r[3],r[4],r[5]),e},copyToArray:function(e){var r=this.matrix;return void 0===e?e=[r[0],r[1],r[2],r[3],r[4],r[5]]:(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5]),e},setTransform:function(e,r,o,a,i,u){var c=this.matrix;return c[0]=e,c[1]=r,c[2]=o,c[3]=a,c[4]=i,c[5]=u,this},decomposeMatrix:function(){var e,r,o=this.decomposedMatrix,a=this.matrix,i=a[0],u=a[1],c=a[2],d=a[3],f=i*d-u*c;return o.translateX=a[4],o.translateY=a[5],i||u?(e=Math.sqrt(i*i+u*u),o.rotation=0<u?Math.acos(i/e):-Math.acos(i/e),o.scaleX=e,o.scaleY=f/e):c||d?(r=Math.sqrt(c*c+d*d),o.rotation=.5*Math.PI-(0<d?Math.acos(-c/r):-Math.acos(c/r)),o.scaleX=f/r,o.scaleY=r):(o.rotation=0,o.scaleX=0,o.scaleY=0),o},applyITRS:function(e,r,o,a,i){var u=this.matrix,c=Math.sin(o),d=Math.cos(o);return u[4]=e,u[5]=r,u[0]=d*a,u[1]=c*a,u[2]=-c*i,u[3]=d*i,this},applyInverse:function(e,r,o){void 0===o&&(o=new s);var a=this.matrix,i=a[0],u=a[1],c=a[2],d=a[3],f=a[4],p=a[5],v=1/(i*d+c*-u);return o.x=d*v*e+-c*v*r+(p*c-f*d)*v,o.y=i*v*r+-u*v*e+(-p*i+f*u)*v,o},getX:function(e,r){return e*this.a+r*this.c+this.e},getY:function(e,r){return e*this.b+r*this.d+this.f},getXRound:function(e,r,o){var a=this.getX(e,r);return o&&(a=Math.round(a)),a},getYRound:function(e,r,o){var a=this.getY(e,r);return o&&(a=Math.round(a)),a},getCSSMatrix:function(){var e=this.matrix;return"matrix("+e[0]+","+e[1]+","+e[2]+","+e[3]+","+e[4]+","+e[5]+")"},destroy:function(){this.matrix=null,this.decomposedMatrix=null}});g.exports=l},function(g,b,t){var h=t(2);g.exports=function(n,s,l,e,r,o){void 0===n&&(n=0),void 0===s&&(s=0),void 0===l&&(l=o.width),void 0===e&&(e=o.height);var a=h(r=r||{},"isNotEmpty",!1),i=h(r,"isColliding",!1),u=h(r,"hasInterestingFace",!1);n<0&&(l+=n,n=0),s<0&&(e+=s,s=0),n+l>o.width&&(l=Math.max(o.width-n,0)),s+e>o.height&&(e=Math.max(o.height-s,0));for(var c=[],d=s;d<s+e;d++)for(var f=n;f<n+l;f++){var p=o.data[d][f];if(null!==p){if(a&&-1===p.index||i&&!p.collides||u&&!p.hasInterestingFace)continue;c.push(p)}}return c}},function(g,b){g.exports=function(t,h,n,s,l,e){var r;void 0===s&&(s=0),void 0===l&&(l=0),void 0===e&&(e=1);var o=0,a=t.length;if(1===e)for(r=l;r<a;r++)t[r][h]=n+o*s,o++;else for(r=l;0<=r;r--)t[r][h]=n+o*s,o++;return t}},function(g,b,t){var h=t(35),n=t(13);g.exports=function(s,l,e){l.x=n(e,"x",0),l.y=n(e,"y",0),l.depth=n(e,"depth",0),l.flipX=n(e,"flipX",!1),l.flipY=n(e,"flipY",!1);var r=n(e,"scale",null);"number"==typeof r?l.setScale(r):null!==r&&(l.scaleX=n(r,"x",1),l.scaleY=n(r,"y",1));var o=n(e,"scrollFactor",null);"number"==typeof o?l.setScrollFactor(o):null!==o&&(l.scrollFactorX=n(o,"x",1),l.scrollFactorY=n(o,"y",1)),l.rotation=n(e,"rotation",0);var a=n(e,"angle",null);null!==a&&(l.angle=a),l.alpha=n(e,"alpha",1);var i,u,c=n(e,"origin",null);return"number"==typeof c?l.setOrigin(c):null!==c&&(i=n(c,"x",.5),u=n(c,"y",.5),l.setOrigin(i,u)),l.blendMode=n(e,"blendMode",h.NORMAL),l.visible=n(e,"visible",!0),n(e,"add",!0)&&s.sys.displayList.add(l),l.preUpdate&&s.sys.updateList.add(l),l}},function(g,b){g.exports={ORTHOGONAL:0,ISOMETRIC:1,STAGGERED:2,HEXAGONAL:3}},function(g,b,t){var h=t(19);g.exports=function(n,s,l,e,r){var o=e.alpha*l.alpha;if(o<=0)return!1;var a=h(l,e,r).calc;return s.globalCompositeOperation=n.blendModes[l.blendMode],s.globalAlpha=o,s.save(),a.setToContext(s),s.imageSmoothingEnabled=!(!n.antialias||l.frame&&l.frame.source.scaleMode),!0}},function(g,b,t){var h,n=t(33),s=t(192),l=[],e=!1;function r(a,i,u,c,d){void 0===i&&(i=1),void 0===u&&(u=1),void 0===c&&(c=n.CANVAS),void 0===d&&(d=!1);var f=h(c),p=(null===f?(f={parent:a,canvas:document.createElement("canvas"),type:c},c===n.CANVAS&&l.push(f)):f.parent=a,f.canvas);return d&&(f.parent=p),p.width=i,p.height=u,e&&c===n.CANVAS&&s.disable(p.getContext("2d")),p}function o(){var a=0;return l.forEach(function(i){i.parent&&a++}),a}g.exports={create2D:function(a,i,u){return r(a,i,u,n.CANVAS)},create:r,createWebGL:function(a,i,u){return r(a,i,u,n.WEBGL)},disableSmoothing:function(){e=!0},enableSmoothing:function(){e=!1},first:h=function(a){if(void 0===a&&(a=n.CANVAS),a===n.WEBGL)return null;for(var i=0;i<l.length;i++){var u=l[i];if(!u.parent&&u.type===a)return u}return null},free:function(){return l.length-o()},pool:l,remove:function(a){var i=a instanceof HTMLCanvasElement;l.forEach(function(u){(i&&u.canvas===a||!i&&u.parent===a)&&(u.parent=null,u.canvas.width=1,u.canvas.height=1)})},total:o}},function(g,b){var t={};g.exports=t,function(){t._nextId=0,t._seed=0,t._nowStartTime=+new Date,t.extend=function(n,s){for(var l,e="boolean"==typeof s?(l=2,s):(l=1,!0),r=l;r<arguments.length;r++){var o=arguments[r];if(o)for(var a in o)!e||!o[a]||o[a].constructor!==Object||n[a]&&n[a].constructor!==Object?n[a]=o[a]:(n[a]=n[a]||{},t.extend(n[a],e,o[a]))}return n},t.clone=function(n,s){return t.extend({},s,n)},t.keys=function(n){if(Object.keys)return Object.keys(n);var s=[];for(var l in n)s.push(l);return s},t.values=function(n){var s=[];if(Object.keys){for(var l=Object.keys(n),e=0;e<l.length;e++)s.push(n[l[e]]);return s}for(var r in n)s.push(n[r]);return s},t.get=function(n,s,l,e){s=s.split(".").slice(l,e);for(var r=0;r<s.length;r+=1)n=n[s[r]];return n},t.set=function(n,s,l,e,r){var o=s.split(".").slice(e,r);return t.get(n,s,0,-1)[o[o.length-1]]=l},t.shuffle=function(n){for(var s=n.length-1;0<s;s--){var l=Math.floor(t.random()*(s+1)),e=n[s];n[s]=n[l],n[l]=e}return n},t.choose=function(n){return n[Math.floor(t.random()*n.length)]},t.isElement=function(n){return typeof HTMLElement<"u"?n instanceof HTMLElement:!!(n&&n.nodeType&&n.nodeName)},t.isArray=function(n){return"[object Array]"===Object.prototype.toString.call(n)},t.isFunction=function(n){return"function"==typeof n},t.isPlainObject=function(n){return"object"==typeof n&&n.constructor===Object},t.isString=function(n){return"[object String]"===Object.prototype.toString.call(n)},t.clamp=function(n,s,l){return n<s?s:l<n?l:n},t.sign=function(n){return n<0?-1:1},t.now=function(){if(typeof window<"u"&&window.performance){if(window.performance.now)return window.performance.now();if(window.performance.webkitNow)return window.performance.webkitNow()}return new Date-t._nowStartTime},t.random=function(n,s){return s=void 0!==s?s:1,(n=void 0!==n?n:0)+h()*(s-n)};var h=function(){return t._seed=(9301*t._seed+49297)%233280,t._seed/233280};t.colorToNumber=function(n){return 3==(n=n.replace("#","")).length&&(n=n.charAt(0)+n.charAt(0)+n.charAt(1)+n.charAt(1)+n.charAt(2)+n.charAt(2)),parseInt(n,16)},t.logLevel=1,t.log=function(){console&&0<t.logLevel&&t.logLevel<=3&&console.log.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.info=function(){console&&0<t.logLevel&&t.logLevel<=2&&console.info.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.warn=function(){console&&0<t.logLevel&&t.logLevel<=3&&console.warn.apply(console,["matter-js:"].concat(Array.prototype.slice.call(arguments)))},t.nextId=function(){return t._nextId++},t.indexOf=function(n,s){if(n.indexOf)return n.indexOf(s);for(var l=0;l<n.length;l++)if(n[l]===s)return l;return-1},t.map=function(n,s){if(n.map)return n.map(s);for(var l=[],e=0;e<n.length;e+=1)l.push(s(n[e]));return l},t.topologicalSort=function(n){var s=[],l=[],e=[];for(var r in n)l[r]||e[r]||t._topologicalSort(r,l,e,n,s);return s},t._topologicalSort=function(n,s,l,e,r){var o=e[n]||[];l[n]=!0;for(var a=0;a<o.length;a+=1){var i=o[a];l[i]||s[i]||t._topologicalSort(i,s,l,e,r)}l[n]=!1,s[n]=!0,r.push(n)},t.chain=function(){for(var n=[],s=0;s<arguments.length;s+=1){var l=arguments[s];l._chained?n.push.apply(n,l._chained):n.push(l)}function e(){for(var r,o=new Array(arguments.length),a=0,i=arguments.length;a<i;a++)o[a]=arguments[a];for(a=0;a<n.length;a+=1){var u=n[a].apply(r,o);void 0!==u&&(r=u)}return r}return e._chained=n,e},t.chainPathBefore=function(n,s,l){return t.set(n,s,t.chain(l,t.get(n,s)))},t.chainPathAfter=function(n,s,l){return t.set(n,s,t.chain(t.get(n,s),l))}}()},function(g,b,t){var h={VERSION:"3.55.2",BlendModes:t(35),ScaleModes:t(168),AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,FOREVER:-1,NONE:4,UP:5,DOWN:6,LEFT:7,RIGHT:8};g.exports=h},function(g,b,t){var h=t(0),n=t(11),s=t(15),l=t(47),e=new h({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible],initialize:function(r,o,a){void 0===o&&(o="Shape"),s.call(this,r,o),this.geom=a,this.pathData=[],this.pathIndexes=[],this.fillColor=16777215,this.fillAlpha=1,this.strokeColor=16777215,this.strokeAlpha=1,this.lineWidth=1,this.isFilled=!1,this.isStroked=!1,this.closePath=!0,this._tempLine=new l,this.width=0,this.height=0,this.initPipeline()},setFillStyle:function(r,o){return void 0===o&&(o=1),void 0===r?this.isFilled=!1:(this.fillColor=r,this.fillAlpha=o,this.isFilled=!0),this},setStrokeStyle:function(r,o,a){return void 0===a&&(a=1),void 0===r?this.isStroked=!1:(this.lineWidth=r,this.strokeColor=o,this.strokeAlpha=a,this.isStroked=!0),this},setClosePath:function(r){return this.closePath=r,this},setSize:function(r,o){return this.width=r,this.height=o,this},setDisplaySize:function(r,o){return this.displayWidth=r,this.displayHeight=o,this},preDestroy:function(){this.geom=null,this._tempLine=null,this.pathData=[],this.pathIndexes=[]},displayWidth:{get:function(){return this.scaleX*this.width},set:function(r){this.scaleX=r/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(r){this.scaleY=r/this.height}}});g.exports=e},function(g,b){g.exports={SKIP_CHECK:-1,NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,ERASE:17,SOURCE_IN:18,SOURCE_OUT:19,SOURCE_ATOP:20,DESTINATION_OVER:21,DESTINATION_IN:22,DESTINATION_OUT:23,DESTINATION_ATOP:24,LIGHTER:25,COPY:26,XOR:27}},function(g,b,t){var h=t(14);g.exports=function(n){return n*h.DEG_TO_RAD}},function(g,b,t){g.exports={DESTROY:t(743),FADE_IN_COMPLETE:t(744),FADE_IN_START:t(745),FADE_OUT_COMPLETE:t(746),FADE_OUT_START:t(747),FLASH_COMPLETE:t(748),FLASH_START:t(749),FOLLOW_UPDATE:t(750),PAN_COMPLETE:t(751),PAN_START:t(752),POST_RENDER:t(753),PRE_RENDER:t(754),ROTATE_COMPLETE:t(755),ROTATE_START:t(756),SHAKE_COMPLETE:t(757),SHAKE_START:t(758),ZOOM_COMPLETE:t(759),ZOOM_START:t(760)}},function(g,b,t){var h=t(0),n=t(103),s=t(328),l=t(188),e=t(329),r=new h({initialize:function(o,a,i,u){void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=255),this.r=0,this.g=0,this.b=0,this.a=255,this._h=0,this._s=0,this._v=0,this._locked=!1,this.gl=[0,0,0,1],this._color=0,this._color32=0,this._rgba="",this.setTo(o,a,i,u)},transparent:function(){return this._locked=!0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this._locked=!1,this.update(!0)},setTo:function(o,a,i,u,c){return void 0===u&&(u=255),void 0===c&&(c=!0),this._locked=!0,this.red=o,this.green=a,this.blue=i,this.alpha=u,this._locked=!1,this.update(c)},setGLTo:function(o,a,i,u){return void 0===u&&(u=1),this._locked=!0,this.redGL=o,this.greenGL=a,this.blueGL=i,this.alphaGL=u,this._locked=!1,this.update(!0)},setFromRGB:function(o){return this._locked=!0,this.red=o.r,this.green=o.g,this.blue=o.b,o.hasOwnProperty("a")&&(this.alpha=o.a),this._locked=!1,this.update(!0)},setFromHSV:function(o,a,i){return l(o,a,i,this)},update:function(o){if(void 0===o&&(o=!1),this._locked)return this;var a=this.r,i=this.g,u=this.b,c=this.a;return this._color=n(a,i,u),this._color32=s(a,i,u,c),this._rgba="rgba("+a+","+i+","+u+","+c/255+")",o&&e(a,i,u,this),this},updateHSV:function(){return e(this.r,this.g,this.b,this),this},clone:function(){return new r(this.r,this.g,this.b,this.a)},gray:function(o){return this.setTo(o,o,o)},random:function(o,a){void 0===o&&(o=0),void 0===a&&(a=255);var i=Math.floor(o+Math.random()*(a-o)),u=Math.floor(o+Math.random()*(a-o)),c=Math.floor(o+Math.random()*(a-o));return this.setTo(i,u,c)},randomGray:function(o,a){void 0===o&&(o=0),void 0===a&&(a=255);var i=Math.floor(o+Math.random()*(a-o));return this.setTo(i,i,i)},saturate:function(o){return this.s+=o/100,this},desaturate:function(o){return this.s-=o/100,this},lighten:function(o){return this.v+=o/100,this},darken:function(o){return this.v-=o/100,this},brighten:function(o){var a=this.r,i=this.g,u=this.b;return a=Math.max(0,Math.min(255,a-Math.round(-o/100*255))),i=Math.max(0,Math.min(255,i-Math.round(-o/100*255))),u=Math.max(0,Math.min(255,u-Math.round(-o/100*255))),this.setTo(a,i,u)},color:{get:function(){return this._color}},color32:{get:function(){return this._color32}},rgba:{get:function(){return this._rgba}},redGL:{get:function(){return this.gl[0]},set:function(o){this.gl[0]=Math.min(Math.abs(o),1),this.r=Math.floor(255*this.gl[0]),this.update(!0)}},greenGL:{get:function(){return this.gl[1]},set:function(o){this.gl[1]=Math.min(Math.abs(o),1),this.g=Math.floor(255*this.gl[1]),this.update(!0)}},blueGL:{get:function(){return this.gl[2]},set:function(o){this.gl[2]=Math.min(Math.abs(o),1),this.b=Math.floor(255*this.gl[2]),this.update(!0)}},alphaGL:{get:function(){return this.gl[3]},set:function(o){this.gl[3]=Math.min(Math.abs(o),1),this.a=Math.floor(255*this.gl[3]),this.update()}},red:{get:function(){return this.r},set:function(o){o=Math.floor(Math.abs(o)),this.r=Math.min(o,255),this.gl[0]=o/255,this.update(!0)}},green:{get:function(){return this.g},set:function(o){o=Math.floor(Math.abs(o)),this.g=Math.min(o,255),this.gl[1]=o/255,this.update(!0)}},blue:{get:function(){return this.b},set:function(o){o=Math.floor(Math.abs(o)),this.b=Math.min(o,255),this.gl[2]=o/255,this.update(!0)}},alpha:{get:function(){return this.a},set:function(o){o=Math.floor(Math.abs(o)),this.a=Math.min(o,255),this.gl[3]=o/255,this.update()}},h:{get:function(){return this._h},set:function(o){this._h=o,l(o,this._s,this._v,this)}},s:{get:function(){return this._s},set:function(o){this._s=o,l(this._h,o,this._v,this)}},v:{get:function(){return this._v},set:function(o){this._v=o,l(this._h,this._s,o,this)}}});g.exports=r},function(g,b,t){var h=new(t(0))({initialize:function(n,s,l){this.x=0,this.y=0,this.z=0,"object"==typeof n?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=s||0,this.z=l||0)},up:function(){return this.x=0,this.y=1,this.z=0,this},min:function(n){return this.x=Math.min(this.x,n.x),this.y=Math.min(this.y,n.y),this.z=Math.min(this.z,n.z),this},max:function(n){return this.x=Math.max(this.x,n.x),this.y=Math.max(this.y,n.y),this.z=Math.max(this.z,n.z),this},clone:function(){return new h(this.x,this.y,this.z)},addVectors:function(n,s){return this.x=n.x+s.x,this.y=n.y+s.y,this.z=n.z+s.z,this},crossVectors:function(n,s){var l=n.x,e=n.y,r=n.z,o=s.x,a=s.y,i=s.z;return this.x=e*i-r*a,this.y=r*o-l*i,this.z=l*a-e*o,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this},set:function(n,s,l){return"object"==typeof n?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0):(this.x=n||0,this.y=s||0,this.z=l||0),this},setFromMatrixPosition:function(n){return this.fromArray(n.val,12)},setFromMatrixColumn:function(n,s){return this.fromArray(n.val,4*s)},fromArray:function(n,s){return void 0===s&&(s=0),this.x=n[s],this.y=n[s+1],this.z=n[s+2],this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this},addScalar:function(n){return this.x+=n,this.y+=n,this.z+=n,this},addScale:function(n,s){return this.x+=n.x*s,this.y+=n.y*s,this.z+=n.z*s||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this},scale:function(n){return isFinite(n)?(this.x*=n,this.y*=n,this.z*=n):(this.x=0,this.y=0,this.z=0),this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},distance:function(n){var s=n.x-this.x,l=n.y-this.y,e=n.z-this.z||0;return Math.sqrt(s*s+l*l+e*e)},distanceSq:function(n){var s=n.x-this.x,l=n.y-this.y,e=n.z-this.z||0;return s*s+l*l+e*e},length:function(){var n=this.x,s=this.y,l=this.z;return Math.sqrt(n*n+s*s+l*l)},lengthSq:function(){var n=this.x,s=this.y,l=this.z;return n*n+s*s+l*l},normalize:function(){var n=this.x,s=this.y,l=this.z,e=n*n+s*s+l*l;return 0<e&&(e=1/Math.sqrt(e),this.x=n*e,this.y=s*e,this.z=l*e),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z},cross:function(n){var s=this.x,l=this.y,e=this.z,r=n.x,o=n.y,a=n.z;return this.x=l*a-e*o,this.y=e*r-s*a,this.z=s*o-l*r,this},lerp:function(n,s){void 0===s&&(s=0);var l=this.x,e=this.y,r=this.z;return this.x=l+s*(n.x-l),this.y=e+s*(n.y-e),this.z=r+s*(n.z-r),this},applyMatrix3:function(n){var s=this.x,l=this.y,e=this.z,r=n.val;return this.x=r[0]*s+r[3]*l+r[6]*e,this.y=r[1]*s+r[4]*l+r[7]*e,this.z=r[2]*s+r[5]*l+r[8]*e,this},applyMatrix4:function(n){var s=this.x,l=this.y,e=this.z,r=n.val,o=1/(r[3]*s+r[7]*l+r[11]*e+r[15]);return this.x=(r[0]*s+r[4]*l+r[8]*e+r[12])*o,this.y=(r[1]*s+r[5]*l+r[9]*e+r[13])*o,this.z=(r[2]*s+r[6]*l+r[10]*e+r[14])*o,this},transformMat3:function(n){var s=this.x,l=this.y,e=this.z,r=n.val;return this.x=s*r[0]+l*r[3]+e*r[6],this.y=s*r[1]+l*r[4]+e*r[7],this.z=s*r[2]+l*r[5]+e*r[8],this},transformMat4:function(n){var s=this.x,l=this.y,e=this.z,r=n.val;return this.x=r[0]*s+r[4]*l+r[8]*e+r[12],this.y=r[1]*s+r[5]*l+r[9]*e+r[13],this.z=r[2]*s+r[6]*l+r[10]*e+r[14],this},transformCoordinates:function(n){var s=this.x,l=this.y,e=this.z,r=n.val,a=s*r[1]+l*r[5]+e*r[9]+r[13],i=s*r[2]+l*r[6]+e*r[10]+r[14],u=s*r[3]+l*r[7]+e*r[11]+r[15];return this.x=(s*r[0]+l*r[4]+e*r[8]+r[12])/u,this.y=a/u,this.z=i/u,this},transformQuat:function(n){var s=this.x,l=this.y,e=this.z,r=n.x,o=n.y,a=n.z,i=n.w,u=i*s+o*e-a*l,c=i*l+a*s-r*e,d=i*e+r*l-o*s,f=-r*s-o*l-a*e;return this.x=u*i+f*-r+c*-a-d*-o,this.y=c*i+f*-o+d*-r-u*-a,this.z=d*i+f*-a+u*-o-c*-r,this},project:function(n){var s=this.x,l=this.y,e=this.z,r=n.val,a=r[1],i=r[2],d=r[5],f=r[6],m=r[9],T=r[10],w=r[13],E=r[14],S=1/(s*r[3]+l*r[7]+e*r[11]+r[15]);return this.x=(s*r[0]+l*r[4]+e*r[8]+r[12])*S,this.y=(s*a+l*d+e*m+w)*S,this.z=(s*i+l*f+e*T+E)*S,this},projectViewMatrix:function(n,s){return this.applyMatrix4(n).applyMatrix4(s)},unprojectViewMatrix:function(n,s){return this.applyMatrix4(n).applyMatrix4(s)},unproject:function(n,s){var o=n.w,i=o-this.y-1-n.y,u=this.z;return this.x=2*(this.x-n.x)/n.z-1,this.y=2*i/o-1,this.z=2*u-1,this.project(s)},reset:function(){return this.x=0,this.y=0,this.z=0,this}});h.ZERO=new h,h.RIGHT=new h(1,0,0),h.LEFT=new h(-1,0,0),h.UP=new h(0,-1,0),h.DOWN=new h(0,1,0),h.FORWARD=new h(0,0,1),h.BACK=new h(0,0,-1),h.ONE=new h(1,1,1),g.exports=h},function(g,b){g.exports={CSV:0,TILED_JSON:1,ARRAY_2D:2,WELTMEISTER:3}},function(g,b,t){var h={};g.exports=h;var n=t(64),s=t(83),l=t(165),e=t(32),r=t(84),o=t(271);!function(){h._inertiaScale=4,h._nextCollidingGroupId=1,h._nextNonCollidingGroupId=-1,h._nextCategory=1,h.create=function(i){var u={id:e.nextId(),type:"body",label:"Body",parts:[],plugin:{},angle:0,vertices:null,position:{x:0,y:0},force:{x:0,y:0},torque:0,positionImpulse:{x:0,y:0},previousPositionImpulse:{x:0,y:0},constraintImpulse:{x:0,y:0,angle:0},totalContacts:0,speed:0,angularSpeed:0,velocity:{x:0,y:0},angularVelocity:0,isSensor:!1,isStatic:!1,isSleeping:!1,motion:0,sleepThreshold:60,density:.001,restitution:0,friction:.1,frictionStatic:.5,frictionAir:.01,collisionFilter:{category:1,mask:4294967295,group:0},slop:.05,timeScale:1,events:null,bounds:null,chamfer:null,circleRadius:0,positionPrev:null,anglePrev:0,parent:null,axes:null,area:0,mass:0,inverseMass:0,inertia:0,inverseInertia:0,_original:null,render:{visible:!0,opacity:1,sprite:{xOffset:0,yOffset:0},fillColor:null,fillOpacity:null,lineColor:null,lineOpacity:null,lineThickness:null},gameObject:null,scale:{x:1,y:1},centerOfMass:{x:0,y:0},centerOffset:{x:0,y:0},gravityScale:{x:1,y:1},ignoreGravity:!1,ignorePointer:!1,onCollideCallback:null,onCollideEndCallback:null,onCollideActiveCallback:null,onCollideWith:{}};!i.hasOwnProperty("position")&&i.hasOwnProperty("vertices")?i.position=n.centre(i.vertices):i.hasOwnProperty("vertices")||(u.vertices=n.fromPath("L 0 0 L 40 0 L 40 40 L 0 40"));var c=e.extend(u,i);return a(c,i),c.setOnCollideWith=function(d,f){return f?this.onCollideWith[d.id]=f:delete this.onCollideWith[d.id],this},c},h.nextGroup=function(i){return i?h._nextNonCollidingGroupId--:h._nextCollidingGroupId++},h.nextCategory=function(){return h._nextCategory=h._nextCategory<<1,h._nextCategory};var a=function(i,u){u=u||{},h.set(i,{bounds:i.bounds||r.create(i.vertices),positionPrev:i.positionPrev||s.clone(i.position),anglePrev:i.anglePrev||i.angle,vertices:i.vertices,parts:i.parts||[i],isStatic:i.isStatic,isSleeping:i.isSleeping,parent:i.parent||i});var c,d,f,p,v=i.bounds;n.rotate(i.vertices,i.angle,i.position),o.rotate(i.axes,i.angle),r.update(v,i.vertices,i.velocity),h.set(i,{axes:u.axes||i.axes,area:u.area||i.area,mass:u.mass||i.mass,inertia:u.inertia||i.inertia}),1===i.parts.length&&(d=i.centerOffset,p=v.max.y-v.min.y,(c=i.centerOfMass).x=-(v.min.x-i.position.x)/(f=v.max.x-v.min.x),c.y=-(v.min.y-i.position.y)/p,d.x=f*c.x,d.y=p*c.y)};h.set=function(i,u,c){var d;for(d in"string"==typeof u&&(d=u,(u={})[d]=c),u)if(Object.prototype.hasOwnProperty.call(u,d))switch(c=u[d],d){case"isStatic":h.setStatic(i,c);break;case"isSleeping":l.set(i,c);break;case"mass":h.setMass(i,c);break;case"density":h.setDensity(i,c);break;case"inertia":h.setInertia(i,c);break;case"vertices":h.setVertices(i,c);break;case"position":h.setPosition(i,c);break;case"angle":h.setAngle(i,c);break;case"velocity":h.setVelocity(i,c);break;case"angularVelocity":h.setAngularVelocity(i,c);break;case"parts":h.setParts(i,c);break;case"centre":h.setCentre(i,c);break;default:i[d]=c}},h.setStatic=function(i,u){for(var c=0;c<i.parts.length;c++){var d=i.parts[c];(d.isStatic=u)?(d._original={restitution:d.restitution,friction:d.friction,mass:d.mass,inertia:d.inertia,density:d.density,inverseMass:d.inverseMass,inverseInertia:d.inverseInertia},d.restitution=0,d.friction=1,d.mass=d.inertia=d.density=1/0,d.inverseMass=d.inverseInertia=0,d.positionPrev.x=d.position.x,d.positionPrev.y=d.position.y,d.anglePrev=d.angle,d.angularVelocity=0,d.speed=0,d.angularSpeed=0,d.motion=0):d._original&&(d.restitution=d._original.restitution,d.friction=d._original.friction,d.mass=d._original.mass,d.inertia=d._original.inertia,d.density=d._original.density,d.inverseMass=d._original.inverseMass,d.inverseInertia=d._original.inverseInertia,d._original=null)}},h.setMass=function(i,u){i.inertia=u/6*(i.inertia/(i.mass/6)),i.inverseInertia=1/i.inertia,i.mass=u,i.inverseMass=1/i.mass,i.density=i.mass/i.area},h.setDensity=function(i,u){h.setMass(i,u*i.area),i.density=u},h.setInertia=function(i,u){i.inertia=u,i.inverseInertia=1/i.inertia},h.setVertices=function(i,u){i.vertices=u[0].body===i?u:n.create(u,i),i.axes=o.fromVertices(i.vertices),i.area=n.area(i.vertices),h.setMass(i,i.density*i.area);var c=n.centre(i.vertices);n.translate(i.vertices,c,-1),h.setInertia(i,h._inertiaScale*n.inertia(i.vertices,i.mass)),n.translate(i.vertices,i.position),r.update(i.bounds,i.vertices,i.velocity)},h.setParts=function(i,u,c){for(u=u.slice(0),i.parts.length=0,i.parts.push(i),i.parent=i,p=0;p<u.length;p++){var d=u[p];d!==i&&(d.parent=i).parts.push(d)}if(1!==i.parts.length){if(c=void 0===c||c){for(var f=[],p=0;p<u.length;p++)f=f.concat(u[p].vertices);n.clockwiseSort(f);var v=n.hull(f),m=n.centre(v);h.setVertices(i,v),n.translate(i.vertices,m)}var T=h._totalProperties(i),y=T.centre.x,x=T.centre.y,w=i.bounds,E=i.centerOfMass,S=i.centerOffset;r.update(w,i.vertices,i.velocity),E.x=-(w.min.x-y)/(w.max.x-w.min.x),E.y=-(w.min.y-x)/(w.max.y-w.min.y),S.x=y,S.y=x,i.area=T.area,(i.parent=i).position.x=y,i.position.y=x,i.positionPrev.x=y,i.positionPrev.y=x,h.setMass(i,T.mass),h.setInertia(i,T.inertia),h.setPosition(i,T.centre)}},h.setCentre=function(i,u,c){c?(i.positionPrev.x+=u.x,i.positionPrev.y+=u.y,i.position.x+=u.x,i.position.y+=u.y):(i.positionPrev.x=u.x-(i.position.x-i.positionPrev.x),i.positionPrev.y=u.y-(i.position.y-i.positionPrev.y),i.position.x=u.x,i.position.y=u.y)},h.setPosition=function(i,u){var c=s.sub(u,i.position);i.positionPrev.x+=c.x,i.positionPrev.y+=c.y;for(var d=0;d<i.parts.length;d++){var f=i.parts[d];f.position.x+=c.x,f.position.y+=c.y,n.translate(f.vertices,c),r.update(f.bounds,f.vertices,i.velocity)}},h.setAngle=function(i,u){var c=u-i.angle;i.anglePrev+=c;for(var d=0;d<i.parts.length;d++){var f=i.parts[d];f.angle+=c,n.rotate(f.vertices,c,i.position),o.rotate(f.axes,c),r.update(f.bounds,f.vertices,i.velocity),0<d&&s.rotateAbout(f.position,c,i.position,f.position)}},h.setVelocity=function(i,u){i.positionPrev.x=i.position.x-u.x,i.positionPrev.y=i.position.y-u.y,i.velocity.x=u.x,i.velocity.y=u.y,i.speed=s.magnitude(i.velocity)},h.setAngularVelocity=function(i,u){i.anglePrev=i.angle-u,i.angularVelocity=u,i.angularSpeed=Math.abs(i.angularVelocity)},h.translate=function(i,u){h.setPosition(i,s.add(i.position,u))},h.rotate=function(i,u,c){var d,f,p,v;c&&(d=Math.cos(u),f=Math.sin(u),h.setPosition(i,{x:c.x+((p=i.position.x-c.x)*d-(v=i.position.y-c.y)*f),y:c.y+(p*f+v*d)})),h.setAngle(i,i.angle+u)},h.scale=function(i,u,c,d){var f=0,p=0;d=d||i.position;for(var v=0;v<i.parts.length;v++){var m=i.parts[v];m.scale.x=u,m.scale.y=c,n.scale(m.vertices,u,c,d),m.axes=o.fromVertices(m.vertices),m.area=n.area(m.vertices),h.setMass(m,i.density*m.area),n.translate(m.vertices,{x:-m.position.x,y:-m.position.y}),h.setInertia(m,h._inertiaScale*n.inertia(m.vertices,m.mass)),n.translate(m.vertices,{x:m.position.x,y:m.position.y}),0<v&&(f+=m.area,p+=m.inertia),m.position.x=d.x+(m.position.x-d.x)*u,m.position.y=d.y+(m.position.y-d.y)*c,r.update(m.bounds,m.vertices,i.velocity)}1<i.parts.length&&(i.area=f,i.isStatic||(h.setMass(i,i.density*f),h.setInertia(i,p))),i.circleRadius&&(u===c?i.circleRadius*=u:i.circleRadius=null)},h.update=function(i,u,c,d){var f=Math.pow(u*c*i.timeScale,2),p=1-i.frictionAir*c*i.timeScale,m=i.position.y-i.positionPrev.y;i.velocity.x=(i.position.x-i.positionPrev.x)*p*d+i.force.x/i.mass*f,i.velocity.y=m*p*d+i.force.y/i.mass*f,i.positionPrev.x=i.position.x,i.positionPrev.y=i.position.y,i.position.x+=i.velocity.x,i.position.y+=i.velocity.y,i.angularVelocity=(i.angle-i.anglePrev)*p*d+i.torque/i.inertia*f,i.anglePrev=i.angle,i.angle+=i.angularVelocity,i.speed=s.magnitude(i.velocity),i.angularSpeed=Math.abs(i.angularVelocity);for(var T=0;T<i.parts.length;T++){var y=i.parts[T];n.translate(y.vertices,i.velocity),0<T&&(y.position.x+=i.velocity.x,y.position.y+=i.velocity.y),0!==i.angularVelocity&&(n.rotate(y.vertices,i.angularVelocity,i.position),o.rotate(y.axes,i.angularVelocity),0<T&&s.rotateAbout(y.position,i.angularVelocity,i.position,y.position)),r.update(y.bounds,y.vertices,i.velocity)}},h.applyForce=function(i,u,c){i.force.x+=c.x,i.force.y+=c.y,i.torque+=(u.x-i.position.x)*c.y-(u.y-i.position.y)*c.x},h._totalProperties=function(i){for(var u={mass:0,area:0,inertia:0,centre:{x:0,y:0}},c=1===i.parts.length?0:1;c<i.parts.length;c++){var d=i.parts[c],f=d.mass!==1/0?d.mass:1;u.mass+=f,u.area+=d.area,u.inertia+=d.inertia,u.centre=s.add(u.centre,s.mult(d.position,f))}return u.centre=s.div(u.centre,u.mass),u}}()},function(g,b){g.exports=function(t){return t.y+t.height-t.height*t.originY}},function(g,b){g.exports=function(t){return t.x-t.width*t.originX}},function(g,b){g.exports=function(t){return t.x+t.width-t.width*t.originX}},function(g,b){g.exports=function(t){return t.y-t.height*t.originY}},function(g,b){g.exports=function(t,h,n,s,l,e){var r;void 0===s&&(s=0),void 0===l&&(l=0),void 0===e&&(e=1);var o=0,a=t.length;if(1===e)for(r=l;r<a;r++)t[r][h]+=n+o*s,o++;else for(r=l;0<=r;r--)t[r][h]+=n+o*s,o++;return t}},function(g,b,t){var h=t(0),n=t(307),s=t(172),l=t(56),e=t(173),r=t(3),o=new h({initialize:function(a,i,u,c){void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=0),void 0===c&&(c=0),this.type=l.LINE,this.x1=a,this.y1=i,this.x2=u,this.y2=c},getPoint:function(a,i){return n(this,a,i)},getPoints:function(a,i,u){return s(this,a,i,u)},getRandomPoint:function(a){return e(this,a)},setTo:function(a,i,u,c){return void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=0),void 0===c&&(c=0),this.x1=a,this.y1=i,this.x2=u,this.y2=c,this},getPointA:function(a){return void 0===a&&(a=new r),a.set(this.x1,this.y1),a},getPointB:function(a){return void 0===a&&(a=new r),a.set(this.x2,this.y2),a},left:{get:function(){return Math.min(this.x1,this.x2)},set:function(a){this.x1<=this.x2?this.x1=a:this.x2=a}},right:{get:function(){return Math.max(this.x1,this.x2)},set:function(a){this.x1>this.x2?this.x1=a:this.x2=a}},top:{get:function(){return Math.min(this.y1,this.y2)},set:function(a){this.y1<=this.y2?this.y1=a:this.y2=a}},bottom:{get:function(){return Math.max(this.y1,this.y2)},set:function(a){this.y1>this.y2?this.y1=a:this.y2=a}}});g.exports=o},function(g,b){g.exports=function(t,h,n,s){var l=n||h.fillColor;t.fillStyle="rgba("+((16711680&l)>>>16)+","+((65280&l)>>>8)+","+(255&l)+","+(s||h.fillAlpha)+")"}},function(g,b,t){var h=new(t(0))({initialize:function(n,s,l,e){var r=[];e.forEach(function(a){a&&r.push(a)}),this.loader=n,this.type=s,this.key=l,this.multiKeyIndex=n.multiKeyIndex++,this.files=r,this.complete=!1,this.pending=r.length,this.failed=0,this.config={},this.baseURL=n.baseURL,this.path=n.path,this.prefix=n.prefix;for(var o=0;o<r.length;o++)r[o].multiFile=this},isReadyToProcess:function(){return 0===this.pending&&0===this.failed&&!this.complete},addToMultiFile:function(n){return this.files.push(n),(n.multiFile=this).pending++,this.complete=!1,this},onFileComplete:function(n){-1!==this.files.indexOf(n)&&this.pending--},onFileFailed:function(n){-1!==this.files.indexOf(n)&&this.failed++}});g.exports=h},function(g,b){g.exports=function(t,h,n,s){var l=t-n,e=h-s;return Math.sqrt(l*l+e*e)}},function(g,b,t){g.exports={BOOT:t(922),DESTROY:t(923),DRAG_END:t(924),DRAG_ENTER:t(925),DRAG:t(926),DRAG_LEAVE:t(927),DRAG_OVER:t(928),DRAG_START:t(929),DROP:t(930),GAME_OUT:t(931),GAME_OVER:t(932),GAMEOBJECT_DOWN:t(933),GAMEOBJECT_DRAG_END:t(934),GAMEOBJECT_DRAG_ENTER:t(935),GAMEOBJECT_DRAG:t(936),GAMEOBJECT_DRAG_LEAVE:t(937),GAMEOBJECT_DRAG_OVER:t(938),GAMEOBJECT_DRAG_START:t(939),GAMEOBJECT_DROP:t(940),GAMEOBJECT_MOVE:t(941),GAMEOBJECT_OUT:t(942),GAMEOBJECT_OVER:t(943),GAMEOBJECT_POINTER_DOWN:t(944),GAMEOBJECT_POINTER_MOVE:t(945),GAMEOBJECT_POINTER_OUT:t(946),GAMEOBJECT_POINTER_OVER:t(947),GAMEOBJECT_POINTER_UP:t(948),GAMEOBJECT_POINTER_WHEEL:t(949),GAMEOBJECT_UP:t(950),GAMEOBJECT_WHEEL:t(951),MANAGER_BOOT:t(952),MANAGER_PROCESS:t(953),MANAGER_UPDATE:t(954),POINTER_DOWN:t(955),POINTER_DOWN_OUTSIDE:t(956),POINTER_MOVE:t(957),POINTER_OUT:t(958),POINTER_OVER:t(959),POINTER_UP:t(960),POINTER_UP_OUTSIDE:t(961),POINTER_WHEEL:t(962),POINTERLOCK_CHANGE:t(963),PRE_UPDATE:t(964),SHUTDOWN:t(965),START:t(966),UPDATE:t(967)}},function(g,b){g.exports=function(t,h){return t.y=h+t.height*t.originY,t}},function(g,b){g.exports=function(t,h){return t.x=h+t.width*t.originX,t}},function(g,b){g.exports=function(t,h){return t.x=h-t.width+t.width*t.originX,t}},function(g,b){g.exports=function(t,h){return t.y=h-t.height+t.height*t.originY,t}},function(g,b){g.exports={CIRCLE:0,ELLIPSE:1,LINE:2,POINT:3,POLYGON:4,RECTANGLE:5,TRIANGLE:6}},function(g,b){g.exports=function(t,h,n){return!(t.width<=0||t.height<=0)&&t.x<=h&&t.x+t.width>=h&&t.y<=n&&t.y+t.height>=n}},function(g,b,t){var h=t(0),n=t(175),s=t(9),l=t(374),e=t(2),r=t(69),o=t(91),a=t(141),i=t(12),u=t(375),c=new h({Extends:s,initialize:function(d){s.call(this);var f=d.game,p=f.renderer,v=p.gl;this.name=e(d,"name","WebGLPipeline"),this.game=f,this.renderer=p,this.gl=v,this.view=f.canvas,this.width=0,this.height=0,this.vertexCount=0,this.vertexCapacity=0,this.topology=e(d,"topology",v.TRIANGLES),this.active=!0,this.currentUnit=0,this.forceZero=e(d,"forceZero",!1),this.hasBooted=!1,this.isPostFX=!1,this.renderTargets=[],this.shaders=[],this.projectionWidth=0,this.projectionHeight=0,this.config=d,this.glReset=!1},boot:function(){var d=this.gl,f=this.config,p=this.renderer;this.isPostFX||(this.projectionMatrix=(new r).identity());var v=this.renderTargets,m=e(f,"renderTarget",!1);"boolean"==typeof m&&m&&(m=1);var T=p.width,y=p.height;if("number"==typeof m)for(_=0;_<m;_++)v.push(new a(p,T,y,1,0,!0));else if(Array.isArray(m))for(_=0;_<m.length;_++){var x=e(m[_],"scale",1),w=e(m[_],"minFilter",0),E=e(m[_],"autoClear",1);v.push(new a(p,T,y,x,w,E))}v.length&&(this.currentRenderTarget=v[0]),this.setShadersFromConfig(f);for(var S=this.shaders,A=0,_=0;_<S.length;_++)S[_].vertexSize>A&&(A=S[_].vertexSize);var C=e(f,"batchSize",p.config.batchSize);this.vertexCapacity=6*C;var M=new ArrayBuffer(this.vertexCapacity*A);this.vertexData=M,this.bytes=new Uint8Array(M),this.vertexViewF32=new Float32Array(M),this.vertexViewU32=new Uint32Array(M);var P=e(f,"vertices",null);for(P?(this.vertexViewF32.set(P),this.vertexBuffer=p.createVertexBuffer(M,d.STATIC_DRAW)):this.vertexBuffer=p.createVertexBuffer(M.byteLength,d.DYNAMIC_DRAW),this.setVertexBuffer(),_=S.length-1;0<=_;_--)S[_].rebind();this.hasBooted=!0,p.on(o.RESIZE,this.resize,this),p.on(o.PRE_RENDER,this.onPreRender,this),p.on(o.RENDER,this.onRender,this),p.on(o.POST_RENDER,this.onPostRender,this),this.emit(l.BOOT,this),this.onBoot()},onBoot:function(){},onResize:function(){},setShader:function(d,f){var p=this.renderer;return d===this.currentShader&&p.currentProgram===this.currentShader.program||(this.flush(),p.resetTextures(),this.setVertexBuffer()&&!f&&(f=!0),d.bind(f,!1),this.currentShader=d),this},getShaderByName:function(d){for(var f=this.shaders,p=0;p<f.length;p++)if(f[p].name===d)return f[p]},setShadersFromConfig:function(d){var f=this.shaders,p=this.renderer;for(_=0;_<f.length;_++)f[_].destroy();var v="vertShader",m="fragShader",T="attributes",y=e(d,v,null),x=i.parseFragmentShaderMaxTextures(e(d,m,null),p.maxTextures),w=e(d,T,null),E=e(d,"shaders",[]),S=E.length;if(0===S)y&&x&&(this.shaders=[new u(this,"default",y,x,n(w))]);else{for(var A=[],_=0;_<S;_++){var C=E[_],M=e(C,"name","default"),P=e(C,v,y),L=i.parseFragmentShaderMaxTextures(e(C,m,x),p.maxTextures),D=e(C,T,w);P&&L&&A.push(new u(this,M,P,L,n(D)))}this.shaders=A}return 0===this.shaders.length?console.warn("Pipeline: "+this.name+" - Invalid shader config"):this.currentShader=this.shaders[0],this},setGameObject:function(d,f){return void 0===f&&(f=d.frame),this.currentUnit=this.renderer.setTextureSource(f.source),this.currentUnit},shouldFlush:function(d){return void 0===d&&(d=0),this.vertexCount+d>this.vertexCapacity},resize:function(d,f){d===this.width&&f===this.height||this.flush(),this.width=d,this.height=f;for(var p=this.renderTargets,v=0;v<p.length;v++)p[v].resize(d,f);return this.setProjectionMatrix(d,f),this.emit(l.RESIZE,d,f,this),this.onResize(d,f),this},setProjectionMatrix:function(d,f){var p=this.projectionMatrix;if(!p)return this;this.projectionWidth=d,this.projectionHeight=f,p.ortho(0,d,f,0,-1e3,1e3);for(var v=this.shaders,m="uProjectionMatrix",T=0;T<v.length;T++){var y=v[T];y.hasUniform(m)&&(y.resetUniform(m),y.setMatrix4fv(m,!1,p.val,y))}return this},updateProjectionMatrix:function(){var d,f;this.projectionMatrix&&(f=this.renderer.projectionHeight,this.projectionWidth===(d=this.renderer.projectionWidth)&&this.projectionHeight===f||this.setProjectionMatrix(d,f))},bind:function(d){if(void 0===d&&(d=this.currentShader),this.glReset)return this.rebind(d);var f=this.setVertexBuffer();return d.bind(f),this.currentShader=d,this.emit(l.BIND,this,d),this.onActive(d),this},rebind:function(d){this.setVertexBuffer();for(var f=this.shaders,p=f.length-1;0<=p;p--){var v=f[p].rebind();d&&v!==d||(this.currentShader=v)}return this.emit(l.REBIND,this.currentShader),this.onActive(this.currentShader),this.onRebind(),this.glReset=!1,this},setVertexBuffer:function(){var d=this.gl,f=this.vertexBuffer;return d.getParameter(d.ARRAY_BUFFER_BINDING)!==f&&(d.bindBuffer(d.ARRAY_BUFFER,f),!0)},preBatch:function(d){return this.currentRenderTarget&&this.currentRenderTarget.bind(),this.onPreBatch(d),this},postBatch:function(d){return this.onDraw(this.currentRenderTarget),this.onPostBatch(d),this},onDraw:function(){},unbind:function(){this.currentRenderTarget&&this.currentRenderTarget.unbind()},flush:function(d){var f,p,v;return void 0===d&&(d=!1),0<this.vertexCount&&(this.emit(l.BEFORE_FLUSH,this,d),this.onBeforeFlush(d),f=this.gl,p=this.vertexCount,v=this.currentShader.vertexSize,this.active&&(this.setVertexBuffer(),p===this.vertexCapacity?f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.DYNAMIC_DRAW):f.bufferSubData(f.ARRAY_BUFFER,0,this.bytes.subarray(0,p*v)),f.drawArrays(this.topology,0,p)),this.vertexCount=0,this.emit(l.AFTER_FLUSH,this,d),this.onAfterFlush(d)),this},onActive:function(){},onBind:function(){},onRebind:function(){},onBatch:function(){},onPreBatch:function(){},onPostBatch:function(){},onPreRender:function(){},onRender:function(){},onPostRender:function(){},onBeforeFlush:function(){},onAfterFlush:function(){},batchVert:function(d,f,p,v,m,T,y){var x=this.vertexViewF32,w=this.vertexViewU32,E=this.vertexCount*this.currentShader.vertexComponentCount-1;x[++E]=d,x[++E]=f,x[++E]=p,x[++E]=v,x[++E]=m,x[++E]=T,w[++E]=y,this.vertexCount++},batchQuad:function(d,f,p,v,m,T,y,x,w,E,S,A,_,C,M,P,L,D,F,X){void 0===X&&(X=this.currentUnit);var R=!1;return this.shouldFlush(6)&&(this.flush(),R=!0,X=this.setTexture2D(F)),this.batchVert(f,p,E,S,X,D,C),this.batchVert(v,m,E,_,X,D,P),this.batchVert(T,y,A,_,X,D,L),this.batchVert(f,p,E,S,X,D,C),this.batchVert(T,y,A,_,X,D,L),this.batchVert(x,w,A,S,X,D,M),this.onBatch(d),R},batchTri:function(d,f,p,v,m,T,y,x,w,E,S,A,_,C,M,P,L){void 0===L&&(L=this.currentUnit);var D=!1;return this.shouldFlush(3)&&(this.flush(),D=!0,L=this.setTexture2D(P)),this.batchVert(f,p,x,w,L,M,A),this.batchVert(v,m,x,S,L,M,_),this.batchVert(T,y,E,S,L,M,C),this.onBatch(d),D},drawFillRect:function(d,f,p,v,m,T,y,x){void 0===y&&(y=this.renderer.whiteTexture.glTexture),void 0===x&&(x=!0),d=Math.floor(d),f=Math.floor(f);var w=Math.floor(d+p),E=Math.floor(f+v),S=this.setTexture2D(y),A=i.getTintAppendFloatAlphaAndSwap(m,T),_=0,C=1;x&&(_=1,C=0),this.batchQuad(null,d,f,d,E,w,E,w,f,0,_,1,C,A,A,A,A,0,y,S)},setTexture2D:function(d){return void 0===d&&(d=this.renderer.whiteTexture.glTexture),this.currentUnit=this.renderer.setTexture2D(d),this.currentUnit},bindTexture:function(d,f){void 0===f&&(f=0);var p=this.gl;return p.activeTexture(p.TEXTURE0+f),p.bindTexture(p.TEXTURE_2D,d),this},bindRenderTarget:function(d,f){return this.bindTexture(d.texture,f)},setTime:function(d){return this.set1f(d,this.game.loop.getDuration()),this},set1f:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set1f(d,f),this},set2f:function(d,f,p,v){return void 0===v&&(v=this.currentShader),v.set2f(d,f,p),this},set3f:function(d,f,p,v,m){return void 0===m&&(m=this.currentShader),m.set3f(d,f,p,v),this},set4f:function(d,f,p,v,m,T){return void 0===T&&(T=this.currentShader),T.set4f(d,f,p,v,m),this},set1fv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set1fv(d,f),this},set2fv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set2fv(d,f),this},set3fv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set3fv(d,f),this},set4fv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set4fv(d,f),this},set1iv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set1iv(d,f),this},set2iv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set2iv(d,f),this},set3iv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set3iv(d,f),this},set4iv:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set4iv(d,f),this},set1i:function(d,f,p){return void 0===p&&(p=this.currentShader),p.set1i(d,f),this},set2i:function(d,f,p,v){return void 0===v&&(v=this.currentShader),v.set2i(d,f,p),this},set3i:function(d,f,p,v,m){return void 0===m&&(m=this.currentShader),m.set3i(d,f,p,v),this},set4i:function(d,f,p,v,m,T){return void 0===T&&(T=this.currentShader),T.set4i(d,f,p,v,m),this},setMatrix2fv:function(d,f,p,v){return void 0===v&&(v=this.currentShader),v.setMatrix2fv(d,f,p),this},setMatrix3fv:function(d,f,p,v){return void 0===v&&(v=this.currentShader),v.setMatrix3fv(d,f,p),this},setMatrix4fv:function(d,f,p,v){return void 0===v&&(v=this.currentShader),v.setMatrix4fv(d,f,p),this},destroy:function(){this.emit(l.DESTROY,this);for(var d=this.shaders,f=0;f<d.length;f++)d[f].destroy();var p=this.renderTargets;for(f=0;f<p.length;f++)p[f].destroy();this.gl.deleteBuffer(this.vertexBuffer);var v=this.renderer;return v.off(o.RESIZE,this.resize,this),v.off(o.PRE_RENDER,this.onPreRender,this),v.off(o.RENDER,this.onRender,this),v.off(o.POST_RENDER,this.onPostRender,this),this.removeAllListeners(),this.game=null,this.renderer=null,this.manager=null,this.gl=null,this.view=null,this.shaders=null,this.renderTargets=null,this.bytes=null,this.vertexViewF32=null,this.vertexViewU32=null,this.vertexData=null,this.vertexBuffer=null,this.currentShader=null,this.currentRenderTarget=null,this}});g.exports=c},function(g,b,t){"use strict";function h(x,w,E){E=E||2;var S,A,_,C,M,P,L,D=w&&w.length,F=D?w[0]*E:x.length,X=n(x,0,F,E,!0),R=[];if(!X||X.next===X.prev)return R;if(D&&(X=function(N,k,I,B){var Y,U,z,H,j,q,V=[];for(Y=0,U=k.length;Y<U;Y++)(z=n(N,k[Y]*B,Y<U-1?k[Y+1]*B:N.length,B,!1))===z.next&&(z.steiner=!0),V.push(function(H){for(var j=H,q=H;(j.x<q.x||j.x===q.x&&j.y<q.y)&&(q=j),(j=j.next)!==H;);return q}(z));for(V.sort(e),Y=0;Y<V.length;Y++)q=void 0,(j=function(Q,Z){var J,K=Z,tt=Q.x,et=Q.y,st=-1/0;do{if(et<=K.y&&et>=K.next.y&&K.next.y!==K.y){var it=K.x+(et-K.y)*(K.next.x-K.x)/(K.next.y-K.y);if(it<=tt&&st<it){if((st=it)===tt){if(et===K.y)return K;if(et===K.next.y)return K.next}J=K.x<K.next.x?K:K.next}}K=K.next}while(K!==Z);if(!J)return null;if(tt===st)return J;var $,lt,rt,at=J,nt=J.x,ht=J.y,ot=1/0;for(K=J;tt>=K.x&&K.x>=nt&&tt!==K.x&&o(et<ht?tt:st,et,nt,ht,et<ht?st:tt,et,K.x,K.y)&&($=Math.abs(et-K.y)/(tt-K.x),f(K,Q)&&($<ot||$===ot&&(K.x>J.x||K.x===J.x&&a((lt=J).prev,lt,(rt=K).prev)<0&&a(rt.next,lt,lt.next)<0))&&(J=K,ot=$)),(K=K.next)!==at;);return J}(H=V[Y],j=I))&&(q=p(j,H),s(j,j.next),s(q,q.next)),I=s(I,I.next);return I}(x,w,X,E)),x.length>80*E){S=_=x[0],A=C=x[1];for(var O=E;O<F;O+=E)(M=x[O])<S&&(S=M),(P=x[O+1])<A&&(A=P),_<M&&(_=M),C<P&&(C=P);L=0!==(L=Math.max(_-S,C-A))?1/L:0}return l(X,R,E,S,A,L),R}function n(x,w,E,S,A){var _,C;if(A===0<y(x,w,E,S))for(_=w;_<E;_+=S)C=v(_,x[_],x[_+1],C);else for(_=E-S;w<=_;_-=S)C=v(_,x[_],x[_+1],C);return C&&i(C,C.next)&&(m(C),C=C.next),C}function s(x,w){if(!x)return x;w=w||x;var E,S=x;do{if(E=!1,S.steiner||!i(S,S.next)&&0!==a(S.prev,S,S.next))S=S.next;else{if(m(S),(S=w=S.prev)===S.next)break;E=!0}}while(E||S!==w);return w}function l(x,w,E,S,A,_,C){if(x){!C&&_&&function(D,F,X,R){for(var O=D;null===O.z&&(O.z=r(O.x,O.y,F,X,R)),O.prevZ=O.prev,O.nextZ=O.next,(O=O.next)!==D;);O.prevZ.nextZ=null,O.prevZ=null,function(N){var k,I,B,Y,U,G,W,z,V=1;do{for(I=N,U=N=null,G=0;I;){for(G++,B=I,k=W=0;k<V&&(W++,B=B.nextZ);k++);for(z=V;0<W||0<z&&B;)0!==W&&(0===z||!B||I.z<=B.z)?(I=(Y=I).nextZ,W--):(B=(Y=B).nextZ,z--),U?U.nextZ=Y:N=Y,Y.prevZ=U,U=Y;I=B}U.nextZ=null,V*=2}while(1<G)}(O)}(x,S,A,_);for(var M,P,L=x;x.prev!==x.next;)if(M=x.prev,P=x.next,_?function(D,F,X,R){var O=D.prev,N=D,k=D.next;if(0<=a(O,N,k))return!1;for(var Y=O.x>N.x?O.x>k.x?O.x:k.x:N.x>k.x?N.x:k.x,U=O.y>N.y?O.y>k.y?O.y:k.y:N.y>k.y?N.y:k.y,G=r(O.x<N.x?O.x<k.x?O.x:k.x:N.x<k.x?N.x:k.x,O.y<N.y?O.y<k.y?O.y:k.y:N.y<k.y?N.y:k.y,F,X,R),W=r(Y,U,F,X,R),z=D.prevZ,V=D.nextZ;z&&z.z>=G&&V&&V.z<=W;){if(z!==D.prev&&z!==D.next&&o(O.x,O.y,N.x,N.y,k.x,k.y,z.x,z.y)&&0<=a(z.prev,z,z.next)||(z=z.prevZ,V!==D.prev&&V!==D.next&&o(O.x,O.y,N.x,N.y,k.x,k.y,V.x,V.y)&&0<=a(V.prev,V,V.next)))return!1;V=V.nextZ}for(;z&&z.z>=G;){if(z!==D.prev&&z!==D.next&&o(O.x,O.y,N.x,N.y,k.x,k.y,z.x,z.y)&&0<=a(z.prev,z,z.next))return!1;z=z.prevZ}for(;V&&V.z<=W;){if(V!==D.prev&&V!==D.next&&o(O.x,O.y,N.x,N.y,k.x,k.y,V.x,V.y)&&0<=a(V.prev,V,V.next))return!1;V=V.nextZ}return!0}(x,S,A,_):function(D){var F=D.prev,X=D,R=D.next;if(0<=a(F,X,R))return!1;for(var O=D.next.next;O!==D.prev;){if(o(F.x,F.y,X.x,X.y,R.x,R.y,O.x,O.y)&&0<=a(O.prev,O,O.next))return!1;O=O.next}return!0}(x))w.push(M.i/E),w.push(x.i/E),w.push(P.i/E),m(x),x=P.next,L=P.next;else if((x=P)===L){C?1===C?l(x=function(D,F,X){var R=D;do{var O=R.prev,N=R.next.next;!i(O,N)&&u(O,R,R.next,N)&&f(O,N)&&f(N,O)&&(F.push(O.i/X),F.push(R.i/X),F.push(N.i/X),m(R),m(R.next),R=D=N),R=R.next}while(R!==D);return s(R)}(s(x),w,E),w,E,S,A,_,2):2===C&&function(D,F,X,R,O,N){var Y,U,k=D;do{for(var I=k.next.next;I!==k.prev;){if(k.i!==I.i&&(Y=k).next.i!==(U=I).i&&Y.prev.i!==U.i&&!function(G,W){var z=G;do{if(z.i!==G.i&&z.next.i!==G.i&&z.i!==W.i&&z.next.i!==W.i&&u(z,z.next,G,W))return!0;z=z.next}while(z!==G);return!1}(Y,U)&&(f(Y,U)&&f(U,Y)&&function(G,W){for(var z=G,V=!1,H=(G.x+W.x)/2,j=(G.y+W.y)/2;z.y>j!=z.next.y>j&&z.next.y!==z.y&&H<(z.next.x-z.x)*(j-z.y)/(z.next.y-z.y)+z.x&&(V=!V),(z=z.next)!==G;);return V}(Y,U)&&(a(Y.prev,Y,U.prev)||a(Y,U.prev,U))||i(Y,U)&&0<a(Y.prev,Y,Y.next)&&0<a(U.prev,U,U.next))){var B=p(k,I);return k=s(k,k.next),B=s(B,B.next),l(k,F,X,R,O,N),l(B,F,X,R,O,N)}I=I.next}k=k.next}while(k!==D)}(x,w,E,S,A,_):l(s(x),w,E,S,A,_,1);break}}}function e(x,w){return x.x-w.x}function r(x,w,E,S,A){return(x=1431655765&((x=858993459&((x=252645135&((x=16711935&((x=32767*(x-E)*A)|x<<8))|x<<4))|x<<2))|x<<1))|(w=1431655765&((w=858993459&((w=252645135&((w=16711935&((w=32767*(w-S)*A)|w<<8))|w<<4))|w<<2))|w<<1))<<1}function o(x,w,E,S,A,_,C,M){return 0<=(A-C)*(w-M)-(x-C)*(_-M)&&0<=(x-C)*(S-M)-(E-C)*(w-M)&&0<=(E-C)*(_-M)-(A-C)*(S-M)}function a(x,w,E){return(w.y-x.y)*(E.x-w.x)-(w.x-x.x)*(E.y-w.y)}function i(x,w){return x.x===w.x&&x.y===w.y}function u(x,w,E,S){var A=d(a(x,w,E)),_=d(a(x,w,S)),C=d(a(E,S,x)),M=d(a(E,S,w));return A!==_&&C!==M||0===A&&c(x,E,w)||0===_&&c(x,S,w)||0===C&&c(E,x,S)||!(0!==M||!c(E,w,S))}function c(x,w,E){return w.x<=Math.max(x.x,E.x)&&w.x>=Math.min(x.x,E.x)&&w.y<=Math.max(x.y,E.y)&&w.y>=Math.min(x.y,E.y)}function d(x){return 0<x?1:x<0?-1:0}function f(x,w){return a(x.prev,x,x.next)<0?0<=a(x,w,x.next)&&0<=a(x,x.prev,w):a(x,w,x.prev)<0||a(x,x.next,w)<0}function p(x,w){var E=new T(x.i,x.x,x.y),S=new T(w.i,w.x,w.y),A=x.next,_=w.prev;return(x.next=w).prev=x,(E.next=A).prev=E,(S.next=E).prev=S,(_.next=S).prev=_,S}function v(x,w,E,S){var A=new T(x,w,E);return S?(A.next=S.next,(A.prev=S).next.prev=A,S.next=A):(A.prev=A).next=A,A}function m(x){x.next.prev=x.prev,x.prev.next=x.next,x.prevZ&&(x.prevZ.nextZ=x.nextZ),x.nextZ&&(x.nextZ.prevZ=x.prevZ)}function T(x,w,E){this.i=x,this.x=w,this.y=E,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function y(x,w,E,S){for(var A=0,_=w,C=E-S;_<E;_+=S)A+=(x[C]-x[_])*(x[_+1]+x[C+1]),C=_;return A}h.deviation=function(x,w,E,S){var A=w&&w.length,C=Math.abs(y(x,0,A?w[0]*E:x.length,E));if(A)for(var M=0,P=w.length;M<P;M++)C-=Math.abs(y(x,w[M]*E,M<P-1?w[M+1]*E:x.length,E));var F=0;for(M=0;M<S.length;M+=3){var X=S[M]*E,R=S[M+1]*E,O=S[M+2]*E;F+=Math.abs((x[X]-x[O])*(x[1+R]-x[1+X])-(x[X]-x[R])*(x[1+O]-x[1+X]))}return 0===C&&0===F?0:Math.abs((F-C)/C)},h.flatten=function(x){for(var w=x[0][0].length,E={vertices:[],holes:[],dimensions:w},S=0,A=0;A<x.length;A++){for(var _=0;_<x[A].length;_++)for(var C=0;C<w;C++)E.vertices.push(x[A][_][C]);0<A&&E.holes.push(S+=x[A-1].length)}return E},g.exports=h},function(g,b){g.exports=function(t,h,n,s){var l=n||h.strokeColor;t.strokeStyle="rgba("+((16711680&l)>>>16)+","+((65280&l)>>>8)+","+(255&l)+","+(s||h.strokeAlpha)+")",t.lineWidth=h.lineWidth}},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(6),o=t(7),a=new h({Extends:s,initialize:function(i,u,c,d,f){var p,v="json";o(u)&&(u=e(p=u,"key"),c=e(p,"url"),d=e(p,"xhrSettings"),v=e(p,"extension",v),f=e(p,"dataKey",f)),s.call(this,i,{type:"json",cache:i.cacheManager.json,extension:v,responseType:"text",key:u,url:c,xhrSettings:d,config:f}),o(c)&&(this.data=f?r(c,f):c,this.state=n.FILE_POPULATED)},onProcess:function(){if(this.state!==n.FILE_POPULATED){this.state=n.FILE_PROCESSING;try{var i=JSON.parse(this.xhrLoader.responseText)}catch(c){throw console.warn("Invalid JSON: "+this.key),this.onProcessError(),c}var u=this.config;this.data="string"==typeof u?r(i,u,i):i}this.onProcessComplete()}});l.register("json",function(i,u,c,d){if(Array.isArray(i))for(var f=0;f<i.length;f++)this.addFile(new a(this,i[f]));else this.addFile(new a(this,i,u,d,c));return this}),g.exports=a},function(g,b){g.exports={DYNAMIC_BODY:0,STATIC_BODY:1,GROUP:2,TILEMAPLAYER:3,FACING_NONE:10,FACING_UP:11,FACING_DOWN:12,FACING_LEFT:13,FACING_RIGHT:14}},function(g,b,t){var h=t(158),n=t(26);g.exports=function(s,l,e,r,o){for(var a,i,u,c,d=n(s,l,e,r,null,o),f=0;f<d.length;f++){var p=d[f];p&&(p.collides?(a=h(p.x,p.y-1,!0,o),i=h(p.x,p.y+1,!0,o),u=h(p.x-1,p.y,!0,o),c=h(p.x+1,p.y,!0,o),p.faceTop=!a||!a.collides,p.faceBottom=!i||!i.collides,p.faceLeft=!u||!u.collides,p.faceRight=!c||!c.collides):p.resetFaces())}}},function(g,b,t){var h={};g.exports=h;var n=t(83),s=t(32);h.create=function(l,e){for(var r=[],o=0;o<l.length;o++){var a=l[o],i={x:a.x,y:a.y,index:o,body:e,isInternal:!1,contact:null,offset:null};i.contact={vertex:i,normalImpulse:0,tangentImpulse:0},r.push(i)}return r},h.fromPath=function(l,e){var r=[];return l.replace(/L?\s*([-\d.e]+)[\s,]*([-\d.e]+)*/gi,function(o,a,i){r.push({x:parseFloat(a),y:parseFloat(i)})}),h.create(r,e)},h.centre=function(l){for(var e,r,o,a=h.area(l,!0),i={x:0,y:0},u=0;u<l.length;u++)e=n.cross(l[u],l[o=(u+1)%l.length]),r=n.mult(n.add(l[u],l[o]),e),i=n.add(i,r);return n.div(i,6*a)},h.mean=function(l){for(var e={x:0,y:0},r=0;r<l.length;r++)e.x+=l[r].x,e.y+=l[r].y;return n.div(e,l.length)},h.area=function(l,e){for(var r=0,o=l.length-1,a=0;a<l.length;a++)r+=(l[o].x-l[a].x)*(l[o].y+l[a].y),o=a;return e?r/2:Math.abs(r)/2},h.inertia=function(l,e){for(var r,o,a=0,i=0,u=l,c=0;c<u.length;c++)o=(c+1)%u.length,a+=(r=Math.abs(n.cross(u[o],u[c])))*(n.dot(u[o],u[o])+n.dot(u[o],u[c])+n.dot(u[c],u[c])),i+=r;return e/6*(a/i)},h.translate=function(l,e,r){var o;if(r)for(o=0;o<l.length;o++)l[o].x+=e.x*r,l[o].y+=e.y*r;else for(o=0;o<l.length;o++)l[o].x+=e.x,l[o].y+=e.y;return l},h.rotate=function(l,e,r){if(0!==e){for(var o=Math.cos(e),a=Math.sin(e),i=0;i<l.length;i++){var u=l[i],c=u.x-r.x,d=u.y-r.y;u.x=r.x+(c*o-d*a),u.y=r.y+(c*a+d*o)}return l}},h.contains=function(l,e){for(var r=0;r<l.length;r++){var o=l[r],a=l[(r+1)%l.length];if(0<(e.x-o.x)*(a.y-o.y)+(e.y-o.y)*(o.x-a.x))return!1}return!0},h.scale=function(l,e,r,o){if(1===e&&1===r)return l;var i;o=o||h.centre(l);for(var u=0;u<l.length;u++)i=n.sub(l[u],o),l[u].x=o.x+i.x*e,l[u].y=o.y+i.y*r;return l},h.chamfer=function(l,e,r,o,a){e="number"==typeof e?[e]:e||[8],r=void 0!==r?r:-1,o=o||2,a=a||14;for(var i=[],u=0;u<l.length;u++){var c=l[0<=u-1?u-1:l.length-1],d=l[u],f=l[(u+1)%l.length],p=e[u<e.length?u:e.length-1];if(0!==p){var v=n.normalise({x:d.y-c.y,y:c.x-d.x}),m=n.normalise({x:f.y-d.y,y:d.x-f.x}),T=Math.sqrt(2*Math.pow(p,2)),y=n.mult(s.clone(v),p),x=n.normalise(n.mult(n.add(v,m),.5)),w=n.sub(d,n.mult(x,T)),E=r;-1===r&&(E=1.75*Math.pow(p,.32)),(E=s.clamp(E,o,a))%2==1&&(E+=1);for(var S=Math.acos(n.dot(v,m))/E,A=0;A<E;A++)i.push(n.add(n.rotate(y,S*A),w))}else i.push(d)}return i},h.clockwiseSort=function(l){var e=h.mean(l);return l.sort(function(r,o){return n.angle(e,r)-n.angle(e,o)}),l},h.isConvex=function(l){var e,r,o,a,i=0,u=l.length;if(u<3)return null;for(e=0;e<u;e++)if(a=(l[r=(e+1)%u].x-l[e].x)*(l[o=(e+2)%u].y-l[r].y),(a-=(l[r].y-l[e].y)*(l[o].x-l[r].x))<0?i|=1:0<a&&(i|=2),3===i)return!1;return 0!==i||null},h.hull=function(l){var e,r,o=[],a=[];for((l=l.slice(0)).sort(function(i,u){var c=i.x-u.x;return 0!=c?c:i.y-u.y}),r=0;r<l.length;r+=1){for(e=l[r];2<=a.length&&n.cross3(a[a.length-2],a[a.length-1],e)<=0;)a.pop();a.push(e)}for(r=l.length-1;0<=r;--r){for(e=l[r];2<=o.length&&n.cross3(o[o.length-2],o[o.length-1],e)<=0;)o.pop();o.push(e)}return o.pop(),a.pop(),o.concat(a)}},function(g,b,t){var h=t(0),n=t(66),s=t(300),l=t(301),e=t(56),r=t(170),o=new h({initialize:function(a,i,u){void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=0),this.type=e.CIRCLE,this.x=a,this.y=i,this._radius=u,this._diameter=2*u},contains:function(a,i){return n(this,a,i)},getPoint:function(a,i){return s(this,a,i)},getPoints:function(a,i,u){return l(this,a,i,u)},getRandomPoint:function(a){return r(this,a)},setTo:function(a,i,u){return this.x=a,this.y=i,this._radius=u,this._diameter=2*u,this},setEmpty:function(){return this._radius=0,this._diameter=0,this},setPosition:function(a,i){return void 0===i&&(i=a),this.x=a,this.y=i,this},isEmpty:function(){return this._radius<=0},radius:{get:function(){return this._radius},set:function(a){this._radius=a,this._diameter=2*a}},diameter:{get:function(){return this._diameter},set:function(a){this._diameter=a,this._radius=.5*a}},left:{get:function(){return this.x-this._radius},set:function(a){this.x=a+this._radius}},right:{get:function(){return this.x+this._radius},set:function(a){this.x=a-this._radius}},top:{get:function(){return this.y-this._radius},set:function(a){this.y=a+this._radius}},bottom:{get:function(){return this.y+this._radius},set:function(a){this.y=a-this._radius}}});g.exports=o},function(g,b){g.exports=function(t,h,n){return 0<t.radius&&h>=t.left&&h<=t.right&&n>=t.top&&n<=t.bottom&&(t.x-h)*(t.x-h)+(t.y-n)*(t.y-n)<=t.radius*t.radius}},function(g,b){g.exports=function(t){return Math.sqrt((t.x2-t.x1)*(t.x2-t.x1)+(t.y2-t.y1)*(t.y2-t.y1))}},function(g,b){g.exports=function(t,h,n){var s=n-h;return h+((t-h)%s+s)%s}},function(g,b,t){var h=t(0),n=t(39),s=new h({initialize:function(i){this.val=new Float32Array(16),i?this.copy(i):this.identity()},clone:function(){return new s(this)},set:function(i){return this.copy(i)},setValues:function(i,u,c,d,f,p,v,m,T,y,x,w,E,S,A,_){var C=this.val;return C[0]=i,C[1]=u,C[2]=c,C[3]=d,C[4]=f,C[5]=p,C[6]=v,C[7]=m,C[8]=T,C[9]=y,C[10]=x,C[11]=w,C[12]=E,C[13]=S,C[14]=A,C[15]=_,this},copy:function(i){var u=i.val;return this.setValues(u[0],u[1],u[2],u[3],u[4],u[5],u[6],u[7],u[8],u[9],u[10],u[11],u[12],u[13],u[14],u[15])},fromArray:function(i){return this.setValues(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],i[9],i[10],i[11],i[12],i[13],i[14],i[15])},zero:function(){return this.setValues(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)},transform:function(i,u,c){var d=l.fromQuat(c).val,f=u.x,p=u.y,v=u.z;return this.setValues(d[0]*f,d[1]*f,d[2]*f,0,d[4]*p,d[5]*p,d[6]*p,0,d[8]*v,d[9]*v,d[10]*v,0,i.x,i.y,i.z,1)},xyz:function(i,u,c){this.identity();var d=this.val;return d[12]=i,d[13]=u,d[14]=c,this},scaling:function(i,u,c){this.zero();var d=this.val;return d[0]=i,d[5]=u,d[10]=c,d[15]=1,this},identity:function(){return this.setValues(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)},transpose:function(){var i=this.val,u=i[1],c=i[2],d=i[3],f=i[6],p=i[7],v=i[11];return i[1]=i[4],i[2]=i[8],i[3]=i[12],i[4]=u,i[6]=i[9],i[7]=i[13],i[8]=c,i[9]=f,i[11]=i[14],i[12]=d,i[13]=p,i[14]=v,this},getInverse:function(i){return this.copy(i),this.invert()},invert:function(){var i=this.val,u=i[0],c=i[1],d=i[2],f=i[3],p=i[4],v=i[5],m=i[6],T=i[7],y=i[8],x=i[9],w=i[10],E=i[11],S=i[12],A=i[13],_=i[14],C=i[15],M=u*v-c*p,P=u*m-d*p,L=u*T-f*p,D=c*m-d*v,F=c*T-f*v,X=d*T-f*m,R=y*A-x*S,O=y*_-w*S,N=y*C-E*S,k=x*_-w*A,I=x*C-E*A,B=w*C-E*_,Y=M*B-P*I+L*k+D*N-F*O+X*R;return Y?this.setValues((v*B-m*I+T*k)*(Y=1/Y),(d*I-c*B-f*k)*Y,(A*X-_*F+C*D)*Y,(w*F-x*X-E*D)*Y,(m*N-p*B-T*O)*Y,(u*B-d*N+f*O)*Y,(_*L-S*X-C*P)*Y,(y*X-w*L+E*P)*Y,(p*I-v*N+T*R)*Y,(c*N-u*I-f*R)*Y,(S*F-A*L+C*M)*Y,(x*L-y*F-E*M)*Y,(v*O-p*k-m*R)*Y,(u*k-c*O+d*R)*Y,(A*P-S*D-_*M)*Y,(y*D-x*P+w*M)*Y):this},adjoint:function(){var i=this.val,u=i[0],c=i[1],d=i[2],f=i[3],p=i[4],v=i[5],m=i[6],T=i[7],y=i[8],x=i[9],w=i[10],E=i[11],S=i[12],A=i[13],_=i[14],C=i[15];return this.setValues(v*(w*C-E*_)-x*(m*C-T*_)+A*(m*E-T*w),-(c*(w*C-E*_)-x*(d*C-f*_)+A*(d*E-f*w)),c*(m*C-T*_)-v*(d*C-f*_)+A*(d*T-f*m),-(c*(m*E-T*w)-v*(d*E-f*w)+x*(d*T-f*m)),-(p*(w*C-E*_)-y*(m*C-T*_)+S*(m*E-T*w)),u*(w*C-E*_)-y*(d*C-f*_)+S*(d*E-f*w),-(u*(m*C-T*_)-p*(d*C-f*_)+S*(d*T-f*m)),u*(m*E-T*w)-p*(d*E-f*w)+y*(d*T-f*m),p*(x*C-E*A)-y*(v*C-T*A)+S*(v*E-T*x),-(u*(x*C-E*A)-y*(c*C-f*A)+S*(c*E-f*x)),u*(v*C-T*A)-p*(c*C-f*A)+S*(c*T-f*v),-(u*(v*E-T*x)-p*(c*E-f*x)+y*(c*T-f*v)),-(p*(x*_-w*A)-y*(v*_-m*A)+S*(v*w-m*x)),u*(x*_-w*A)-y*(c*_-d*A)+S*(c*w-d*x),-(u*(v*_-m*A)-p*(c*_-d*A)+S*(c*m-d*v)),u*(v*w-m*x)-p*(c*w-d*x)+y*(c*m-d*v))},determinant:function(){var i=this.val,u=i[0],c=i[1],d=i[2],f=i[3],p=i[4],v=i[5],m=i[6],T=i[7],y=i[8],x=i[9],w=i[10],E=i[11],S=i[12],A=i[13],_=i[14],C=i[15];return(u*v-c*p)*(w*C-E*_)-(u*m-d*p)*(x*C-E*A)+(u*T-f*p)*(x*_-w*A)+(c*m-d*v)*(y*C-E*S)-(c*T-f*v)*(y*_-w*S)+(d*T-f*m)*(y*A-x*S)},multiply:function(i){var u=this.val,c=u[0],d=u[1],f=u[2],p=u[3],v=u[4],m=u[5],T=u[6],y=u[7],x=u[8],w=u[9],E=u[10],S=u[11],A=u[12],_=u[13],C=u[14],M=u[15],P=i.val,L=P[0],D=P[1],F=P[2],X=P[3];return u[0]=L*c+D*v+F*x+X*A,u[1]=L*d+D*m+F*w+X*_,u[2]=L*f+D*T+F*E+X*C,u[3]=L*p+D*y+F*S+X*M,u[4]=(L=P[4])*c+(D=P[5])*v+(F=P[6])*x+(X=P[7])*A,u[5]=L*d+D*m+F*w+X*_,u[6]=L*f+D*T+F*E+X*C,u[7]=L*p+D*y+F*S+X*M,u[8]=(L=P[8])*c+(D=P[9])*v+(F=P[10])*x+(X=P[11])*A,u[9]=L*d+D*m+F*w+X*_,u[10]=L*f+D*T+F*E+X*C,u[11]=L*p+D*y+F*S+X*M,u[12]=(L=P[12])*c+(D=P[13])*v+(F=P[14])*x+(X=P[15])*A,u[13]=L*d+D*m+F*w+X*_,u[14]=L*f+D*T+F*E+X*C,u[15]=L*p+D*y+F*S+X*M,this},multiplyLocal:function(i){var u=this.val,c=i.val;return this.setValues(u[0]*c[0]+u[1]*c[4]+u[2]*c[8]+u[3]*c[12],u[0]*c[1]+u[1]*c[5]+u[2]*c[9]+u[3]*c[13],u[0]*c[2]+u[1]*c[6]+u[2]*c[10]+u[3]*c[14],u[0]*c[3]+u[1]*c[7]+u[2]*c[11]+u[3]*c[15],u[4]*c[0]+u[5]*c[4]+u[6]*c[8]+u[7]*c[12],u[4]*c[1]+u[5]*c[5]+u[6]*c[9]+u[7]*c[13],u[4]*c[2]+u[5]*c[6]+u[6]*c[10]+u[7]*c[14],u[4]*c[3]+u[5]*c[7]+u[6]*c[11]+u[7]*c[15],u[8]*c[0]+u[9]*c[4]+u[10]*c[8]+u[11]*c[12],u[8]*c[1]+u[9]*c[5]+u[10]*c[9]+u[11]*c[13],u[8]*c[2]+u[9]*c[6]+u[10]*c[10]+u[11]*c[14],u[8]*c[3]+u[9]*c[7]+u[10]*c[11]+u[11]*c[15],u[12]*c[0]+u[13]*c[4]+u[14]*c[8]+u[15]*c[12],u[12]*c[1]+u[13]*c[5]+u[14]*c[9]+u[15]*c[13],u[12]*c[2]+u[13]*c[6]+u[14]*c[10]+u[15]*c[14],u[12]*c[3]+u[13]*c[7]+u[14]*c[11]+u[15]*c[15])},premultiply:function(i){return this.multiplyMatrices(i,this)},multiplyMatrices:function(i,u){var c=i.val,d=u.val,f=c[0],p=c[4],v=c[8],m=c[12],T=c[1],y=c[5],x=c[9],w=c[13],E=c[2],S=c[6],A=c[10],_=c[14],C=c[3],M=c[7],P=c[11],L=c[15],D=d[0],F=d[4],X=d[8],R=d[12],O=d[1],N=d[5],k=d[9],I=d[13],B=d[2],Y=d[6],U=d[10],G=d[14],W=d[3],z=d[7],V=d[11],H=d[15];return this.setValues(f*D+p*O+v*B+m*W,T*D+y*O+x*B+w*W,E*D+S*O+A*B+_*W,C*D+M*O+P*B+L*W,f*F+p*N+v*Y+m*z,T*F+y*N+x*Y+w*z,E*F+S*N+A*Y+_*z,C*F+M*N+P*Y+L*z,f*X+p*k+v*U+m*V,T*X+y*k+x*U+w*V,E*X+S*k+A*U+_*V,C*X+M*k+P*U+L*V,f*R+p*I+v*G+m*H,T*R+y*I+x*G+w*H,E*R+S*I+A*G+_*H,C*R+M*I+P*G+L*H)},translate:function(i){return this.translateXYZ(i.x,i.y,i.z)},translateXYZ:function(i,u,c){var d=this.val;return d[12]=d[0]*i+d[4]*u+d[8]*c+d[12],d[13]=d[1]*i+d[5]*u+d[9]*c+d[13],d[14]=d[2]*i+d[6]*u+d[10]*c+d[14],d[15]=d[3]*i+d[7]*u+d[11]*c+d[15],this},scale:function(i){return this.scaleXYZ(i.x,i.y,i.z)},scaleXYZ:function(i,u,c){var d=this.val;return d[0]=d[0]*i,d[1]=d[1]*i,d[2]=d[2]*i,d[3]=d[3]*i,d[4]=d[4]*u,d[5]=d[5]*u,d[6]=d[6]*u,d[7]=d[7]*u,d[8]=d[8]*c,d[9]=d[9]*c,d[10]=d[10]*c,d[11]=d[11]*c,this},makeRotationAxis:function(i,u){var c=Math.cos(u),d=Math.sin(u),f=1-c,p=i.x,v=i.y,m=i.z,T=f*p,y=f*v;return this.setValues(T*p+c,T*v-d*m,T*m+d*v,0,T*v+d*m,y*v+c,y*m-d*p,0,T*m-d*v,y*m+d*p,f*m*m+c,0,0,0,0,1)},rotate:function(i,u){var c=this.val,d=u.x,f=u.y,p=u.z,v=Math.sqrt(d*d+f*f+p*p);if(Math.abs(v)<1e-6)return this;d*=v=1/v,f*=v,p*=v;var m=Math.sin(i),T=Math.cos(i),y=1-T,x=c[0],w=c[1],E=c[2],S=c[3],A=c[4],_=c[5],C=c[6],M=c[7],P=c[8],L=c[9],D=c[10],F=c[11],k=d*d*y+T,I=f*d*y+p*m,B=p*d*y-f*m,Y=d*f*y-p*m,U=f*f*y+T,G=p*f*y+d*m,W=d*p*y+f*m,z=f*p*y-d*m,V=p*p*y+T;return this.setValues(x*k+A*I+P*B,w*k+_*I+L*B,E*k+C*I+D*B,S*k+M*I+F*B,x*Y+A*U+P*G,w*Y+_*U+L*G,E*Y+C*U+D*G,S*Y+M*U+F*G,x*W+A*z+P*V,w*W+_*z+L*V,E*W+C*z+D*V,S*W+M*z+F*V,c[12],c[13],c[14],c[15])},rotateX:function(i){var u=this.val,c=Math.sin(i),d=Math.cos(i),f=u[4],p=u[5],v=u[6],m=u[7],T=u[8],y=u[9],x=u[10],w=u[11];return u[4]=f*d+T*c,u[5]=p*d+y*c,u[6]=v*d+x*c,u[7]=m*d+w*c,u[8]=T*d-f*c,u[9]=y*d-p*c,u[10]=x*d-v*c,u[11]=w*d-m*c,this},rotateY:function(i){var u=this.val,c=Math.sin(i),d=Math.cos(i),f=u[0],p=u[1],v=u[2],m=u[3],T=u[8],y=u[9],x=u[10],w=u[11];return u[0]=f*d-T*c,u[1]=p*d-y*c,u[2]=v*d-x*c,u[3]=m*d-w*c,u[8]=f*c+T*d,u[9]=p*c+y*d,u[10]=v*c+x*d,u[11]=m*c+w*d,this},rotateZ:function(i){var u=this.val,c=Math.sin(i),d=Math.cos(i),f=u[0],p=u[1],v=u[2],m=u[3],T=u[4],y=u[5],x=u[6],w=u[7];return u[0]=f*d+T*c,u[1]=p*d+y*c,u[2]=v*d+x*c,u[3]=m*d+w*c,u[4]=T*d-f*c,u[5]=y*d-p*c,u[6]=x*d-v*c,u[7]=w*d-m*c,this},fromRotationTranslation:function(i,u){var c=i.x,d=i.y,f=i.z,p=i.w,v=c+c,m=d+d,T=f+f,y=c*v,x=c*m,w=c*T,E=d*m,S=d*T,A=f*T,_=p*v,C=p*m,M=p*T;return this.setValues(1-(E+A),x+M,w-C,0,x-M,1-(y+A),S+_,0,w+C,S-_,1-(y+E),0,u.x,u.y,u.z,1)},fromQuat:function(i){var u=i.x,c=i.y,d=i.z,f=i.w,p=u+u,v=c+c,m=d+d,T=u*p,y=u*v,x=u*m,w=c*v,E=c*m,S=d*m,A=f*p,_=f*v,C=f*m;return this.setValues(1-(w+S),y+C,x-_,0,y-C,1-(T+S),E+A,0,x+_,E-A,1-(T+w),0,0,0,0,1)},frustum:function(i,u,c,d,f,p){var v=1/(u-i),m=1/(d-c),T=1/(f-p);return this.setValues(2*f*v,0,0,0,0,2*f*m,0,0,(u+i)*v,(d+c)*m,(p+f)*T,-1,0,0,p*f*2*T,0)},perspective:function(i,u,c,d){var f=1/Math.tan(i/2),p=1/(c-d);return this.setValues(f/u,0,0,0,0,f,0,0,0,0,(d+c)*p,-1,0,0,2*d*c*p,0)},perspectiveLH:function(i,u,c,d){return this.setValues(2*c/i,0,0,0,0,2*c/u,0,0,0,0,-d/(c-d),1,0,0,c*d/(c-d),0)},ortho:function(i,u,c,d,f,p){var v=0==(v=i-u)?v:1/v,m=0==(m=c-d)?m:1/m,T=0==(T=f-p)?T:1/T;return this.setValues(-2*v,0,0,0,0,-2*m,0,0,0,0,2*T,0,(i+u)*v,(d+c)*m,(p+f)*T,1)},lookAtRH:function(i,u,c){var d=this.val;return a.subVectors(i,u),0===a.getLengthSquared()&&(a.z=1),a.normalize(),r.crossVectors(c,a),0===r.getLengthSquared()&&(1===Math.abs(c.z)?a.x+=1e-4:a.z+=1e-4,a.normalize(),r.crossVectors(c,a)),r.normalize(),o.crossVectors(a,r),d[0]=r.x,d[1]=r.y,d[2]=r.z,d[4]=o.x,d[5]=o.y,d[6]=o.z,d[8]=a.x,d[9]=a.y,d[10]=a.z,this},lookAt:function(i,u,c){var d=i.x,f=i.y,p=i.z,v=c.x,m=c.y,T=c.z,y=u.x,x=u.y,w=u.z;if(Math.abs(d-y)<1e-6&&Math.abs(f-x)<1e-6&&Math.abs(p-w)<1e-6)return this.identity();var E=d-y,S=f-x,A=p-w,_=1/Math.sqrt(E*E+S*S+A*A),C=m*(A*=_)-T*(S*=_),M=T*(E*=_)-v*A,P=v*S-m*E;(_=Math.sqrt(C*C+M*M+P*P))?(C*=_=1/_,M*=_,P*=_):P=M=C=0;var L=S*P-A*M,D=A*C-E*P,F=E*M-S*C;return(_=Math.sqrt(L*L+D*D+F*F))?(L*=_=1/_,D*=_,F*=_):F=D=L=0,this.setValues(C,L,E,0,M,D,S,0,P,F,A,0,-(C*d+M*f+P*p),-(L*d+D*f+F*p),-(E*d+S*f+A*p),1)},yawPitchRoll:function(i,u,c){this.zero(),l.zero(),e.zero();var d=this.val,f=l.val,p=e.val,v=Math.sin(c),m=Math.cos(c);return d[10]=1,d[15]=1,d[0]=m,d[1]=v,d[4]=-v,d[5]=m,v=Math.sin(u),m=Math.cos(u),f[0]=1,f[15]=1,f[5]=m,f[10]=m,f[9]=-v,f[6]=v,v=Math.sin(i),m=Math.cos(i),p[5]=1,p[15]=1,p[0]=m,p[2]=-v,p[8]=v,p[10]=m,this.multiplyLocal(l),this.multiplyLocal(e),this},setWorldMatrix:function(i,u,c,d,f){return this.yawPitchRoll(i.y,i.x,i.z),l.scaling(c.x,c.y,c.z),e.xyz(u.x,u.y,u.z),this.multiplyLocal(l),this.multiplyLocal(e),d&&this.multiplyLocal(d),f&&this.multiplyLocal(f),this},multiplyToMat4:function(i,u){var c=this.val,d=i.val,f=c[0],p=c[1],v=c[2],m=c[3],T=c[4],y=c[5],x=c[6],w=c[7],E=c[8],S=c[9],A=c[10],_=c[11],C=c[12],M=c[13],P=c[14],L=c[15],F=d[1],X=d[2],R=d[3],O=d[4],N=d[5],k=d[6],I=d[7],B=d[8],Y=d[9],U=d[10],G=d[11],W=d[12],z=d[13],V=d[14],H=d[15];return u.setValues(d[0]*f+F*T+X*E+R*C,F*p+F*y+X*S+R*M,X*v+F*x+X*A+R*P,R*m+F*w+X*_+R*L,O*f+N*T+k*E+I*C,O*p+N*y+k*S+I*M,O*v+N*x+k*A+I*P,O*m+N*w+k*_+I*L,B*f+Y*T+U*E+G*C,B*p+Y*y+U*S+G*M,B*v+Y*x+U*A+G*P,B*m+Y*w+U*_+G*L,W*f+z*T+V*E+H*C,W*p+z*y+V*S+H*M,W*v+z*x+V*A+H*P,W*m+z*w+V*_+H*L)},fromRotationXYTranslation:function(i,u,c){var d=u.x,f=u.y,p=u.z,v=Math.sin(i.x),m=Math.cos(i.x),T=Math.sin(i.y),y=Math.cos(i.y),x=d,w=f,E=p,S=-v,A=0-S*T,_=0-m*T,C=S*y,M=m*y;return c||(x=y*d+T*p,w=A*d+m*f+C*p,E=_*d+v*f+M*p),this.setValues(y,A,_,0,0,m,v,0,T,C,M,0,x,w,E,1)},getMaxScaleOnAxis:function(){var i=this.val;return Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1]+i[2]*i[2],i[4]*i[4]+i[5]*i[5]+i[6]*i[6],i[8]*i[8]+i[9]*i[9]+i[10]*i[10]))}}),l=new s,e=new s,r=new n,o=new n,a=new n;g.exports=s},function(g,b,t){g.exports={COMPLETE:t(987),DECODED:t(988),DECODED_ALL:t(989),DESTROY:t(990),DETUNE:t(991),GLOBAL_DETUNE:t(992),GLOBAL_MUTE:t(993),GLOBAL_RATE:t(994),GLOBAL_VOLUME:t(995),LOOP:t(996),LOOPED:t(997),MUTE:t(998),PAN:t(999),PAUSE_ALL:t(1e3),PAUSE:t(1001),PLAY:t(1002),RATE:t(1003),RESUME_ALL:t(1004),RESUME:t(1005),SEEK:t(1006),STOP_ALL:t(1007),STOP:t(1008),UNLOCKED:t(1009),VOLUME:t(1010)}},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function a(i,u,c,d,f){var p,v,T,m="png";r(u)&&(u=e(v=u,"key"),c=e(v,"url"),p=e(v,"normalMap"),d=e(v,"xhrSettings"),m=e(v,"extension",m),f=e(v,"frameConfig")),Array.isArray(c)&&(p=c[1],c=c[0]),s.call(this,i,{type:"image",cache:i.textureManager,extension:m,responseType:"blob",key:u,url:c,xhrSettings:d,config:f}),p&&((T=new a(i,this.key,p,d,f)).type="normalMap",this.setLink(T),i.addFile(T))},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=new Image,this.data.crossOrigin=this.crossOrigin;var a=this;this.data.onload=function(){s.revokeObjectURL(a.data),a.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(a.data),a.onProcessError()},s.createObjectURL(this.data,this.xhrLoader.response,"image/png")},addToCache:function(){var a,i=this.linkFile;i&&i.state===n.FILE_COMPLETE?(a="image"===this.type?this.cache.addImage(this.key,this.data,i.data):this.cache.addImage(i.key,i.data,this.data),this.pendingDestroy(a),i.pendingDestroy(a)):i||(a=this.cache.addImage(this.key,this.data),this.pendingDestroy(a))}});l.register("image",function(a,i,u){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.addFile(new o(this,a[c]));else this.addFile(new o(this,a,i,u));return this}),g.exports=o},function(g,b){g.exports=function(t,h){h?t.setCollision(!0,!0,!0,!0,!1):t.resetCollision(!1)}},function(g,b,t){var h=t(164),n=t(0),s=t(11),l=t(15),e=t(1065),r=new n({Extends:l,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,e],initialize:function(o,a,i,u,c){l.call(this,o,"Sprite"),this._crop=this.resetCropObject(),this.anims=new h(this),this.setTexture(u,c),this.setPosition(a,i),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(o,a){this.anims.update(o,a)},play:function(o,a){return this.anims.play(o,a)},playReverse:function(o,a){return this.anims.playReverse(o,a)},playAfterDelay:function(o,a){return this.anims.playAfterDelay(o,a)},playAfterRepeat:function(o,a){return this.anims.playAfterRepeat(o,a)},chain:function(o){return this.anims.chain(o)},stop:function(){return this.anims.stop()},stopAfterDelay:function(o){return this.anims.stopAfterDelay(o)},stopAfterRepeat:function(o){return this.anims.stopAfterRepeat(o)},stopOnFrame:function(o){return this.anims.stopOnFrame(o)},toJSON:function(){return s.ToJSON(this)},preDestroy:function(){this.anims.destroy(),this.anims=void 0}});g.exports=r},function(g,b){g.exports=function(t,h){if(!(h>=t.length)){for(var n=t.length-1,s=t[h],l=h;l<n;l++)t[l]=t[l+1];return t.length=n,s}}},function(g,b,t){g.exports={ADDED_TO_SCENE:t(643),DESTROY:t(644),REMOVED_FROM_SCENE:t(645),VIDEO_COMPLETE:t(646),VIDEO_CREATED:t(647),VIDEO_ERROR:t(648),VIDEO_LOOP:t(649),VIDEO_PLAY:t(650),VIDEO_SEEKED:t(651),VIDEO_SEEKING:t(652),VIDEO_STOP:t(653),VIDEO_TIMEOUT:t(654),VIDEO_UNLOCKED:t(655)}},function(g,b){g.exports=function(t,h,n,s){return void 0===n&&(n=0),0===h?t:(t-=n,t=h*Math.floor(t/h),s?(n+t)/h:n+t)}},function(g,b){g.exports=function(t){var h={};for(var n in t)h[n]=Array.isArray(t[n])?t[n].slice(0):t[n];return h}},function(g,b){g.exports=function(t,h,n,s){var l=t.length;if(h<0||l<h||n<=h||l<n||l<h+n){if(s)throw new Error("Range Error: Values outside acceptable range");return!1}return!0}},function(g,b){function t(n,s){return String(n).localeCompare(s)}function h(n,s,l,e){for(var r,o,a,i,u=n.length,c=0,d=2*l,f=0;f<u;f+=d)for(o=(r=f+l)+l,u<r&&(r=u),u<o&&(o=u),a=f,i=r;;)if(a<r&&i<o)s(n[a],n[i])<=0?e[c++]=n[a++]:e[c++]=n[i++];else if(a<r)e[c++]=n[a++];else{if(!(i<o))break;e[c++]=n[i++]}}g.exports=function(n,s){void 0===s&&(s=t);var l=function(e,r){var o=e.length;if(o<=1)return e;for(var a=new Array(o),i=1;i<o;i*=2){h(e,r,i,a);var u=e;e=a,a=u}return e}(n,s);return l!==n&&h(l,null,n.length,n),n}},function(g,b,t){var h=t(134),n=t(205);g.exports=function(s,l){var e,r=h.Power0;if("string"==typeof s?h.hasOwnProperty(s)?r=h[s]:(e="",s.indexOf(".")&&("in"===(e=s.substr(s.indexOf(".")+1)).toLowerCase()?e="easeIn":"out"===e.toLowerCase()?e="easeOut":"inout"===e.toLowerCase()&&(e="easeInOut")),s=n(s.substr(0,s.indexOf(".")+1)+e),h.hasOwnProperty(s)&&(r=h[s])):"function"==typeof s?r=s:Array.isArray(s),!l)return r;var o=l.slice(0);return o.unshift(0),function(a){return o[0]=a,r.apply(this,o)}}},function(g,b,t){var h=t(12);g.exports=function(n,s,l,e,r){var o=n.strokeTint,a=h.getTintAppendFloatAlpha(s.strokeColor,s.strokeAlpha*l);o.TL=a,o.TR=a,o.BL=a,o.BR=a;var i=s.pathData,u=i.length-1,c=s.lineWidth,d=c/2,f=i[0]-e,p=i[1]-r;s.closePath||(u-=2);for(var v=2;v<u;v+=2){var m=i[v]-e,T=i[v+1]-r;n.batchLine(f,p,m,T,d,d,c,v-2,!!s.closePath&&v===u-1),f=m,p=T}}},function(g,b,t){var h=t(0),n=t(115),s=t(476),l=t(477),e=t(56),r=t(47),o=t(181),a=new h({initialize:function(i,u,c,d,f,p){void 0===i&&(i=0),void 0===u&&(u=0),void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),this.type=e.TRIANGLE,this.x1=i,this.y1=u,this.x2=c,this.y2=d,this.x3=f,this.y3=p},contains:function(i,u){return n(this,i,u)},getPoint:function(i,u){return s(this,i,u)},getPoints:function(i,u,c){return l(this,i,u,c)},getRandomPoint:function(i){return o(this,i)},setTo:function(i,u,c,d,f,p){return void 0===i&&(i=0),void 0===u&&(u=0),void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),this.x1=i,this.y1=u,this.x2=c,this.y2=d,this.x3=f,this.y3=p,this},getLineA:function(i){return void 0===i&&(i=new r),i.setTo(this.x1,this.y1,this.x2,this.y2),i},getLineB:function(i){return void 0===i&&(i=new r),i.setTo(this.x2,this.y2,this.x3,this.y3),i},getLineC:function(i){return void 0===i&&(i=new r),i.setTo(this.x3,this.y3,this.x1,this.y1),i},left:{get:function(){return Math.min(this.x1,this.x2,this.x3)},set:function(i){var u;this.x1-=u=this.x1<=this.x2&&this.x1<=this.x3?this.x1-i:this.x2<=this.x1&&this.x2<=this.x3?this.x2-i:this.x3-i,this.x2-=u,this.x3-=u}},right:{get:function(){return Math.max(this.x1,this.x2,this.x3)},set:function(i){var u;this.x1-=u=this.x1>=this.x2&&this.x1>=this.x3?this.x1-i:this.x2>=this.x1&&this.x2>=this.x3?this.x2-i:this.x3-i,this.x2-=u,this.x3-=u}},top:{get:function(){return Math.min(this.y1,this.y2,this.y3)},set:function(i){var u;this.y1-=u=this.y1<=this.y2&&this.y1<=this.y3?this.y1-i:this.y2<=this.y1&&this.y2<=this.y3?this.y2-i:this.y3-i,this.y2-=u,this.y3-=u}},bottom:{get:function(){return Math.max(this.y1,this.y2,this.y3)},set:function(i){var u;this.y1-=u=this.y1>=this.y2&&this.y1>=this.y3?this.y1-i:this.y2>=this.y1&&this.y2>=this.y3?this.y2-i:this.y3-i,this.y2-=u,this.y3-=u}}});g.exports=a},function(g,b){var t={};(g.exports=t).create=function(h,n){return{x:h||0,y:n||0}},t.clone=function(h){return{x:h.x,y:h.y}},t.magnitude=function(h){return Math.sqrt(h.x*h.x+h.y*h.y)},t.magnitudeSquared=function(h){return h.x*h.x+h.y*h.y},t.rotate=function(h,n,s){var l=Math.cos(n),e=Math.sin(n),r=h.x*l-h.y*e;return(s=s||{}).y=h.x*e+h.y*l,s.x=r,s},t.rotateAbout=function(h,n,s,l){var e=Math.cos(n),r=Math.sin(n),o=s.x+((h.x-s.x)*e-(h.y-s.y)*r);return(l=l||{}).y=s.y+((h.x-s.x)*r+(h.y-s.y)*e),l.x=o,l},t.normalise=function(h){var n=t.magnitude(h);return 0===n?{x:0,y:0}:{x:h.x/n,y:h.y/n}},t.dot=function(h,n){return h.x*n.x+h.y*n.y},t.cross=function(h,n){return h.x*n.y-h.y*n.x},t.cross3=function(h,n,s){return(n.x-h.x)*(s.y-h.y)-(n.y-h.y)*(s.x-h.x)},t.add=function(h,n,s){return(s=s||{}).x=h.x+n.x,s.y=h.y+n.y,s},t.sub=function(h,n,s){return(s=s||{}).x=h.x-n.x,s.y=h.y-n.y,s},t.mult=function(h,n){return{x:h.x*n,y:h.y*n}},t.div=function(h,n){return{x:h.x/n,y:h.y/n}},t.perp=function(h,n){return{x:(n=!0===n?-1:1)*-h.y,y:n*h.x}},t.neg=function(h){return{x:-h.x,y:-h.y}},t.angle=function(h,n){return Math.atan2(n.y-h.y,n.x-h.x)},t._temp=[t.create(),t.create(),t.create(),t.create(),t.create(),t.create()]},function(g,b){var t={};(g.exports=t).create=function(h){var n={min:{x:0,y:0},max:{x:0,y:0}};return h&&t.update(n,h),n},t.update=function(h,n,s){h.min.x=1/0,h.max.x=-1/0,h.min.y=1/0,h.max.y=-1/0;for(var l=0;l<n.length;l++){var e=n[l];e.x>h.max.x&&(h.max.x=e.x),e.x<h.min.x&&(h.min.x=e.x),e.y>h.max.y&&(h.max.y=e.y),e.y<h.min.y&&(h.min.y=e.y)}s&&(0<s.x?h.max.x+=s.x:h.min.x+=s.x,0<s.y?h.max.y+=s.y:h.min.y+=s.y)},t.contains=function(h,n){return n.x>=h.min.x&&n.x<=h.max.x&&n.y>=h.min.y&&n.y<=h.max.y},t.overlaps=function(h,n){return h.min.x<=n.max.x&&h.max.x>=n.min.x&&h.max.y>=n.min.y&&h.min.y<=n.max.y},t.translate=function(h,n){h.min.x+=n.x,h.max.x+=n.x,h.min.y+=n.y,h.max.y+=n.y},t.shift=function(h,n){var s=h.max.x-h.min.x,l=h.max.y-h.min.y;h.min.x=n.x,h.max.x=n.x+s,h.min.y=n.y,h.max.y=n.y+l}},function(g,b,t){var h=t(29),n=t(0),s=t(11),l=t(502),e=new n({Mixins:[s.Alpha,s.Flip,s.Visible],initialize:function(r,o,a,i,u,c,d,f){this.layer=r,this.index=o,this.x=a,this.y=i,this.width=u,this.height=c,this.baseWidth=void 0!==d?d:u,this.baseHeight=void 0!==f?f:c,this.pixelX=0,this.pixelY=0,this.updatePixelXY(),this.properties={},this.rotation=0,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceLeft=!1,this.faceRight=!1,this.faceTop=!1,this.faceBottom=!1,this.collisionCallback=void 0,(this.collisionCallbackContext=this).tint=16777215,this.physics={}},containsPoint:function(r,o){return!(r<this.pixelX||o<this.pixelY||r>this.right||o>this.bottom)},copy:function(r){return this.index=r.index,this.alpha=r.alpha,this.properties=r.properties,this.visible=r.visible,this.setFlip(r.flipX,r.flipY),this.tint=r.tint,this.rotation=r.rotation,this.collideUp=r.collideUp,this.collideDown=r.collideDown,this.collideLeft=r.collideLeft,this.collideRight=r.collideRight,this.collisionCallback=r.collisionCallback,this.collisionCallbackContext=r.collisionCallbackContext,this},getCollisionGroup:function(){return this.tileset?this.tileset.getTileCollisionGroup(this.index):null},getTileData:function(){return this.tileset?this.tileset.getTileData(this.index):null},getLeft:function(r){var o=this.tilemapLayer;return o?o.tileToWorldX(this.x,r):this.x*this.baseWidth},getRight:function(r){var o=this.tilemapLayer;return o?this.getLeft(r)+this.width*o.scaleX:this.getLeft(r)+this.width},getTop:function(r){var o=this.tilemapLayer;return o?o.tileToWorldY(this.y,r)-(this.height-this.baseHeight)*o.scaleY:this.y*this.baseHeight-(this.height-this.baseHeight)},getBottom:function(r){var o=this.tilemapLayer;return o?this.getTop(r)+this.height*o.scaleY:this.getTop(r)+this.height},getBounds:function(r,o){return void 0===o&&(o=new l),o.x=this.getLeft(),o.y=this.getTop(),o.width=this.getRight()-o.x,o.height=this.getBottom()-o.y,o},getCenterX:function(r){return(this.getLeft(r)+this.getRight(r))/2},getCenterY:function(r){return(this.getTop(r)+this.getBottom(r))/2},intersects:function(r,o,a,i){return!(a<=this.pixelX||i<=this.pixelY||r>=this.right||o>=this.bottom)},isInteresting:function(r,o){return r&&o?this.canCollide||this.hasInterestingFace:r?this.collides:!!o&&this.hasInterestingFace},resetCollision:function(r){return void 0===r&&(r=!0),this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,r&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},resetFaces:function(){return this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this},setCollision:function(r,o,a,i,u){return void 0===o&&(o=r),void 0===a&&(a=r),void 0===i&&(i=r),void 0===u&&(u=!0),this.collideLeft=r,this.collideRight=o,this.collideUp=a,this.collideDown=i,this.faceLeft=r,this.faceRight=o,this.faceTop=a,this.faceBottom=i,u&&this.tilemapLayer&&this.tilemapLayer.calculateFacesAt(this.x,this.y),this},setCollisionCallback:function(r,o){return null===r?(this.collisionCallback=void 0,this.collisionCallbackContext=void 0):(this.collisionCallback=r,this.collisionCallbackContext=o),this},setSize:function(r,o,a,i){return void 0!==r&&(this.width=r),void 0!==o&&(this.height=o),void 0!==a&&(this.baseWidth=a),void 0!==i&&(this.baseHeight=i),this.updatePixelXY(),this},updatePixelXY:function(){var r,o,a=this.layer.orientation;return a===h.ORTHOGONAL?(this.pixelX=this.x*this.baseWidth,this.pixelY=this.y*this.baseHeight):a===h.ISOMETRIC?(this.pixelX=(this.x-this.y)*this.baseWidth*.5,this.pixelY=(this.x+this.y)*this.baseHeight*.5):a===h.STAGGERED?(this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*(this.baseHeight/2)):a===h.HEXAGONAL&&(o=(this.baseHeight-(r=this.layer.hexSideLength))/2+r,this.pixelX=this.x*this.baseWidth+this.y%2*(this.baseWidth/2),this.pixelY=this.y*o),this.right=this.pixelX+this.baseWidth,this.bottom=this.pixelY+this.baseHeight,this},destroy:function(){this.collisionCallback=void 0,this.collisionCallbackContext=void 0,this.properties=void 0},canCollide:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||void 0!==this.collisionCallback}},collides:{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}},hasInterestingFace:{get:function(){return this.faceTop||this.faceBottom||this.faceLeft||this.faceRight}},tileset:{get:function(){var r=this.layer.tilemapLayer;if(r){var o=r.gidMap[this.index];if(o)return o}return null}},tilemapLayer:{get:function(){return this.layer.tilemapLayer}},tilemap:{get:function(){var r=this.tilemapLayer;return r?r.tilemap:null}}});g.exports=e},function(g,b,t){var h={};g.exports=h;var n=t(64),s=t(32),l=t(41),e=t(84),r=t(83),o=t(1393);h.rectangle=function(a,i,u,c,d){d=d||{};var f,p={label:"Rectangle Body",position:{x:a,y:i},vertices:n.fromPath("L 0 0 L "+u+" 0 L "+u+" "+c+" L 0 "+c)};return d.chamfer&&(p.vertices=n.chamfer(p.vertices,(f=d.chamfer).radius,f.quality,f.qualityMin,f.qualityMax),delete d.chamfer),l.create(s.extend({},p,d))},h.trapezoid=function(a,i,u,c,d,f){f=f||{};var p,v=u*(d*=.5),m=v+(1-2*d)*u,T=m+v,x={label:"Trapezoid Body",position:{x:a,y:i},vertices:n.fromPath(d<.5?"L 0 0 L "+v+" "+-c+" L "+m+" "+-c+" L "+T+" 0":"L 0 0 L "+m+" "+-c+" L "+T+" 0")};return f.chamfer&&(x.vertices=n.chamfer(x.vertices,(p=f.chamfer).radius,p.quality,p.qualityMin,p.qualityMax),delete f.chamfer),l.create(s.extend({},x,f))},h.circle=function(a,i,u,c,d){c=c||{};var f={label:"Circle Body",circleRadius:u};d=d||25;var p=Math.ceil(Math.max(10,Math.min(d,u)));return p%2==1&&(p+=1),h.polygon(a,i,p,u,s.extend({},f,c))},h.polygon=function(a,i,u,c,d){if(d=d||{},u<3)return h.circle(a,i,c,d);for(var f=2*Math.PI/u,p="",v=.5*f,m=0;m<u;m+=1){var T=v+m*f,y=Math.cos(T)*c,x=Math.sin(T)*c;p+="L "+y.toFixed(3)+" "+x.toFixed(3)+" "}var w,E={label:"Polygon Body",position:{x:a,y:i},vertices:n.fromPath(p)};return d.chamfer&&(E.vertices=n.chamfer(E.vertices,(w=d.chamfer).radius,w.quality,w.qualityMin,w.qualityMax),delete d.chamfer),l.create(s.extend({},E,d))},h.fromVertices=function(a,i,u,c,d,f,p){var v,m,T,y,x;for(c=c||{},m=[],d=void 0!==d&&d,f=void 0!==f?f:.01,p=void 0!==p?p:10,o||s.warn("Bodies.fromVertices: poly-decomp.js required. Could not decompose vertices. Fallback to convex hull."),s.isArray(u[0])||(u=[u]),x=0;x<u.length;x+=1)if((T=n.isConvex(y=u[x]))||!o)y=T?n.clockwiseSort(y):n.hull(y),m.push({position:{x:a,y:i},vertices:y});else{var w=y.map(function(_){return[_.x,_.y]});o.makeCCW(w),!1!==f&&o.removeCollinearPoints(w,f);for(var E=o.quickDecomp(w),S=0;S<E.length;S++){var A=E[S].map(function(_){return{x:_[0],y:_[1]}});0<p&&n.area(A)<p||m.push({position:n.centre(A),vertices:A})}}for(S=0;S<m.length;S++)m[S]=l.create(s.extend(m[S],c));return d&&h.flagCoincidentParts(m,5),1<m.length?(v=l.create(s.extend({parts:m.slice(0)},c)),l.setPosition(v,{x:a,y:i}),v):m[0]},h.flagCoincidentParts=function(a,i){void 0===i&&(i=5);for(var u=0;u<a.length;u++)for(var c=a[u],d=u+1;d<a.length;d++){var f=a[d];if(e.overlaps(c.bounds,f.bounds))for(var p=c.vertices,v=f.vertices,m=0;m<c.vertices.length;m++)for(var T=0;T<f.vertices.length;T++){var y=r.magnitudeSquared(r.sub(p[(m+1)%p.length],v[T])),x=r.magnitudeSquared(r.sub(p[m],v[(T+1)%v.length]));y<i&&x<i&&(p[m].isInternal=!0,v[T].isInternal=!0)}}return a}},function(g,b){g.exports=function(t){return t.x-t.width*t.originX+.5*t.width}},function(g,b){g.exports=function(t,h){return t.x=h+t.width*t.originX-.5*t.width,t}},function(g,b){g.exports=function(t){return t.y-t.height*t.originY+.5*t.height}},function(g,b){g.exports=function(t,h){return t.y=h+t.height*t.originY-.5*t.height,t}},function(g,b,t){g.exports={POST_RENDER:t(628),PRE_RENDER:t(629),RENDER:t(630),RESIZE:t(631)}},function(g,b){g.exports={BITMAPMASK_PIPELINE:"BitmapMaskPipeline",LIGHT_PIPELINE:"Light2D",POINTLIGHT_PIPELINE:"PointLightPipeline",SINGLE_PIPELINE:"SinglePipeline",MULTI_PIPELINE:"MultiPipeline",ROPE_PIPELINE:"RopePipeline",GRAPHICS_PIPELINE:"GraphicsPipeline",POSTFX_PIPELINE:"PostFXPipeline",UTILITY_PIPELINE:"UtilityPipeline"}},function(g,b,t){var h=t(74);g.exports=function(n,s,l,e){if(void 0===e&&(e=n),!Array.isArray(s))return-1!==(a=n.indexOf(s))?(h(n,a),l&&l.call(e,s),s):null;for(var r=s.length-1,o=[];0<=r;){var a,i=s[r];-1!==(a=n.indexOf(i))&&(h(n,a),o.push(i),l&&l.call(e,i)),r--}return o}},function(g,b,t){var h=t(0),n=t(199),s=t(10),l=t(3),e=new h({initialize:function(r){this.type=r,this.defaultDivisions=5,this.arcLengthDivisions=100,this.cacheArcLengths=[],this.needsUpdate=!0,this.active=!0,this._tmpVec2A=new l,this._tmpVec2B=new l},draw:function(r,o){return void 0===o&&(o=32),r.strokePoints(this.getPoints(o))},getBounds:function(r,o){r=r||new s,void 0===o&&(o=16);var a=this.getLength();a<o&&(o=a/2);var i=Math.max(1,Math.round(a/o));return n(this.getSpacedPoints(i),r)},getDistancePoints:function(r){var o=this.getLength(),a=Math.max(1,o/r);return this.getSpacedPoints(a)},getEndPoint:function(r){return void 0===r&&(r=new l),this.getPointAt(1,r)},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(r){if(void 0===r&&(r=this.arcLengthDivisions),this.cacheArcLengths.length===r+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var o,a=[],i=this.getPoint(0,this._tmpVec2A),u=0;a.push(0);for(var c=1;c<=r;c++)u+=(o=this.getPoint(c/r,this._tmpVec2B)).distance(i),a.push(u),i.copy(o);return this.cacheArcLengths=a},getPointAt:function(r,o){var a=this.getUtoTmapping(r);return this.getPoint(a,o)},getPoints:function(r,o,a){void 0===a&&(a=[]),r=r||(o?this.getLength()/o:this.defaultDivisions);for(var i=0;i<=r;i++)a.push(this.getPoint(i/r));return a},getRandomPoint:function(r){return void 0===r&&(r=new l),this.getPoint(Math.random(),r)},getSpacedPoints:function(r,o,a){void 0===a&&(a=[]),r=r||(o?this.getLength()/o:this.defaultDivisions);for(var i=0;i<=r;i++){var u=this.getUtoTmapping(i/r,null,r);a.push(this.getPoint(u))}return a},getStartPoint:function(r){return void 0===r&&(r=new l),this.getPointAt(0,r)},getTangent:function(r,o){void 0===o&&(o=new l);var a=r-1e-4,i=r+1e-4;return a<0&&(a=0),1<i&&(i=1),this.getPoint(a,this._tmpVec2A),this.getPoint(i,o),o.subtract(this._tmpVec2A).normalize()},getTangentAt:function(r,o){var a=this.getUtoTmapping(r);return this.getTangent(a,o)},getTFromDistance:function(r,o){return r<=0?0:this.getUtoTmapping(0,r,o)},getUtoTmapping:function(r,o,a){for(var i,u=this.getLengths(a),c=0,d=u.length,f=o?Math.min(o,u[d-1]):r*u[d-1],p=0,v=d-1;p<=v;)if((i=u[c=Math.floor(p+(v-p)/2)]-f)<0)p=c+1;else{if(!(0<i)){v=c;break}v=c-1}if(u[c=v]===f)return c/(d-1);var m=u[c];return(c+(f-m)/(u[c+1]-m))/(d-1)},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()}});g.exports=e},function(g,b,t){g.exports={ADD:t(968),COMPLETE:t(969),FILE_COMPLETE:t(970),FILE_KEY_COMPLETE:t(971),FILE_LOAD_ERROR:t(972),FILE_LOAD:t(973),FILE_PROGRESS:t(974),POST_PROCESS:t(975),PROGRESS:t(976),START:t(977)}},function(g,b,t){var h=t(4);g.exports=function(n,s,l){void 0===l&&(l=new h);var e=n.x1,r=n.y1,o=n.x2,a=n.y2,i=s.x1,u=s.y1,c=s.x2,d=s.y2,f=(d-u)*(o-e)-(c-i)*(a-r);if(0==f)return!1;var p=((c-i)*(r-u)-(d-u)*(e-i))/f,v=((o-e)*(r-u)-(a-r)*(e-i))/f;return 0<=p&&p<=1&&0<=v&&v<=1&&(l.x=e+p*(o-e),l.y=r+p*(a-r),!0)}},function(g,b){g.exports=function(t){return Math.atan2(t.y2-t.y1,t.x2-t.x1)}},function(g,b,t){var h=t(18);g.exports=function(n,s,l){return(l-s)*(n=h(n,0,1))+s}},function(g,b){g.exports=function(t,h,n){return t&&t.hasOwnProperty(h)?t[h]:n}},function(g,b){g.exports={CREATED:0,INIT:1,DELAY:2,OFFSET_DELAY:3,PENDING_RENDER:4,PLAYING_FORWARD:5,PLAYING_BACKWARD:6,HOLD_DELAY:7,REPEAT_DELAY:8,COMPLETE:9,PENDING_ADD:20,PAUSED:21,LOOP_DELAY:22,ACTIVE:23,COMPLETE_DELAY:24,PENDING_REMOVE:25,REMOVED:26}},function(g,b,t){var h=t(0),n=t(315),s=new h({initialize:function(l,e){this.parent=l,(this.events=e)||(this.events=l.events?l.events:l),this.list={},this.values={},this._frozen=!1,!l.hasOwnProperty("sys")&&this.events&&this.events.once(n.DESTROY,this.destroy,this)},get:function(l){var e=this.list;if(Array.isArray(l)){for(var r=[],o=0;o<l.length;o++)r.push(e[l[o]]);return r}return e[l]},getAll:function(){var l={};for(var e in this.list)this.list.hasOwnProperty(e)&&(l[e]=this.list[e]);return l},query:function(l){var e={};for(var r in this.list)this.list.hasOwnProperty(r)&&r.match(l)&&(e[r]=this.list[r]);return e},set:function(l,e){if(this._frozen)return this;if("string"==typeof l)return this.setValue(l,e);for(var r in l)this.setValue(r,l[r]);return this},inc:function(l,e){if(this._frozen)return this;void 0===e&&(e=1);var r=this.get(l);return void 0===r&&(r=0),this.set(l,r+e),this},toggle:function(l){return this._frozen||this.set(l,!this.get(l)),this},setValue:function(l,e){return this._frozen||(this.has(l)?this.values[l]=e:(o=(r=this).list,a=this.events,i=this.parent,Object.defineProperty(this.values,l,{enumerable:!0,configurable:!0,get:function(){return o[l]},set:function(u){var c;r._frozen||(c=o[l],o[l]=u,a.emit(n.CHANGE_DATA,i,l,u,c),a.emit(n.CHANGE_DATA_KEY+l,i,u,c))}}),o[l]=e,a.emit(n.SET_DATA,i,l,e))),this;var r,o,a,i},each:function(l,e){for(var r=[this.parent,null,void 0],o=1;o<arguments.length;o++)r.push(arguments[o]);for(var a in this.list)r[1]=a,r[2]=this.list[a],l.apply(e,r);return this},merge:function(l,e){for(var r in void 0===e&&(e=!0),l)l.hasOwnProperty(r)&&(e||!e&&!this.has(r))&&this.setValue(r,l[r]);return this},remove:function(l){if(this._frozen)return this;if(!Array.isArray(l))return this.removeValue(l);for(var e=0;e<l.length;e++)this.removeValue(l[e]);return this},removeValue:function(l){var e;return this.has(l)&&(e=this.list[l],delete this.list[l],delete this.values[l],this.events.emit(n.REMOVE_DATA,this.parent,l,e)),this},pop:function(l){var e=void 0;return!this._frozen&&this.has(l)&&(e=this.list[l],delete this.list[l],delete this.values[l],this.events.emit(n.REMOVE_DATA,this.parent,l,e)),e},has:function(l){return this.list.hasOwnProperty(l)},setFreeze:function(l){return this._frozen=l,this},reset:function(){for(var l in this.list)delete this.list[l],delete this.values[l];return this._frozen=!1,this},destroy:function(){this.reset(),this.events.off(n.CHANGE_DATA),this.events.off(n.SET_DATA),this.events.off(n.REMOVE_DATA),this.parent=null},freeze:{get:function(){return this._frozen},set:function(l){this._frozen=!!l}},count:{get:function(){var l=0;for(var e in this.list)void 0!==this.list[e]&&l++;return l}}});g.exports=s},function(g,b,t){var h=new(t(0))({initialize:function(n){if(this.entries={},this.size=0,Array.isArray(n))for(var s=0;s<n.length;s++)this.set(n[s][0],n[s][1])},set:function(n,s){return this.has(n)||this.size++,this.entries[n]=s,this},get:function(n){if(this.has(n))return this.entries[n]},getArray:function(){var n=[],s=this.entries;for(var l in s)n.push(s[l]);return n},has:function(n){return this.entries.hasOwnProperty(n)},delete:function(n){return this.has(n)&&(delete this.entries[n],this.size--),this},clear:function(){return Object.keys(this.entries).forEach(function(n){delete this.entries[n]},this),this.size=0,this},keys:function(){return Object.keys(this.entries)},values:function(){var n=[],s=this.entries;for(var l in s)n.push(s[l]);return n},dump:function(){var n=this.entries;for(var s in console.group("Map"),n)console.log(s,n[s]);console.groupEnd()},each:function(n){var s=this.entries;for(var l in s)if(!1===n(l,s[l]))break;return this},contains:function(n){var s=this.entries;for(var l in s)if(s[l]===n)return!0;return!1},merge:function(n,s){void 0===s&&(s=!1);var l=this.entries,e=n.entries;for(var r in e)l.hasOwnProperty(r)&&s?l[r]=e[r]:this.set(r,e[r]);return this}});g.exports=h},function(g,b){g.exports=function(t,h,n){return t<<16|h<<8|n}},function(g,b,t){g.exports={ENTER_FULLSCREEN:t(800),FULLSCREEN_FAILED:t(801),FULLSCREEN_UNSUPPORTED:t(802),LEAVE_FULLSCREEN:t(803),ORIENTATION_CHANGE:t(804),RESIZE:t(805)}},function(g,b,t){(function(h){var n={android:!1,chromeOS:!1,cordova:!1,crosswalk:!1,desktop:!1,ejecta:!1,electron:!1,iOS:!1,iOSVersion:0,iPad:!1,iPhone:!1,kindle:!1,linux:!1,macOS:!1,node:!1,nodeWebkit:!1,pixelRatio:1,webApp:!1,windows:!1,windowsPhone:!1};g.exports=function(){if("function"==typeof importScripts)return n;var s=navigator.userAgent;/Windows/.test(s)?n.windows=!0:/Mac OS/.test(s)&&!/like Mac OS/.test(s)?navigator.maxTouchPoints&&2<navigator.maxTouchPoints?(n.iOS=!0,n.iPad=!0,navigator.appVersion.match(/Version\/(\d+)/),n.iOSVersion=parseInt(RegExp.$1,10)):n.macOS=!0:/Android/.test(s)?n.android=!0:/Linux/.test(s)?n.linux=!0:/iP[ao]d|iPhone/i.test(s)?(n.iOS=!0,navigator.appVersion.match(/OS (\d+)/),n.iOSVersion=parseInt(RegExp.$1,10),n.iPhone=-1!==s.toLowerCase().indexOf("iphone"),n.iPad=-1!==s.toLowerCase().indexOf("ipad")):/Kindle/.test(s)||/\bKF[A-Z][A-Z]+/.test(s)||/Silk.*Mobile Safari/.test(s)?n.kindle=!0:/CrOS/.test(s)&&(n.chromeOS=!0),(/Windows Phone/i.test(s)||/IEMobile/i.test(s))&&(n.android=!1,n.iOS=!1,n.macOS=!1,n.windows=!0,n.windowsPhone=!0);var l=/Silk/.test(s);return(n.windows||n.macOS||n.linux&&!l||n.chromeOS)&&(n.desktop=!0),(n.windowsPhone||/Windows NT/i.test(s)&&/Touch/i.test(s))&&(n.desktop=!1),navigator.standalone&&(n.webApp=!0),"function"!=typeof importScripts&&(void 0!==window.cordova&&(n.cordova=!0),void 0!==window.ejecta&&(n.ejecta=!0)),void 0!==h&&h.versions&&h.versions.node&&(n.node=!0),n.node&&"object"==typeof h.versions&&(n.nodeWebkit=!!h.versions["node-webkit"],n.electron=!!h.versions.electron),/Crosswalk/.test(s)&&(n.crosswalk=!0),n.pixelRatio=window.devicePixelRatio||1,n}()}).call(this,t(807))},function(g,b,t){g.exports={ADD:t(861),ERROR:t(862),LOAD:t(863),READY:t(864),REMOVE:t(865)}},function(g,b){g.exports={BYTE:{enum:5120,size:1},UNSIGNED_BYTE:{enum:5121,size:1},SHORT:{enum:5122,size:2},UNSIGNED_SHORT:{enum:5123,size:2},INT:{enum:5124,size:4},UNSIGNED_INT:{enum:5125,size:4},FLOAT:{enum:5126,size:4}}},function(g,b,t){var h=t(0),n=t(59),s=t(2),l=t(878),e=t(879),r=t(25),o=t(12),a=t(107),i=t(58),u=new h({Extends:i,initialize:function(c){var d=c.game.renderer,f=s(c,"fragShader",l);c.fragShader=o.parseFragmentShaderMaxTextures(f,d.maxTextures),c.vertShader=s(c,"vertShader",e),c.attributes=s(c,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2},{name:"inTexId"},{name:"inTintEffect"},{name:"inTint",size:4,type:a.UNSIGNED_BYTE,normalized:!0}]),i.call(this,c),this._tempMatrix1=new r,this._tempMatrix2=new r,this._tempMatrix3=new r,this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},boot:function(){i.prototype.boot.call(this),this.currentShader.set1iv("uMainSampler",this.renderer.textureIndexes)},batchSprite:function(c,d,f){this.manager.set(this,c);var p,v=this._tempMatrix1,m=this._tempMatrix2,T=this._tempMatrix3,y=c.frame,x=y.glTexture,w=y.u0,E=y.v0,S=y.u1,A=y.v1,M=y.cutWidth,P=y.cutHeight,L=y.customPivot,D=c.displayOriginX,F=c.displayOriginY,X=-D+y.x,R=-F+y.y;c.isCropped&&((p=c._crop).flipX===c.flipX&&p.flipY===c.flipY||y.updateCropUVs(p,c.flipX,c.flipY),w=p.u0,E=p.v0,S=p.u1,A=p.v1,M=p.width,P=p.height,X=-D+p.x,R=-F+p.y);var O=1,N=1;c.flipX&&(L||(X+=2*D-y.realWidth),O=-1),(c.flipY||y.source.isGLTexture&&!x.flipY)&&(L||(R+=2*F-y.realHeight),N=-1),m.applyITRS(c.x,c.y,c.rotation,c.scaleX*O,c.scaleY*N),v.copyFrom(d.matrix),f?(v.multiplyWithOffset(f,-d.scrollX*c.scrollFactorX,-d.scrollY*c.scrollFactorY),m.e=c.x,m.f=c.y):(m.e-=d.scrollX*c.scrollFactorX,m.f-=d.scrollY*c.scrollFactorY),v.multiply(m,T);var k=X+M,I=R+P,B=d.roundPixels,Y=T.getXRound(X,R,B),U=T.getYRound(X,R,B),G=T.getXRound(X,I,B),W=T.getYRound(X,I,B),z=T.getXRound(k,I,B),V=T.getYRound(k,I,B),H=T.getXRound(k,R,B),j=T.getYRound(k,R,B),q=o.getTintAppendFloatAlpha,Q=d.alpha,Z=q(c.tintTopLeft,Q*c._alphaTL),J=q(c.tintTopRight,Q*c._alphaTR),K=q(c.tintBottomLeft,Q*c._alphaBL),tt=q(c.tintBottomRight,Q*c._alphaBR);this.shouldFlush(6)&&this.flush();var et=this.setGameObject(c,y);this.manager.preBatch(c),this.batchQuad(c,Y,U,G,W,z,V,H,j,w,E,S,A,Z,J,K,tt,c.tintFill,x,et),this.manager.postBatch(c)},batchTexture:function(c,d,f,p,v,m,T,y,x,w,E,S,A,_,C,M,P,L,D,F,X,R,O,N,k,I,B,Y,U,G,W,z){this.manager.set(this,c);var V,H,j,q,Q,Z=this._tempMatrix1,J=this._tempMatrix2,K=this._tempMatrix3,tt=L/f+B,et=D/p+Y,st=(L+F)/f+B,it=(D+X)/p+Y,$=T,at=y,nt=-M,ht=-P;c.isCropped&&(T=$=H=(V=c._crop).width,y=at=j=V.height,q=L=V.x,Q=D=V.y,S&&(q=F-V.x-H),A&&(Q=X-V.y-j),tt=q/f+B,et=Q/p+Y,st=(q+H)/f+B,it=(Q+j)/p+Y,nt=-M+L,ht=-P+D),S&&($*=-1,nt+=T),(A^=!W&&d.isRenderTexture?1:0)&&(at*=-1,ht+=y);var ot=nt+$,lt=ht+at;J.applyITRS(v,m,E,x,w),Z.copyFrom(U.matrix),G?(Z.multiplyWithOffset(G,-U.scrollX*_,-U.scrollY*C),J.e=v,J.f=m):(J.e-=U.scrollX*_,J.f-=U.scrollY*C),Z.multiply(J,K);var rt=U.roundPixels,dt=K.getXRound(nt,ht,rt),ut=K.getYRound(nt,ht,rt),ft=K.getXRound(nt,lt,rt),vt=K.getYRound(nt,lt,rt),mt=K.getXRound(ot,lt,rt),yt=K.getYRound(ot,lt,rt),xt=K.getXRound(ot,ht,rt),Tt=K.getYRound(ot,ht,rt);void 0===z&&(z=this.renderer.setTexture2D(d)),c&&this.manager.preBatch(c),this.batchQuad(c,dt,ut,ft,vt,mt,yt,xt,Tt,tt,et,st,it,R,O,N,k,I,d,z),c&&this.manager.postBatch(c)},batchTextureFrame:function(c,d,f,p,v,m,T){this.manager.set(this);var y=this._tempMatrix1.copyFrom(m),x=this._tempMatrix2,w=d+c.width,E=f+c.height;T?y.multiply(T,x):x=y;var S=x.getX(d,f),A=x.getY(d,f),_=x.getX(d,E),C=x.getY(d,E),M=x.getX(w,E),P=x.getY(w,E),L=x.getX(w,f),D=x.getY(w,f),F=this.renderer.setTextureSource(c.source);p=o.getTintAppendFloatAlpha(p,v),this.batchQuad(null,S,A,_,C,M,P,L,D,c.u0,c.v0,c.u1,c.v1,p,p,p,p,0,c.glTexture,F)},batchFillRect:function(c,d,f,p,v,m){this.renderer.pipelines.set(this);var T=this.calcMatrix;m&&m.multiply(v,T);var y=c+f,x=d+p,w=T.getX(c,d),E=T.getY(c,d),S=T.getX(c,x),A=T.getY(c,x),_=T.getX(y,x),C=T.getY(y,x),M=T.getX(y,d),P=T.getY(y,d),L=this.fillTint;this.batchQuad(null,w,E,S,A,_,C,M,P,0,0,1,1,L.TL,L.TR,L.BL,L.BR,2)},batchFillTriangle:function(c,d,f,p,v,m,T,y){this.renderer.pipelines.set(this);var x=this.calcMatrix;y&&y.multiply(T,x);var w=x.getX(c,d),E=x.getY(c,d),S=x.getX(f,p),A=x.getY(f,p),_=x.getX(v,m),C=x.getY(v,m),M=this.fillTint;this.batchTri(null,w,E,S,A,_,C,0,0,1,1,M.TL,M.TR,M.BL,2)},batchStrokeTriangle:function(c,d,f,p,v,m,T,y,x){var w=this.tempTriangle;w[0].x=c,w[0].y=d,w[0].width=T,w[1].x=f,w[1].y=p,w[1].width=T,w[2].x=v,w[2].y=m,w[2].width=T,w[3].x=c,w[3].y=d,w[3].width=T,this.batchStrokePath(w,T,!1,y,x)},batchFillPath:function(c,d,f){this.renderer.pipelines.set(this);var p=this.calcMatrix;f&&f.multiply(d,p);for(var v,m,T=c.length,y=this.polygonCache,x=this.fillTint.TL,w=this.fillTint.TR,E=this.fillTint.BL,S=0;S<T;++S)y.push((m=c[S]).x,m.y);T=(v=n(y)).length;for(var A=0;A<T;A+=3){var _=2*v[A+0],C=2*v[A+1],M=2*v[A+2],P=y[0+_],L=y[1+_],D=y[0+C],F=y[1+C],X=y[0+M],R=y[1+M],O=p.getX(P,L),N=p.getY(P,L),k=p.getX(D,F),I=p.getY(D,F),B=p.getX(X,R),Y=p.getY(X,R);this.batchTri(null,O,N,k,I,B,Y,0,0,1,1,x,w,E,2)}y.length=0},batchStrokePath:function(c,d,f,p,v){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var m=c.length-1,T=0;T<m;T++){var y=c[T],x=c[T+1];this.batchLine(y.x,y.y,x.x,x.y,y.width/2,x.width/2,d,T,!f&&T===m-1,p,v)}},batchLine:function(c,d,f,p,v,m,T,y,x,w,E){this.renderer.pipelines.set(this);var S=this.calcMatrix;E&&E.multiply(w,S);var A,_,C=f-c,M=p-d,P=Math.sqrt(C*C+M*M),L=v*(p-d)/P,D=v*(c-f)/P,F=m*(p-d)/P,X=m*(c-f)/P,R=f-F,O=p-X,N=c-L,k=d-D,I=f+F,B=p+X,Y=c+L,U=d+D,G=S.getX(R,O),W=S.getY(R,O),z=S.getX(N,k),V=S.getY(N,k),H=S.getX(I,B),j=S.getY(I,B),q=S.getX(Y,U),Q=S.getY(Y,U),Z=this.strokeTint,J=Z.TL,K=Z.TR,tt=Z.BL,et=Z.BR;this.batchQuad(null,q,Q,z,V,G,W,H,j,0,0,1,1,J,K,tt,et,2),T<=2||(A=this.prevQuad,_=this.firstQuad,0<y&&A[4]?this.batchQuad(null,q,Q,z,V,A[0],A[1],A[2],A[3],0,0,1,1,J,K,tt,et,2):(_[0]=q,_[1]=Q,_[2]=z,_[3]=V,_[4]=1),x&&_[4]?this.batchQuad(null,G,W,H,j,_[0],_[1],_[2],_[3],0,0,1,1,J,K,tt,et,2):(A[0]=G,A[1]=W,A[2]=H,A[3]=j,A[4]=1))}});g.exports=u},function(g,b,t){var h=t(0),n=t(18),s=t(17),l=new h({initialize:function(e,r,o,a,i,u,c){this.texture=e,this.name=r,this.source=e.source[o],this.sourceIndex=o,this.glTexture=this.source.glTexture,this.x=0,this.y=0,this.pivotX=0,this.pivotY=0,this.customPivot=!1,this.rotated=!1,this.autoRound=-1,this.customData={},this.u0=0,this.v0=0,this.u1=0,this.v1=0,this.data={cut:{x:0,y:0,w:0,h:0,r:0,b:0},trim:!1,sourceSize:{w:0,h:0},spriteSourceSize:{x:0,y:0,w:0,h:0,r:0,b:0},radius:0,drawImage:{x:0,y:0,width:0,height:0}},this.setSize(u,c,a,i)},setSize:function(e,r,o,a){void 0===o&&(o=0),void 0===a&&(a=0),this.cutX=o,this.cutY=a,this.cutWidth=e,this.cutHeight=r,this.width=e,this.height=r,this.halfWidth=Math.floor(.5*e),this.halfHeight=Math.floor(.5*r),this.centerX=Math.floor(e/2),this.centerY=Math.floor(r/2);var i=this.data,u=i.cut;u.x=o,u.y=a,u.w=e,u.h=r,u.r=o+e,u.b=a+r,i.sourceSize.w=e,i.sourceSize.h=r,i.spriteSourceSize.w=e,i.spriteSourceSize.h=r,i.radius=.5*Math.sqrt(e*e+r*r);var c=i.drawImage;return c.x=o,c.y=a,c.width=e,c.height=r,this.updateUVs()},setTrim:function(e,r,o,a,i,u){var c=this.data,d=c.spriteSourceSize;return c.trim=!0,c.sourceSize.w=e,c.sourceSize.h=r,d.x=o,d.y=a,d.w=i,d.h=u,d.r=o+i,d.b=a+u,this.x=o,this.y=a,this.width=i,this.height=u,this.halfWidth=.5*i,this.halfHeight=.5*u,this.centerX=Math.floor(i/2),this.centerY=Math.floor(u/2),this.updateUVs()},setCropUVs:function(e,r,o,a,i,u,c){var d,f,p,v,m,T,y,x=this.cutX,w=this.cutY,E=this.cutWidth,S=this.cutHeight,A=this.realWidth,_=this.realHeight,C=x+(r=n(r,0,A)),M=w+(o=n(o,0,_)),P=a=n(a,0,A-r),L=i=n(i,0,_-o),D=this.data;D.trim?(d=D.spriteSourceSize,f=r+(a=n(a,0,E-r)),p=o+(i=n(i,0,S-o)),d.r<r||d.b<o||d.x>f||d.y>p?L=P=M=C=0:(v=Math.max(d.x,r),m=Math.max(d.y,o),P=T=Math.min(d.r,f)-v,L=y=Math.min(d.b,p)-m,C=u?x+(E-(v-d.x)-T):x+(v-d.x),M=c?w+(S-(m-d.y)-y):w+(m-d.y),r=v,o=m,a=T,i=y)):(u&&(C=x+(E-r-a)),c&&(M=w+(S-o-i)));var F=this.source.width,X=this.source.height;return e.u0=Math.max(0,C/F),e.v0=Math.max(0,M/X),e.u1=Math.min(1,(C+P)/F),e.v1=Math.min(1,(M+L)/X),e.x=r,e.y=o,e.cx=C,e.cy=M,e.cw=P,e.ch=L,e.width=a,e.height=i,e.flipX=u,e.flipY=c,e},updateCropUVs:function(e,r,o){return this.setCropUVs(e,e.x,e.y,e.width,e.height,r,o)},setUVs:function(e,r,o,a,i,u){var c=this.data.drawImage;return c.width=e,c.height=r,this.u0=o,this.v0=a,this.u1=i,this.v1=u,this},updateUVs:function(){var e=this.cutX,r=this.cutY,o=this.cutWidth,a=this.cutHeight,i=this.data.drawImage;i.width=o,i.height=a;var u=this.source.width,c=this.source.height;return this.u0=e/u,this.v0=r/c,this.u1=(e+o)/u,this.v1=(r+a)/c,this},updateUVsInverted:function(){var e=this.source.width,r=this.source.height;return this.u0=(this.cutX+this.cutHeight)/e,this.v0=this.cutY/r,this.u1=this.cutX/e,this.v1=(this.cutY+this.cutWidth)/r,this},clone:function(){var e=new l(this.texture,this.name,this.sourceIndex);return e.cutX=this.cutX,e.cutY=this.cutY,e.cutWidth=this.cutWidth,e.cutHeight=this.cutHeight,e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e.halfWidth=this.halfWidth,e.halfHeight=this.halfHeight,e.centerX=this.centerX,e.centerY=this.centerY,e.rotated=this.rotated,e.data=s(!0,e.data,this.data),e.updateUVs(),e},destroy:function(){this.source=null,this.texture=null,this.glTexture=null,this.customData=null,this.data=null},realWidth:{get:function(){return this.data.sourceSize.w}},realHeight:{get:function(){return this.data.sourceSize.h}},radius:{get:function(){return this.data.radius}},trimmed:{get:function(){return this.data.trim}},canvasData:{get:function(){return this.data.drawImage}}});g.exports=l},function(g,b,t){var h=t(208),n=t(0),s=t(1),l=t(79),e=new n({initialize:function(r){this.parent=r,this.list=[],this.position=0,this.addCallback=s,this.removeCallback=s,this._sortKey=""},add:function(r,o){return o?h.Add(this.list,r):h.Add(this.list,r,0,this.addCallback,this)},addAt:function(r,o,a){return a?h.AddAt(this.list,r,o):h.AddAt(this.list,r,o,0,this.addCallback,this)},getAt:function(r){return this.list[r]},getIndex:function(r){return this.list.indexOf(r)},sort:function(r,o){return r&&(void 0===o&&(o=function(a,i){return a[r]-i[r]}),l(this.list,o)),this},getByName:function(r){return h.GetFirst(this.list,"name",r)},getRandom:function(r,o){return h.GetRandom(this.list,r,o)},getFirst:function(r,o,a,i){return h.GetFirst(this.list,r,o,a,i)},getAll:function(r,o,a,i){return h.GetAll(this.list,r,o,a,i)},count:function(r,o){return h.CountAllMatching(this.list,r,o)},swap:function(r,o){h.Swap(this.list,r,o)},moveTo:function(r,o){return h.MoveTo(this.list,r,o)},moveAbove:function(r,o){return h.MoveAbove(this.list,r,o)},moveBelow:function(r,o){return h.MoveBelow(this.list,r,o)},remove:function(r,o){return o?h.Remove(this.list,r):h.Remove(this.list,r,this.removeCallback,this)},removeAt:function(r,o){return o?h.RemoveAt(this.list,r):h.RemoveAt(this.list,r,this.removeCallback,this)},removeBetween:function(r,o,a){return a?h.RemoveBetween(this.list,r,o):h.RemoveBetween(this.list,r,o,this.removeCallback,this)},removeAll:function(r){for(var o=this.list.length;o--;)this.remove(this.list[o],r);return this},bringToTop:function(r){return h.BringToTop(this.list,r)},sendToBack:function(r){return h.SendToBack(this.list,r)},moveUp:function(r){return h.MoveUp(this.list,r),r},moveDown:function(r){return h.MoveDown(this.list,r),r},reverse:function(){return this.list.reverse(),this},shuffle:function(){return h.Shuffle(this.list),this},replace:function(r,o){return h.Replace(this.list,r,o)},exists:function(r){return-1<this.list.indexOf(r)},setAll:function(r,o,a,i){return h.SetAll(this.list,r,o,a,i),this},each:function(r,o){for(var a=[null],i=2;i<arguments.length;i++)a.push(arguments[i]);for(i=0;i<this.list.length;i++)a[0]=this.list[i],r.apply(o,a)},shutdown:function(){this.removeAll(),this.list=[]},destroy:function(){this.removeAll(),this.parent=null,this.addCallback=null,this.removeCallback=null},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}}});g.exports=e},function(g,b,t){var h=t(0),n=t(112),s=t(445),l=t(446),e=t(56),r=t(180),o=new h({initialize:function(a,i,u,c){void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=0),void 0===c&&(c=0),this.type=e.ELLIPSE,this.x=a,this.y=i,this.width=u,this.height=c},contains:function(a,i){return n(this,a,i)},getPoint:function(a,i){return s(this,a,i)},getPoints:function(a,i,u){return l(this,a,i,u)},getRandomPoint:function(a){return r(this,a)},setTo:function(a,i,u,c){return this.x=a,this.y=i,this.width=u,this.height=c,this},setEmpty:function(){return this.width=0,this.height=0,this},setPosition:function(a,i){return void 0===i&&(i=a),this.x=a,this.y=i,this},setSize:function(a,i){return void 0===i&&(i=a),this.width=a,this.height=i,this},isEmpty:function(){return this.width<=0||this.height<=0},getMinorRadius:function(){return Math.min(this.width,this.height)/2},getMajorRadius:function(){return Math.max(this.width,this.height)/2},left:{get:function(){return this.x-this.width/2},set:function(a){this.x=a+this.width/2}},right:{get:function(){return this.x+this.width/2},set:function(a){this.x=a-this.width/2}},top:{get:function(){return this.y-this.height/2},set:function(a){this.y=a+this.height/2}},bottom:{get:function(){return this.y+this.height/2},set:function(a){this.y=a-this.height/2}}});g.exports=o},function(g,b){g.exports=function(t,h,n){if(t.width<=0||t.height<=0)return!1;var s=(h-t.x)/t.width,l=(n-t.y)/t.height;return(s*=s)+(l*=l)<.25}},function(g,b,t){var h=t(275),n=t(0),s=t(75),l=t(9),e=t(207),r=t(2),o=t(6),a=t(7),i=t(437),u=t(149),c=t(73),d=new n({Extends:l,initialize:function(f,p,v){l.call(this),v?p&&!Array.isArray(p)&&(p=[p]):Array.isArray(p)?a(p[0])&&(v=p,p=null):a(p)&&(v=p,p=null),this.scene=f,this.children=new u,this.isParent=!0,this.type="Group",this.classType=r(v,"classType",c),this.name=r(v,"name",""),this.active=r(v,"active",!0),this.maxSize=r(v,"maxSize",-1),this.defaultKey=r(v,"defaultKey",null),this.defaultFrame=r(v,"defaultFrame",null),this.runChildUpdate=r(v,"runChildUpdate",!1),this.createCallback=r(v,"createCallback",null),this.removeCallback=r(v,"removeCallback",null),this.createMultipleCallback=r(v,"createMultipleCallback",null),this.internalCreateCallback=r(v,"internalCreateCallback",null),this.internalRemoveCallback=r(v,"internalRemoveCallback",null),p&&this.addMultiple(p),v&&this.createMultiple(v),this.on(s.ADDED_TO_SCENE,this.addedToScene,this),this.on(s.REMOVED_FROM_SCENE,this.removedFromScene,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},create:function(f,p,v,m,T,y){if(void 0===f&&(f=0),void 0===p&&(p=0),void 0===v&&(v=this.defaultKey),void 0===m&&(m=this.defaultFrame),void 0===T&&(T=!0),void 0===y&&(y=!0),this.isFull())return null;var x=new this.classType(this.scene,f,p,v,m);return x.addToDisplayList(this.scene.sys.displayList),x.addToUpdateList(),x.visible=T,x.setActive(y),this.add(x),x},createMultiple:function(f){if(this.isFull())return[];Array.isArray(f)||(f=[f]);var p=[];if(f[0].key)for(var v=0;v<f.length;v++){var m=this.createFromConfig(f[v]);p=p.concat(m)}return p},createFromConfig:function(f){if(this.isFull())return[];this.classType=r(f,"classType",this.classType);var p=r(f,"key",void 0),v=r(f,"frame",null),m=r(f,"visible",!0),T=r(f,"active",!0),y=[];if(void 0===p)return y;Array.isArray(p)||(p=[p]),Array.isArray(v)||(v=[v]);var x=r(f,"repeat",0),w=r(f,"randomKey",!1),E=r(f,"randomFrame",!1),S=r(f,"yoyo",!1),A=r(f,"quantity",!1),_=r(f,"frameQuantity",1),C=r(f,"max",0),M=i(p,v,{max:C,qty:A||_,random:w,randomB:E,repeat:x,yoyo:S});f.createCallback&&(this.createCallback=f.createCallback),f.removeCallback&&(this.removeCallback=f.removeCallback);for(var P=0;P<M.length;P++){var L=this.create(0,0,M[P].a,M[P].b,m,T);if(!L)break;y.push(L)}var D=o(f,"setXY.x",0),F=o(f,"setXY.y",0),X=o(f,"setXY.stepX",0),R=o(f,"setXY.stepY",0);h.SetXY(y,D,F,X,R);var O=o(f,"setRotation.value",0),N=o(f,"setRotation.step",0);h.SetRotation(y,O,N);var k=o(f,"setScale.x",1),I=o(f,"setScale.y",k),B=o(f,"setScale.stepX",0),Y=o(f,"setScale.stepY",0);h.SetScale(y,k,I,B,Y);var U=o(f,"setOrigin.x",.5),G=o(f,"setOrigin.y",U),W=o(f,"setOrigin.stepX",0),z=o(f,"setOrigin.stepY",0);h.SetOrigin(y,U,G,W,z);var V=o(f,"setAlpha.value",1),H=o(f,"setAlpha.step",0);h.SetAlpha(y,V,H);var j=o(f,"setDepth.value",0),q=o(f,"setDepth.step",0);h.SetDepth(y,j,q);var Q=o(f,"setScrollFactor.x",1),Z=o(f,"setScrollFactor.y",Q),J=o(f,"setScrollFactor.stepX",0),K=o(f,"setScrollFactor.stepY",0);h.SetScrollFactor(y,Q,Z,J,K);var tt=r(f,"hitArea",null),et=r(f,"hitAreaCallback",null);tt&&h.SetHitArea(y,tt,et);var st=r(f,"gridAlign",!1);return st&&h.GridAlign(y,st),this.createMultipleCallback&&this.createMultipleCallback.call(this,y),y},preUpdate:function(f,p){if(this.runChildUpdate&&0!==this.children.size)for(var v=this.children.entries.slice(),m=0;m<v.length;m++){var T=v[m];T.active&&T.update(f,p)}},add:function(f,p){return void 0===p&&(p=!1),this.isFull()||(this.children.set(f),this.internalCreateCallback&&this.internalCreateCallback.call(this,f),this.createCallback&&this.createCallback.call(this,f),p&&(f.addToDisplayList(this.scene.sys.displayList),f.addToUpdateList()),f.on(s.DESTROY,this.remove,this)),this},addMultiple:function(f,p){if(void 0===p&&(p=!1),Array.isArray(f))for(var v=0;v<f.length;v++)this.add(f[v],p);return this},remove:function(f,p,v){return void 0===p&&(p=!1),void 0===v&&(v=!1),this.children.contains(f)&&(this.children.delete(f),this.internalRemoveCallback&&this.internalRemoveCallback.call(this,f),this.removeCallback&&this.removeCallback.call(this,f),f.off(s.DESTROY,this.remove,this),v?f.destroy():p&&(f.removeFromDisplayList(),f.removeFromUpdateList())),this},clear:function(f,p){void 0===f&&(f=!1),void 0===p&&(p=!1);for(var v=this.children,m=0;m<v.size;m++){var T=v.entries[m];T.off(s.DESTROY,this.remove,this),p?T.destroy():f&&(T.removeFromDisplayList(),T.removeFromUpdateList())}return this.children.clear(),this},contains:function(f){return this.children.contains(f)},getChildren:function(){return this.children.entries},getLength:function(){return this.children.size},getMatching:function(f,p,v,m){return e(this.children.entries,f,p,v,m)},getFirst:function(f,p,v,m,T,y,x){return this.getHandler(!0,1,f,p,v,m,T,y,x)},getFirstNth:function(f,p,v,m,T,y,x,w){return this.getHandler(!0,f,p,v,m,T,y,x,w)},getLast:function(f,p,v,m,T,y,x){return this.getHandler(!1,1,f,p,v,m,T,y,x)},getLastNth:function(f,p,v,m,T,y,x,w){return this.getHandler(!1,f,p,v,m,T,y,x,w)},getHandler:function(f,p,v,m,T,y,x,w,E){var S,A;void 0===v&&(v=!1),void 0===m&&(m=!1);var _=0,C=this.children.entries;if(f)for(A=0;A<C.length;A++)if((S=C[A]).active===v){if(++_===p)break}else S=null;else for(A=C.length-1;0<=A;A--)if((S=C[A]).active===v){if(++_===p)break}else S=null;return S?("number"==typeof T&&(S.x=T),"number"==typeof y&&(S.y=y),S):m?this.create(T,y,x,w,E):null},get:function(f,p,v,m,T){return this.getFirst(!1,!0,f,p,v,m,T)},getFirstAlive:function(f,p,v,m,T,y){return this.getFirst(!0,f,p,v,m,T,y)},getFirstDead:function(f,p,v,m,T,y){return this.getFirst(!1,f,p,v,m,T,y)},playAnimation:function(f,p){return h.PlayAnimation(this.children.entries,f,p),this},isFull:function(){return-1!==this.maxSize&&this.children.size>=this.maxSize},countActive:function(f){void 0===f&&(f=!0);for(var p=0,v=0;v<this.children.size;v++)this.children.entries[v].active===f&&p++;return p},getTotalUsed:function(){return this.countActive()},getTotalFree:function(){var f=this.getTotalUsed();return(-1===this.maxSize?999999999999:this.maxSize)-f},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},propertyValueSet:function(f,p,v,m,T){return h.PropertyValueSet(this.children.entries,f,p,v,m,T),this},propertyValueInc:function(f,p,v,m,T){return h.PropertyValueInc(this.children.entries,f,p,v,m,T),this},setX:function(f,p){return h.SetX(this.children.entries,f,p),this},setY:function(f,p){return h.SetY(this.children.entries,f,p),this},setXY:function(f,p,v,m){return h.SetXY(this.children.entries,f,p,v,m),this},incX:function(f,p){return h.IncX(this.children.entries,f,p),this},incY:function(f,p){return h.IncY(this.children.entries,f,p),this},incXY:function(f,p,v,m){return h.IncXY(this.children.entries,f,p,v,m),this},shiftPosition:function(f,p,v){return h.ShiftPosition(this.children.entries,f,p,v),this},angle:function(f,p){return h.Angle(this.children.entries,f,p),this},rotate:function(f,p){return h.Rotate(this.children.entries,f,p),this},rotateAround:function(f,p){return h.RotateAround(this.children.entries,f,p),this},rotateAroundDistance:function(f,p,v){return h.RotateAroundDistance(this.children.entries,f,p,v),this},setAlpha:function(f,p){return h.SetAlpha(this.children.entries,f,p),this},setTint:function(f,p,v,m){return h.SetTint(this.children.entries,f,p,v,m),this},setOrigin:function(f,p,v,m){return h.SetOrigin(this.children.entries,f,p,v,m),this},scaleX:function(f,p){return h.ScaleX(this.children.entries,f,p),this},scaleY:function(f,p){return h.ScaleY(this.children.entries,f,p),this},scaleXY:function(f,p,v,m){return h.ScaleXY(this.children.entries,f,p,v,m),this},setDepth:function(f,p){return h.SetDepth(this.children.entries,f,p),this},setBlendMode:function(f){return h.SetBlendMode(this.children.entries,f),this},setHitArea:function(f,p){return h.SetHitArea(this.children.entries,f,p),this},shuffle:function(){return h.Shuffle(this.children.entries),this},kill:function(f){this.children.contains(f)&&f.setActive(!1)},killAndHide:function(f){this.children.contains(f)&&(f.setActive(!1),f.setVisible(!1))},setVisible:function(f,p,v){return h.SetVisible(this.children.entries,f,p,v),this},toggleVisible:function(){return h.ToggleVisible(this.children.entries),this},destroy:function(f,p){void 0===f&&(f=!1),void 0===p&&(p=!1),this.scene&&!this.ignoreDestroy&&(this.emit(s.DESTROY,this),this.removeAllListeners(),this.scene.sys.updateList.remove(this),this.clear(p,f),this.scene=void 0,this.children=void 0)}});g.exports=d},function(g,b,t){var h=t(12);g.exports=function(n,s,l,e,r,o){for(var a=h.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*e),i=l.pathData,u=l.pathIndexes,c=0;c<u.length;c+=3){var d=2*u[c],f=2*u[c+1],p=2*u[c+2],v=i[0+d]-r,m=i[1+d]-o,T=i[0+f]-r,y=i[1+f]-o,x=i[0+p]-r,w=i[1+p]-o,E=s.getX(v,m),S=s.getY(v,m),A=s.getX(T,y),_=s.getY(T,y),C=s.getX(x,w),M=s.getY(x,w);n.batchTri(l,E,S,A,_,C,M,0,0,1,1,a,a,a,2)}}},function(g,b){g.exports=function(t,h,n){var s=t.x3-t.x1,l=t.y3-t.y1,e=t.x2-t.x1,r=t.y2-t.y1,o=h-t.x1,a=n-t.y1,i=s*s+l*l,u=s*e+l*r,c=s*o+l*a,d=e*e+r*r,f=e*o+r*a,p=i*d-u*u,v=0==p?0:1/p,m=(d*c-u*f)*v,T=(i*f-u*c)*v;return 0<=m&&0<=T&&m+T<1}},function(g,b,t){var h=t(0),n=t(10),s=t(3);function l(r,o,a,i){var u=r-a,c=o-i;return Math.sqrt(u*u+c*c)}var e=new h({initialize:function(r,o,a){this.vertex1=r,this.vertex2=o,this.vertex3=a,this.bounds=new n,this._inCenter=new s},getInCenter:function(r){void 0===r&&(r=!0);var o,a,i,u,c,d=this.vertex1,f=this.vertex2,p=this.vertex3,v=r?(o=d.x,a=d.y,i=f.x,u=f.y,c=p.x,p.y):(o=d.vx,a=d.vy,i=f.vx,u=f.vy,c=p.vx,p.vy),m=l(c,v,i,u),T=l(o,a,c,v),y=l(i,u,o,a),x=m+T+y;return this._inCenter.set((o*m+i*T+c*y)/x,(a*m+u*T+v*y)/x)},contains:function(r,o,a){var i,u,c,d,f,p,v=this.vertex1,m=this.vertex2,T=this.vertex3,y=v.vx,x=v.vy,w=m.vx,E=m.vy,S=T.vx,A=T.vy;a&&(y=v.vx*(i=a.a)+v.vy*(c=a.c)+(f=a.e),x=v.vx*(u=a.b)+v.vy*(d=a.d)+(p=a.f),w=m.vx*i+m.vy*c+f,E=m.vx*u+m.vy*d+p,S=T.vx*i+T.vy*c+f,A=T.vx*u+T.vy*d+p);var _=S-y,C=A-x,M=w-y,P=E-x,L=r-y,D=o-x,F=_*_+C*C,X=_*M+C*P,R=_*L+C*D,O=M*M+P*P,N=M*L+P*D,k=F*O-X*X,I=0==k?0:1/k,B=(O*R-X*N)*I,Y=(F*N-X*R)*I;return 0<=B&&0<=Y&&B+Y<1},isCounterClockwise:function(r){var o=this.vertex1,a=this.vertex2,i=this.vertex3,u=(a.vx-o.vx)*(i.vy-o.vy)-(a.vy-o.vy)*(i.vx-o.vx);return r<=0?0<=u:u<0},load:function(r,o,a,i,u){return a=this.vertex1.load(r,o,a,i,u),a=this.vertex2.load(r,o,a,i,u),this.vertex3.load(r,o,a,i,u)},transformCoordinatesLocal:function(r,o,a,i){return this.vertex1.transformCoordinatesLocal(r,o,a,i),this.vertex2.transformCoordinatesLocal(r,o,a,i),this.vertex3.transformCoordinatesLocal(r,o,a,i),this},updateBounds:function(){var r=this.vertex1,o=this.vertex2,a=this.vertex3,i=this.bounds;return i.x=Math.min(r.vx,o.vx,a.vx),i.y=Math.min(r.vy,o.vy,a.vy),i.width=Math.max(r.vx,o.vx,a.vx)-i.x,i.height=Math.max(r.vy,o.vy,a.vy)-i.y,this},isInView:function(r,o,a,i,u,c,d,f,p,v,m){var T=this.vertex1.update(u,c,d,f,p,v,m,i),y=this.vertex2.update(u,c,d,f,p,v,m,i),x=this.vertex3.update(u,c,d,f,p,v,m,i);if(T.ta<=0&&y.ta<=0&&x.ta<=0||o&&!this.isCounterClockwise(a))return!1;var w=this.bounds;return w.x=Math.min(T.tx,y.tx,x.tx),w.y=Math.min(T.ty,y.ty,x.ty),w.width=Math.max(T.tx,y.tx,x.tx)-w.x,w.height=Math.max(T.ty,y.ty,x.ty)-w.y,!(w.width<=0||w.height<=0||r.width<=0||r.height<=0||w.right<r.x||w.bottom<r.y||w.x>r.x+r.width||w.y>r.y+r.height)},translate:function(r,o){void 0===o&&(o=0);var a=this.vertex1,i=this.vertex2,u=this.vertex3;return a.x+=r,a.y+=o,i.x+=r,i.y+=o,u.x+=r,u.y+=o,this},x:{get:function(){return this.getInCenter().x},set:function(r){var o=this.getInCenter();this.translate(r-o.x,0)}},y:{get:function(){return this.getInCenter().y},set:function(r){var o=this.getInCenter();this.translate(0,r-o.y)}},alpha:{get:function(){return(this.vertex1.alpha+this.vertex2.alpha+this.vertex3.alpha)/3},set:function(r){this.vertex1.alpha=r,this.vertex2.alpha=r,this.vertex3.alpha=r}},depth:{get:function(){return(this.vertex1.vz+this.vertex2.vz+this.vertex3.vz)/3}},destroy:function(){this.vertex1=null,this.vertex2=null,this.vertex3=null}});g.exports=e},function(g,b,t){var h=t(0),n=t(12),s=t(39),l=new h({Extends:s,initialize:function(e,r,o,a,i,u,c,d,f,p){void 0===u&&(u=16777215),void 0===c&&(c=1),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),s.call(this,e,r,o),this.vx=0,this.vy=0,this.vz=0,this.nx=d,this.ny=f,this.nz=p,this.u=a,this.v=i,this.color=u,this.alpha=c,this.tx=0,this.ty=0,this.ta=0},setUVs:function(e,r){return this.u=e,this.v=r,this},transformCoordinatesLocal:function(e,r,o,a){var i=this.x,u=this.y,c=this.z,d=e.val,p=i*d[1]+u*d[5]+c*d[9]+d[13],v=i*d[2]+u*d[6]+c*d[10]+d[14],m=i*d[3]+u*d[7]+c*d[11]+d[15];this.vx=(i*d[0]+u*d[4]+c*d[8]+d[12])/m*r,this.vy=-p/m*o,this.vz=a<=0?v/m:-v/m},update:function(e,r,o,a,i,u,c,d){var f=this.vx*e+this.vy*o+i,p=this.vx*r+this.vy*a+u;return c&&(f=Math.round(f),p=Math.round(p)),this.tx=f,this.ty=p,this.ta=this.alpha*d,this},load:function(e,r,o,a,i){return e[++o]=this.tx,e[++o]=this.ty,e[++o]=this.u,e[++o]=this.v,e[++o]=a,e[++o]=i,r[++o]=n.getTintAppendFloatAlpha(this.color,this.ta),o}});g.exports=l},function(g,b,t){var h={};g.exports=h;var n=t(166),s=t(32),l=t(84),e=t(41);h.create=function(r){return s.extend({id:s.nextId(),type:"composite",parent:null,isModified:!1,bodies:[],constraints:[],composites:[],label:"Composite",plugin:{}},r)},h.setModified=function(r,o,a,i){if(n.trigger(r,"compositeModified",r),r.isModified=o,a&&r.parent&&h.setModified(r.parent,o,a,i),i)for(var u=0;u<r.composites.length;u++)h.setModified(r.composites[u],o,a,i)},h.add=function(r,o){var a=[].concat(o);n.trigger(r,"beforeAdd",{object:o});for(var i=0;i<a.length;i++){var u=a[i];switch(u.type){case"body":if(u.parent!==u){s.warn("Composite.add: skipped adding a compound body part (you must add its parent instead)");break}h.addBody(r,u);break;case"constraint":h.addConstraint(r,u);break;case"composite":h.addComposite(r,u);break;case"mouseConstraint":h.addConstraint(r,u.constraint)}}return n.trigger(r,"afterAdd",{object:o}),r},h.remove=function(r,o,a){var i=[].concat(o);n.trigger(r,"beforeRemove",{object:o});for(var u=0;u<i.length;u++){var c=i[u];switch(c.type){case"body":h.removeBody(r,c,a);break;case"constraint":h.removeConstraint(r,c,a);break;case"composite":h.removeComposite(r,c,a);break;case"mouseConstraint":h.removeConstraint(r,c.constraint)}}return n.trigger(r,"afterRemove",{object:o}),r},h.addComposite=function(r,o){return r.composites.push(o),o.parent=r,h.setModified(r,!0,!0,!1),r},h.removeComposite=function(r,o,a){var i=r.composites.indexOf(o);if(-1!==i&&(h.removeCompositeAt(r,i),h.setModified(r,!0,!0,!1)),a)for(var u=0;u<r.composites.length;u++)h.removeComposite(r.composites[u],o,!0);return r},h.removeCompositeAt=function(r,o){return r.composites.splice(o,1),h.setModified(r,!0,!0,!1),r},h.addBody=function(r,o){return r.bodies.push(o),h.setModified(r,!0,!0,!1),r},h.removeBody=function(r,o,a){var i=r.bodies.indexOf(o);if(-1!==i&&(h.removeBodyAt(r,i),h.setModified(r,!0,!0,!1)),a)for(var u=0;u<r.composites.length;u++)h.removeBody(r.composites[u],o,!0);return r},h.removeBodyAt=function(r,o){return r.bodies.splice(o,1),h.setModified(r,!0,!0,!1),r},h.addConstraint=function(r,o){return r.constraints.push(o),h.setModified(r,!0,!0,!1),r},h.removeConstraint=function(r,o,a){var i=r.constraints.indexOf(o);if(-1!==i&&h.removeConstraintAt(r,i),a)for(var u=0;u<r.composites.length;u++)h.removeConstraint(r.composites[u],o,!0);return r},h.removeConstraintAt=function(r,o){return r.constraints.splice(o,1),h.setModified(r,!0,!0,!1),r},h.clear=function(r,o,a){if(a)for(var i=0;i<r.composites.length;i++)h.clear(r.composites[i],o,!0);return o?r.bodies=r.bodies.filter(function(u){return u.isStatic}):r.bodies.length=0,r.constraints.length=0,r.composites.length=0,h.setModified(r,!0,!0,!1),r},h.allBodies=function(r){for(var o=[].concat(r.bodies),a=0;a<r.composites.length;a++)o=o.concat(h.allBodies(r.composites[a]));return o},h.allConstraints=function(r){for(var o=[].concat(r.constraints),a=0;a<r.composites.length;a++)o=o.concat(h.allConstraints(r.composites[a]));return o},h.allComposites=function(r){for(var o=[].concat(r.composites),a=0;a<r.composites.length;a++)o=o.concat(h.allComposites(r.composites[a]));return o},h.get=function(r,o,a){var i,u;switch(a){case"body":i=h.allBodies(r);break;case"constraint":i=h.allConstraints(r);break;case"composite":i=h.allComposites(r).concat(r)}return i&&0!==(u=i.filter(function(c){return c.id.toString()===o.toString()})).length?u[0]:null},h.move=function(r,o,a){return h.remove(r,o),h.add(a,o),r},h.rebase=function(r){for(var o=h.allBodies(r).concat(h.allConstraints(r)).concat(h.allComposites(r)),a=0;a<o.length;a++)o[a].id=s.nextId();return h.setModified(r,!0,!0,!1),r},h.translate=function(r,o,a){for(var i=a?h.allBodies(r):r.bodies,u=0;u<i.length;u++)e.translate(i[u],o);return h.setModified(r,!0,!0,!1),r},h.rotate=function(r,o,a,i){for(var u=Math.cos(o),c=Math.sin(o),d=i?h.allBodies(r):r.bodies,f=0;f<d.length;f++){var p=d[f],v=p.position.x-a.x,m=p.position.y-a.y;e.setPosition(p,{x:a.x+(v*u-m*c),y:a.y+(v*c+m*u)}),e.rotate(p,o)}return h.setModified(r,!0,!0,!1),r},h.scale=function(r,o,a,i,u){for(var c=u?h.allBodies(r):r.bodies,d=0;d<c.length;d++){var f=c[d];e.setPosition(f,{x:i.x+(f.position.x-i.x)*o,y:i.y+(f.position.y-i.y)*a}),e.scale(f,o,a)}return h.setModified(r,!0,!0,!1),r},h.bounds=function(r){for(var o=h.allBodies(r),a=[],i=0;i<o.length;i+=1){var u=o[i];a.push(u.bounds.min,u.bounds.max)}return l.create(a)}},function(g,b){g.exports=function(t,h,n){return 0<=t&&t<n.width&&0<=h&&h<n.height}},function(g,b,t){var h=t(0),n=t(29),s=t(2),l=new h({initialize:function(e){void 0===e&&(e={}),this.name=s(e,"name","layer"),this.x=s(e,"x",0),this.y=s(e,"y",0),this.width=s(e,"width",0),this.height=s(e,"height",0),this.tileWidth=s(e,"tileWidth",0),this.tileHeight=s(e,"tileHeight",0),this.baseTileWidth=s(e,"baseTileWidth",this.tileWidth),this.baseTileHeight=s(e,"baseTileHeight",this.tileHeight),this.orientation=s(e,"orientation",n.ORTHOGONAL),this.widthInPixels=s(e,"widthInPixels",this.width*this.baseTileWidth),this.heightInPixels=s(e,"heightInPixels",this.height*this.baseTileHeight),this.alpha=s(e,"alpha",1),this.visible=s(e,"visible",!0),this.properties=s(e,"properties",[]),this.indexes=s(e,"indexes",[]),this.collideIndexes=s(e,"collideIndexes",[]),this.callbacks=s(e,"callbacks",[]),this.bodies=s(e,"bodies",[]),this.data=s(e,"data",[]),this.tilemapLayer=s(e,"tilemapLayer",null),this.hexSideLength=s(e,"hexSideLength",0)}});g.exports=l},function(g,b,t){var h=t(0),n=t(29),s=t(2),l=new h({initialize:function(e){void 0===e&&(e={}),this.name=s(e,"name","map"),this.width=s(e,"width",0),this.height=s(e,"height",0),this.infinite=s(e,"infinite",!1),this.tileWidth=s(e,"tileWidth",0),this.tileHeight=s(e,"tileHeight",0),this.widthInPixels=s(e,"widthInPixels",this.width*this.tileWidth),this.heightInPixels=s(e,"heightInPixels",this.height*this.tileHeight),this.format=s(e,"format",null),this.orientation=s(e,"orientation",n.ORTHOGONAL),this.renderOrder=s(e,"renderOrder","right-down"),this.version=s(e,"version","1"),this.properties=s(e,"properties",{}),this.layers=s(e,"layers",[]),this.images=s(e,"images",[]),this.objects=s(e,"objects",{}),this.collision=s(e,"collision",{}),this.tilesets=s(e,"tilesets",[]),this.imageCollections=s(e,"imageCollections",[]),this.tiles=s(e,"tiles",[]),this.hexSideLength=s(e,"hexSideLength",0)}});g.exports=l},function(g,b,t){var h=new(t(0))({initialize:function(n,s,l,e,r,o,a,i){(void 0===l||l<=0)&&(l=32),(void 0===e||e<=0)&&(e=32),void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a={}),void 0===i&&(i={}),this.name=n,this.firstgid=s,this.tileWidth=l,this.tileHeight=e,this.tileMargin=r,this.tileSpacing=o,this.tileProperties=a,this.tileData=i,this.image=null,this.glTexture=null,this.rows=0,this.columns=0,this.total=0,this.texCoordinates=[]},getTileProperties:function(n){return this.containsTileIndex(n)?this.tileProperties[n-this.firstgid]:null},getTileData:function(n){return this.containsTileIndex(n)?this.tileData[n-this.firstgid]:null},getTileCollisionGroup:function(n){var s=this.getTileData(n);return s&&s.objectgroup?s.objectgroup:null},containsTileIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},getTileTextureCoordinates:function(n){return this.containsTileIndex(n)?this.texCoordinates[n-this.firstgid]:null},setImage:function(n){return this.image=n,this.glTexture=n.get().source.glTexture,this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setTileSize:function(n,s){return void 0!==n&&(this.tileWidth=n),void 0!==s&&(this.tileHeight=s),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},setSpacing:function(n,s){return void 0!==n&&(this.tileMargin=n),void 0!==s&&(this.tileSpacing=s),this.image&&this.updateTileData(this.image.source[0].width,this.image.source[0].height),this},updateTileData:function(n,s){var l=(s-2*this.tileMargin+this.tileSpacing)/(this.tileHeight+this.tileSpacing),e=(n-2*this.tileMargin+this.tileSpacing)/(this.tileWidth+this.tileSpacing);l%1==0&&e%1==0||console.warn("Image tile area not tile size multiple in: "+this.name),l=Math.floor(l),e=Math.floor(e),this.rows=l,this.columns=e,this.total=l*e,this.texCoordinates.length=0;for(var r=this.tileMargin,o=this.tileMargin,a=0;a<this.rows;a++){for(var i=0;i<this.columns;i++)this.texCoordinates.push({x:r,y:o}),r+=this.tileWidth+this.tileSpacing;r=this.tileMargin,o+=this.tileHeight+this.tileSpacing}return this}});g.exports=h},function(g,b){g.exports={TOP_LEFT:0,TOP_CENTER:1,TOP_RIGHT:2,LEFT_TOP:3,LEFT_CENTER:4,LEFT_BOTTOM:5,CENTER:6,RIGHT_TOP:7,RIGHT_CENTER:8,RIGHT_BOTTOM:9,BOTTOM_LEFT:10,BOTTOM_CENTER:11,BOTTOM_RIGHT:12}},function(g,b){g.exports=function(t,h,n){return void 0===n&&(n=1e-4),Math.abs(t-h)<n}},function(g,b,t){var h=t(0),n=t(11),s=t(15),l=t(1068),e=new h({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.GetBounds,n.Mask,n.Origin,n.Pipeline,n.ScrollFactor,n.Size,n.TextureCrop,n.Tint,n.Transform,n.Visible,l],initialize:function(r,o,a,i,u){s.call(this,r,"Image"),this._crop=this.resetCropObject(),this.setTexture(i,u),this.setPosition(o,a),this.setSizeToFrame(),this.setOriginFromFrame(),this.initPipeline()}});g.exports=e},function(g,b){g.exports=function(t,h){return t.hasOwnProperty(h)}},function(g,b,t){var h=t(77);g.exports=function(n,s){var l=h(n);for(var e in s)l.hasOwnProperty(e)||(l[e]=s[e]);return l}},function(g,b,t){var h={};g.exports=h;var n=t(64),s=t(83),l=t(165),e=t(84),r=t(271),o=t(32);h._warming=.4,h._torqueDampen=1,h._minLength=1e-6,h.create=function(a){var i=a;i.bodyA&&!i.pointA&&(i.pointA={x:0,y:0}),i.bodyB&&!i.pointB&&(i.pointB={x:0,y:0});var u=i.bodyA?s.add(i.bodyA.position,i.pointA):i.pointA,c=i.bodyB?s.add(i.bodyB.position,i.pointB):i.pointB,d=s.magnitude(s.sub(u,c));i.length=void 0!==i.length?i.length:d,i.id=i.id||o.nextId(),i.label=i.label||"Constraint",i.type="constraint",i.stiffness=i.stiffness||(0<i.length?1:.7),i.damping=i.damping||0,i.angularStiffness=i.angularStiffness||0,i.angleA=i.bodyA?i.bodyA.angle:i.angleA,i.angleB=i.bodyB?i.bodyB.angle:i.angleB,i.plugin={};var f={visible:!0,type:"line",anchors:!0,lineColor:null,lineOpacity:null,lineThickness:null,pinSize:null,anchorColor:null,anchorSize:null};return 0===i.length&&.1<i.stiffness?(f.type="pin",f.anchors=!1):i.stiffness<.9&&(f.type="spring"),i.render=o.extend(f,i.render),i},h.preSolveAll=function(a){for(var i=0;i<a.length;i+=1){var u=a[i],c=u.constraintImpulse;u.isStatic||0===c.x&&0===c.y&&0===c.angle||(u.position.x+=c.x,u.position.y+=c.y,u.angle+=c.angle)}},h.solveAll=function(a,i){for(var u=0;u<a.length;u+=1){var c=a[u],d=!c.bodyA||c.bodyA&&c.bodyA.isStatic,f=!c.bodyB||c.bodyB&&c.bodyB.isStatic;(d||f)&&h.solve(a[u],i)}for(u=0;u<a.length;u+=1)d=!(c=a[u]).bodyA||c.bodyA&&c.bodyA.isStatic,f=!c.bodyB||c.bodyB&&c.bodyB.isStatic,d||f||h.solve(a[u],i)},h.solve=function(a,i){var u,c,d,f,m,T,y,x,w,E,S,A,_,C=a.bodyA,M=a.bodyB,P=a.pointA,L=a.pointB;(C||M)&&(C&&!C.isStatic&&(s.rotate(P,C.angle-a.angleA,P),a.angleA=C.angle),M&&!M.isStatic&&(s.rotate(L,M.angle-a.angleB,L),a.angleB=M.angle),u=P,c=L,C&&(u=s.add(C.position,P)),M&&(c=s.add(M.position,L)),u&&c&&(d=s.sub(u,c),(f=s.magnitude(d))<h._minLength&&(f=h._minLength),m=s.mult(d,(f-a.length)/f*(a.stiffness<1?a.stiffness*i:a.stiffness)),y=(T=(C?C.inverseMass:0)+(M?M.inverseMass:0))+((C?C.inverseInertia:0)+(M?M.inverseInertia:0)),a.damping&&(E=s.create(),S=s.div(d,f),A=s.sub(M&&s.sub(M.position,M.positionPrev)||E,C&&s.sub(C.position,C.positionPrev)||E),_=s.dot(S,A)),C&&!C.isStatic&&(C.constraintImpulse.x-=m.x*(w=C.inverseMass/T),C.constraintImpulse.y-=m.y*w,C.position.x-=m.x*w,C.position.y-=m.y*w,a.damping&&(C.positionPrev.x-=a.damping*S.x*_*w,C.positionPrev.y-=a.damping*S.y*_*w),x=s.cross(P,m)/y*h._torqueDampen*C.inverseInertia*(1-a.angularStiffness),C.constraintImpulse.angle-=x,C.angle-=x),M&&!M.isStatic&&(M.constraintImpulse.x+=m.x*(w=M.inverseMass/T),M.constraintImpulse.y+=m.y*w,M.position.x+=m.x*w,M.position.y+=m.y*w,a.damping&&(M.positionPrev.x+=a.damping*S.x*_*w,M.positionPrev.y+=a.damping*S.y*_*w),x=s.cross(L,m)/y*h._torqueDampen*M.inverseInertia*(1-a.angularStiffness),M.constraintImpulse.angle+=x,M.angle+=x)))},h.postSolveAll=function(a){for(var i=0;i<a.length;i++){var u=a[i],c=u.constraintImpulse;if(!(u.isStatic||0===c.x&&0===c.y&&0===c.angle)){l.set(u,!1);for(var d=0;d<u.parts.length;d++){var f=u.parts[d];n.translate(f.vertices,c),0<d&&(f.position.x+=c.x,f.position.y+=c.y),0!==c.angle&&(n.rotate(f.vertices,c.angle,u.position),r.rotate(f.axes,c.angle),0<d&&s.rotateAbout(f.position,c.angle,u.position,f.position)),e.update(f.bounds,f.vertices,u.velocity)}c.angle*=h._warming,c.x*=h._warming,c.y*=h._warming}}},h.pointAWorld=function(a){return{x:(a.bodyA?a.bodyA.position.x:0)+a.pointA.x,y:(a.bodyA?a.bodyA.position.y:0)+a.pointA.y}},h.pointBWorld=function(a){return{x:(a.bodyB?a.bodyB.position.x:0)+a.pointB.x,y:(a.bodyB?a.bodyB.position.y:0)+a.pointB.y}}},function(g,b,t){var h=t(35),n=t(65),s=t(66),l=t(0),e=t(11),r=t(15),o=t(10),a=t(57),i=new l({Extends:r,Mixins:[e.Depth,e.GetBounds,e.Origin,e.Transform,e.ScrollFactor,e.Visible],initialize:function(u,c,d,f,p){void 0===f&&(f=1),void 0===p&&(p=f),r.call(this,u,"Zone"),this.setPosition(c,d),this.width=f,this.height=p,this.blendMode=h.NORMAL,this.updateDisplayOrigin()},displayWidth:{get:function(){return this.scaleX*this.width},set:function(u){this.scaleX=u/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(u){this.scaleY=u/this.height}},setSize:function(u,c,d){void 0===d&&(d=!0),this.width=u,this.height=c,this.updateDisplayOrigin();var f=this.input;return d&&f&&!f.customHitArea&&(f.hitArea.width=u,f.hitArea.height=c),this},setDisplaySize:function(u,c){return this.displayWidth=u,this.displayHeight=c,this},setCircleDropZone:function(u){return this.setDropZone(new n(0,0,u),s)},setRectangleDropZone:function(u,c){return this.setDropZone(new o(0,0,u,c),a)},setDropZone:function(u,c){return void 0===u?this.setRectangleDropZone(this.width,this.height):this.input||this.setInteractive(u,c,!0),this},setAlpha:function(){},setBlendMode:function(){},renderCanvas:function(u,c,d){d.addToRenderList(c)},renderWebGL:function(u,c,d){d.addToRenderList(c)}});g.exports=i},function(g,b){g.exports=function(t){return 2*(t.width+t.height)}},function(g,b){g.exports=function(t){for(var h=t.length-1;0<h;h--){var n=Math.floor(Math.random()*(h+1)),s=t[h];t[h]=t[n],t[n]=s}return t}},function(g,b,t){g.exports={ADD_ANIMATION:t(724),ANIMATION_COMPLETE:t(725),ANIMATION_COMPLETE_KEY:t(726),ANIMATION_REPEAT:t(727),ANIMATION_RESTART:t(728),ANIMATION_START:t(729),ANIMATION_STOP:t(730),ANIMATION_UPDATE:t(731),PAUSE_ALL:t(732),REMOVE_ANIMATION:t(733),RESUME_ALL:t(734)}},function(g,b,t){var h=t(0),n=t(11),s=t(36),l=t(9),e=t(37),r=t(10),o=t(25),a=t(187),i=t(3),u=new h({Extends:l,Mixins:[n.Alpha,n.Visible],initialize:function(c,d,f,p){void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),l.call(this),this.id=0,this.name="",this.roundPixels=!1,this.useBounds=!1,this.worldView=new r,this.dirty=!0,this._x=c,this._y=d,this._width=f,this._height=p,this._bounds=new r,this._scrollX=0,this._scrollY=0,this._zoomX=1,this._zoomY=1,this._rotation=0,this.matrix=new o,this.transparent=!0,this.backgroundColor=a("rgba(0,0,0,0)"),this.disableCull=!1,this.culledObjects=[],this.midPoint=new i(f/2,p/2),this.originX=.5,this.originY=.5,this._customViewport=!1,this.mask=null,this._maskCamera=null,this.renderList=[]},addToRenderList:function(c){this.renderList.push(c)},setOrigin:function(c,d){return void 0===c&&(c=.5),void 0===d&&(d=c),this.originX=c,this.originY=d,this},getScroll:function(c,d,f){void 0===f&&(f=new i);var v=.5*this.height;return f.x=c-.5*this.width,f.y=d-v,this.useBounds&&(f.x=this.clampX(f.x),f.y=this.clampY(f.y)),f},centerOnX:function(c){var d=.5*this.width;return this.midPoint.x=c,this.scrollX=c-d,this.useBounds&&(this.scrollX=this.clampX(this.scrollX)),this},centerOnY:function(c){var d=.5*this.height;return this.midPoint.y=c,this.scrollY=c-d,this.useBounds&&(this.scrollY=this.clampY(this.scrollY)),this},centerOn:function(c,d){return this.centerOnX(c),this.centerOnY(d),this},centerToBounds:function(){var c,d,f;return this.useBounds&&(d=.5*this.width,f=.5*this.height,this.midPoint.set((c=this._bounds).centerX,c.centerY),this.scrollX=c.centerX-d,this.scrollY=c.centerY-f),this},centerToSize:function(){return this.scrollX=.5*this.width,this.scrollY=.5*this.height,this},cull:function(c){if(this.disableCull)return c;var d=this.matrix.matrix,f=d[0],p=d[1],v=d[2],m=d[3];if(!(f*m-p*v))return c;for(var T=d[4],y=d[5],x=this.scrollX,w=this.scrollY,A=this.y,_=A+this.height,C=this.x,M=C+this.width,P=this.culledObjects,L=c.length,D=P.length=0;D<L;++D){var F,X,R,O,N=c[D];N.hasOwnProperty("width")&&!N.parentContainer?C<((R=N.x-x*N.scrollFactorX-(F=N.width)*N.originX)+F)*f+((O=N.y-w*N.scrollFactorY-(X=N.height)*N.originY)+X)*v+T&&R*f+O*v+T<M&&A<(R+F)*p+(O+X)*m+y&&R*p+O*m+y<_&&P.push(N):P.push(N)}return P},getWorldPoint:function(c,d,f){void 0===f&&(f=new i);var p=this.matrix.matrix,v=p[0],m=p[1],T=p[2],y=p[3],x=p[4],w=p[5],E=v*y-m*T;if(!E)return f.x=c,f.y=d,f;var S=y*(E=1/E),A=-m*E,_=-T*E,C=v*E,M=(T*w-y*x)*E,P=(m*x-v*w)*E,L=Math.cos(this.rotation),D=Math.sin(this.rotation),R=this.scrollX,O=this.scrollY,N=c+(R*L-O*D)*this.zoomX,k=d+(R*D+O*L)*this.zoomY;return f.x=N*S+k*_+M,f.y=N*A+k*C+P,f},ignore:function(c){var d=this.id;Array.isArray(c)||(c=[c]);for(var f=0;f<c.length;f++){var p=c[f];Array.isArray(p)?this.ignore(p):p.isParent?this.ignore(p.getChildren()):p.cameraFilter|=d}return this},preRender:function(){this.renderList.length=0;var c=this.width,d=this.height,f=.5*c,p=.5*d,v=this.zoomX,m=this.zoomY,T=this.matrix,y=c*this.originX,x=d*this.originY,w=this.scrollX,E=this.scrollY;this.useBounds&&(w=this.clampX(w),E=this.clampY(E)),this.roundPixels&&(y=Math.round(y),x=Math.round(x));var S=(this.scrollX=w)+f,A=(this.scrollY=E)+p;this.midPoint.set(S,A);var _=c/v,C=d/m;this.worldView.setTo(S-_/2,A-C/2,_,C),T.applyITRS(this.x+y,this.y+x,this.rotation,v,m),T.translate(-y,-x)},clampX:function(c){var d=this._bounds,f=this.displayWidth,p=d.x+(f-this.width)/2,v=Math.max(p,p+d.width-f);return c<p?c=p:v<c&&(c=v),c},clampY:function(c){var d=this._bounds,f=this.displayHeight,p=d.y+(f-this.height)/2,v=Math.max(p,p+d.height-f);return c<p?c=p:v<c&&(c=v),c},removeBounds:function(){return this.useBounds=!1,this.dirty=!0,this._bounds.setEmpty(),this},setAngle:function(c){return void 0===c&&(c=0),this.rotation=s(c),this},setBackgroundColor:function(c){return void 0===c&&(c="rgba(0,0,0,0)"),this.backgroundColor=a(c),this.transparent=0===this.backgroundColor.alpha,this},setBounds:function(c,d,f,p,v){return void 0===v&&(v=!1),this._bounds.setTo(c,d,f,p),this.dirty=!0,this.useBounds=!0,v?this.centerToBounds():(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},getBounds:function(c){void 0===c&&(c=new r);var d=this._bounds;return c.setTo(d.x,d.y,d.width,d.height),c},setName:function(c){return void 0===c&&(c=""),this.name=c,this},setPosition:function(c,d){return void 0===d&&(d=c),this.x=c,this.y=d,this},setRotation:function(c){return void 0===c&&(c=0),this.rotation=c,this},setRoundPixels:function(c){return this.roundPixels=c,this},setScene:function(c){this.scene&&this._customViewport&&this.sceneManager.customViewports--;var d=(this.scene=c).sys;return this.sceneManager=d.game.scene,this.scaleManager=d.scale,this.cameraManager=d.cameras,this.updateSystem(),this},setScroll:function(c,d){return void 0===d&&(d=c),this.scrollX=c,this.scrollY=d,this},setSize:function(c,d){return void 0===d&&(d=c),this.width=c,this.height=d,this},setViewport:function(c,d,f,p){return this.x=c,this.y=d,this.width=f,this.height=p,this},setZoom:function(c,d){return void 0===c&&(c=1),void 0===d&&(d=c),0===c&&(c=.001),0===d&&(d=.001),this.zoomX=c,this.zoomY=d,this},setMask:function(c,d){return void 0===d&&(d=!0),this.mask=c,this._maskCamera=d?this.cameraManager.default:this,this},clearMask:function(c){return void 0===c&&(c=!1),c&&this.mask&&this.mask.destroy(),this.mask=null,this},toJSON:function(){var c={name:this.name,x:this.x,y:this.y,width:this.width,height:this.height,zoom:this.zoom,rotation:this.rotation,roundPixels:this.roundPixels,scrollX:this.scrollX,scrollY:this.scrollY,backgroundColor:this.backgroundColor.rgba};return this.useBounds&&(c.bounds={x:this._bounds.x,y:this._bounds.y,width:this._bounds.width,height:this._bounds.height}),c},update:function(){},updateSystem:function(){var c,d;this.scaleManager&&(d=this.sceneManager,(c=0!==this._x||0!==this._y||this.scaleManager.width!==this._width||this.scaleManager.height!==this._height)&&!this._customViewport?d.customViewports++:!c&&this._customViewport&&d.customViewports--,this.dirty=!0,this._customViewport=c)},destroy:function(){this.emit(e.DESTROY,this),this.removeAllListeners(),this.matrix.destroy(),this.culledObjects=[],this._customViewport&&this.sceneManager.customViewports--,this.renderList=[],this._bounds=null,this.scene=null,this.scaleManager=null,this.sceneManager=null,this.cameraManager=null},x:{get:function(){return this._x},set:function(c){this._x=c,this.updateSystem()}},y:{get:function(){return this._y},set:function(c){this._y=c,this.updateSystem()}},width:{get:function(){return this._width},set:function(c){this._width=c,this.updateSystem()}},height:{get:function(){return this._height},set:function(c){this._height=c,this.updateSystem()}},scrollX:{get:function(){return this._scrollX},set:function(c){this._scrollX=c,this.dirty=!0}},scrollY:{get:function(){return this._scrollY},set:function(c){this._scrollY=c,this.dirty=!0}},zoom:{get:function(){return(this._zoomX+this._zoomY)/2},set:function(c){this._zoomX=c,this._zoomY=c,this.dirty=!0}},zoomX:{get:function(){return this._zoomX},set:function(c){this._zoomX=c,this.dirty=!0}},zoomY:{get:function(){return this._zoomY},set:function(c){this._zoomY=c,this.dirty=!0}},rotation:{get:function(){return this._rotation},set:function(c){this._rotation=c,this.dirty=!0}},centerX:{get:function(){return this.x+.5*this.width}},centerY:{get:function(){return this.y+.5*this.height}},displayWidth:{get:function(){return this.width/this.zoomX}},displayHeight:{get:function(){return this.height/this.zoomY}}});g.exports=u},function(g,b,t){var h=t(334),n=t(335),s=t(336),l=t(337),e=t(338),r=t(339),o=t(340),a=t(341),i=t(342),u=t(343),c=t(344),d=t(345);g.exports={Power0:o,Power1:a.Out,Power2:l.Out,Power3:i.Out,Power4:u.Out,Linear:o,Quad:a.Out,Cubic:l.Out,Quart:i.Out,Quint:u.Out,Sine:c.Out,Expo:r.Out,Circ:s.Out,Elastic:e.Out,Back:h.Out,Bounce:n.Out,Stepped:d,"Quad.easeIn":a.In,"Cubic.easeIn":l.In,"Quart.easeIn":i.In,"Quint.easeIn":u.In,"Sine.easeIn":c.In,"Expo.easeIn":r.In,"Circ.easeIn":s.In,"Elastic.easeIn":e.In,"Back.easeIn":h.In,"Bounce.easeIn":n.In,"Quad.easeOut":a.Out,"Cubic.easeOut":l.Out,"Quart.easeOut":i.Out,"Quint.easeOut":u.Out,"Sine.easeOut":c.Out,"Expo.easeOut":r.Out,"Circ.easeOut":s.Out,"Elastic.easeOut":e.Out,"Back.easeOut":h.Out,"Bounce.easeOut":n.Out,"Quad.easeInOut":a.InOut,"Cubic.easeInOut":l.InOut,"Quart.easeInOut":i.InOut,"Quint.easeInOut":u.InOut,"Sine.easeInOut":c.InOut,"Expo.easeInOut":r.InOut,"Circ.easeInOut":s.InOut,"Elastic.easeInOut":e.InOut,"Back.easeInOut":h.InOut,"Bounce.easeInOut":n.InOut}},function(g,b){g.exports=function(t,h,n){return(h-t)*n+t}},function(g,b,t){var h,n=t(105),s={chrome:!1,chromeVersion:0,edge:!1,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,silk:!1,trident:!1,tridentVersion:0};g.exports=(h=navigator.userAgent,/Edge\/\d+/.test(h)?s.edge=!0:/Chrome\/(\d+)/.test(h)&&!n.windowsPhone?(s.chrome=!0,s.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(h)?(s.firefox=!0,s.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(h)&&n.iOS?s.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(h)?(s.ie=!0,s.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(h)?s.opera=!0:/Safari/.test(h)&&!n.windowsPhone?s.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(h)&&(s.ie=!0,s.trident=!0,s.tridentVersion=parseInt(RegExp.$1,10),s.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(h)&&(s.silk=!0),s)},function(g,b){g.exports=function(t,h){return Math.random()*(h-t)+t}},function(g,b){g.exports=function(t,h){return 0<t&&0==(t&t-1)&&0<h&&0==(h&h-1)}},function(g,b){g.exports=function(t,h,n,s){return void 0===n&&(n=0),0===h?t:(t-=n,t=h*Math.ceil(t/h),s?(n+t)/h:n+t)}},function(g,b,t){var h=new(t(0))({initialize:function(n,s,l,e){this.x=0,this.y=0,this.z=0,this.w=0,"object"==typeof n?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=s||0,this.z=l||0,this.w=e||0)},clone:function(){return new h(this.x,this.y,this.z,this.w)},copy:function(n){return this.x=n.x,this.y=n.y,this.z=n.z||0,this.w=n.w||0,this},equals:function(n){return this.x===n.x&&this.y===n.y&&this.z===n.z&&this.w===n.w},set:function(n,s,l,e){return"object"==typeof n?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this.w=n.w||0):(this.x=n||0,this.y=s||0,this.z=l||0,this.w=e||0),this},add:function(n){return this.x+=n.x,this.y+=n.y,this.z+=n.z||0,this.w+=n.w||0,this},subtract:function(n){return this.x-=n.x,this.y-=n.y,this.z-=n.z||0,this.w-=n.w||0,this},scale:function(n){return this.x*=n,this.y*=n,this.z*=n,this.w*=n,this},length:function(){var n=this.x,s=this.y,l=this.z,e=this.w;return Math.sqrt(n*n+s*s+l*l+e*e)},lengthSq:function(){var n=this.x,s=this.y,l=this.z,e=this.w;return n*n+s*s+l*l+e*e},normalize:function(){var n=this.x,s=this.y,l=this.z,e=this.w,r=n*n+s*s+l*l+e*e;return 0<r&&(r=1/Math.sqrt(r),this.x=n*r,this.y=s*r,this.z=l*r,this.w=e*r),this},dot:function(n){return this.x*n.x+this.y*n.y+this.z*n.z+this.w*n.w},lerp:function(n,s){void 0===s&&(s=0);var l=this.x,e=this.y,r=this.z,o=this.w;return this.x=l+s*(n.x-l),this.y=e+s*(n.y-e),this.z=r+s*(n.z-r),this.w=o+s*(n.w-o),this},multiply:function(n){return this.x*=n.x,this.y*=n.y,this.z*=n.z||1,this.w*=n.w||1,this},divide:function(n){return this.x/=n.x,this.y/=n.y,this.z/=n.z||1,this.w/=n.w||1,this},distance:function(n){var s=n.x-this.x,l=n.y-this.y,e=n.z-this.z||0,r=n.w-this.w||0;return Math.sqrt(s*s+l*l+e*e+r*r)},distanceSq:function(n){var s=n.x-this.x,l=n.y-this.y,e=n.z-this.z||0,r=n.w-this.w||0;return s*s+l*l+e*e+r*r},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},transformMat4:function(n){var s=this.x,l=this.y,e=this.z,r=this.w,o=n.val;return this.x=o[0]*s+o[4]*l+o[8]*e+o[12]*r,this.y=o[1]*s+o[5]*l+o[9]*e+o[13]*r,this.z=o[2]*s+o[6]*l+o[10]*e+o[14]*r,this.w=o[3]*s+o[7]*l+o[11]*e+o[15]*r,this},transformQuat:function(n){var s=this.x,l=this.y,e=this.z,r=n.x,o=n.y,a=n.z,i=n.w,u=i*s+o*e-a*l,c=i*l+a*s-r*e,d=i*e+r*l-o*s,f=-r*s-o*l-a*e;return this.x=u*i+f*-r+c*-a-d*-o,this.y=c*i+f*-o+d*-r-u*-a,this.z=d*i+f*-a+u*-o-c*-r,this},reset:function(){return this.x=0,this.y=0,this.z=0,this.w=0,this}});h.prototype.sub=h.prototype.subtract,h.prototype.mul=h.prototype.multiply,h.prototype.div=h.prototype.divide,h.prototype.dist=h.prototype.distance,h.prototype.distSq=h.prototype.distanceSq,h.prototype.len=h.prototype.length,h.prototype.lenSq=h.prototype.lengthSq,g.exports=h},function(g,b,t){var h=t(0),n=t(91),s=new h({initialize:function(l,e,r,o,a,i,u){void 0===o&&(o=1),void 0===a&&(a=0),void 0===i&&(i=!0),void 0===u&&(u=!1),this.renderer=l,this.framebuffer=null,this.texture=null,this.width=0,this.height=0,this.scale=o,this.minFilter=a,this.autoClear=i,this.autoResize=!1,this.resize(e,r),u&&this.setAutoResize(!0)},setAutoResize:function(l){return l&&!this.autoResize?(this.renderer.on(n.RESIZE,this.resize,this),this.autoResize=!0):!l&&this.autoResize&&(this.renderer.off(n.RESIZE,this.resize,this),this.autoResize=!1),this},resize:function(l,e){var r;return l*this.scale===this.width&&e*this.scale===this.height||((r=this.renderer).deleteFramebuffer(this.framebuffer),r.deleteTexture(this.texture),l*=this.scale,e*=this.scale,(l=Math.round(l))<=0&&(l=1),(e=Math.round(e))<=0&&(e=1),this.texture=r.createTextureFromSource(null,l,e,this.minFilter),this.framebuffer=r.createFramebuffer(l,e,this.texture,!1),this.width=l,this.height=e),this},bind:function(l,e,r){var o;void 0===l&&(l=!1),l&&this.renderer.flush(),e&&r&&this.resize(e,r),this.renderer.pushFramebuffer(this.framebuffer,!1,!1,!1),l&&this.adjustViewport(),this.autoClear&&((o=this.renderer.gl).clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT))},adjustViewport:function(){var l=this.renderer.gl;l.viewport(0,0,this.width,this.height),l.disable(l.SCISSOR_TEST)},clear:function(){var l=this.renderer,e=l.gl;l.pushFramebuffer(this.framebuffer),e.disable(e.SCISSOR_TEST),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),l.popFramebuffer(),l.resetScissor()},unbind:function(l){void 0===l&&(l=!1);var e=this.renderer;return l&&e.flush(),e.popFramebuffer()},destroy:function(){var l=this.renderer;l.deleteFramebuffer(this.framebuffer),l.deleteTexture(this.texture),l.off(n.RESIZE,this.resize,this),this.renderer=null,this.framebuffer=null,this.texture=null}});g.exports=s},function(g,b){g.exports=function(t,h){var n;if(h)"string"==typeof h?n=document.getElementById(h):"object"==typeof h&&1===h.nodeType&&(n=h);else if(t.parentElement||null===h)return t;return(n=n||document.body).appendChild(t),t}},function(g,b){g.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:42,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,NUMPAD_ZERO:96,NUMPAD_ONE:97,NUMPAD_TWO:98,NUMPAD_THREE:99,NUMPAD_FOUR:100,NUMPAD_FIVE:101,NUMPAD_SIX:102,NUMPAD_SEVEN:103,NUMPAD_EIGHT:104,NUMPAD_NINE:105,NUMPAD_ADD:107,NUMPAD_SUBTRACT:109,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SEMICOLON:186,PLUS:187,COMMA:188,MINUS:189,PERIOD:190,FORWARD_SLASH:191,BACK_SLASH:220,QUOTES:222,BACKTICK:192,OPEN_BRACKET:219,CLOSED_BRACKET:221,SEMICOLON_FIREFOX:59,COLON:58,COMMA_FIREFOX_WINDOWS:60,COMMA_FIREFOX:62,BRACKET_RIGHT_FIREFOX:174,BRACKET_LEFT_FIREFOX:175}},function(g,b){g.exports={PENDING:0,INIT:1,START:2,LOADING:3,CREATING:4,RUNNING:5,PAUSED:6,SLEEPING:7,SHUTDOWN:8,DESTROYED:9}},function(g,b,t){var h=t(0),n=t(77),s=t(9),l=t(70),e=t(22),r=t(1),o=t(207),a=t(428),i=new h({Extends:s,initialize:function(u){s.call(this),this.game=u,this.jsonCache=u.cache.json,this.sounds=[],this.mute=!1,this.volume=1,this.pauseOnBlur=!0,this._rate=1,this._detune=0,this.locked=this.locked||!1,this.unlocked=!1,u.events.on(e.BLUR,this.onGameBlur,this),u.events.on(e.FOCUS,this.onGameFocus,this),u.events.on(e.PRE_STEP,this.update,this),u.events.once(e.DESTROY,this.destroy,this)},add:r,addAudioSprite:function(u,c){void 0===c&&(c={});var d,f,p=this.add(u,c);for(var v in p.spritemap=this.jsonCache.get(u).spritemap,p.spritemap)p.spritemap.hasOwnProperty(v)&&((d=n(c)).loop=!!(f=p.spritemap[v]).hasOwnProperty("loop")&&f.loop,p.addMarker({name:v,start:f.start,duration:f.end-f.start,config:d}));return p},get:function(u){return a(this.sounds,"key",u)},getAll:function(u){return o(this.sounds,"key",u)},play:function(u,c){var d=this.add(u);return d.once(l.COMPLETE,d.destroy,d),c?c.name?(d.addMarker(c),d.play(c.name)):d.play(c):d.play()},playAudioSprite:function(u,c,d){var f=this.addAudioSprite(u);return f.once(l.COMPLETE,f.destroy,f),f.play(c,d)},remove:function(u){var c=this.sounds.indexOf(u);return-1!==c&&(u.destroy(),this.sounds.splice(c,1),!0)},removeAll:function(){this.sounds.forEach(function(u){u.destroy()}),this.sounds.length=0},removeByKey:function(u){for(var c=0,d=this.sounds.length-1;0<=d;d--){var f=this.sounds[d];f.key===u&&(f.destroy(),this.sounds.splice(d,1),c++)}return c},pauseAll:function(){this.forEachActiveSound(function(u){u.pause()}),this.emit(l.PAUSE_ALL,this)},resumeAll:function(){this.forEachActiveSound(function(u){u.resume()}),this.emit(l.RESUME_ALL,this)},stopAll:function(){this.forEachActiveSound(function(u){u.stop()}),this.emit(l.STOP_ALL,this)},stopByKey:function(u){var c=0;return this.getAll(u).forEach(function(d){d.stop()&&c++}),c},unlock:r,onBlur:r,onFocus:r,onGameBlur:function(){this.pauseOnBlur&&this.onBlur()},onGameFocus:function(){this.pauseOnBlur&&this.onFocus()},update:function(u,c){this.unlocked&&(this.unlocked=!1,this.locked=!1,this.emit(l.UNLOCKED,this));for(var d=this.sounds.length-1;0<=d;d--)this.sounds[d].pendingRemove&&this.sounds.splice(d,1);this.sounds.forEach(function(f){f.update(u,c)})},destroy:function(){this.game.events.off(e.BLUR,this.onGameBlur,this),this.game.events.off(e.FOCUS,this.onGameFocus,this),this.game.events.off(e.PRE_STEP,this.update,this),this.removeAllListeners(),this.removeAll(),this.sounds.length=0,this.sounds=null,this.game=null},forEachActiveSound:function(u,c){var d=this;this.sounds.forEach(function(f,p){f&&!f.pendingRemove&&u.call(c||d,f,p,d.sounds)})},setRate:function(u){return this.rate=u,this},rate:{get:function(){return this._rate},set:function(u){this._rate=u,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(l.GLOBAL_RATE,this,u)}},setDetune:function(u){return this.detune=u,this},detune:{get:function(){return this._detune},set:function(u){this._detune=u,this.forEachActiveSound(function(c){c.calculateRate()}),this.emit(l.GLOBAL_DETUNE,this,u)}}});g.exports=i},function(g,b,t){var h=t(0),n=t(9),s=t(70),l=t(17),e=t(1),r=new h({Extends:n,initialize:function(o,a,i){n.call(this),this.manager=o,this.key=a,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=this.duration||0,this.totalDuration=this.totalDuration||0,this.config={mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},this.currentConfig=this.config,this.config=l(this.config,i),this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:function(o){return!(!o||!o.name||"string"!=typeof o.name||(this.markers[o.name]?(console.error("addMarker "+o.name+" already exists in Sound"),1):(o=l(!0,{name:"",start:0,duration:this.totalDuration-(o.start||0),config:{mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0}},o),this.markers[o.name]=o,0)))},updateMarker:function(o){return!(!o||!o.name||"string"!=typeof o.name||(this.markers[o.name]?(this.markers[o.name]=l(!0,this.markers[o.name],o),0):(console.warn("Audio Marker: "+o.name+" missing in Sound: "+this.key),1)))},removeMarker:function(o){var a=this.markers[o];return a?(this.markers[o]=null,a):null},play:function(o,a){if(void 0===o&&(o=""),"object"==typeof o&&(a=o,o=""),"string"!=typeof o)return!1;if(o){if(!this.markers[o])return console.warn("Marker: "+o+" missing in Sound: "+this.key),!1;this.currentMarker=this.markers[o],this.currentConfig=this.currentMarker.config,this.duration=this.currentMarker.duration}else this.currentMarker=null,this.currentConfig=this.config,this.duration=this.totalDuration;return this.resetConfig(),this.currentConfig=l(this.currentConfig,a),this.isPlaying=!0,!(this.isPaused=!1)},pause:function(){return!(this.isPaused||!this.isPlaying)&&(this.isPlaying=!1,this.isPaused=!0)},resume:function(){return!(!this.isPaused||this.isPlaying||(this.isPlaying=!0,this.isPaused=!1))},stop:function(){return!(!this.isPaused&&!this.isPlaying||(this.isPlaying=!1,this.isPaused=!1,this.resetConfig(),0))},applyConfig:function(){this.mute=this.currentConfig.mute,this.volume=this.currentConfig.volume,this.rate=this.currentConfig.rate,this.detune=this.currentConfig.detune,this.loop=this.currentConfig.loop,this.pan=this.currentConfig.pan},resetConfig:function(){this.currentConfig.seek=0,this.currentConfig.delay=0},update:e,calculateRate:function(){var a=Math.pow(1.0005777895065548,this.currentConfig.detune+this.manager.detune);this.totalRate=this.currentConfig.rate*this.manager.rate*a},destroy:function(){this.pendingRemove||(this.emit(s.DESTROY,this),this.pendingRemove=!0,this.manager=null,this.key="",this.removeAllListeners(),this.isPlaying=!1,this.isPaused=!1,this.config=null,this.currentConfig=null,this.markers=null,this.currentMarker=null)}});g.exports=r},function(g,b,t){var h=t(209),n=t(435);g.exports=function(s,l){if(void 0===l&&(l=90),!h(s))return null;if("string"!=typeof l&&(l=(l%360+360)%360),90===l||-270===l||"rotateLeft"===l)(s=n(s)).reverse();else if(-90===l||270===l||"rotateRight"===l)s.reverse(),s=n(s);else if(180===Math.abs(l)||"rotate180"===l){for(var e=0;e<s.length;e++)s[e].reverse();s.reverse()}return s}},function(g,b,t){var h=t(0),n=t(18),s=t(11),l=t(15),e=t(1043),r=t(1044),o=t(212),a=t(10),i=t(1045),u=new h({Extends:l,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Texture,s.Tint,s.Transform,s.Visible,i],initialize:function(c,d,f,p,v,m,T){void 0===v&&(v=""),void 0===T&&(T=0),l.call(this,c,"BitmapText"),this.font=p;var y=this.scene.sys.cache.bitmapFont.get(p);y||console.warn("Invalid BitmapText key: "+p),this.fontData=y.data,this._text="",this._fontSize=m||this.fontData.size,this._letterSpacing=0,this._align=T,this._bounds=e(),this._dirty=!0,this._maxWidth=0,this.wordWrapCharCode=32,this.charColors=[],this.dropShadowX=0,this.dropShadowY=0,this.dropShadowColor=0,this.dropShadowAlpha=.5,this.fromAtlas=y.fromAtlas,this.setTexture(y.texture,y.frame),this.setPosition(d,f),this.setOrigin(0,0),this.initPipeline(),this.setText(v)},setLeftAlign:function(){return this._align=u.ALIGN_LEFT,this._dirty=!0,this},setCenterAlign:function(){return this._align=u.ALIGN_CENTER,this._dirty=!0,this},setRightAlign:function(){return this._align=u.ALIGN_RIGHT,this._dirty=!0,this},setFontSize:function(c){return this._fontSize=c,this._dirty=!0,this},setLetterSpacing:function(c){return void 0===c&&(c=0),this._letterSpacing=c,this._dirty=!0,this},setText:function(c){return c||0===c||(c=""),Array.isArray(c)&&(c=c.join("\n")),c!==this.text&&(this._text=c.toString(),this._dirty=!0,this.updateDisplayOrigin()),this},setDropShadow:function(c,d,f,p){return void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=.5),this.dropShadowX=c,this.dropShadowY=d,this.dropShadowColor=f,this.dropShadowAlpha=p,this},setCharacterTint:function(c,d,f,p,v,m,T){void 0===c&&(c=0),void 0===d&&(d=1),void 0===f&&(f=!1),void 0===p&&(p=-1),void 0===v&&(T=m=v=p);var y=this.text.length;-1===d&&(d=y),c<0&&(c=y+c),c=n(c,0,y-1);for(var x=n(c+d,c,y),w=this.charColors,E=c;E<x;E++){var S,A=w[E];-1===p?w[E]=null:(S=f?1:0,A?(A.tintEffect=S,A.tintTL=p,A.tintTR=v,A.tintBL=m,A.tintBR=T):w[E]={tintEffect:S,tintTL:p,tintTR:v,tintBL:m,tintBR:T})}return this},setWordTint:function(c,d,f,p,v,m,T){void 0===d&&(d=1);for(var y=this.getTextBounds().words,x="number"==typeof c,w=0,E=0;E<y.length;E++){var S=y[E];if((x&&E===c||!x&&S.word===c)&&(this.setCharacterTint(S.i,S.word.length,f,p,v,m,T),++w===d))return this}return this},getTextBounds:function(c){var d=this._bounds;return(this._dirty||c||this.scaleX!==d.scaleX||this.scaleY!==d.scaleY)&&(e(this,c,!0,d),this._dirty=!1),d},getCharacterAt:function(c,d,f){for(var p=this.getLocalPoint(c,d,null,f),v=this.getTextBounds().characters,m=new a,T=0;T<v.length;T++){var y=v[T];if(m.setTo(y.x,y.t,y.r-y.x,y.b),m.contains(p.x,p.y))return y}return null},updateDisplayOrigin:function(){return this._dirty=!0,this.getTextBounds(!1),this},setFont:function(c,d,f){var p;return void 0===d&&(d=this._fontSize),void 0===f&&(f=this._align),c===this.font||(p=this.scene.sys.cache.bitmapFont.get(c))&&(this.font=c,this.fontData=p.data,this._fontSize=d,this._align=f,this.fromAtlas=!0===p.fromAtlas,this.setTexture(p.texture,p.frame),e(this,!1,!0,this._bounds)),this},setMaxWidth:function(c,d){return this._maxWidth=c,this._dirty=!0,void 0!==d&&(this.wordWrapCharCode=d),this},align:{set:function(c){this._align=c,this._dirty=!0},get:function(){return this._align}},text:{set:function(c){this.setText(c)},get:function(){return this._text}},fontSize:{set:function(c){this._fontSize=c,this._dirty=!0},get:function(){return this._fontSize}},letterSpacing:{set:function(c){this._letterSpacing=c,this._dirty=!0},get:function(){return this._letterSpacing}},maxWidth:{set:function(c){this._maxWidth=c,this._dirty=!0},get:function(){return this._maxWidth}},width:{get:function(){return this.getTextBounds(!1),this._bounds.global.width}},height:{get:function(){return this.getTextBounds(!1),this._bounds.global.height}},toJSON:function(){var c=s.ToJSON(this);return c.data={font:this.font,text:this.text,fontSize:this.fontSize,letterSpacing:this.letterSpacing,align:this.align},c},preDestroy:function(){this.charColors.length=0,this._bounds=null,this.fontData=null}});u.ALIGN_LEFT=0,u.ALIGN_CENTER=1,u.ALIGN_RIGHT=2,u.ParseFromAtlas=r,u.ParseXMLBitmapFont=o,g.exports=u},function(g,b,t){var h=new(t(0))({initialize:function(n){if(this.entries=[],Array.isArray(n))for(var s=0;s<n.length;s++)this.set(n[s])},set:function(n){return-1===this.entries.indexOf(n)&&this.entries.push(n),this},get:function(n,s){for(var l=0;l<this.entries.length;l++){var e=this.entries[l];if(e[n]===s)return e}},getArray:function(){return this.entries.slice(0)},delete:function(n){var s=this.entries.indexOf(n);return-1<s&&this.entries.splice(s,1),this},dump:function(){console.group("Set");for(var n=0;n<this.entries.length;n++)console.log(this.entries[n]);console.groupEnd()},each:function(n,s){var l,e=this.entries.slice(),r=e.length;if(s)for(l=0;l<r&&!1!==n.call(s,e[l],l);l++);else for(l=0;l<r&&!1!==n(e[l],l);l++);return this},iterate:function(n,s){var l,e=this.entries.length;if(s)for(l=0;l<e&&!1!==n.call(s,this.entries[l],l);l++);else for(l=0;l<e&&!1!==n(this.entries[l],l);l++);return this},iterateLocal:function(n){for(var s=[],l=1;l<arguments.length;l++)s.push(arguments[l]);var e=this.entries.length;for(l=0;l<e;l++){var r=this.entries[l];r[n].apply(r,s)}return this},clear:function(){return this.entries.length=0,this},contains:function(n){return-1<this.entries.indexOf(n)},union:function(n){var s=new h;return n.entries.forEach(function(l){s.set(l)}),this.entries.forEach(function(l){s.set(l)}),s},intersect:function(n){var s=new h;return this.entries.forEach(function(l){n.contains(l)&&s.set(l)}),s},difference:function(n){var s=new h;return this.entries.forEach(function(l){n.contains(l)||s.set(l)}),s},size:{get:function(){return this.entries.length},set:function(n){return n<this.entries.length?this.entries.length=n:this.entries.length}}});g.exports=h},function(g,b,t){var h=t(0),n=t(11),s=t(15),l=t(189),e=t(92),r=t(1182),o=new h({Extends:s,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.GetBounds,n.Mask,n.Pipeline,n.ScrollFactor,n.Transform,n.Visible,r],initialize:function(a,i,u,c,d,f,p){void 0===c&&(c=16777215),void 0===d&&(d=128),void 0===f&&(f=1),void 0===p&&(p=.1),s.call(this,a,"PointLight"),this.initPipeline(e.POINTLIGHT_PIPELINE),this.setPosition(i,u),this.color=l(c),this.intensity=f,this.attenuation=p,this.width=2*d,this.height=2*d,this._radius=d},radius:{get:function(){return this._radius},set:function(a){this._radius=a,this.width=2*a,this.height=2*a}},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return this._radius}},displayOriginY:{get:function(){return this._radius}}});g.exports=o},function(g,b){g.exports=function(t,h){var n=h.width/2,s=h.height/2,l=Math.abs(t.x-h.x-n),e=Math.abs(t.y-h.y-s);if(n+t.radius<l||s+t.radius<e)return!1;if(l<=n||e<=s)return!0;var a=l-n,i=e-s;return a*a+i*i<=t.radius*t.radius}},function(g,b){g.exports=function(t,h){return!(t.width<=0||t.height<=0||h.width<=0||h.height<=0||t.right<h.x||t.bottom<h.y||t.x>h.right||t.y>h.bottom)}},function(g,b,t){var h=t(6),n={};g.exports={register:function(l,e,r,o,a){n[l]={plugin:e,mapping:r,settingsKey:o,configKey:a}},getPlugin:function(l){return n[l]},install:function(l){var e=l.scene.sys,r=e.settings.input,o=e.game.config;for(var a in n){var i=n[a].plugin,u=n[a].mapping;h(r,n[a].settingsKey,o[n[a].configKey])&&(l[u]=new i(l))}},remove:function(l){n.hasOwnProperty(l)&&delete n[l]}}},function(g,b,t){g.exports={ANY_KEY_DOWN:t(1323),ANY_KEY_UP:t(1324),COMBO_MATCH:t(1325),DOWN:t(1326),KEY_DOWN:t(1327),KEY_UP:t(1328),UP:t(1329)}},function(g,b){g.exports=function(t,h){return!!t.url&&(t.url.match(/^(?:blob:|data:|http:\/\/|https:\/\/|\/\/)/)?t.url:h+t.url)}},function(g,b){g.exports=function(t,h,n,s,l,e){return void 0===t&&(t=""),void 0===h&&(h=!0),void 0===n&&(n=""),void 0===s&&(s=""),void 0===l&&(l=0),void 0===e&&(e=!1),{responseType:t,async:h,user:n,password:s,timeout:l,headers:void 0,header:void 0,headerValue:void 0,requestedWith:!1,overrideMimeType:void 0,withCredentials:e}}},function(g,b,t){var h=t(0),n=t(243),s=t(73),l=new h({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(e,r,o,a,i){s.call(this,e,r,o,a,i),this.body=null}});g.exports=l},function(g,b,t){var h=t(119);g.exports=function(n,s,l,e){if(void 0===l&&(l=!1),h(n,s,e)){var r=e.data[s][n]||null;return r&&(-1!==r.index||l)?r:null}return null}},function(g,b){g.exports=function(t,h,n,s){var l,e,r,o=t.data,a=t.width,i=t.height,u=t.tilemapLayer,c=Math.max(0,h.left),d=Math.min(a,h.right),f=Math.max(0,h.top),p=Math.min(i,h.bottom);if(0===n)for(e=f;e<p;e++)for(l=c;o[e]&&l<d;l++)(r=o[e][l])&&-1!==r.index&&r.visible&&0!==r.alpha&&s.push(r);else if(1===n)for(e=f;e<p;e++)for(l=d;o[e]&&c<=l;l--)(r=o[e][l])&&-1!==r.index&&r.visible&&0!==r.alpha&&s.push(r);else if(2===n)for(e=p;f<=e;e--)for(l=c;o[e]&&l<d;l++)(r=o[e][l])&&-1!==r.index&&r.visible&&0!==r.alpha&&s.push(r);else if(3===n)for(e=p;f<=e;e--)for(l=d;o[e]&&c<=l;l--)(r=o[e][l])&&-1!==r.index&&r.visible&&0!==r.alpha&&s.push(r);return u.tilesDrawn=s.length,u.tilesTotal=a*i,s}},function(g,b){g.exports=function(t,h,n){var s=n.collideIndexes.indexOf(t);h&&-1===s?n.collideIndexes.push(t):h||-1===s||n.collideIndexes.splice(s,1)}},function(g,b,t){var h=t(2);g.exports=function(n,s,l){if(!s)return{i:0,layers:n.layers,name:"",opacity:1,visible:!0,x:0,y:0};var e=s.x+h(s,"startx",0)*n.tilewidth+h(s,"offsetx",0),r=s.y+h(s,"starty",0)*n.tileheight+h(s,"offsety",0);return{i:0,layers:s.layers,name:l.name+s.name+"/",opacity:l.opacity*s.opacity,visible:l.visible&&s.visible,x:l.x+e,y:l.y+r}}},function(g,b){g.exports=function(t,h,n){return t.hasOwnProperty(h)?"function"==typeof t[h]?function(s,l,e,r,o,a){return t[h](s,l,e,r,o,a)}:function(){return t[h]}:"function"==typeof n?n:function(){return n}}},function(g,b,t){var h=t(265),n=t(13),s=t(99),l=t(80),e=t(162),r=t(583),o=t(263),a=t(6),i=t(264),u=t(266),c=t(268);g.exports=function(d,f,p){void 0===p&&(p=h);for(var v=p.targets?p.targets:o(f),m=r(f),T=e(f,"delay",p.delay),y=e(f,"duration",p.duration),x=a(f,"easeParams",p.easeParams),w=l(a(f,"ease",p.ease),x),E=e(f,"hold",p.hold),S=e(f,"repeat",p.repeat),A=e(f,"repeatDelay",p.repeatDelay),_=s(f,"yoyo",p.yoyo),C=s(f,"flipX",p.flipX),M=s(f,"flipY",p.flipY),P=[],L=0;L<m.length;L++)for(var D=m[L].key,F=m[L].value,X=0;X<v.length;X++){var R=i(D,F),O=c(v[X],X,D,R.getEnd,R.getStart,R.getActive,l(a(F,"ease",w),a(F,"easeParams",x)),e(F,"delay",T),e(F,"duration",y),s(F,"yoyo",_),e(F,"hold",E),e(F,"repeat",S),e(F,"repeatDelay",A),s(F,"flipX",C),s(F,"flipY",M));P.push(O)}var N=new u(d,P,v);N.offset=n(f,"offset",null),N.completeDelay=n(f,"completeDelay",0),N.loop=Math.round(n(f,"loop",0)),N.loopDelay=Math.round(n(f,"loopDelay",0)),N.paused=s(f,"paused",!1),N.useFrames=s(f,"useFrames",!1);for(var k=a(f,"callbackScope",N),I=[N,null],B=u.TYPES,Y=0;Y<B.length;Y++){var U,G,W=B[Y],z=a(f,W,!1);z&&(U=a(f,W+"Scope",k),G=a(f,W+"Params",[]),N.setCallback(W,z,I.concat(G),U))}return N}},function(g,b,t){var h=t(0),n=t(102),s=t(2),l=t(132),e=t(185),r=new h({initialize:function(o){this.parent=o,this.animationManager=o.scene.sys.anims,this.animationManager.on(l.REMOVE_ANIMATION,this.globalRemove,this),this.textureManager=this.animationManager.textureManager,this.anims=null,this.isPlaying=!1,this.hasStarted=!1,this.currentAnim=null,this.currentFrame=null,this.nextAnim=null,this.nextAnimsQueue=[],this.timeScale=1,this.frameRate=0,this.duration=0,this.msPerFrame=0,this.skipMissedFrames=!0,this.delay=0,this.repeat=0,this.repeatDelay=0,this.yoyo=!1,this.showOnStart=!1,this.hideOnComplete=!1,this.forward=!0,this.inReverse=!1,this.accumulator=0,this.nextTick=0,this.delayCounter=0,this.repeatCounter=0,this.pendingRepeat=!1,this._paused=!1,this._wasPlaying=!1,this._pendingStop=0},chain:function(o){var a=this.parent;if(void 0===o)return this.nextAnimsQueue.length=0,this.nextAnim=null,a;Array.isArray(o)||(o=[o]);for(var i=0;i<o.length;i++){var u=o[i];null===this.nextAnim?this.nextAnim=u:this.nextAnimsQueue.push(u)}return this.parent},getName:function(){return this.currentAnim?this.currentAnim.key:""},getFrameName:function(){return this.currentFrame?this.currentFrame.textureFrame:""},load:function(o){this.isPlaying&&this.stop();var a,i,u,c,d,f=this.animationManager,p="string"==typeof o?o:s(o,"key",null),v=this.exists(p)?this.get(p):f.get(p);return v?(a=(this.currentAnim=v).getTotalFrames(),i=s(o,"frameRate",v.frameRate),u=s(o,"duration",v.duration),v.calculateDuration(this,a,u,i),this.delay=s(o,"delay",v.delay),this.repeat=s(o,"repeat",v.repeat),this.repeatDelay=s(o,"repeatDelay",v.repeatDelay),this.yoyo=s(o,"yoyo",v.yoyo),this.showOnStart=s(o,"showOnStart",v.showOnStart),this.hideOnComplete=s(o,"hideOnComplete",v.hideOnComplete),this.skipMissedFrames=s(o,"skipMissedFrames",v.skipMissedFrames),this.timeScale=s(o,"timeScale",this.timeScale),(c=s(o,"startFrame",0))>v.getTotalFrames()&&(c=0),d=v.frames[c],0!==c||this.forward||(d=v.getLastFrame()),this.currentFrame=d):console.warn("Missing animation: "+p),this.parent},pause:function(o){return this._paused||(this._paused=!0,this._wasPlaying=this.isPlaying,this.isPlaying=!1),void 0!==o&&this.setCurrentFrame(o),this.parent},resume:function(o){return this._paused&&(this._paused=!1,this.isPlaying=this._wasPlaying),void 0!==o&&this.setCurrentFrame(o),this.parent},playAfterDelay:function(o,a){var i;return this.isPlaying?((i=this.nextAnim)&&this.nextAnimsQueue.unshift(i),this.nextAnim=o,this._pendingStop=1,this._pendingStopValue=a):(this.delayCounter=a,this.play(o,!0)),this.parent},playAfterRepeat:function(o,a){var i;return void 0===a&&(a=1),this.isPlaying?((i=this.nextAnim)&&this.nextAnimsQueue.unshift(i),-1!==this.repeatCounter&&a>this.repeatCounter&&(a=this.repeatCounter),this.nextAnim=o,this._pendingStop=2,this._pendingStopValue=a):this.play(o),this.parent},play:function(o,a){void 0===a&&(a=!1);var i=this.currentAnim;if(a&&this.isPlaying&&i.key===("string"==typeof o?o:o.key))return this.parent;if(i&&this.isPlaying){var d=this.animationManager.getMix(i.key,o);if(0<d)return this.playAfterDelay(o,d)}return this.forward=!0,this.inReverse=!1,this._paused=!1,this._wasPlaying=!0,this.startAnimation(o)},playReverse:function(o,a){return void 0===a&&(a=!1),a&&this.isPlaying&&this.currentAnim.key===("string"==typeof o?o:o.key)?this.parent:(this.forward=!1,this.inReverse=!0,this._paused=!1,this._wasPlaying=!0,this.startAnimation(o))},startAnimation:function(o){this.load(o);var a=this.currentAnim,i=this.parent;return a&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat,a.getFirstTick(this),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!1,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.delayCounter+=this.delay,0===this.delayCounter&&this.handleStart()),i},handleStart:function(){this.showOnStart&&this.parent.setVisible(!0),this.setCurrentFrame(this.currentFrame),this.hasStarted=!0,this.emitEvents(l.ANIMATION_START)},handleRepeat:function(){this.pendingRepeat=!1,this.emitEvents(l.ANIMATION_REPEAT)},handleStop:function(){this._pendingStop=0,this.isPlaying=!1,this.emitEvents(l.ANIMATION_STOP)},handleComplete:function(){this._pendingStop=0,this.isPlaying=!1,this.hideOnComplete&&this.parent.setVisible(!1),this.emitEvents(l.ANIMATION_COMPLETE,l.ANIMATION_COMPLETE_KEY)},emitEvents:function(o,a){var i=this.currentAnim,u=this.currentFrame,c=this.parent,d=u.textureFrame;c.emit(o,i,u,c,d),a&&c.emit(a+i.key,i,u,c,d)},reverse:function(){return this.isPlaying&&(this.inReverse=!this.inReverse,this.forward=!this.forward),this.parent},getProgress:function(){var o=this.currentFrame;if(!o)return 0;var a=o.progress;return this.inReverse&&(a*=-1),a},setProgress:function(o){return this.forward||(o=1-o),this.setCurrentFrame(this.currentAnim.getFrameByProgress(o)),this.parent},setRepeat:function(o){return this.repeatCounter=-1===o?Number.MAX_VALUE:o,this.parent},globalRemove:function(o,a){void 0===a&&(a=this.currentAnim),this.isPlaying&&a.key===this.currentAnim.key&&(this.stop(),this.setCurrentFrame(this.currentAnim.frames[0]))},restart:function(o,a){void 0===o&&(o=!1),void 0===a&&(a=!1);var i=this.currentAnim,u=this.parent;return i?(a&&(this.repeatCounter=-1===this.repeat?Number.MAX_VALUE:this.repeat),i.getFirstTick(this),this.emitEvents(l.ANIMATION_RESTART),this.isPlaying=!0,this.pendingRepeat=!1,this.hasStarted=!o,this._pendingStop=0,this._pendingStopValue=0,this._paused=!1,this.setCurrentFrame(i.frames[0]),this.parent):u},complete:function(){var o;return this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleComplete(),this.nextAnim&&(o=this.nextAnim,this.nextAnim=0<this.nextAnimsQueue.length?this.nextAnimsQueue.shift():null,this.play(o)),this.parent},stop:function(){var o;return this._pendingStop=0,this.isPlaying=!1,this.currentAnim&&this.handleStop(),this.nextAnim&&(o=this.nextAnim,this.nextAnim=this.nextAnimsQueue.shift(),this.play(o)),this.parent},stopAfterDelay:function(o){return this._pendingStop=1,this._pendingStopValue=o,this.parent},stopAfterRepeat:function(o){return void 0===o&&(o=1),-1!==this.repeatCounter&&o>this.repeatCounter&&(o=this.repeatCounter),this._pendingStop=2,this._pendingStopValue=o,this.parent},stopOnFrame:function(o){return this._pendingStop=3,this._pendingStopValue=o,this.parent},getTotalFrames:function(){return this.currentAnim?this.currentAnim.getTotalFrames():0},update:function(o,a){var i=this.currentAnim;if(this.isPlaying&&i&&!i.paused){if(this.accumulator+=a*this.timeScale,1===this._pendingStop&&(this._pendingStopValue-=a,this._pendingStopValue<=0))return this.stop();if(this.hasStarted){if(this.accumulator>=this.nextTick&&(this.forward?i.nextFrame(this):i.previousFrame(this),this.isPlaying&&0===this._pendingStop&&this.skipMissedFrames&&this.accumulator>this.nextTick))for(var u=0;this.forward?i.nextFrame(this):i.previousFrame(this),u++,this.isPlaying&&this.accumulator>this.nextTick&&u<60;);}else this.accumulator>=this.delayCounter&&(this.accumulator-=this.delayCounter,this.handleStart())}},setCurrentFrame:function(o){var a=this.parent;return this.currentFrame=o,a.texture=o.frame.texture,a.frame=o.frame,a.isCropped&&a.frame.updateCropUVs(a._crop,a.flipX,a.flipY),o.setAlpha&&(a.alpha=o.alpha),a.setSizeToFrame(),a._originComponent&&(o.frame.customPivot?a.setOrigin(o.frame.pivotX,o.frame.pivotY):a.updateDisplayOrigin()),this.isPlaying&&this.hasStarted&&(this.emitEvents(l.ANIMATION_UPDATE),3===this._pendingStop&&this._pendingStopValue===o&&this.stop()),a},nextFrame:function(){return this.currentAnim&&this.currentAnim.nextFrame(this),this.parent},previousFrame:function(){return this.currentAnim&&this.currentAnim.previousFrame(this),this.parent},get:function(o){return this.anims?this.anims.get(o):null},exists:function(o){return!!this.anims&&this.anims.has(o)},create:function(o){var a=o.key,i=!1;return a&&((i=this.get(a))||(i=new e(this,a,o),this.anims||(this.anims=new n),this.anims.set(a,i))),i},generateFrameNames:function(o,a){return this.animationManager.generateFrameNames(o,a)},generateFrameNumbers:function(o,a){return this.animationManager.generateFrameNumbers(o,a)},remove:function(o){var a=this.get(o);return a&&(this.currentAnim===a&&this.stop(),this.anims.delete(o)),a},destroy:function(){this.animationManager.off(l.REMOVE_ANIMATION,this.globalRemove,this),this.anims&&this.anims.clear(),this.animationManager=null,this.parent=null,this.nextAnim=null,this.nextAnimsQueue.length=0,this.currentAnim=null,this.currentFrame=null},isPaused:{get:function(){return this._paused}}});g.exports=r},function(g,b,t){var h={};g.exports=h;var n=t(166);h._motionWakeThreshold=.18,h._motionSleepThreshold=.08,h._minBias=.9,h.update=function(s,l){for(var e=l*l*l,r=0;r<s.length;r++){var o,a,i=s[r],u=i.speed*i.speed+i.angularSpeed*i.angularSpeed;0===i.force.x&&0===i.force.y?(o=Math.min(i.motion,u),a=Math.max(i.motion,u),i.motion=h._minBias*o+(1-h._minBias)*a,0<i.sleepThreshold&&i.motion<h._motionSleepThreshold*e?(i.sleepCounter+=1,i.sleepCounter>=i.sleepThreshold&&h.set(i,!0)):0<i.sleepCounter&&--i.sleepCounter):h.set(i,!1)}},h.afterCollisions=function(s,l){for(var e=l*l*l,r=0;r<s.length;r++){var o,a,i,u,c,d=s[r];d.isActive&&(a=(o=d.collision).bodyA.parent,i=o.bodyB.parent,a.isSleeping&&i.isSleeping||a.isStatic||i.isStatic||(a.isSleeping||i.isSleeping)&&(c=(u=a.isSleeping&&!a.isStatic?a:i)===a?i:a,!u.isStatic&&c.motion>h._motionWakeThreshold*e&&h.set(u,!1)))}},h.set=function(s,l){var e=s.isSleeping;l?(s.isSleeping=!0,s.sleepCounter=s.sleepThreshold,s.positionImpulse.x=0,s.positionImpulse.y=0,s.positionPrev.x=s.position.x,s.positionPrev.y=s.position.y,s.anglePrev=s.angle,s.speed=0,s.angularSpeed=0,s.motion=0,e||n.trigger(s,"sleepStart")):(s.isSleeping=!1,s.sleepCounter=0,e&&n.trigger(s,"sleepEnd"))}},function(g,b,t){var h={};g.exports=h;var n=t(32);h.on=function(s,l,e){for(var r,o=l.split(" "),a=0;a<o.length;a++)r=o[a],s.events=s.events||{},s.events[r]=s.events[r]||[],s.events[r].push(e);return e},h.off=function(s,l,e){if(l){"function"==typeof l&&(e=l,l=n.keys(s.events).join(" "));for(var r=l.split(" "),o=0;o<r.length;o++){var a=s.events[r[o]],i=[];if(e&&a)for(var u=0;u<a.length;u++)a[u]!==e&&i.push(a[u]);s.events[r[o]]=i}}else s.events={}},h.trigger=function(s,l,e){var r,o,a,i,u=s.events;if(u&&0<n.keys(u).length){e=e||{},r=l.split(" ");for(var c=0;c<r.length;c++)if(a=u[o=r[c]]){(i=n.clone(e,!1)).name=o,i.source=s;for(var d=0;d<a.length;d++)a[d].apply(s,[i])}}}},function(g,b,t){var h=t(175),n=t(92),s=t(74);g.exports={defaultPipeline:null,pipeline:null,hasPostPipeline:!1,postPipelines:null,pipelineData:null,initPipeline:function(e){void 0===e&&(e=n.MULTI_PIPELINE);var r=this.scene.sys.renderer;if(!r)return!1;var o=r.pipelines;if(this.postPipelines=[],this.pipelineData={},o){var a=o.get(e);if(a)return this.defaultPipeline=a,this.pipeline=a,!0}return!1},setPipeline:function(e,r,o){var a=this.scene.sys.renderer;if(!a)return this;var i,u=a.pipelines;return u&&((i=u.get(e))&&(this.pipeline=i),r&&(this.pipelineData=o?h(r):r)),this},setPostPipeline:function(e,r,o){var a=this.scene.sys.renderer;if(!a)return this;var i=a.pipelines;if(i){Array.isArray(e)||(e=[e]);for(var u=0;u<e.length;u++){var c=i.getPostPipeline(e[u],this);c&&this.postPipelines.push(c)}r&&(this.pipelineData=o?h(r):r)}return this.hasPostPipeline=0<this.postPipelines.length,this},setPipelineData:function(e,r){var o=this.pipelineData;return void 0===r?delete o[e]:o[e]=r,this},getPostPipeline:function(e){for(var r=this.postPipelines,o=[],a=0;a<r.length;a++){var i=r[a];("string"==typeof e&&i.name===e||i instanceof e)&&o.push(i)}return 1===o.length?o[0]:o},resetPipeline:function(e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),this.pipeline=this.defaultPipeline,e&&(this.postPipelines=[],this.hasPostPipeline=!1),r&&(this.pipelineData={}),null!==this.pipeline},resetPostPipeline:function(e){void 0===e&&(e=!1);for(var r=this.postPipelines,o=0;o<r.length;o++)r[o].destroy();this.postPipelines=[],this.hasPostPipeline=!1,e&&(this.pipelineData={})},removePostPipeline:function(e){for(var r=this.postPipelines,o=r.length-1;0<=o;o--){var a=r[o];("string"==typeof e&&a.name===e||"string"!=typeof e&&a instanceof e)&&(a.destroy(),s(r,o))}return this.hasPostPipeline=0<this.postPipelines.length,this},getPipelineName:function(){return this.pipeline.name}}},function(g,b){g.exports={DEFAULT:0,LINEAR:0,NEAREST:1}},function(g,b,t){var h=t(4);g.exports=function(n,s,l){return void 0===l&&(l=new h),l.x=n.x+n.radius*Math.cos(s),l.y=n.y+n.radius*Math.sin(s),l}},function(g,b,t){var h=t(4);g.exports=function(n,s){void 0===s&&(s=new h);var l=2*Math.PI*Math.random(),e=Math.random()+Math.random(),r=1<e?2-e:e,o=r*Math.cos(l),a=r*Math.sin(l);return s.x=n.x+o*n.radius,s.y=n.y+a*n.radius,s}},function(g,b,t){var h=t(130),n=t(4);g.exports=function(s,l,e){if(void 0===e&&(e=new n),l<=0||1<=l)return e.x=s.x,e.y=s.y,e;var r=h(s)*l;return.5<l?(r-=s.width+s.height)<=s.width?(e.x=s.right-r,e.y=s.bottom):(e.x=s.x,e.y=s.bottom-(r-s.width)):r<=s.width?(e.x=s.x+r,e.y=s.y):(e.x=s.right,e.y=s.y+(r-s.width)),e}},function(g,b,t){var h=t(67),n=t(4);g.exports=function(s,l,e,r){void 0===r&&(r=[]),!l&&0<e&&(l=h(s)/e);for(var o=s.x1,a=s.y1,i=s.x2,u=s.y2,c=0;c<l;c++){var d=c/l;r.push(new n(o+(i-o)*d,a+(u-a)*d))}return r}},function(g,b,t){var h=t(4);g.exports=function(n,s){void 0===s&&(s=new h);var l=Math.random();return s.x=n.x1+l*(n.x2-n.x1),s.y=n.y1+l*(n.y2-n.y1),s}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=n.x+Math.random()*n.width,s.y=n.y+Math.random()*n.height,s}},function(g,b){var t=function(h){var n,l;if("object"!=typeof h||null===h)return h;for(l in n=Array.isArray(h)?[]:{},h)n[l]=t(h[l]);return n};g.exports=t},function(g,b){g.exports=function(t){var h={name:t.name,type:t.type,x:t.x,y:t.y,depth:t.depth,scale:{x:t.scaleX,y:t.scaleY},origin:{x:t.originX,y:t.originY},flipX:t.flipX,flipY:t.flipY,rotation:t.rotation,alpha:t.alpha,visible:t.visible,blendMode:t.blendMode,textureKey:"",frameKey:"",data:{}};return t.texture&&(h.textureKey=t.texture.key,h.frameKey=t.frame.name),h}},function(g,b,t){var h=t(3);g.exports=function(n,s,l,e,r,o,a,i){void 0===i&&(i=new h);var u=Math.sin(r),c=Math.cos(r),d=c*o,f=u*o,p=-u*a,v=c*a,m=1/(d*v+p*-f);return i.x=v*m*n+-p*m*s+(e*p-l*v)*m,i.y=d*m*s+-f*m*n+(-e*d+l*f)*m,i}},function(g,b){g.exports=function(t,h){void 0===h&&(h=1);for(var n=null,s=0;s<h;s++)n=t.shift(),t.push(n);return n}},function(g,b){g.exports=function(t,h){void 0===h&&(h=1);for(var n=null,s=0;s<h;s++)n=t.pop(),t.unshift(n);return n}},function(g,b,t){var h=t(4);g.exports=function(n,s){void 0===s&&(s=new h);var l=Math.random()*Math.PI*2,e=Math.sqrt(Math.random());return s.x=n.x+e*Math.cos(l)*n.width/2,s.y=n.y+e*Math.sin(l)*n.height/2,s}},function(g,b,t){var h=t(4);g.exports=function(n,s){void 0===s&&(s=new h);var l=n.x2-n.x1,e=n.y2-n.y1,r=n.x3-n.x1,o=n.y3-n.y1,a=Math.random(),i=Math.random();return 1<=a+i&&(a=1-a,i=1-i),s.x=n.x1+(l*a+r*i),s.y=n.y1+(e*a+o*i),s}},function(g,b){g.exports=function(t,h,n,s,l){var e=s+Math.atan2(t.y-n,t.x-h);return t.x=h+l*Math.cos(e),t.y=n+l*Math.sin(e),t}},function(g,b){g.exports=function(t,h,n){return(t=Math.max(0,Math.min(1,(t-h)/(n-h))))*t*t*(t*(6*t-15)+10)}},function(g,b){g.exports=function(t,h,n){return t<=h?0:n<=t?1:(t=(t-h)/(n-h))*t*(3-2*t)}},function(g,b,t){var h=t(18),n=t(0),s=t(132),l=t(318),e=t(319),r=t(6),o=t(320),a=new n({initialize:function(i,u,c){this.manager=i,this.key=u,this.type="frame",this.frames=this.getFrames(i.textureManager,r(c,"frames",[]),r(c,"defaultTextureKey",null),r(c,"sortFrames",!0)),this.frameRate=r(c,"frameRate",null),this.duration=r(c,"duration",null),this.skipMissedFrames=r(c,"skipMissedFrames",!0),this.delay=r(c,"delay",0),this.repeat=r(c,"repeat",0),this.repeatDelay=r(c,"repeatDelay",0),this.yoyo=r(c,"yoyo",!1),this.showOnStart=r(c,"showOnStart",!1),this.hideOnComplete=r(c,"hideOnComplete",!1),this.paused=!1,this.calculateDuration(this,this.getTotalFrames(),this.duration,this.frameRate),this.manager.on&&(this.manager.on(s.PAUSE_ALL,this.pause,this),this.manager.on(s.RESUME_ALL,this.resume,this))},getTotalFrames:function(){return this.frames.length},calculateDuration:function(i,u,c,d){null===c&&null===d?(i.frameRate=24,i.duration=24/u*1e3):c&&null===d?(i.duration=c,i.frameRate=u/(c/1e3)):(i.frameRate=d,i.duration=u/d*1e3),i.msPerFrame=1e3/i.frameRate},addFrame:function(i){return this.addFrameAt(this.frames.length,i)},addFrameAt:function(i,u){var c,d,f=this.getFrames(this.manager.textureManager,u);return 0<f.length&&(0===i?this.frames=f.concat(this.frames):i===this.frames.length?this.frames=this.frames.concat(f):(c=this.frames.slice(0,i),d=this.frames.slice(i),this.frames=c.concat(f,d)),this.updateFrameSequence()),this},checkFrame:function(i){return 0<=i&&i<this.frames.length},getFirstTick:function(i){i.accumulator=0,i.nextTick=i.msPerFrame+i.currentFrame.duration},getFrameAt:function(i){return this.frames[i]},getFrames:function(i,u,c,d){void 0===d&&(d=!0);var f,p,v,m=[],T=1;if("string"==typeof u&&(v=i.get(p=u).getFrameNames(),d&&o(v),u=[],v.forEach(function(C){u.push({key:p,frame:C})})),!Array.isArray(u)||0===u.length)return m;for(_=0;_<u.length;_++){var y,x,w,E=u[_],S=r(E,"key",c);S&&(y=r(E,"frame",0),x=i.getFrame(S,y),(w=new e(S,y,T,x)).duration=r(E,"duration",0),w.isFirst=!f,f&&((f.nextFrame=w).prevFrame=f),m.push(w),f=w,T++)}if(0<m.length){w.isLast=!0,w.nextFrame=m[0],m[0].prevFrame=w;for(var A=1/(m.length-1),_=0;_<m.length;_++)m[_].progress=_*A}return m},getNextTick:function(i){i.accumulator-=i.nextTick,i.nextTick=i.msPerFrame+i.currentFrame.duration},getFrameByProgress:function(i){return i=h(i,0,1),l(i,this.frames,"progress")},nextFrame:function(i){var u=i.currentFrame;u.isLast?i.yoyo?this.handleYoyoFrame(i,!1):0<i.repeatCounter?i.inReverse&&i.forward?i.forward=!1:this.repeatAnimation(i):i.complete():this.updateAndGetNextTick(i,u.nextFrame)},handleYoyoFrame:function(i,u){if(i.inReverse===!(u=u||!1)&&0<i.repeatCounter)return 0!==i.repeatDelay&&!i.pendingRepeat||(i.forward=u),void this.repeatAnimation(i);var c;i.inReverse===u||0!==i.repeatCounter?(c=(i.forward=u)?i.currentFrame.nextFrame:i.currentFrame.prevFrame,this.updateAndGetNextTick(i,c)):i.complete()},getLastFrame:function(){return this.frames[this.frames.length-1]},previousFrame:function(i){var u=i.currentFrame;u.isFirst?i.yoyo?this.handleYoyoFrame(i,!0):0<i.repeatCounter?(i.inReverse&&!i.forward||(i.forward=!0),this.repeatAnimation(i)):i.complete():this.updateAndGetNextTick(i,u.prevFrame)},updateAndGetNextTick:function(i,u){i.setCurrentFrame(u),this.getNextTick(i)},removeFrame:function(i){var u=this.frames.indexOf(i);return-1!==u&&this.removeFrameAt(u),this},removeFrameAt:function(i){return this.frames.splice(i,1),this.updateFrameSequence(),this},repeatAnimation:function(i){if(2===i._pendingStop){if(0===i._pendingStopValue)return i.stop();i._pendingStopValue--}0<i.repeatDelay&&!i.pendingRepeat?(i.pendingRepeat=!0,i.accumulator-=i.nextTick,i.nextTick+=i.repeatDelay):(i.repeatCounter--,i.setCurrentFrame(i.forward?i.currentFrame.nextFrame:i.currentFrame.prevFrame),i.isPlaying&&(this.getNextTick(i),i.handleRepeat()))},toJSON:function(){var i={key:this.key,type:this.type,frames:[],frameRate:this.frameRate,duration:this.duration,skipMissedFrames:this.skipMissedFrames,delay:this.delay,repeat:this.repeat,repeatDelay:this.repeatDelay,yoyo:this.yoyo,showOnStart:this.showOnStart,hideOnComplete:this.hideOnComplete};return this.frames.forEach(function(u){i.frames.push(u.toJSON())}),i},updateFrameSequence:function(){for(var i,u=this.frames.length,c=1/(u-1),d=0;d<u;d++)(i=this.frames[d]).index=d+1,i.isFirst=!1,i.isLast=!1,i.progress=d*c,0===d?(i.isFirst=!0,1===u?(i.isLast=!0,(i.nextFrame=i).prevFrame=i):(i.isLast=!1,i.prevFrame=this.frames[u-1],i.nextFrame=this.frames[d+1])):d===u-1&&1<u?(i.isLast=!0,i.prevFrame=this.frames[u-2],i.nextFrame=this.frames[0]):1<u&&(i.prevFrame=this.frames[d-1],i.nextFrame=this.frames[d+1]);return this},pause:function(){return this.paused=!0,this},resume:function(){return this.paused=!1,this},destroy:function(){this.manager.off&&(this.manager.off(s.PAUSE_ALL,this.pause,this),this.manager.off(s.RESUME_ALL,this.resume,this)),this.manager.remove(this.key);for(var i=0;i<this.frames.length;i++)this.frames[i].destroy();this.frames=[],this.manager=null}});g.exports=a},function(g,b){g.exports=function(t,h,n,s){var l;if(void 0===h&&(h=0),void 0===n&&(n=" "),void 0===s&&(s=3),h+1>=(t=t.toString()).length)switch(s){case 1:t=new Array(h+1-t.length).join(n)+t;break;case 3:var e=Math.ceil((l=h-t.length)/2);t=new Array(l-e+1).join(n)+t+new Array(e+1).join(n);break;default:t+=new Array(h+1-t.length).join(n)}return t}},function(g,b,t){var h=t(327),n=t(189),s=t(331),l=t(332);g.exports=function(e){switch(typeof e){case"string":return("rgb"===e.substr(0,3).toLowerCase()?l:h)(e);case"number":return n(e);case"object":return s(e)}}},function(g,b,t){var h=t(103);function n(s,l,e,r){var o=(s+6*l)%6,a=Math.min(o,4-o,1);return Math.round(255*(r-r*e*Math.max(0,a)))}g.exports=function(s,l,e,r){void 0===l&&(l=1),void 0===e&&(e=1);var o=n(5,s,l,e),a=n(3,s,l,e),i=n(1,s,l,e);return r?r.setTo?r.setTo(o,a,i,r.alpha,!1):(r.r=o,r.g=a,r.b=i,r.color=h(o,a,i),r):{r:o,g:a,b:i,color:h(o,a,i)}}},function(g,b,t){var h=t(38),n=t(330);g.exports=function(s){var l=n(s);return new h(l.r,l.g,l.b,l.a)}},function(g,b){g.exports=function(t,h,n){return t.x=h-t.width/2,t.y=n-t.height/2,t}},function(g,b,t){var h=t(105),n=t(136),s=t(31),l={canvas:!1,canvasBitBltShift:null,file:!1,fileSystem:!1,getUserMedia:!0,littleEndian:!1,localStorage:!1,pointerLock:!1,support32bit:!1,vibration:!1,webGL:!1,worker:!1};g.exports=function(){if("function"==typeof importScripts)return l;l.canvas=!!window.CanvasRenderingContext2D;try{l.localStorage=!!localStorage.getItem}catch{l.localStorage=!1}l.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),l.fileSystem=!!window.requestFileSystem;var e,r,o,a=!1;return l.webGL=function(){if(window.WebGLRenderingContext)try{var i=s.createWebGL(this),u=i.getContext("webgl")||i.getContext("experimental-webgl"),c=s.create2D(this),d=c.getContext("2d").createImageData(1,1);return a=d.data instanceof Uint8ClampedArray,s.remove(i),s.remove(c),!!u}catch{return!1}return!1}(),l.worker=!!window.Worker,l.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,l.getUserMedia=l.getUserMedia&&!!navigator.getUserMedia&&!!window.URL,n.firefox&&n.firefoxVersion<21&&(l.getUserMedia=!1),!h.iOS&&(n.ie||n.firefox||n.chrome)&&(l.canvasBitBltShift=!0),(n.safari||n.mobileSafari)&&(l.canvasBitBltShift=!1),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(l.vibration=!0),typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint32Array<"u"&&(l.littleEndian=(e=new ArrayBuffer(4),r=new Uint8Array(e),o=new Uint32Array(e),r[0]=161,r[1]=178,r[2]=195,r[3]=212,3569595041===o[0]||2712847316!==o[0]&&null)),l.support32bit=typeof ArrayBuffer<"u"&&typeof Uint8ClampedArray<"u"&&typeof Int32Array<"u"&&null!==l.littleEndian&&a,l}()},function(g,b){var t="";function h(n){for(var s=["i","webkitI","msI","mozI","oI"],l=0;l<s.length;l++){var e=s[l]+"mageSmoothingEnabled";if(e in n)return e}return null}g.exports={disable:function(n){return""===t&&(t=h(n)),t&&(n[t]=!1),n},enable:function(n){return""===t&&(t=h(n)),t&&(n[t]=!0),n},getPrefix:h,isEnabled:function(n){return null!==t?n[t]:null}}},function(g,b,t){var h=t(14),n=t(17)(!1,n={Angle:t(812),Distance:t(821),Easing:t(826),Fuzzy:t(827),Interpolation:t(830),Pow2:t(835),Snap:t(837),RandomDataGenerator:t(839),Average:t(840),Bernstein:t(356),Between:t(195),CatmullRom:t(194),CeilTo:t(841),Clamp:t(18),DegToRad:t(36),Difference:t(842),Euler:t(843),Factorial:t(357),FloatBetween:t(137),FloorTo:t(844),FromPercent:t(98),GetSpeed:t(845),IsEven:t(846),IsEvenStrict:t(847),Linear:t(135),MaxAdd:t(848),Median:t(849),MinSub:t(850),Percent:t(851),RadToDeg:t(196),RandomXY:t(852),RandomXYZ:t(853),RandomXYZW:t(854),Rotate:t(362),RotateAround:t(308),RotateAroundDistance:t(182),RotateTo:t(855),RoundAwayFromZero:t(363),RoundTo:t(856),SinCosTableGenerator:t(857),SmootherStep:t(183),SmoothStep:t(184),ToXY:t(858),TransformXY:t(177),Within:t(859),Wrap:t(68),Vector2:t(3),Vector3:t(39),Vector4:t(140),Matrix3:t(364),Matrix4:t(69),Quaternion:t(365),RotateVec3:t(860)},h);g.exports=n},function(g,b){g.exports=function(t,h,n,s,l){var e=.5*(s-h),r=.5*(l-n),o=t*t;return(2*n-2*s+e+r)*(t*o)+(-3*n+3*s-2*e-r)*o+e*t+n}},function(g,b){g.exports=function(t,h){return Math.floor(Math.random()*(h-t+1)+t)}},function(g,b,t){var h=t(14);g.exports=function(n){return n*h.RAD_TO_DEG}},function(g,b,t){g.exports={Global:["game","anims","cache","plugins","registry","scale","sound","textures","renderer"],CoreScene:["EventEmitter","CameraManager","GameObjectCreator","GameObjectFactory","ScenePlugin","DisplayList","UpdateList"],DefaultScene:["Clock","DataManagerPlugin","InputPlugin","Loader","TweenManager","LightsPlugin"]}},function(g,b,t){var h=new(t(0))({initialize:function(){this._matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.alpha=1,this._dirty=!0},set:function(n){return this._matrix=n,this._dirty=!0,this},reset:function(){var n=this._matrix;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=0,n[5]=0,n[6]=1,n[7]=0,n[8]=0,n[9]=0,n[10]=0,n[11]=0,n[12]=1,n[13]=0,n[14]=0,n[15]=0,n[16]=0,n[17]=0,n[18]=1,n[19]=0,this._dirty=!0,this},getData:function(){var n;return this._dirty&&((n=new Float32Array(this._matrix))[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,this._data=n,this._dirty=!1),this._data},brightness:function(n,s){return void 0===n&&(n=0),void 0===s&&(s=!1),this.multiply([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],s)},saturate:function(n,s){void 0===n&&(n=0),void 0===s&&(s=!1);var l=2*n/3+1,e=-.5*(l-1);return this.multiply([l,e,e,0,0,e,l,e,0,0,e,e,l,0,0,0,0,0,1,0],s)},desaturate:function(n){return void 0===n&&(n=!1),this.saturate(-1,n)},hue:function(n,s){void 0===n&&(n=0),void 0===s&&(s=!1),n=n/180*Math.PI;var l=Math.cos(n),e=Math.sin(n);return this.multiply([.213+.787*l+-.213*e,.715+-.715*l+-.715*e,.072+-.072*l+.928*e,0,0,.213+-.213*l+.143*e,.715+.28500000000000003*l+.14*e,.072+-.072*l+-.283*e,0,0,.213+-.213*l+-.787*e,.715+-.715*l+.715*e,.072+.928*l+.072*e,0,0,0,0,0,1,0],s)},grayscale:function(n,s){return void 0===n&&(n=1),void 0===s&&(s=!1),this.saturate(-n,s)},blackWhite:function(n){return void 0===n&&(n=!1),this.multiply([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],n)},contrast:function(n,s){void 0===n&&(n=0),void 0===s&&(s=!1);var l=n+1,e=-.5*(l-1);return this.multiply([l,0,0,0,e,0,l,0,0,e,0,0,l,0,e,0,0,0,1,0],s)},negative:function(n){return void 0===n&&(n=!1),this.multiply([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],n)},desaturateLuminance:function(n){return void 0===n&&(n=!1),this.multiply([.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,.2764723,.929708,.0938197,0,-37.1,0,0,0,1,0],n)},sepia:function(n){return void 0===n&&(n=!1),this.multiply([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],n)},night:function(n,s){return void 0===n&&(n=.1),void 0===s&&(s=!1),this.multiply([-2*n,-n,0,0,0,-n,0,n,0,0,0,n,2*n,0,0,0,0,0,1,0],s)},lsd:function(n){return void 0===n&&(n=!1),this.multiply([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],n)},brown:function(n){return void 0===n&&(n=!1),this.multiply([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],n)},vintagePinhole:function(n){return void 0===n&&(n=!1),this.multiply([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],n)},kodachrome:function(n){return void 0===n&&(n=!1),this.multiply([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],n)},technicolor:function(n){return void 0===n&&(n=!1),this.multiply([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],n)},polaroid:function(n){return void 0===n&&(n=!1),this.multiply([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],n)},shiftToBGR:function(n){return void 0===n&&(n=!1),this.multiply([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],n)},multiply:function(n,s){s||this.reset();for(var l=this._matrix,e=[],r=0;r<20;r++)e[r]=l[r];return l[0]=e[0]*n[0]+e[1]*n[5]+e[2]*n[10]+e[3]*n[15],l[1]=e[0]*n[1]+e[1]*n[6]+e[2]*n[11]+e[3]*n[16],l[2]=e[0]*n[2]+e[1]*n[7]+e[2]*n[12]+e[3]*n[17],l[3]=e[0]*n[3]+e[1]*n[8]+e[2]*n[13]+e[3]*n[18],l[4]=e[0]*n[4]+e[1]*n[9]+e[2]*n[14]+e[3]*n[19]+e[4],l[5]=e[5]*n[0]+e[6]*n[5]+e[7]*n[10]+e[8]*n[15],l[6]=e[5]*n[1]+e[6]*n[6]+e[7]*n[11]+e[8]*n[16],l[7]=e[5]*n[2]+e[6]*n[7]+e[7]*n[12]+e[8]*n[17],l[8]=e[5]*n[3]+e[6]*n[8]+e[7]*n[13]+e[8]*n[18],l[9]=e[5]*n[4]+e[6]*n[9]+e[7]*n[14]+e[8]*n[19]+e[9],l[10]=e[10]*n[0]+e[11]*n[5]+e[12]*n[10]+e[13]*n[15],l[11]=e[10]*n[1]+e[11]*n[6]+e[12]*n[11]+e[13]*n[16],l[12]=e[10]*n[2]+e[11]*n[7]+e[12]*n[12]+e[13]*n[17],l[13]=e[10]*n[3]+e[11]*n[8]+e[12]*n[13]+e[13]*n[18],l[14]=e[10]*n[4]+e[11]*n[9]+e[12]*n[14]+e[13]*n[19]+e[14],l[15]=e[15]*n[0]+e[16]*n[5]+e[17]*n[10]+e[18]*n[15],l[16]=e[15]*n[1]+e[16]*n[6]+e[17]*n[11]+e[18]*n[16],l[17]=e[15]*n[2]+e[16]*n[7]+e[17]*n[12]+e[18]*n[17],l[18]=e[15]*n[3]+e[16]*n[8]+e[17]*n[13]+e[18]*n[18],l[19]=e[15]*n[4]+e[16]*n[9]+e[17]*n[14]+e[18]*n[19]+e[19],this._dirty=!0,this}});g.exports=h},function(g,b,t){var h=t(10),n=t(14);g.exports=function(s,l){if(void 0===l&&(l=new h),0===s.length)return l;for(var e,r,o,a=Number.MAX_VALUE,i=Number.MAX_VALUE,u=n.MIN_SAFE_INTEGER,c=n.MIN_SAFE_INTEGER,d=0;d<s.length;d++)e=s[d],o=Array.isArray(e)?(r=e[0],e[1]):(r=e.x,e.y),a=Math.min(a,r),i=Math.min(i,o),u=Math.max(u,r),c=Math.max(c,o);return l.x=a,l.y=i,l.width=u-a,l.height=c-i,l}},function(g,b,t){var h=t(0),n=t(1),s=new h({initialize:function(l,e,r){this._rgb=[0,0,0],this.onChangeCallback=n,this.dirty=!1,this.set(l,e,r)},set:function(l,e,r){return void 0===l&&(l=0),void 0===e&&(e=0),void 0===r&&(r=0),this._rgb=[l,e,r],this.onChange(),this},equals:function(l,e,r){var o=this._rgb;return o.r===l&&o.g===e&&o.b===r},onChange:function(){this.dirty=!0;var l=this._rgb;this.onChangeCallback.call(this,l[0],l[1],l[2])},r:{get:function(){return this._rgb[0]},set:function(l){this._rgb[0]=l,this.onChange()}},g:{get:function(){return this._rgb[1]},set:function(l){this._rgb[1]=l,this.onChange()}},b:{get:function(){return this._rgb[2]},set:function(l){this._rgb[2]=l,this.onChange()}},destroy:function(){this.onChangeCallback=null}});g.exports=s},function(g,b,t){var h={CENTER:t(403),ORIENTATION:t(404),SCALE_MODE:t(405),ZOOM:t(406)};g.exports=h},function(g,b){g.exports=function(t){t.parentNode&&t.parentNode.removeChild(t)}},function(g,b){g.exports={MOUSE_DOWN:0,MOUSE_MOVE:1,MOUSE_UP:2,TOUCH_START:3,TOUCH_MOVE:4,TOUCH_END:5,POINTER_LOCK_CHANGE:6,TOUCH_CANCEL:7,MOUSE_WHEEL:8}},function(g,b,t){var h=t(0),n=t(144),s=t(197),l=t(20),e=t(419),r=t(420),o=t(33),a=t(1),i=t(421),u=new h({initialize:function(c,d){this.scene=c,this.config=d,this.settings=i.create(d),this.sceneUpdate=a},init:function(c){this.settings.status=n.INIT,this.sceneUpdate=a,this.game=c,this.renderer=c.renderer,this.canvas=c.canvas,this.context=c.context,(this.plugins=c.plugins).addToScene(this,s.Global,[s.CoreScene,r(this),e(this)]),this.events.emit(l.BOOT,this),this.settings.isBooted=!0},step:function(c,d){var f=this.events;f.emit(l.PRE_UPDATE,c,d),f.emit(l.UPDATE,c,d),this.sceneUpdate.call(this.scene,c,d),f.emit(l.POST_UPDATE,c,d)},render:function(c){var d=this.displayList;d.depthSort(),this.events.emit(l.PRE_RENDER,c),this.cameras.render(c,d),this.events.emit(l.RENDER,c)},queueDepthSort:function(){this.displayList.queueDepthSort()},depthSort:function(){this.displayList.depthSort()},pause:function(c){var d=this.events,f=this.settings;return this.settings.active&&(f.status=n.PAUSED,f.active=!1,d.emit(l.PAUSE,this,c)),this},resume:function(c){var d=this.events,f=this.settings;return this.settings.active||(f.status=n.RUNNING,f.active=!0,d.emit(l.RESUME,this,c)),this},sleep:function(c){var d=this.events,f=this.settings;return f.status=n.SLEEPING,f.active=!1,f.visible=!1,d.emit(l.SLEEP,this,c),this},wake:function(c){var d=this.events,f=this.settings;return f.status=n.RUNNING,f.active=!0,f.visible=!0,d.emit(l.WAKE,this,c),f.isTransition&&d.emit(l.TRANSITION_WAKE,f.transitionFrom,f.transitionDuration),this},getData:function(){return this.settings.data},isSleeping:function(){return this.settings.status===n.SLEEPING},isActive:function(){return this.settings.status===n.RUNNING},isPaused:function(){return this.settings.status===n.PAUSED},isTransitioning:function(){return this.settings.isTransition||null!==this.scenePlugin._target},isTransitionOut:function(){return null!==this.scenePlugin._target&&0<this.scenePlugin._duration},isTransitionIn:function(){return this.settings.isTransition},isVisible:function(){return this.settings.visible},setVisible:function(c){return this.settings.visible=c,this},setActive:function(c,d){return c?this.resume(d):this.pause(d)},start:function(c){var d=this.events,f=this.settings;c&&(f.data=c),f.status=n.START,f.active=!0,f.visible=!0,d.emit(l.START,this),d.emit(l.READY,this,c)},shutdown:function(c){var d=this.events,f=this.settings;d.off(l.TRANSITION_INIT),d.off(l.TRANSITION_START),d.off(l.TRANSITION_COMPLETE),d.off(l.TRANSITION_OUT),f.status=n.SHUTDOWN,f.active=!1,f.visible=!1,this.renderer===o.WEBGL&&this.renderer.resetTextures(!0),d.emit(l.SHUTDOWN,this,c)},destroy:function(){var c=this.events,d=this.settings;d.status=n.DESTROYED,d.active=!1,d.visible=!1,c.emit(l.DESTROY,this),c.removeAllListeners();for(var f=["scene","game","anims","cache","plugins","registry","sound","textures","add","camera","displayList","events","make","scenePlugin","updateList"],p=0;p<f.length;p++)this[f[p]]=null}});g.exports=u},function(g,b){g.exports=function(t){return t&&t[0].toUpperCase()+t.slice(1)}},function(g,b,t){var h=t(33),n=t(0),s=t(109),l=t(424),e="Texture.frame missing: ",r=new n({initialize:function(o,a,i,u,c){Array.isArray(i)||(i=[i]),this.manager=o,this.key=a,this.source=[],this.dataSource=[],this.frames={},this.customData={},this.firstFrame="__BASE";for(var d=this.frameTotal=0;d<i.length;d++)this.source.push(new l(this,i[d],u,c))},add:function(o,a,i,u,c,d){if(this.has(o))return null;var f=new s(this,o,a,i,u,c,d);return this.frames[o]=f,"__BASE"===this.firstFrame&&(this.firstFrame=o),this.frameTotal++,f},remove:function(o){return!!this.has(o)&&(this.get(o).destroy(),delete this.frames[o],!0)},has:function(o){return this.frames[o]},get:function(o){var a=this.frames[o=o||this.firstFrame];return a||(console.warn(e+o),a=this.frames[this.firstFrame]),a},getTextureSourceIndex:function(o){for(var a=0;a<this.source.length;a++)if(this.source[a]===o)return a;return-1},getFramesFromTextureSource:function(o,a){void 0===a&&(a=!1);var i,u=[];for(var c in this.frames)"__BASE"===c&&!a||(i=this.frames[c]).sourceIndex===o&&u.push(i);return u},getFrameNames:function(o){void 0===o&&(o=!1);var a,i=Object.keys(this.frames);return o||-1!==(a=i.indexOf("__BASE"))&&i.splice(a,1),i},getSourceImage:function(o){null!=o&&1!==this.frameTotal||(o="__BASE");var a=this.frames[o];return a?a.source.image:(console.warn(e+o),this.frames.__BASE.source.image)},getDataSourceImage:function(o){null!=o&&1!==this.frameTotal||(o="__BASE");var a=this.frames[o],i=a?a.sourceIndex:(console.warn(e+o),this.frames.__BASE.sourceIndex);return this.dataSource[i].image},setDataSource:function(o){Array.isArray(o)||(o=[o]);for(var a=0;a<o.length;a++){var i=this.source[a];this.dataSource.push(new l(this,o[a],i.width,i.height))}},setFilter:function(o){for(var a=0;a<this.source.length;a++)this.source[a].setFilter(o);for(a=0;a<this.dataSource.length;a++)this.dataSource[a].setFilter(o)},destroy:function(){for(var o=0;o<this.source.length;o++)this.source[o].destroy();for(o=0;o<this.dataSource.length;o++)this.dataSource[o].destroy();for(var a in this.frames)this.frames[a].destroy();this.source=[],this.dataSource=[],this.frames={},this.manager.removeKey(this.key);var i=this.manager.game.renderer;i&&i.type===h.WEBGL&&i.resetTextures(!0),this.manager=null}});g.exports=r},function(g,b,t){var h=t(78);g.exports=function(n,s,l,e,r){void 0===e&&(e=0),void 0===r&&(r=n.length);var o=[];if(h(n,e,r))for(var a=e;a<r;a++){var i=n[a];(!s||s&&void 0===l&&i.hasOwnProperty(s)||s&&void 0!==l&&i[s]===l)&&o.push(i)}return o}},function(g,b,t){g.exports={Matrix:t(1013),Add:t(1021),AddAt:t(1022),BringToTop:t(1023),CountAllMatching:t(1024),Each:t(1025),EachInRange:t(1026),FindClosestInSorted:t(318),GetAll:t(207),GetFirst:t(428),GetRandom:t(210),MoveDown:t(1027),MoveTo:t(1028),MoveUp:t(1029),MoveAbove:t(1030),MoveBelow:t(1031),NumberArray:t(322),NumberArrayStep:t(1032),QuickSelect:t(436),Range:t(437),Remove:t(93),RemoveAt:t(1033),RemoveBetween:t(1034),RemoveRandomElement:t(1035),Replace:t(1036),RotateLeft:t(178),RotateRight:t(179),SafeRange:t(78),SendToBack:t(1037),SetAll:t(1038),Shuffle:t(131),SortByDigits:t(320),SpliceOne:t(74),StableSort:t(79),Swap:t(1039)}},function(g,b){g.exports=function(t){if(!Array.isArray(t)||t.length<2||!Array.isArray(t[0]))return!1;for(var h=t[0].length,n=1;n<t.length;n++)if(t[n].length!==h)return!1;return!0}},function(g,b){g.exports=function(t,h,n){void 0===h&&(h=0),void 0===n&&(n=t.length);var s=h+Math.floor(Math.random()*n);return void 0===t[s]?null:t[s]}},function(g,b,t){var h=t(0),n=t(9),s=t(438),l=new h({Extends:n,initialize:function(){n.call(this),this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,this.checkQueue=!1},add:function(e){return this._pending.push(e),this._toProcess++,e},remove:function(e){return this._destroy.push(e),this._toProcess++,e},removeAll:function(){for(var e=this._active,r=this._destroy,o=e.length;o--;)r.push(e[o]),this._toProcess++;return this},update:function(){if(0===this._toProcess)return this._active;for(var e,r=this._destroy,o=this._active,a=0;a<r.length;a++){var i=o.indexOf(e=r[a]);-1!==i&&(o.splice(i,1),this.emit(s.PROCESS_QUEUE_REMOVE,e))}for(r.length=0,r=this._pending,a=0;a<r.length;a++)e=r[a],(!this.checkQueue||this.checkQueue&&-1===o.indexOf(e))&&(o.push(e),this.emit(s.PROCESS_QUEUE_ADD,e));return r.length=0,this._toProcess=0,o},getActive:function(){return this._active},length:{get:function(){return this._active.length}},destroy:function(){this._toProcess=0,this._pending=[],this._active=[],this._destroy=[]}});g.exports=l},function(g,b){function t(h,n){return parseInt(h.getAttribute(n),10)}g.exports=function(h,n,s,l,e){void 0===s&&(s=0),void 0===l&&(l=0);var r=n.cutX,o=n.cutY,a=n.source.width,i=n.source.height,u=n.sourceIndex,c={},d=h.getElementsByTagName("info")[0],f=h.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=t(d,"size"),c.lineHeight=t(f,"lineHeight")+l,c.chars={};var p,v,m=h.getElementsByTagName("char"),T=void 0!==n&&n.trimmed;T&&(p=n.height,v=n.width);for(var y=0;y<m.length;y++){var x=m[y],w=t(x,"id"),E=String.fromCharCode(w),S=t(x,"x"),A=t(x,"y"),_=t(x,"width"),C=t(x,"height");T&&(S<v&&(v=S),A<p&&(p=A)),T&&0!==p&&0!==v&&(S-=n.x,A-=n.y);var M,P=(r+S)/a,L=(o+A)/i,D=(r+S+_)/a,F=(o+A+C)/i;c.chars[w]={x:S,y:A,width:_,height:C,centerX:Math.floor(_/2),centerY:Math.floor(C/2),xOffset:t(x,"xoffset"),yOffset:t(x,"yoffset"),xAdvance:t(x,"xadvance")+s,data:{},kerning:{},u0:P,v0:L,u1:D,v1:F},!e||0===_||0===C||(M=e.add(E,u,S,A,_,C))&&M.setUVs(_,C,P,L,D,F)}var X=h.getElementsByTagName("kerning");for(y=0;y<X.length;y++){var R=X[y],O=t(R,"first"),N=t(R,"second"),k=t(R,"amount");c.chars[N].kerning[O]=k}return c}},function(g,b,t){var h=t(1049),n=t(440),s=t(0),l=t(11),e=t(109),r=t(15),o=t(110),a=new s({Extends:r,Mixins:[l.Alpha,l.BlendMode,l.Depth,l.Mask,l.Pipeline,l.ScrollFactor,l.Size,l.Texture,l.Transform,l.Visible,h],initialize:function(i,u,c,d,f){r.call(this,i,"Blitter"),this.setTexture(d,f),this.setPosition(u,c),this.initPipeline(),this.children=new o,this.renderList=[],this.dirty=!1},create:function(i,u,c,d,f){void 0===d&&(d=!0),void 0===f&&(f=this.children.length),void 0===c?c=this.frame:c instanceof e||(c=this.texture.get(c));var p=new n(this,i,u,c,d);return this.children.addAt(p,f,!1),this.dirty=!0,p},createFromCallback:function(i,u,c,d){for(var f=this.createMultiple(u,c,d),p=0;p<f.length;p++)i.call(this,f[p],p);return f},createMultiple:function(i,u,c){void 0===u&&(u=this.frame.name),void 0===c&&(c=!0),Array.isArray(u)||(u=[u]);var d=[],f=this;return u.forEach(function(p){for(var v=0;v<i;v++)d.push(f.create(0,0,p,c))}),d},childCanRender:function(i){return i.visible&&0<i.alpha},getRenderList:function(){return this.dirty&&(this.renderList=this.children.list.filter(this.childCanRender,this),this.dirty=!1),this.renderList},clear:function(){this.children.removeAll(),this.dirty=!0},preDestroy:function(){this.children.destroy(),this.renderList=[]}});g.exports=a},function(g,b,t){var h=t(208),n=t(35),s=t(0),l=t(11),e=t(75),r=t(15),o=t(10),a=t(1052),i=t(441),u=t(3),c=new s({Extends:r,Mixins:[l.AlphaSingle,l.BlendMode,l.ComputedSize,l.Depth,l.Mask,l.Pipeline,l.Transform,l.Visible,a],initialize:function(d,f,p,v){r.call(this,d,"Container"),this.list=[],this.exclusive=!0,this.maxSize=-1,this.position=0,this.localTransform=new l.TransformMatrix,this.tempTransformMatrix=new l.TransformMatrix,this._sortKey="",this._sysEvents=d.sys.events,this.scrollFactorX=1,this.scrollFactorY=1,this.initPipeline(),this.setPosition(f,p),this.clearAlpha(),this.setBlendMode(n.SKIP_CHECK),v&&this.add(v)},originX:{get:function(){return.5}},originY:{get:function(){return.5}},displayOriginX:{get:function(){return.5*this.width}},displayOriginY:{get:function(){return.5*this.height}},setExclusive:function(d){return void 0===d&&(d=!0),this.exclusive=d,this},getBounds:function(d){var f;if(void 0===d&&(d=new o),d.setTo(this.x,this.y,0,0),this.parentContainer&&(f=this.parentContainer.getBoundsTransformMatrix().transformPoint(this.x,this.y),d.setTo(f.x,f.y,0,0)),0<this.list.length){var p=this.list,v=new o,m=!1;d.setEmpty();for(var T=0;T<p.length;T++){var y=p[T];y.getBounds&&(y.getBounds(v),m?i(v,d,d):(d.setTo(v.x,v.y,v.width,v.height),m=!0))}}return d},addHandler:function(d){d.once(e.DESTROY,this.remove,this),this.exclusive&&(d.parentContainer&&d.parentContainer.remove(d),d.removeFromDisplayList(),d.parentContainer=this)},removeHandler:function(d){d.off(e.DESTROY,this.remove),this.exclusive&&(d.parentContainer=null,d.addToDisplayList())},pointToContainer:function(d,f){void 0===f&&(f=new u),this.parentContainer?this.parentContainer.pointToContainer(d,f):f=new u(d.x,d.y);var p=this.tempTransformMatrix;return p.applyITRS(this.x,this.y,this.rotation,this.scaleX,this.scaleY),p.invert(),p.transformPoint(d.x,d.y,f),f},getBoundsTransformMatrix:function(){return this.getWorldTransformMatrix(this.tempTransformMatrix,this.localTransform)},add:function(d){return h.Add(this.list,d,this.maxSize,this.addHandler,this),this},addAt:function(d,f){return h.AddAt(this.list,d,f,this.maxSize,this.addHandler,this),this},getAt:function(d){return this.list[d]},getIndex:function(d){return this.list.indexOf(d)},sort:function(d,f){return d&&(void 0===f&&(f=function(p,v){return p[d]-v[d]}),h.StableSort(this.list,f)),this},getByName:function(d){return h.GetFirst(this.list,"name",d)},getRandom:function(d,f){return h.GetRandom(this.list,d,f)},getFirst:function(d,f,p,v){return h.GetFirst(this.list,d,f,p,v)},getAll:function(d,f,p,v){return h.GetAll(this.list,d,f,p,v)},count:function(d,f,p,v){return h.CountAllMatching(this.list,d,f,p,v)},swap:function(d,f){return h.Swap(this.list,d,f),this},moveTo:function(d,f){return h.MoveTo(this.list,d,f),this},moveAbove:function(d,f){return h.MoveAbove(this.list,d,f),this},moveBelow:function(d,f){return h.MoveBelow(this.list,d,f),this},remove:function(d,f){var p=h.Remove(this.list,d,this.removeHandler,this);if(f&&p){Array.isArray(p)||(p=[p]);for(var v=0;v<p.length;v++)p[v].destroy()}return this},removeAt:function(d,f){var p=h.RemoveAt(this.list,d,this.removeHandler,this);return f&&p&&p.destroy(),this},removeBetween:function(d,f,p){var v=h.RemoveBetween(this.list,d,f,this.removeHandler,this);if(p)for(var m=0;m<v.length;m++)v[m].destroy();return this},removeAll:function(d){var f=h.RemoveBetween(this.list,0,this.list.length,this.removeHandler,this);if(d)for(var p=0;p<f.length;p++)f[p].destroy();return this},bringToTop:function(d){return h.BringToTop(this.list,d),this},sendToBack:function(d){return h.SendToBack(this.list,d),this},moveUp:function(d){return h.MoveUp(this.list,d),this},moveDown:function(d){return h.MoveDown(this.list,d),this},reverse:function(){return this.list.reverse(),this},shuffle:function(){return h.Shuffle(this.list),this},replace:function(d,f,p){return h.Replace(this.list,d,f)&&(this.addHandler(f),this.removeHandler(d),p&&d.destroy()),this},exists:function(d){return-1<this.list.indexOf(d)},setAll:function(d,f,p,v){return h.SetAll(this.list,d,f,p,v),this},each:function(d,f){for(var p=[null],v=this.list.slice(),m=v.length,T=2;T<arguments.length;T++)p.push(arguments[T]);for(T=0;T<m;T++)p[0]=v[T],d.apply(f,p);return this},iterate:function(d,f){for(var p=[null],v=2;v<arguments.length;v++)p.push(arguments[v]);for(v=0;v<this.list.length;v++)p[0]=this.list[v],d.apply(f,p);return this},setScrollFactor:function(d,f,p){return void 0===f&&(f=d),void 0===p&&(p=!1),this.scrollFactorX=d,this.scrollFactorY=f,p&&(h.SetAll(this.list,"scrollFactorX",d),h.SetAll(this.list,"scrollFactorY",f)),this},length:{get:function(){return this.list.length}},first:{get:function(){return(this.position=0)<this.list.length?this.list[0]:null}},last:{get:function(){return 0<this.list.length?(this.position=this.list.length-1,this.list[this.position]):null}},next:{get:function(){return this.position<this.list.length?(this.position++,this.list[this.position]):null}},previous:{get:function(){return 0<this.position?(this.position--,this.list[this.position]):null}},preDestroy:function(){this.removeAll(!!this.exclusive),this.localTransform.destroy(),this.tempTransformMatrix.destroy(),this.list=[]}});g.exports=c},function(g,b,t){var h=t(148),n=t(0),s=t(1057),l=new n({Extends:h,Mixins:[s],initialize:function(e,r,o,a,i,u,c){h.call(this,e,r,o,a,i,u,c),this.type="DynamicBitmapText",this.scrollX=0,this.scrollY=0,this.cropWidth=0,this.cropHeight=0,this.callbackData={parent:this,color:0,tint:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},index:0,charCode:0,x:0,y:0,scale:0,rotation:0,data:0}},setSize:function(e,r){return this.cropWidth=e,this.cropHeight=r,this},setDisplayCallback:function(e){return this.displayCallback=e,this},setScrollX:function(e){return this.scrollX=e,this},setScrollY:function(e){return this.scrollY=e,this}});g.exports=l},function(g,b,t){var h=t(133),n=t(0),s=t(217),l=t(303),e=t(304),r=t(305),o=t(309),a=t(167),i=t(312),u=t(313),c=t(314),d=t(111),f=t(15),p=t(2),v=t(6),m=t(14),T=t(1063),y=new n({Extends:f,Mixins:[l,e,r,o,a,u,c,i,T],initialize:function(x,w){var E=v(w,"x",0),S=v(w,"y",0);f.call(this,x,"Graphics"),this.setPosition(E,S),this.initPipeline(),this.displayOriginX=0,this.displayOriginY=0,this.commandBuffer=[],this.defaultFillColor=-1,this.defaultFillAlpha=1,this.defaultStrokeWidth=1,this.defaultStrokeColor=-1,this.defaultStrokeAlpha=1,this._lineWidth=1,this.setDefaultStyles(w)},setDefaultStyles:function(x){return v(x,"lineStyle",null)&&(this.defaultStrokeWidth=v(x,"lineStyle.width",1),this.defaultStrokeColor=v(x,"lineStyle.color",16777215),this.defaultStrokeAlpha=v(x,"lineStyle.alpha",1),this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha)),v(x,"fillStyle",null)&&(this.defaultFillColor=v(x,"fillStyle.color",16777215),this.defaultFillAlpha=v(x,"fillStyle.alpha",1),this.fillStyle(this.defaultFillColor,this.defaultFillAlpha)),this},lineStyle:function(x,w,E){return void 0===E&&(E=1),this.commandBuffer.push(s.LINE_STYLE,x,w,E),this._lineWidth=x,this},fillStyle:function(x,w){return void 0===w&&(w=1),this.commandBuffer.push(s.FILL_STYLE,x,w),this},fillGradientStyle:function(x,w,E,S,A,_,C,M){return void 0===A&&(A=1),void 0===_&&(_=A),void 0===C&&(C=A),void 0===M&&(M=A),this.commandBuffer.push(s.GRADIENT_FILL_STYLE,A,_,C,M,x,w,E,S),this},lineGradientStyle:function(x,w,E,S,A,_){return void 0===_&&(_=1),this.commandBuffer.push(s.GRADIENT_LINE_STYLE,x,_,w,E,S,A),this},beginPath:function(){return this.commandBuffer.push(s.BEGIN_PATH),this},closePath:function(){return this.commandBuffer.push(s.CLOSE_PATH),this},fillPath:function(){return this.commandBuffer.push(s.FILL_PATH),this},fill:function(){return this.commandBuffer.push(s.FILL_PATH),this},strokePath:function(){return this.commandBuffer.push(s.STROKE_PATH),this},stroke:function(){return this.commandBuffer.push(s.STROKE_PATH),this},fillCircleShape:function(x){return this.fillCircle(x.x,x.y,x.radius)},strokeCircleShape:function(x){return this.strokeCircle(x.x,x.y,x.radius)},fillCircle:function(x,w,E){return this.beginPath(),this.arc(x,w,E,0,m.PI2),this.fillPath(),this},strokeCircle:function(x,w,E){return this.beginPath(),this.arc(x,w,E,0,m.PI2),this.strokePath(),this},fillRectShape:function(x){return this.fillRect(x.x,x.y,x.width,x.height)},strokeRectShape:function(x){return this.strokeRect(x.x,x.y,x.width,x.height)},fillRect:function(x,w,E,S){return this.commandBuffer.push(s.FILL_RECT,x,w,E,S),this},strokeRect:function(x,w,E,S){var A=this._lineWidth/2,_=x-A,C=x+A;return this.beginPath(),this.moveTo(x,w),this.lineTo(x,w+S),this.strokePath(),this.beginPath(),this.moveTo(x+E,w),this.lineTo(x+E,w+S),this.strokePath(),this.beginPath(),this.moveTo(_,w),this.lineTo(C+E,w),this.strokePath(),this.beginPath(),this.moveTo(_,w+S),this.lineTo(C+E,w+S),this.strokePath(),this},fillRoundedRect:function(x,w,E,S,A){void 0===A&&(A=20);var _=A,C=A,M=A,P=A;return"number"!=typeof A&&(_=p(A,"tl",20),C=p(A,"tr",20),M=p(A,"bl",20),P=p(A,"br",20)),this.beginPath(),this.moveTo(x+_,w),this.lineTo(x+E-C,w),this.arc(x+E-C,w+C,C,-m.TAU,0),this.lineTo(x+E,w+S-P),this.arc(x+E-P,w+S-P,P,0,m.TAU),this.lineTo(x+M,w+S),this.arc(x+M,w+S-M,M,m.TAU,Math.PI),this.lineTo(x,w+_),this.arc(x+_,w+_,_,-Math.PI,-m.TAU),this.fillPath(),this},strokeRoundedRect:function(x,w,E,S,A){void 0===A&&(A=20);var _=A,C=A,M=A,P=A;return"number"!=typeof A&&(_=p(A,"tl",20),C=p(A,"tr",20),M=p(A,"bl",20),P=p(A,"br",20)),this.beginPath(),this.moveTo(x+_,w),this.lineTo(x+E-C,w),this.moveTo(x+E-C,w),this.arc(x+E-C,w+C,C,-m.TAU,0),this.lineTo(x+E,w+S-P),this.moveTo(x+E,w+S-P),this.arc(x+E-P,w+S-P,P,0,m.TAU),this.lineTo(x+M,w+S),this.moveTo(x+M,w+S),this.arc(x+M,w+S-M,M,m.TAU,Math.PI),this.lineTo(x,w+_),this.moveTo(x,w+_),this.arc(x+_,w+_,_,-Math.PI,-m.TAU),this.strokePath(),this},fillPointShape:function(x,w){return this.fillPoint(x.x,x.y,w)},fillPoint:function(x,w,E){return!E||E<1?E=1:(x-=E/2,w-=E/2),this.commandBuffer.push(s.FILL_RECT,x,w,E,E),this},fillTriangleShape:function(x){return this.fillTriangle(x.x1,x.y1,x.x2,x.y2,x.x3,x.y3)},strokeTriangleShape:function(x){return this.strokeTriangle(x.x1,x.y1,x.x2,x.y2,x.x3,x.y3)},fillTriangle:function(x,w,E,S,A,_){return this.commandBuffer.push(s.FILL_TRIANGLE,x,w,E,S,A,_),this},strokeTriangle:function(x,w,E,S,A,_){return this.commandBuffer.push(s.STROKE_TRIANGLE,x,w,E,S,A,_),this},strokeLineShape:function(x){return this.lineBetween(x.x1,x.y1,x.x2,x.y2)},lineBetween:function(x,w,E,S){return this.beginPath(),this.moveTo(x,w),this.lineTo(E,S),this.strokePath(),this},lineTo:function(x,w){return this.commandBuffer.push(s.LINE_TO,x,w),this},moveTo:function(x,w){return this.commandBuffer.push(s.MOVE_TO,x,w),this},strokePoints:function(x,w,E,S){void 0===w&&(w=!1),void 0===E&&(E=!1),void 0===S&&(S=x.length),this.beginPath(),this.moveTo(x[0].x,x[0].y);for(var A=1;A<S;A++)this.lineTo(x[A].x,x[A].y);return w&&this.lineTo(x[0].x,x[0].y),E&&this.closePath(),this.strokePath(),this},fillPoints:function(x,w,E,S){void 0===w&&(w=!1),void 0===E&&(E=!1),void 0===S&&(S=x.length),this.beginPath(),this.moveTo(x[0].x,x[0].y);for(var A=1;A<S;A++)this.lineTo(x[A].x,x[A].y);return w&&this.lineTo(x[0].x,x[0].y),E&&this.closePath(),this.fillPath(),this},strokeEllipseShape:function(x,w){void 0===w&&(w=32);var E=x.getPoints(w);return this.strokePoints(E,!0)},strokeEllipse:function(x,w,E,S,A){void 0===A&&(A=32);var _=new d(x,w,E,S).getPoints(A);return this.strokePoints(_,!0)},fillEllipseShape:function(x,w){void 0===w&&(w=32);var E=x.getPoints(w);return this.fillPoints(E,!0)},fillEllipse:function(x,w,E,S,A){void 0===A&&(A=32);var _=new d(x,w,E,S).getPoints(A);return this.fillPoints(_,!0)},arc:function(x,w,E,S,A,_,C){return void 0===_&&(_=!1),void 0===C&&(C=0),this.commandBuffer.push(s.ARC,x,w,E,S,A,_,C),this},slice:function(x,w,E,S,A,_,C){return void 0===_&&(_=!1),void 0===C&&(C=0),this.commandBuffer.push(s.BEGIN_PATH),this.commandBuffer.push(s.MOVE_TO,x,w),this.commandBuffer.push(s.ARC,x,w,E,S,A,_,C),this.commandBuffer.push(s.CLOSE_PATH),this},save:function(){return this.commandBuffer.push(s.SAVE),this},restore:function(){return this.commandBuffer.push(s.RESTORE),this},translateCanvas:function(x,w){return this.commandBuffer.push(s.TRANSLATE,x,w),this},scaleCanvas:function(x,w){return this.commandBuffer.push(s.SCALE,x,w),this},rotateCanvas:function(x){return this.commandBuffer.push(s.ROTATE,x),this},clear:function(){return this.commandBuffer.length=0,-1<this.defaultFillColor&&this.fillStyle(this.defaultFillColor,this.defaultFillAlpha),-1<this.defaultStrokeColor&&this.lineStyle(this.defaultStrokeWidth,this.defaultStrokeColor,this.defaultStrokeAlpha),this},generateTexture:function(x,w,E){var S,A,_,C=this.scene.sys,M=C.game.renderer;return void 0===w&&(w=C.scale.width),void 0===E&&(E=C.scale.height),y.TargetCamera.setScene(this.scene),y.TargetCamera.setViewport(0,0,w,E),y.TargetCamera.scrollX=this.x,y.TargetCamera.scrollY=this.y,"string"==typeof x?C.textures.exists(x)?(_=(S=C.textures.get(x)).getSourceImage())instanceof HTMLCanvasElement&&(A=_.getContext("2d")):A=(S=C.textures.createCanvas(x,w,E)).getSourceImage().getContext("2d"):x instanceof HTMLCanvasElement&&(A=x.getContext("2d")),A&&(this.renderCanvas(M,this,y.TargetCamera,null,A,!1),S&&S.refresh()),this},preDestroy:function(){this.commandBuffer=[]}});y.TargetCamera=new h,g.exports=y},function(g,b){g.exports={ARC:0,BEGIN_PATH:1,CLOSE_PATH:2,FILL_RECT:3,LINE_TO:4,MOVE_TO:5,LINE_STYLE:6,FILL_STYLE:7,FILL_PATH:8,STROKE_PATH:9,FILL_TRIANGLE:10,STROKE_TRIANGLE:11,SAVE:14,RESTORE:15,TRANSLATE:16,SCALE:17,ROTATE:18,GRADIENT_FILL_STYLE:21,GRADIENT_LINE_STYLE:22}},function(g,b,t){var h=t(4);g.exports=function(n,s,l){void 0===l&&(l=new h);var r=n.height/2;return l.x=n.x+n.width/2*Math.cos(s),l.y=n.y+r*Math.sin(s),l}},function(g,b,t){var h=t(35),n=t(0),s=t(11),l=t(176),e=t(101),r=t(9),o=t(75),a=t(110),i=t(1071),u=t(20),c=t(79),d=new n({Extends:a,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Mask,s.Pipeline,s.Visible,r,i],initialize:function(f,p){a.call(this,f),r.call(this),this.scene=f,this.displayList=null,this.type="Layer",this.state=0,this.parentContainer=null,this.name="",this.active=!0,this.tabIndex=-1,this.data=null,this.renderFlags=15,this.cameraFilter=0,this.input=null,this.body=null,this.ignoreDestroy=!1,this.systems=f.sys,this.events=f.sys.events,this.sortChildrenFlag=!1,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.initPipeline(),this.clearAlpha(),this.setBlendMode(h.SKIP_CHECK),p&&this.add(p),f.sys.queueDepthSort()},setActive:function(f){return this.active=f,this},setName:function(f){return this.name=f,this},setState:function(f){return this.state=f,this},setDataEnabled:function(){return this.data||(this.data=new e(this)),this},setData:function(f,p){return this.data||(this.data=new e(this)),this.data.set(f,p),this},incData:function(f,p){return this.data||(this.data=new e(this)),this.data.inc(f,p),this},toggleData:function(f){return this.data||(this.data=new e(this)),this.data.toggle(f),this},getData:function(f){return this.data||(this.data=new e(this)),this.data.get(f)},setInteractive:function(){return this},disableInteractive:function(){return this},removeInteractive:function(){return this},addedToScene:function(){},removedFromScene:function(){},update:function(){},toJSON:function(){return l(this)},willRender:function(f){return!(15!==this.renderFlags||0===this.list.length||0!==this.cameraFilter&&this.cameraFilter&f.id)},getIndexList:function(){for(var f=this,p=this.parentContainer,v=[];p&&(v.unshift(p.getIndex(f)),(f=p).parentContainer);)p=p.parentContainer;return v.unshift(this.displayList.getIndex(f)),v},addChildCallback:function(f){f.displayList&&f.displayList!==this&&f.removeFromDisplayList(),f.displayList||(this.queueDepthSort(),f.displayList=this,f.emit(o.ADDED_TO_SCENE,f,this.scene),this.events.emit(u.ADDED_TO_SCENE,f,this.scene))},removeChildCallback:function(f){this.queueDepthSort(),f.displayList=null,f.emit(o.REMOVED_FROM_SCENE,f,this.scene),this.events.emit(u.REMOVED_FROM_SCENE,f,this.scene)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(c(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(f,p){return f._depth-p._depth},getChildren:function(){return this.list},destroy:function(){if(this.scene&&!this.ignoreDestroy){this.emit(o.DESTROY,this);for(var f=this.list.length;f--;)this.list[f].destroy();this.removeAllListeners(),this.resetPostPipeline(!0),this.displayList&&(this.displayList.remove(this,!0),this.displayList.queueDepthSort()),this.data&&(this.data.destroy(),this.data=void 0),this.active=!1,this.visible=!1,this.list=void 0,this.scene=void 0,this.displayList=void 0,this.systems=void 0,this.events=void 0}}});g.exports=d},function(g,b,t){var h=t(0),n=t(11),s=t(15),l=t(450),e=t(110),r=t(452),o=t(1075),a=new h({Extends:s,Mixins:[n.Depth,n.Mask,n.Pipeline,n.Transform,n.Visible,o],initialize:function(i,u,c,d){if(s.call(this,i,"ParticleEmitterManager"),this.blendMode=-1,this.timeScale=1,this.texture=null,this.frame=null,this.frameNames=[],null===c||"object"!=typeof c&&!Array.isArray(c)||(d=c,c=null),this.setTexture(u,c),this.initPipeline(),this.emitters=new e(this),this.wells=new e(this),d){Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++)this.createEmitter(d[f])}},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},setTexture:function(i,u){return this.texture=this.scene.sys.textures.get(i),this.setFrame(u)},setFrame:function(i){this.frame=this.texture.get(i);var u=this.texture.getFramesFromTextureSource(this.frame.sourceIndex),c=[];return u.forEach(function(d){c.push(d.name)}),this.frameNames=c,this.defaultFrame=this.frame,this},setEmitterFrames:function(i,u){Array.isArray(i)||(i=[i]);for(var c=u.frames,d=c.length=0;d<i.length;d++){var f=i[d];-1!==this.frameNames.indexOf(f)&&c.push(this.texture.get(f))}return u.defaultFrame=0<c.length?c[0]:this.defaultFrame,this},addEmitter:function(i){return this.emitters.add(i)},createEmitter:function(i){return this.addEmitter(new r(this,i))},removeEmitter:function(i){return this.emitters.remove(i,!0)},addGravityWell:function(i){return this.wells.add(i)},createGravityWell:function(i){return this.addGravityWell(new l(i))},emitParticle:function(i,u,c){for(var d=this.emitters.list,f=0;f<d.length;f++){var p=d[f];p.active&&p.emitParticle(i,u,c)}return this},emitParticleAt:function(i,u,c){return this.emitParticle(c,i,u)},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},getProcessors:function(){return this.wells.getAll("active",!0)},preUpdate:function(i,u){u*=this.timeScale;for(var c=this.emitters.list,d=0;d<c.length;d++){var f=c[d];f.active&&f.preUpdate(i,u)}},setAlpha:function(){},setScrollFactor:function(){},setBlendMode:function(){}});g.exports=a},function(g,b,t){var h=t(35),n=t(133),s=t(31),l=t(0),e=t(11),r=t(33),o=t(109),a=t(15),i=t(1),u=t(92),c=t(1079),d=t(141),f=t(12),p=t(222),v=new l({Extends:a,Mixins:[e.Alpha,e.BlendMode,e.ComputedSize,e.Crop,e.Depth,e.Flip,e.GetBounds,e.Mask,e.Origin,e.Pipeline,e.ScrollFactor,e.Tint,e.Transform,e.Visible,c],initialize:function(m,T,y,x,w,E,S){void 0===T&&(T=0),void 0===y&&(y=0),void 0===x&&(x=32),void 0===w&&(w=32),a.call(this,m,"RenderTexture"),this.renderer=m.sys.renderer,this.textureManager=m.sys.textures,this.globalTint=16777215,this.globalAlpha=1,this.canvas=null,this.dirty=!1,this._crop=this.resetCropObject(),this.texture=null,this.frame=null,this._saved=!1,void 0===E?(this.canvas=s.create2D(this,x,w),this.texture=m.sys.textures.addCanvas(p(),this.canvas),this.frame=this.texture.get()):(this.texture=m.sys.textures.get(E),this.frame=this.texture.get(S),this.canvas=this.frame.source.image,this._saved=!0,this.dirty=!0,this.width=this.frame.cutWidth,this.height=this.frame.cutHeight),this.context=this.canvas.getContext("2d"),this._eraseMode=!1,this.camera=new n(0,0,x,w),this.renderTarget=null;var A=this.renderer;A?A.type===r.WEBGL?(this.drawGameObject=this.batchGameObjectWebGL,this.renderTarget=new d(A,x,w,1,0,!1)):A.type===r.CANVAS&&(this.drawGameObject=this.batchGameObjectCanvas):this.drawGameObject=i,this.camera.setScene(m),this.setPosition(T,y),void 0===E&&this.setSize(x,w),this.setOrigin(0,0),this.initPipeline(u.SINGLE_PIPELINE)},setSize:function(m,T){return this.resize(m,T)},resize:function(m,T){void 0===T&&(T=m);var y,x,w=this.frame;m!==this.width||T!==this.height?"__BASE"===w.name&&(this.canvas.width=m,this.canvas.height=T,this.texture.width=m,this.texture.height=T,(y=this.renderTarget)&&(y.resize(m,T),w.glTexture=y.texture,w.source.isRenderTexture=!0,w.source.isGLTexture=!0,w.source.glTexture=y.texture),this.camera.setSize(m,T),w.source.width=m,w.source.height=T,w.setSize(m,T),this.width=m,this.height=T):(x=this.texture.getSourceImage(),w.cutX+m>x.width&&(m=x.width-w.cutX),w.cutY+T>x.height&&(T=x.height-w.cutY),w.setSize(m,T,w.cutX,w.cutY)),this.updateDisplayOrigin();var E=this.input;return E&&!E.customHitArea&&(E.hitArea.width=m,E.hitArea.height=T),this},setGlobalTint:function(m){return this.globalTint=m,this},setGlobalAlpha:function(m){return this.globalAlpha=m,this},saveTexture:function(m){return this.textureManager.renameTexture(this.texture.key,m),this._saved=!0,this.texture},fill:function(m,T,y,x,w,E){var S=this.frame,_=this.renderer;void 0===T&&(T=1),void 0===y&&(y=0),void 0===x&&(x=0),void 0===w&&(w=S.cutWidth),void 0===E&&(E=S.cutHeight);var C,L,D,F,X=(m>>16&255)/255,R=(m>>8&255)/255,O=(255&m)/255,N=this.renderTarget;return this.camera.preRender(),N?(N.bind(!0),(C=this.pipeline).manager.set(C),C.drawFillRect(y*(L=_.width/N.width),x*(D=_.height/N.height),w*L,E*D,f.getTintFromFloats(O,R,X,1),T),N.unbind(!0)):(_.setContext(F=this.context),F.fillStyle="rgba("+X+","+R+","+O+","+T+")",F.fillRect(y+S.cutX,x+S.cutY,w,E),_.setContext()),this.dirty=!0,this},clear:function(){var m,T;return this.dirty&&((m=this.renderTarget)?m.clear():((T=this.context).save(),T.setTransform(1,0,0,1,0,0),T.clearRect(this.frame.cutX,this.frame.cutY,this.frame.cutWidth,this.frame.cutHeight),T.restore()),this.dirty=!1),this},erase:function(m,T,y){return this._eraseMode=!0,this.draw(m,T,y,1,16777215),this._eraseMode=!1,this},draw:function(m,T,y,x,w){return this.beginDraw(),this.batchDraw(m,T,y,x,w),this.endDraw(),this},drawFrame:function(m,T,y,x,w,E){return this.beginDraw(),this.batchDrawFrame(m,T,y,x,w,E),this.endDraw(),this},beginDraw:function(){var T=this.renderer,y=this.renderTarget;return this.camera.preRender(),y?T.beginCapture(y.width,y.height):T.setContext(this.context),this},batchDraw:function(m,T,y,x,w){return void 0===x&&(x=this.globalAlpha),w=void 0===w?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(w>>16)+(65280&w)+((255&w)<<16),Array.isArray(m)||(m=[m]),this.batchList(m,T,y,x,w),this},batchDrawFrame:function(m,T,y,x,w,E){void 0===y&&(y=0),void 0===x&&(x=0),void 0===w&&(w=this.globalAlpha),E=void 0===E?(this.globalTint>>16)+(65280&this.globalTint)+((255&this.globalTint)<<16):(E>>16)+(65280&E)+((255&E)<<16);var S=this.textureManager.getFrame(m,T);return S&&(this.renderTarget?this.pipeline.batchTextureFrame(S,y,x,E,w,this.camera.matrix,null):this.batchTextureFrame(S,y+this.frame.cutX,x+this.frame.cutY,w,E)),this},endDraw:function(m){void 0===m&&(m=this._eraseMode);var T,y=this.renderer,x=this.renderTarget;return x?(T=y.endCapture(),y.pipelines.setUtility().blitFrame(T,x,1,!1,!1,m),y.resetScissor(),y.resetViewport()):y.setContext(),this.dirty=!0,this},batchList:function(m,T,y,x,w){for(var E=0;E<m.length;E++){var S=m[E];S&&S!==this&&(S.renderWebGL||S.renderCanvas?this.drawGameObject(S,T,y):S.isParent||S.list?this.batchGroup(S.getChildren(),T,y):"string"==typeof S?this.batchTextureFrameKey(S,null,T,y,x,w):S instanceof o?this.batchTextureFrame(S,T,y,x,w):Array.isArray(S)&&this.batchList(S,T,y,x,w))}},batchGroup:function(m,T,y){void 0===T&&(T=0),void 0===y&&(y=0),T+=this.frame.cutX,y+=this.frame.cutY;for(var x=0;x<m.length;x++){var S=m[x];S.willRender(this.camera)&&this.drawGameObject(S,S.x+T,S.y+y)}},batchGameObjectWebGL:function(m,T,y){void 0===T&&(T=m.x),void 0===y&&(y=m.y);var x=m.x,w=m.y;m.setPosition(T+this.frame.cutX,y+this.frame.cutY),m.renderDirect?m.renderDirect(this.renderer,m,this.camera):m.renderWebGL(this.renderer,m,this.camera),m.setPosition(x,w)},batchGameObjectCanvas:function(m,T,y){void 0===T&&(T=m.x),void 0===y&&(y=m.y);var x,w=m.x,E=m.y;this._eraseMode&&(x=m.blendMode,m.blendMode=h.ERASE),m.setPosition(T+this.frame.cutX,y+this.frame.cutY),m.renderCanvas(this.renderer,m,this.camera,null),m.setPosition(w,E),this._eraseMode&&(m.blendMode=x)},batchTextureFrameKey:function(m,T,y,x,w,E){var S=this.textureManager.getFrame(m,T);S&&this.batchTextureFrame(S,y,x,w,E)},batchTextureFrame:function(m,T,y,x,w){var E,S,A,_;void 0===T&&(T=0),void 0===y&&(y=0),T+=this.frame.cutX,y+=this.frame.cutY,this.renderTarget?this.pipeline.batchTextureFrame(m,T,y,w,x,this.camera.matrix,null):(S=m.canvasData,A=m.source.image,_=this.camera.matrix,(E=this.context).save(),E.globalCompositeOperation=this._eraseMode?"destination-out":"source-over",E.globalAlpha=x,_.setToContext(E),E.drawImage(A,S.x,S.y,S.width,S.height,T,y,S.width,S.height),E.restore())},snapshotArea:function(m,T,y,x,w,E,S){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,w,!1,m,T,y,x,E,S):this.renderer.snapshotCanvas(this.canvas,w,!1,m,T,y,x,E,S),this},snapshot:function(m,T,y){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,m,!1,0,0,this.width,this.height,T,y):this.renderer.snapshotCanvas(this.canvas,m,!1,0,0,this.width,this.height,T,y),this},snapshotPixel:function(m,T,y){return this.renderTarget?this.renderer.snapshotFramebuffer(this.renderTarget.framebuffer,this.width,this.height,y,!0,m,T):this.renderer.snapshotCanvas(this.canvas,y,!0,m,T),this},preDestroy:function(){this._saved||(s.remove(this.canvas),this.renderTarget&&this.renderTarget.destroy(),this.texture.destroy(),this.camera.destroy(),this.canvas=null,this.context=null,this.texture=null)}});g.exports=v},function(g,b){g.exports=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var h=16*Math.random()|0;return("x"===t?h:3&h|8).toString(16)})}},function(g,b,t){var h=t(164),n=t(0),s=t(11),l=t(15),e=t(92),r=t(1085),o=t(3),a=new n({Extends:l,Mixins:[s.AlphaSingle,s.BlendMode,s.Depth,s.Flip,s.Mask,s.Pipeline,s.Size,s.Texture,s.Transform,s.Visible,s.ScrollFactor,r],initialize:function(i,u,c,d,f,p,v,m,T){void 0===d&&(d="__DEFAULT"),void 0===p&&(p=2),void 0===v&&(v=!0),l.call(this,i,"Rope"),this.anims=new h(this),this.points=p,this.tintFill="__DEFAULT"===d,this.dirty=!1,this.horizontal=v,this._flipX=!1,this._flipY=!1,this._perp=new o,this.debugCallback=null,this.debugGraphic=null,this.setTexture(d,f),this.setPosition(u,c),this.setSizeToFrame(),this.initPipeline(e.ROPE_PIPELINE),Array.isArray(p)&&this.resizeArrays(p.length),this.setPoints(p,m,T),this.updateVertices()},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(i,u){var c=this.anims.currentFrame;this.anims.update(i,u),this.anims.currentFrame!==c&&(this.updateUVs(),this.updateVertices())},play:function(i,u,c){return this.anims.play(i,u,c),this},setDirty:function(){return this.dirty=!0,this},setHorizontal:function(i,u,c){return void 0===i&&(i=this.points.length),this.horizontal?this:(this.horizontal=!0,this.setPoints(i,u,c))},setVertical:function(i,u,c){return void 0===i&&(i=this.points.length),this.horizontal?(this.horizontal=!1,this.setPoints(i,u,c)):this},setTintFill:function(i){return void 0===i&&(i=!1),this.tintFill=i,this},setAlphas:function(i,u){var c=this.points.length;if(c<1)return this;var d=this.alphas;void 0===i?i=[1]:Array.isArray(i)||void 0!==u||(i=[i]);var f=0;if(void 0!==u)for(v=0;v<c;v++)d[f=2*v]=i,d[f+1]=u;else if(i.length===c)for(v=0;v<c;v++)d[f=2*v]=i[v],d[f+1]=i[v];else for(var p=i[0],v=0;v<c;v++)i.length>(f=2*v)&&(p=i[f]),d[f]=p,i.length>f+1&&(p=i[f+1]),d[f+1]=p;return this},setColors:function(i){var u=this.points.length;if(u<1)return this;var c=this.colors;void 0===i?i=[16777215]:Array.isArray(i)||(i=[i]);var d=0;if(i.length===u)for(p=0;p<u;p++)c[d=2*p]=i[p],c[d+1]=i[p];else for(var f=i[0],p=0;p<u;p++)i.length>(d=2*p)&&(f=i[d]),c[d]=f,i.length>d+1&&(f=i[d+1]),c[d+1]=f;return this},setPoints:function(i,u,c){if(void 0===i&&(i=2),"number"==typeof i){var d,f,p,v=i;if(v<2&&(v=2),i=[],this.horizontal)for(p=-this.frame.halfWidth,f=this.frame.width/(v-1),d=0;d<v;d++)i.push({x:p+d*f,y:0});else for(p=-this.frame.halfHeight,f=this.frame.height/(v-1),d=0;d<v;d++)i.push({x:0,y:p+d*f})}var m=i.length,T=this.points.length;return m<1?console.warn("Rope: Not enough points given"):(1===m&&(i.unshift({x:0,y:0}),m++),T!==m&&this.resizeArrays(m),this.points=i,this.updateUVs(),null!=u&&this.setColors(u),null!=c&&this.setAlphas(c)),this},updateUVs:function(){for(var i=this.uv,u=this.points.length,c=this.frame.u0,d=this.frame.v0,f=this.frame.u1,p=this.frame.v1,v=(f-c)/(u-1),m=(p-d)/(u-1),T=0;T<u;T++){var y,x,w,E=4*T,S=this.horizontal?(w=y=this._flipX?f-T*v:c+T*v,this._flipY?(x=p,d):(x=d,p)):(w=this._flipX?(y=c,f):(y=f,c),x=this._flipY?p-T*m:d+T*m);i[0+E]=y,i[1+E]=x,i[2+E]=w,i[3+E]=S}return this},resizeArrays:function(i){var u=this.colors,c=this.alphas;this.vertices=new Float32Array(4*i),this.uv=new Float32Array(4*i),u=new Uint32Array(2*i),c=new Float32Array(2*i);for(var d=0;d<2*i;d++)u[d]=16777215,c[d]=1;return this.colors=u,this.alphas=c,this.dirty=!0,this},updateVertices:function(){var i=this._perp,u=this.points,c=this.vertices,d=u.length;if(this.dirty=!1,!(d<1)){for(var f=u[0],p=this.horizontal?this.frame.halfHeight:this.frame.halfWidth,v=0;v<d;v++){var m=u[v],T=4*v,y=v<d-1?u[v+1]:m;i.x=y.y-f.y,i.y=-(y.x-f.x);var x=i.length();i.x/=x,i.y/=x,i.x*=p,i.y*=p,c[T]=m.x+i.x,c[1+T]=m.y+i.y,c[2+T]=m.x-i.x,c[3+T]=m.y-i.y,f=m}return this}},setDebug:function(i,u){return this.debugGraphic=i,this.debugCallback=i||u?u||this.renderDebugVerts:null,this},renderDebugVerts:function(i,u,c){var d=i.debugGraphic,f=c[0],p=c[1],v=c[2],m=c[3];d.lineBetween(f,p,v,m);for(var T=4;T<u;T+=4){var y=c[T+0],x=c[T+1],w=c[T+2],E=c[T+3];d.lineBetween(f,p,y,x),d.lineBetween(v,m,w,E),d.lineBetween(v,m,y,x),d.lineBetween(y,x,w,E),f=y,p=x,v=w,m=E}},preDestroy:function(){this.anims.destroy(),this.anims=void 0,this.points=null,this.vertices=null,this.uv=null,this.colors=null,this.alphas=null,this.debugCallback=null,this.debugGraphic=null},flipX:{get:function(){return this._flipX},set:function(i){return this._flipX=i,this.updateUVs()}},flipY:{get:function(){return this._flipY},set:function(i){return this._flipY=i,this.updateUVs()}}});g.exports=a},function(g,b,t){var h=t(142),n=t(31),s=t(0),l=t(11),e=t(22),r=t(15),o=t(458),a=t(6),i=t(202),u=t(1088),c=t(459),d=new s({Extends:r,Mixins:[l.Alpha,l.BlendMode,l.ComputedSize,l.Crop,l.Depth,l.Flip,l.GetBounds,l.Mask,l.Origin,l.Pipeline,l.ScrollFactor,l.Tint,l.Transform,l.Visible,u],initialize:function(f,p,v,m,T){void 0===p&&(p=0),void 0===v&&(v=0),r.call(this,f,"Text"),this.renderer=f.sys.renderer,this.setPosition(p,v),this.setOrigin(0,0),this.initPipeline(),this.canvas=n.create(this),this.context=this.canvas.getContext("2d"),this.style=new c(this,T),this.autoRound=!0,this.splitRegExp=/(?:\r\n|\r|\n)/,this._text=void 0,this.padding={left:0,right:0,top:0,bottom:0},this.width=1,this.height=1,this.lineSpacing=0,this.dirty=!1,0===this.style.resolution&&(this.style.resolution=1),this._crop=this.resetCropObject(),this.texture=f.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.frame.source.resolution=this.style.resolution,this.renderer&&this.renderer.gl&&(this.renderer.deleteTexture(this.frame.source.glTexture),this.frame.source.glTexture=null),this.initRTL(),this.setText(m),T&&T.padding&&this.setPadding(T.padding),T&&T.lineSpacing&&this.setLineSpacing(T.lineSpacing),f.sys.game.events.on(e.CONTEXT_RESTORED,function(){this.dirty=!0},this)},initRTL:function(){this.style.rtl&&(this.canvas.dir="rtl",this.context.direction="rtl",this.canvas.style.display="none",h(this.canvas,this.scene.sys.canvas),this.originX=1)},runWordWrap:function(f){var p=this.style;if(p.wordWrapCallback){var v=p.wordWrapCallback.call(p.wordWrapCallbackScope,f,this);return Array.isArray(v)&&(v=v.join("\n")),v}return p.wordWrapWidth?p.wordWrapUseAdvanced?this.advancedWordWrap(f,this.context,this.style.wordWrapWidth):this.basicWordWrap(f,this.context,this.style.wordWrapWidth):f},advancedWordWrap:function(f,p,v){for(var m="",T=f.replace(/ +/gi," ").split(this.splitRegExp),y=T.length,x=0;x<y;x++){var w="",E=(E=T[x]).replace(/^ *|\s*$/gi,"");if(p.measureText(E).width<v)m+=E+"\n";else{for(var S=v,A=E.split(" "),_=0;_<A.length;_++){var C=A[_],M=C+" ",P=p.measureText(M).width;if(S<P){if(0===_){for(var L=M;L.length&&(L=L.slice(0,-1),!((P=p.measureText(L).width)<=S)););if(!L.length)throw new Error("This text's wordWrapWidth setting is less than a single character!");var D=C.substr(L.length);A[_]=D,w+=L}var X=A.slice(A[_].length?_:_+1).join(" ").replace(/[ \n]*$/gi,"");T[x+1]=X+" "+(T[x+1]||""),y=T.length;break}w+=M,S-=P}m+=w.replace(/[ \n]*$/gi,"")+"\n"}}return m.replace(/[\s|\n]*$/gi,"")},basicWordWrap:function(f,p,v){for(var m="",T=f.split(this.splitRegExp),y=T.length-1,x=p.measureText(" ").width,w=0;w<=y;w++){for(var E=v,S=T[w].split(" "),A=S.length-1,_=0;_<=A;_++){var C=S[_],M=p.measureText(C).width,P=M;_<A&&(P+=x),E<P&&0<_&&(m+="\n",E=v),m+=C,_<A?(m+=" ",E-=P):E-=M}w<y&&(m+="\n")}return m},getWrappedText:function(f){return void 0===f&&(f=this._text),this.style.syncFont(this.canvas,this.context),this.runWordWrap(f).split(this.splitRegExp)},setText:function(f){return f||0===f||(f=""),Array.isArray(f)&&(f=f.join("\n")),f!==this._text&&(this._text=f.toString(),this.updateText()),this},setStyle:function(f){return this.style.setStyle(f)},setFont:function(f){return this.style.setFont(f)},setFontFamily:function(f){return this.style.setFontFamily(f)},setFontSize:function(f){return this.style.setFontSize(f)},setFontStyle:function(f){return this.style.setFontStyle(f)},setFixedSize:function(f,p){return this.style.setFixedSize(f,p)},setBackgroundColor:function(f){return this.style.setBackgroundColor(f)},setFill:function(f){return this.style.setFill(f)},setColor:function(f){return this.style.setColor(f)},setStroke:function(f,p){return this.style.setStroke(f,p)},setShadow:function(f,p,v,m,T,y){return this.style.setShadow(f,p,v,m,T,y)},setShadowOffset:function(f,p){return this.style.setShadowOffset(f,p)},setShadowColor:function(f){return this.style.setShadowColor(f)},setShadowBlur:function(f){return this.style.setShadowBlur(f)},setShadowStroke:function(f){return this.style.setShadowStroke(f)},setShadowFill:function(f){return this.style.setShadowFill(f)},setWordWrapWidth:function(f,p){return this.style.setWordWrapWidth(f,p)},setWordWrapCallback:function(f,p){return this.style.setWordWrapCallback(f,p)},setAlign:function(f){return this.style.setAlign(f)},setResolution:function(f){return this.style.setResolution(f)},setLineSpacing:function(f){return this.lineSpacing=f,this.updateText()},setPadding:function(f,p,v,m){var T,y,x;return"object"==typeof f?(v=null!==(y=a(T=f,"x",null))?f=y:(f=a(T,"left",0),a(T,"right",f)),m=null!==(x=a(T,"y",null))?p=x:(p=a(T,"top",0),a(T,"bottom",p))):(void 0===f&&(f=0),void 0===p&&(p=f),void 0===v&&(v=f),void 0===m&&(m=p)),this.padding.left=f,this.padding.top=p,this.padding.right=v,this.padding.bottom=m,this.updateText()},setMaxLines:function(f){return this.style.setMaxLines(f)},updateText:function(){var f=this.canvas,p=this.context,v=this.style,m=v.resolution,T=v.metrics;v.syncFont(f,p);var y=this._text;(v.wordWrapWidth||v.wordWrapCallback)&&(y=this.runWordWrap(this._text));var x,w=y.split(this.splitRegExp),E=o(this,T,w),S=this.padding;0===v.fixedWidth?(this.width=E.width+S.left+S.right,x=E.width):(this.width=v.fixedWidth,(x=this.width-S.left-S.right)<E.width&&(x=E.width)),this.height=0===v.fixedHeight?E.height+S.top+S.bottom:v.fixedHeight;var A,_,C=this.width,M=this.height;this.updateDisplayOrigin(),C*=m,M*=m,C=Math.max(C,1),M=Math.max(M,1),f.width!==C||f.height!==M?(f.width=C,f.height=M,this.frame.setSize(C,M),v.syncFont(f,p)):p.clearRect(0,0,C,M),p.save(),p.scale(m,m),v.backgroundColor&&(p.fillStyle=v.backgroundColor,p.fillRect(0,0,C,M)),v.syncStyle(f,p),p.textBaseline="alphabetic",p.translate(S.left,S.top);for(var P=0;P<E.lines;P++){if(A=v.strokeThickness/2,_=v.strokeThickness/2+P*E.lineHeight+T.ascent,0<P&&(_+=E.lineSpacing*P),v.rtl)A=C-A;else if("right"===v.align)A+=x-E.lineWidths[P];else if("center"===v.align)A+=(x-E.lineWidths[P])/2;else if("justify"===v.align&&.85<=E.lineWidths[P]/E.width){for(var L=E.width-E.lineWidths[P],D=p.measureText(" ").width,F=w[P].trim(),X=F.split(" "),R=Math.floor((L+=(w[P].length-F.length)*D)/D),O=0;0<R;)X[O]+=" ",O=(O+1)%(X.length-1||1),--R;w[P]=X.join(" ")}this.autoRound&&(A=Math.round(A),_=Math.round(_)),v.strokeThickness&&(this.style.syncShadow(p,v.shadowStroke),p.strokeText(w[P],A,_)),v.color&&(this.style.syncShadow(p,v.shadowFill),p.fillText(w[P],A,_))}p.restore(),this.renderer&&this.renderer.gl&&(this.frame.source.glTexture=this.renderer.canvasToTexture(f,this.frame.source.glTexture,!0),this.frame.glTexture=this.frame.source.glTexture),this.dirty=!0;var N=this.input;return N&&!N.customHitArea&&(N.hitArea.width=this.width,N.hitArea.height=this.height),this},getTextMetrics:function(){return this.style.getTextMetrics()},text:{get:function(){return this._text},set:function(f){this.setText(f)}},toJSON:function(){var f=l.ToJSON(this),p={autoRound:this.autoRound,text:this._text,style:this.style.toJSON(),padding:{left:this.padding.left,right:this.padding.right,top:this.padding.top,bottom:this.padding.bottom}};return f.data=p,f},preDestroy:function(){this.style.rtl&&i(this.canvas),n.remove(this.canvas),this.texture.destroy()}});g.exports=d},function(g,b,t){var h=t(31),n=t(0),s=t(11),l=t(22),e=t(15),r=t(361),o=t(192),a=t(1091),i=t(3),u=new n({Extends:e,Mixins:[s.Alpha,s.BlendMode,s.ComputedSize,s.Crop,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Tint,s.Transform,s.Visible,a],initialize:function(c,d,f,p,v,m,T){var y=c.sys.renderer;e.call(this,c,"TileSprite");var x=c.sys.textures.get(m),w=x.get(T);v=p&&v?(p=Math.floor(p),Math.floor(v)):(p=w.width,w.height),this._tilePosition=new i,this._tileScale=new i(1,1),this.dirty=!1,this.renderer=y,this.canvas=h.create(this,p,v),this.context=this.canvas.getContext("2d"),this.displayTexture=x,this.displayFrame=w,this._crop=this.resetCropObject(),this.texture=c.sys.textures.addCanvas(null,this.canvas,!0),this.frame=this.texture.get(),this.potWidth=r(w.width),this.potHeight=r(w.height),this.fillCanvas=h.create2D(this,this.potWidth,this.potHeight),this.fillContext=this.fillCanvas.getContext("2d"),this.fillPattern=null,this.setPosition(d,f),this.setSize(p,v),this.setFrame(T),this.setOriginFromFrame(),this.initPipeline(),c.sys.game.events.on(l.CONTEXT_RESTORED,function(E){var S;E&&(S=E.gl,this.dirty=!0,this.fillPattern=null,this.fillPattern=E.createTexture2D(0,S.LINEAR,S.LINEAR,S.REPEAT,S.REPEAT,S.RGBA,this.fillCanvas,this.potWidth,this.potHeight))},this)},setTexture:function(c,d){return this.displayTexture=this.scene.sys.textures.get(c),this.setFrame(d)},setFrame:function(c){var d=this.displayTexture.get(c);return this.potWidth=r(d.width),this.potHeight=r(d.height),this.canvas.width=0,d.cutWidth&&d.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this.displayFrame=d,this.dirty=!0,this.updateTileTexture(),this},setTilePosition:function(c,d){return void 0!==c&&(this.tilePositionX=c),void 0!==d&&(this.tilePositionY=d),this},setTileScale:function(c,d){return void 0===c&&(c=this.tileScaleX),void 0===d&&(d=c),this.tileScaleX=c,this.tileScaleY=d,this},updateTileTexture:function(){if(this.dirty&&this.renderer){var c=this.displayFrame;if(c.source.isRenderTexture||c.source.isGLTexture)return console.warn("TileSprites can only use Image or Canvas based textures"),void(this.dirty=!1);var d=this.fillContext,f=this.fillCanvas,p=this.potWidth,v=this.potHeight;this.renderer&&this.renderer.gl||(p=c.cutWidth,v=c.cutHeight),d.clearRect(0,0,p,v),f.width=p,f.height=v,d.drawImage(c.source.image,c.cutX,c.cutY,c.cutWidth,c.cutHeight,0,0,p,v),this.fillPattern=this.renderer&&this.renderer.gl?this.renderer.canvasToTexture(f,this.fillPattern):d.createPattern(f,"repeat"),this.updateCanvas(),this.dirty=!1}},updateCanvas:function(){var c,d,f,p,v,m=this.canvas;m.width===this.width&&m.height===this.height||(m.width=this.width,m.height=this.height,this.frame.setSize(this.width,this.height),this.updateDisplayOrigin(),this.dirty=!0),!this.dirty||this.renderer&&this.renderer.gl||(c=this.context,this.scene.sys.game.config.antialias||o.disable(c),d=this._tileScale.x,f=this._tileScale.y,p=this._tilePosition.x,v=this._tilePosition.y,c.clearRect(0,0,this.width,this.height),c.save(),c.scale(d,f),c.translate(-p,-v),c.fillStyle=this.fillPattern,c.fillRect(p,v,this.width/d,this.height/f),c.restore()),this.dirty=!1},preDestroy:function(){this.renderer&&this.renderer.gl&&this.renderer.deleteTexture(this.fillPattern),h.remove(this.canvas),h.remove(this.fillCanvas),this.fillPattern=null,this.fillContext=null,this.fillCanvas=null,this.displayTexture=null,this.displayFrame=null,this.texture.destroy(),this.renderer=null},tilePositionX:{get:function(){return this._tilePosition.x},set:function(c){this._tilePosition.x=c,this.dirty=!0}},tilePositionY:{get:function(){return this._tilePosition.y},set:function(c){this._tilePosition.y=c,this.dirty=!0}},tileScaleX:{get:function(){return this._tileScale.x},set:function(c){this._tileScale.x=c,this.dirty=!0}},tileScaleY:{get:function(){return this._tileScale.y},set:function(c){this._tileScale.y=c,this.dirty=!0}}});g.exports=u},function(g,b,t){var h=t(0),n=t(18),s=t(11),l=t(75),e=t(22),r=t(51),o=t(15),a=t(70),i=t(222),u=t(1094),c=t(14),d=new h({Extends:o,Mixins:[s.Alpha,s.BlendMode,s.Depth,s.Flip,s.GetBounds,s.Mask,s.Origin,s.Pipeline,s.ScrollFactor,s.Size,s.TextureCrop,s.Tint,s.Transform,s.Visible,u],initialize:function(f,p,v,m){o.call(this,f,"Video"),this.video=null,this.videoTexture=null,this.videoTextureSource=null,this.snapshotTexture=null,this.flipY=!1,this._key=i(),this.touchLocked=!0,this.playWhenUnlocked=!1,this.retryLimit=20,this.retry=0,this.retryInterval=500,this._retryID=null,this._systemMuted=!1,this._codeMuted=!1,this._systemPaused=!1,this._codePaused=!1,this._callbacks={play:this.playHandler.bind(this),error:this.loadErrorHandler.bind(this),end:this.completeHandler.bind(this),time:this.timeUpdateHandler.bind(this),seeking:this.seekingHandler.bind(this),seeked:this.seekedHandler.bind(this)},this._crop=this.resetCropObject(),this.markers={},this._markerIn=-1,this._markerOut=c.MAX_SAFE_INTEGER,this._lastUpdate=0,this._cacheKey="",this._isSeeking=!1,this.removeVideoElementOnDestroy=!1,this.setPosition(p,v),this.initPipeline(),m&&this.changeSource(m,!1);var T=f.sys.game.events;T.on(e.PAUSE,this.globalPause,this),T.on(e.RESUME,this.globalResume,this);var y=f.sys.sound;y&&y.on(a.GLOBAL_MUTE,this.globalMute,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},play:function(f,p,v){if(this.touchLocked&&this.playWhenUnlocked||this.isPlaying())return this;var m=this.video;if(!m)return console.warn("Video not loaded"),this;void 0===f&&(f=m.loop);var T=this.scene.sys.sound;T&&T.mute&&this.setMute(!0),isNaN(p)||(this._markerIn=p),!isNaN(v)&&p<v&&(this._markerOut=v),m.loop=f;var y=this._callbacks,x=m.play();return void 0!==x?x.then(this.playPromiseSuccessHandler.bind(this)).catch(this.playPromiseErrorHandler.bind(this)):(m.addEventListener("playing",y.play,!0),m.readyState<2&&(this.retry=this.retryLimit,this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval))),m.addEventListener("ended",y.end,!0),m.addEventListener("timeupdate",y.time,!0),m.addEventListener("seeking",y.seeking,!0),m.addEventListener("seeked",y.seeked,!0),this},changeSource:function(f,p,v,m,T){void 0===p&&(p=!0),this.video&&this.stop();var y=this.scene.sys.cache.video.get(f);return y?(this.video=y,this._cacheKey=f,this._codePaused=y.paused,this._codeMuted=y.muted,this.videoTexture?(this.scene.sys.textures.remove(this._key),this.videoTexture=this.scene.sys.textures.create(this._key,y,y.videoWidth,y.videoHeight),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,y.videoWidth,y.videoHeight),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(l.VIDEO_CREATED,this,y.videoWidth,y.videoHeight)):this.updateTexture(),y.currentTime=0,this._lastUpdate=0,p&&this.play(v,m,T)):this.video=null,this},addMarker:function(f,p,v){return!isNaN(p)&&0<=p&&!isNaN(v)&&(this.markers[f]=[p,v]),this},playMarker:function(f,p){var v=this.markers[f];return v&&this.play(p,v[0],v[1]),this},removeMarker:function(f){return delete this.markers[f],this},snapshot:function(f,p){return void 0===f&&(f=this.width),void 0===p&&(p=this.height),this.snapshotArea(0,0,this.width,this.height,f,p)},snapshotArea:function(f,p,v,m,T,y){void 0===f&&(f=0),void 0===p&&(p=0),void 0===v&&(v=this.width),void 0===m&&(m=this.height),void 0===T&&(T=v),void 0===y&&(y=m);var x=this.video,w=this.snapshotTexture;return w?w.setSize(T,y):(w=this.scene.sys.textures.createCanvas(i(),T,y),this.snapshotTexture=w),x&&w.context.drawImage(x,f,p,v,m,0,0,T,y),w.update()},saveSnapshotTexture:function(f){return this.snapshotTexture?this.scene.sys.textures.renameTexture(this.snapshotTexture.key,f):this.snapshotTexture=this.scene.sys.textures.createCanvas(f,this.width,this.height),this.snapshotTexture},loadURL:function(f,p,v){void 0===p&&(p="loadeddata"),void 0===v&&(v=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var m=document.createElement("video");return m.controls=!1,v&&(m.muted=!0,m.defaultMuted=!0,m.setAttribute("autoplay","autoplay")),m.setAttribute("playsinline","playsinline"),m.setAttribute("preload","auto"),m.addEventListener("error",this._callbacks.error,!0),m.src=f,m.load(),this.video=m,this},loadMediaStream:function(f,p,v){void 0===p&&(p="loadeddata"),void 0===v&&(v=!1),this.video&&this.stop(),this.videoTexture&&this.scene.sys.textures.remove(this._key);var m=document.createElement("video");m.controls=!1,v&&(m.muted=!0,m.defaultMuted=!0,m.setAttribute("autoplay","autoplay")),m.setAttribute("playsinline","playsinline"),m.setAttribute("preload","auto"),m.addEventListener("error",this._callbacks.error,!0);try{m.srcObject=f}catch{m.src=window.URL.createObjectURL(f)}return m.load(),this.video=m,this},playPromiseSuccessHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(l.VIDEO_PLAY,this),-1<this._markerIn&&(this.video.currentTime=this._markerIn)},playPromiseErrorHandler:function(f){this.scene.sys.input.once(r.POINTER_DOWN,this.unlockHandler,this),this.touchLocked=!0,this.playWhenUnlocked=!0,this.emit(l.VIDEO_ERROR,this,f)},playHandler:function(){this._codePaused=!1,this.touchLocked=!1,this.emit(l.VIDEO_PLAY,this),this.video.removeEventListener("playing",this._callbacks.play,!0)},loadErrorHandler:function(f){this.stop(),this.emit(l.VIDEO_ERROR,this,f)},unlockHandler:function(){this.touchLocked=!1,this.playWhenUnlocked=!1,this.emit(l.VIDEO_UNLOCKED,this),-1<this._markerIn&&(this.video.currentTime=this._markerIn),this.video.play(),this.emit(l.VIDEO_PLAY,this)},completeHandler:function(){this.emit(l.VIDEO_COMPLETE,this)},timeUpdateHandler:function(){this.video&&this.video.currentTime<this._lastUpdate&&(this.emit(l.VIDEO_LOOP,this),this._lastUpdate=0)},preUpdate:function(){var f,p=this.video;!p||(f=p.currentTime)!==this._lastUpdate&&(this._lastUpdate=f,this.updateTexture(),f>=this._markerOut&&(p.loop?(p.currentTime=this._markerIn,this.updateTexture(),this._lastUpdate=f,this.emit(l.VIDEO_LOOP,this)):(this.emit(l.VIDEO_COMPLETE,this),this.stop())))},checkVideoProgress:function(){2<=this.video.readyState?this.updateTexture():(this.retry--,0<this.retry?this._retryID=window.setTimeout(this.checkVideoProgress.bind(this),this.retryInterval):this.emit(l.VIDEO_TIMEOUT,this))},updateTexture:function(){var f,p=this.video,v=p.videoWidth,m=p.videoHeight;this.videoTexture?((f=this.videoTextureSource).source!==p&&(f.source=p,f.width=v,f.height=m),f.update()):(this.videoTexture=this.scene.sys.textures.create(this._key,p,v,m),this.videoTextureSource=this.videoTexture.source[0],this.videoTexture.add("__BASE",0,0,0,v,m),this.setTexture(this.videoTexture),this.setSizeToFrame(),this.updateDisplayOrigin(),this.emit(l.VIDEO_CREATED,this,v,m))},getVideoKey:function(){return this._cacheKey},seekTo:function(f){var p,m=this.video;return m&&((p=m.duration)===1/0||isNaN(p)||this.setCurrentTime(p*f)),this},getCurrentTime:function(){return this.video?this.video.currentTime:0},setCurrentTime:function(f){var p,v,m=this.video;return m&&("string"==typeof f&&(p=f[0],v=parseFloat(f.substr(1)),"+"===p?f=m.currentTime+v:"-"===p&&(f=m.currentTime-v)),m.currentTime=f,this._lastUpdate=f),this},isSeeking:function(){return this._isSeeking},seekingHandler:function(){this._isSeeking=!0,this.emit(l.VIDEO_SEEKING,this)},seekedHandler:function(){this._isSeeking=!1,this.emit(l.VIDEO_SEEKED,this),this.video&&this.updateTexture()},getProgress:function(){var f=this.video;if(f){var p=f.currentTime,v=f.duration;if(v!==1/0&&!isNaN(v))return p/v}return 0},getDuration:function(){return this.video?this.video.duration:0},setMute:function(f){void 0===f&&(f=!0),this._codeMuted=f;var p=this.video;return p&&(p.muted=!!this._systemMuted||f),this},isMuted:function(){return this._codeMuted},globalMute:function(f,p){this._systemMuted=p;var v=this.video;v&&(v.muted=!!this._codeMuted||p)},globalPause:function(){this._systemPaused=!0,this.video&&this.video.pause()},globalResume:function(){this._systemPaused=!1,this.video&&!this._codePaused&&this.video.play()},setPaused:function(f){void 0===f&&(f=!0);var p=this.video;return this._codePaused=f,p&&(f?p.paused||p.pause():f||p.paused&&!this._systemPaused&&p.play()),this},getVolume:function(){return this.video?this.video.volume:1},setVolume:function(f){return void 0===f&&(f=1),this.video&&(this.video.volume=n(f,0,1)),this},getPlaybackRate:function(){return this.video?this.video.playbackRate:1},setPlaybackRate:function(f){return this.video&&(this.video.playbackRate=f),this},getLoop:function(){return!!this.video&&this.video.loop},setLoop:function(f){return void 0===f&&(f=!0),this.video&&(this.video.loop=f),this},isPlaying:function(){return!!this.video&&!(this.video.paused||this.video.ended)},isPaused:function(){return this.video&&this.video.paused||this._codePaused||this._systemPaused},saveTexture:function(f,p){return void 0===p&&(p=!1),this.videoTexture&&this.scene.sys.textures.renameTexture(this._key,f),this._key=f,this.flipY=p,this.videoTextureSource&&this.videoTextureSource.setFlipY(p),this.videoTexture},stop:function(){var f=this.video;if(f){var p=this._callbacks;for(var v in p)f.removeEventListener(v,p[v],!0);f.pause()}return this._retryID&&window.clearTimeout(this._retryID),this.emit(l.VIDEO_STOP,this),this},removeVideoElement:function(){var f=this.video;if(f){for(f.parentNode&&f.parentNode.removeChild(f);f.hasChildNodes();)f.removeChild(f.firstChild);f.removeAttribute("autoplay"),f.removeAttribute("src"),this.video=null}},preDestroy:function(){this.stop(),this.removeVideoElementOnDestroy&&this.removeVideoElement();var f=this.scene.sys.game.events;f.off(e.PAUSE,this.globalPause,this),f.off(e.RESUME,this.globalResume,this);var p=this.scene.sys.sound;p&&p.off(a.GLOBAL_MUTE,this.globalMute,this),this._retryID&&window.clearTimeout(this._retryID)}});g.exports=d},function(g,b,t){var h=t(0),n=t(228),s=t(470),l=t(56),e=new h({initialize:function(r){this.type=l.POLYGON,this.area=0,this.points=[],r&&this.setTo(r)},contains:function(r,o){return n(this,r,o)},setTo:function(r){if(this.area=0,this.points=[],"string"==typeof r&&(r=r.split(" ")),!Array.isArray(r))return this;for(var o,a=Number.MAX_VALUE,i=0;i<r.length;i++)o={x:0,y:0},"number"==typeof r[i]||"string"==typeof r[i]?(o.x=parseFloat(r[i]),o.y=parseFloat(r[i+1]),i++):Array.isArray(r[i])?(o.x=r[i][0],o.y=r[i][1]):(o.x=r[i].x,o.y=r[i].y),this.points.push(o),o.y<a&&(a=o.y);return this.calculateArea(a),this},calculateArea:function(){if(this.points.length<3)return this.area=0,this.area;for(var r,o,a=0,i=0;i<this.points.length-1;i++)a+=((o=this.points[i+1]).x-(r=this.points[i]).x)*(r.y+o.y);return this.area=.5*-(a+=((r=this.points[0]).x-(o=this.points[this.points.length-1]).x)*(o.y+r.y)),this.area},getPoints:function(r,o,a){return s(this,r,o,a)}});g.exports=e},function(g,b){g.exports=function(t,h,n){for(var s=!1,l=-1,e=t.points.length-1;++l<t.points.length;e=l){var r=t.points[l].x,o=t.points[l].y,i=t.points[e].y;(o<=n&&n<i||i<=n&&n<o)&&h<(t.points[e].x-r)*(n-o)/(i-o)+r&&(s=!s)}return s}},function(g,b,t){var h=t(0),n=t(11),s=t(15),l=t(2),e=t(17),r=t(478),o=t(1176),a=t(25),i=new h({Extends:s,Mixins:[n.ComputedSize,n.Depth,n.GetBounds,n.Mask,n.Origin,n.ScrollFactor,n.Transform,n.Visible,o],initialize:function(u,c,d,f,p,v,m,T){void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=128),void 0===v&&(v=128),s.call(this,u,"Shader"),this.blendMode=-1;var y=u.sys.renderer;this.renderer=y,this.gl=y.gl,this.vertexData=new ArrayBuffer(2*Float32Array.BYTES_PER_ELEMENT*6),this.vertexBuffer=y.createVertexBuffer(this.vertexData.byteLength,this.gl.STREAM_DRAW),this.program=null,this.bytes=new Uint8Array(this.vertexData),this.vertexViewF32=new Float32Array(this.vertexData),this._tempMatrix1=new a,this._tempMatrix2=new a,this._tempMatrix3=new a,this.viewMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.projectionMatrix=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.uniforms={},this.pointer=null,this._rendererWidth=y.width,this._rendererHeight=y.height,this._textureCount=0,this.framebuffer=null,this.glTexture=null,this.renderToTexture=!1,this.texture=null,this.setPosition(d,f),this.setSize(p,v),this.setOrigin(.5,.5),this.setShader(c,m,T)},willRender:function(u){return!!this.renderToTexture||!(s.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&u.id)},setRenderToTexture:function(u,c){var d,f,p;return void 0===c&&(c=!1),this.renderToTexture||(this.glTexture=(p=this.renderer).createTextureFromSource(null,d=this.width,f=this.height,0),this.glTexture.flipY=c,this.framebuffer=p.createFramebuffer(d,f,this.glTexture,!1),this._rendererWidth=d,this._rendererHeight=f,this.renderToTexture=!0,this.projOrtho(0,this.width,this.height,0),u&&(this.texture=this.scene.sys.textures.addGLTexture(u,this.glTexture,d,f))),this.shader&&(p.pipelines.clear(),this.load(),this.flush(),p.pipelines.rebind()),this},setShader:function(u,c,d){if(void 0===c&&(c=[]),"string"==typeof u){var f=this.scene.sys.cache.shader;if(!f.has(u))return console.warn("Shader missing: "+u),this;this.shader=f.get(u)}else this.shader=u;var p=this.gl,v=this.renderer;this.program&&p.deleteProgram(this.program);var m=v.createProgram(this.shader.vertexSrc,this.shader.fragmentSrc);p.uniformMatrix4fv(p.getUniformLocation(m,"uViewMatrix"),!1,this.viewMatrix),p.uniformMatrix4fv(p.getUniformLocation(m,"uProjectionMatrix"),!1,this.projectionMatrix),p.uniform2f(p.getUniformLocation(m,"uResolution"),this.width,this.height),this.program=m;var T=new Date,y={resolution:{type:"2f",value:{x:this.width,y:this.height}},time:{type:"1f",value:0},mouse:{type:"2f",value:{x:this.width/2,y:this.height/2}},date:{type:"4fv",value:[T.getFullYear(),T.getMonth(),T.getDate(),60*T.getHours()*60+60*T.getMinutes()+T.getSeconds()]},sampleRate:{type:"1f",value:44100},iChannel0:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel1:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel2:{type:"sampler2D",value:null,textureData:{repeat:!0}},iChannel3:{type:"sampler2D",value:null,textureData:{repeat:!0}}};this.uniforms=this.shader.uniforms?e(!0,{},this.shader.uniforms,y):y;for(var x=0;x<4;x++)c[x]&&this.setSampler2D("iChannel"+x,c[x],x,d);return this.initUniforms(),this.projOrtho(0,this._rendererWidth,this._rendererHeight,0),this},setPointer:function(u){return this.pointer=u,this},projOrtho:function(u,c,d,f){var p=1/(u-c),v=1/(d-f),m=this.projectionMatrix;m[0]=-2*p,m[5]=-2*v,m[10]=-.001,m[12]=(u+c)*p,m[13]=(f+d)*v,m[14]=-0;var T=this.program,y=this.gl;this.renderer.setProgram(T),y.uniformMatrix4fv(y.getUniformLocation(T,"uProjectionMatrix"),!1,this.projectionMatrix),this._rendererWidth=c,this._rendererHeight=d},initUniforms:function(){var u=this.gl,c=this.renderer.glFuncMap,d=this.program;for(var f in this._textureCount=0,this.uniforms){var p=this.uniforms[f],v=p.type,m=c[v];p.uniformLocation=u.getUniformLocation(d,f),"sampler2D"!==v&&(p.glMatrix=m.matrix,p.glValueLength=m.length,p.glFunc=m.func)}},setSampler2DBuffer:function(u,c,d,f,p,v){void 0===p&&(p=0),void 0===v&&(v={});var m=this.uniforms[u];return m.value=c,v.width=d,v.height=f,m.textureData=v,this._textureCount=p,this.initSampler2D(m),this},setSampler2D:function(u,c,d,f){void 0===d&&(d=0);var p=this.scene.sys.textures;if(p.exists(c)){var v=p.getFrame(c);if(v.glTexture&&v.glTexture.isRenderTexture)return this.setSampler2DBuffer(u,v.glTexture,v.width,v.height,d,f);var m=this.uniforms[u],T=v.source;m.textureKey=c,m.source=T.image,m.value=v.glTexture,T.isGLTexture&&((f=f||{}).width=T.width,f.height=T.height),f&&(m.textureData=f),this._textureCount=d,this.initSampler2D(m)}return this},setUniform:function(u,c){return r(this.uniforms,u,c),this},getUniform:function(u){return l(this.uniforms,u,null)},setChannel0:function(u,c){return this.setSampler2D("iChannel0",u,0,c)},setChannel1:function(u,c){return this.setSampler2D("iChannel1",u,1,c)},setChannel2:function(u,c){return this.setSampler2D("iChannel2",u,2,c)},setChannel3:function(u,c){return this.setSampler2D("iChannel3",u,3,c)},initSampler2D:function(u){var c,d,f,p,v,m,T,y,x,w;u.value&&((c=this.gl).activeTexture(c.TEXTURE0+this._textureCount),c.bindTexture(c.TEXTURE_2D,u.value),(d=u.textureData)&&!u.value.isRenderTexture&&(f=c[l(d,"magFilter","linear").toUpperCase()],p=c[l(d,"minFilter","linear").toUpperCase()],v=c[l(d,"wrapS","repeat").toUpperCase()],m=c[l(d,"wrapT","repeat").toUpperCase()],T=c[l(d,"format","rgba").toUpperCase()],d.repeat&&(v=c.REPEAT,m=c.REPEAT),c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!!d.flipY),d.width?(y=l(d,"width",512),x=l(d,"height",2),w=l(d,"border",0),c.texImage2D(c.TEXTURE_2D,0,T,y,x,w,T,c.UNSIGNED_BYTE,null)):c.texImage2D(c.TEXTURE_2D,0,T,c.RGBA,c.UNSIGNED_BYTE,u.source),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,f),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,p),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,v),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,m)),this.renderer.setProgram(this.program),c.uniform1i(u.uniformLocation,this._textureCount),this._textureCount++)},syncUniforms:function(){var u,c,d,f,p,v=this.gl,m=this.uniforms,T=0;for(var y in m)d=(u=m[y]).glFunc,c=u.glValueLength,f=u.uniformLocation,null!==(p=u.value)&&(1===c?u.glMatrix?d.call(v,f,u.transpose,p):d.call(v,f,p):2===c?d.call(v,f,p.x,p.y):3===c?d.call(v,f,p.x,p.y,p.z):4===c?d.call(v,f,p.x,p.y,p.z,p.w):"sampler2D"===u.type&&(v.activeTexture(v.TEXTURE0+T),v.bindTexture(v.TEXTURE_2D,p),v.uniform1i(f,T),T++))},load:function(u){var c,d,f=this.gl,p=this.width,v=this.height,m=this.renderer,T=this.program,y=this.viewMatrix;this.renderToTexture||(c=-this._displayOriginX,d=-this._displayOriginY,y[0]=u[0],y[1]=u[1],y[4]=u[2],y[5]=u[3],y[8]=u[4],y[9]=u[5],y[12]=y[0]*c+y[4]*d,y[13]=y[1]*c+y[5]*d),f.useProgram(T),f.uniformMatrix4fv(f.getUniformLocation(T,"uViewMatrix"),!1,y),f.uniform2f(f.getUniformLocation(T,"uResolution"),this.width,this.height);var x=this.uniforms,w=x.resolution;w.value.x=p,w.value.y=v,x.time.value=m.game.loop.getDuration();var E,A,_=this.pointer;_&&(A=1-_.y/v,(E=x.mouse).value.x=(_.x/p).toFixed(2),E.value.y=A.toFixed(2)),this.syncUniforms()},flush:function(){var u=this.width,c=this.height,d=this.program,f=this.gl,p=this.vertexBuffer,v=this.renderer,m=2*Float32Array.BYTES_PER_ELEMENT;this.renderToTexture&&(v.setFramebuffer(this.framebuffer),f.clearColor(0,0,0,0),f.clear(f.COLOR_BUFFER_BIT)),f.bindBuffer(f.ARRAY_BUFFER,p);var T=f.getAttribLocation(d,"inPosition");-1!==T&&(f.enableVertexAttribArray(T),f.vertexAttribPointer(T,2,f.FLOAT,!1,m,0));var y=this.vertexViewF32;y[3]=c,y[4]=u,y[5]=c,y[8]=u,y[9]=c,y[10]=u,f.bufferSubData(f.ARRAY_BUFFER,0,this.bytes.subarray(0,6*m)),f.drawArrays(f.TRIANGLES,0,6),this.renderToTexture&&v.setFramebuffer(null,!1)},setAlpha:function(){},setBlendMode:function(){},preDestroy:function(){var u=this.gl;u.deleteProgram(this.program),u.deleteBuffer(this.vertexBuffer),this.renderToTexture&&(this.renderer.deleteFramebuffer(this.framebuffer),this.texture.destroy(),this.framebuffer=null,this.glTexture=null,this.texture=null)}});g.exports=i},function(g,b,t){var h=t(0),n=t(11),s=t(36),l=t(116),e=t(15),r=t(479),o=t(480),a=t(19),i=t(69),u=t(1179),c=t(79),d=t(39),f=t(117),p=new h({Extends:e,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Mask,n.Pipeline,n.Size,n.Texture,n.Transform,n.Visible,n.ScrollFactor,u],initialize:function(v,m,T,y,x,w,E,S,A,_,C,M){void 0===m&&(m=0),void 0===T&&(T=0),void 0===y&&(y="__WHITE"),e.call(this,v,"Mesh"),this.faces=[],this.vertices=[],this.tintFill=!1,this.debugCallback=null,this.debugGraphic=null,this.hideCCW=!0,this.modelPosition=new d,this.modelScale=new d(1,1,1),this.modelRotation=new d,this.dirtyCache=[0,0,0,0,0,0,0,0,0,0,0,0],this.transformMatrix=new i,this.viewPosition=new d,this.viewMatrix=new i,this.projectionMatrix=new i,this.totalRendered=0,this.totalFrame=0,this.ignoreDirtyCache=!1;var P=v.sys.renderer;this.setPosition(m,T),this.setTexture(y,x),this.setSize(P.width,P.height),this.initPipeline(),this.setPerspective(P.width,P.height),w&&this.addVertices(w,E,S,A,_,C,M)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},panX:function(v){return this.viewPosition.addScale(d.LEFT,v),this.dirtyCache[10]=1,this},panY:function(v){return this.viewPosition.y+=d.DOWN.y*v,this.dirtyCache[10]=1,this},panZ:function(v){return this.viewPosition.z+=v,this.dirtyCache[10]=1,this},setPerspective:function(v,m,T,y,x){return void 0===T&&(T=45),void 0===y&&(y=.01),void 0===x&&(x=1e3),this.projectionMatrix.perspective(s(T),v/m,y,x),this.dirtyCache[10]=1,this.dirtyCache[11]=0,this},setOrtho:function(v,m,T,y){return void 0===v&&(v=this.scene.sys.renderer.getAspectRatio()),void 0===m&&(m=1),void 0===T&&(T=-1e3),void 0===y&&(y=1e3),this.projectionMatrix.ortho(-v,v,-m,m,T,y),this.dirtyCache[10]=1,this.dirtyCache[11]=1,this},clear:function(){return this.faces.forEach(function(v){v.destroy()}),this.faces=[],this.vertices=[],this},addVerticesFromObj:function(v,m,T,y,x,w,E,S,A){var _=this.scene.sys.cache.obj.get(v);return _&&o(_,this,m,T,y,x,w,E,S,A),this},sortByDepth:function(v,m){return v.depth-m.depth},depthSort:function(){return c(this.faces,this.sortByDepth),this},addVertex:function(v,m,T,y,x,w,E){var S=new f(v,m,T,y,x,w,E);return this.vertices.push(S),S},addFace:function(v,m,T){var y=new l(v,m,T);return this.faces.push(y),this.dirtyCache[9]=-1,y},addVertices:function(v,m,T,y,x,w,E){var S=r(v,m,T,y,x,w,E);return S&&(this.faces=this.faces.concat(S.faces),this.vertices=this.vertices.concat(S.vertices)),this.dirtyCache[9]=-1,this},getFaceCount:function(){return this.faces.length},getVertexCount:function(){return this.vertices.length},getFace:function(v){return this.faces[v]},getFaceAt:function(v,m,T){void 0===T&&(T=this.scene.sys.cameras.main);for(var y=a(this,T).calc,x=this.faces,w=[],E=0;E<x.length;E++){var S=x[E];S.contains(v,m,y)&&w.push(S)}return c(w,this.sortByDepth)},setDebug:function(v,m){return this.debugGraphic=v,this.debugCallback=v||m?m||this.renderDebug:null,this},isDirty:function(){var v=this.modelPosition,m=this.modelRotation,T=this.modelScale,y=this.dirtyCache,x=v.x,w=v.y,E=v.z,S=m.x,A=m.y,_=m.z,C=T.x,M=T.y,P=T.z,L=this.getFaceCount(),D=y[0],F=y[1],X=y[2],R=y[3],O=y[4],N=y[5],k=y[6],I=y[7],B=y[8],Y=y[9];return y[0]=x,y[1]=w,y[2]=E,y[3]=S,y[4]=A,y[5]=_,y[6]=C,y[7]=M,y[8]=P,y[9]=L,D!==x||F!==w||X!==E||R!==S||O!==A||N!==_||k!==C||I!==M||B!==P||Y!==L},preUpdate:function(){this.totalRendered=this.totalFrame,this.totalFrame=0;var v=this.dirtyCache;if(this.ignoreDirtyCache||v[10]||this.isDirty()){var m=this.width,T=this.height,y=this.viewMatrix,x=this.viewPosition;v[10]&&(y.identity(),y.translate(x),y.invert(),v[10]=0);var w=this.transformMatrix;w.setWorldMatrix(this.modelRotation,this.modelPosition,this.modelScale,this.viewMatrix,this.projectionMatrix);for(var E=x.z,S=this.faces,A=0;A<S.length;A++)S[A].transformCoordinatesLocal(w,m,T,E);this.depthSort()}},renderDebug:function(v,m){for(var T=v.debugGraphic,y=0;y<m.length;y++){var x=m[y];T.strokeTriangle(x.vertex1.tx,x.vertex1.ty,x.vertex2.tx,x.vertex2.ty,x.vertex3.tx,x.vertex3.ty)}},preDestroy:function(){this.clear(),this.debugCallback=null,this.debugGraphic=null}});g.exports=p},function(g,b,t){var h=t(50);g.exports=function(n,s){return h(n.x,n.y,s.x,s.y)<=n.radius+s.radius}},function(g,b,t){var h=t(4),n=t(233);g.exports=function(s,l,e){var r,o,u,c,d,f,p,v,m,T,y,x,w,E,S;return void 0===e&&(e=[]),n(s,l)&&(0==(T=(m=2*((c=s.x2-(r=s.x1))*(f=r-l.x)+(d=s.y2-(o=s.y1))*(p=o-l.y)))*m-4*(v=c*c+d*d)*(f*f+p*p-(u=l.radius)*u))?(x=r+(y=-m/(2*v))*c,w=o+y*d,0<=y&&y<=1&&e.push(new h(x,w))):0<T&&(x=r+(E=(-m-Math.sqrt(T))/(2*v))*c,w=o+E*d,0<=E&&E<=1&&e.push(new h(x,w)),x=r+(S=(-m+Math.sqrt(T))/(2*v))*c,w=o+S*d,0<=S&&S<=1&&e.push(new h(x,w)))),e}},function(g,b,t){var h=t(66),n=new(t(4));g.exports=function(s,l,e){if(void 0===e&&(e=n),h(l,s.x1,s.y1))return e.x=s.x1,e.y=s.y1,!0;if(h(l,s.x2,s.y2))return e.x=s.x2,e.y=s.y2,!0;var r,o=s.x2-s.x1,a=s.y2-s.y1,c=o*o+a*a,d=o,f=a;return 0<c&&(d*=r=((l.x-s.x1)*o+(l.y-s.y1)*a)/c,f*=r),e.x=s.x1+d,e.y=s.y1+f,d*d+f*f<=c&&0<=d*o+f*a&&h(l,e.x,e.y)}},function(g,b,t){var h=t(4),n=t(96),s=t(488);g.exports=function(l,e,r){if(void 0===r&&(r=[]),s(l,e))for(var o=e.getLineA(),a=e.getLineB(),i=e.getLineC(),u=e.getLineD(),c=[new h,new h,new h,new h],d=[n(o,l,c[0]),n(a,l,c[1]),n(i,l,c[2]),n(u,l,c[3])],f=0;f<4;f++)d[f]&&r.push(c[f]);return r}},function(g,b){g.exports=function(t,h,n,s){void 0===n&&(n=!1),void 0===s&&(s=[]);for(var l,e,r,o,a,i,u=t.x3-t.x1,c=t.y3-t.y1,d=t.x2-t.x1,f=t.y2-t.y1,p=u*u+c*c,v=u*d+c*f,m=d*d+f*f,T=p*m-v*v,y=0==T?0:1/T,x=t.x1,w=t.y1,E=0;E<h.length&&(e=(p*(i=d*(r=h[E].x-x)+f*(o=h[E].y-w))-v*(a=u*r+c*o))*y,!(0<=(l=(m*a-v*i)*y)&&0<=e&&l+e<1&&(s.push({x:h[E].x,y:h[E].y}),n)));E++);return s}},function(g,b){g.exports=function(t,h,n,s){var l=Math.cos(s),e=Math.sin(s),r=t.x1-h,o=t.y1-n;return t.x1=r*l-o*e+h,t.y1=r*e+o*l+n,t.x2=(r=t.x2-h)*l-(o=t.y2-n)*e+h,t.y2=r*e+o*l+n,t}},function(g,b){g.exports=function(t){return 0===t.height?NaN:t.width/t.height}},function(g,b){g.exports=function(t,h,n,s){var l=Math.cos(s),e=Math.sin(s),r=t.x1-h,o=t.y1-n;return t.x1=r*l-o*e+h,t.y1=r*e+o*l+n,t.x2=(r=t.x2-h)*l-(o=t.y2-n)*e+h,t.y2=r*e+o*l+n,t.x3=(r=t.x3-h)*l-(o=t.y3-n)*e+h,t.y3=r*e+o*l+n,t}},function(g,b,t){g.exports={BUTTON_DOWN:t(1310),BUTTON_UP:t(1311),CONNECTED:t(1312),DISCONNECTED:t(1313),GAMEPAD_BUTTON_DOWN:t(1314),GAMEPAD_BUTTON_UP:t(1315)}},function(g,b,t){var h=t(17),n=t(156);g.exports=function(s,l){var e=void 0===s?n():h({},s);if(l)for(var r in l)void 0!==l[r]&&(e[r]=l[r]);return e}},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=t(408),a=new h({Extends:s,initialize:function(i,u,c,d){var f,p="xml";r(u)&&(u=e(f=u,"key"),c=e(f,"url"),d=e(f,"xhrSettings"),p=e(f,"extension",p)),s.call(this,i,{type:"xml",cache:i.cacheManager.xml,extension:p,responseType:"text",key:u,url:c,xhrSettings:d})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=o(this.xhrLoader.responseText),this.data?this.onProcessComplete():(console.warn("Invalid XMLFile: "+this.key),this.onProcessError())}});l.register("xml",function(i,u,c){if(Array.isArray(i))for(var d=0;d<i.length;d++)this.addFile(new a(this,i[d]));else this.addFile(new a(this,i,u,c));return this}),g.exports=a},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c){var d,f="text",p="txt",v=a.cacheManager.text;r(i)&&(i=e(d=i,"key"),u=e(d,"url"),c=e(d,"xhrSettings"),p=e(d,"extension",p),f=e(d,"type",f),v=e(d,"cache",v)),s.call(this,a,{type:f,cache:v,extension:p,responseType:"text",key:i,url:u,xhrSettings:c})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("text",function(a,i,u){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.addFile(new o(this,a[c]));else this.addFile(new o(this,a,i,u));return this}),g.exports=o},function(g,b,t){g.exports={Acceleration:t(1368),Angular:t(1369),Bounce:t(1370),Debug:t(1371),Drag:t(1372),Enable:t(1373),Friction:t(1374),Gravity:t(1375),Immovable:t(1376),Mass:t(1377),OverlapCirc:t(523),OverlapRect:t(244),Pushable:t(1378),Size:t(1379),Velocity:t(1380)}},function(g,b){g.exports=function(t,h,n,s,l,e,r){void 0===e&&(e=!0),void 0===r&&(r=!1);var a,i,u=[],c=[],d=t.treeMinMax;return d.minX=h,d.minY=n,d.maxX=h+s,d.maxY=n+l,r&&(c=t.staticTree.search(d)),e&&t.useTree?u=t.tree.search(d):e&&(a={position:{x:h,y:n},left:h,top:n,right:h+s,bottom:n+l,isCircle:!1},i=t.intersects,t.bodies.iterate(function(f){i(f,a)&&u.push(f)})),c.concat(u)}},function(g,b,t){g.exports={COLLIDE:t(1381),OVERLAP:t(1382),PAUSE:t(1383),RESUME:t(1384),TILE_COLLIDE:t(1385),TILE_OVERLAP:t(1386),WORLD_BOUNDS:t(1387),WORLD_STEP:t(1388)}},function(g,b,t){var h=t(62);g.exports=function(n,s,l,e){var r=0,o=n.deltaAbsX()+s.deltaAbsX()+e;return 0===n._dx&&0===s._dx?(n.embedded=!0,s.embedded=!0):n._dx>s._dx?o<(r=n.right-s.x)&&!l||!1===n.checkCollision.right||!1===s.checkCollision.left?r=0:(n.touching.none=!1,n.touching.right=!0,s.touching.none=!1,s.touching.left=!0,s.physicsType!==h.STATIC_BODY||l||(n.blocked.none=!1,n.blocked.right=!0),n.physicsType!==h.STATIC_BODY||l||(s.blocked.none=!1,s.blocked.left=!0)):n._dx<s._dx&&(o<-(r=n.x-s.width-s.x)&&!l||!1===n.checkCollision.left||!1===s.checkCollision.right?r=0:(n.touching.none=!1,n.touching.left=!0,s.touching.none=!1,s.touching.right=!0,s.physicsType!==h.STATIC_BODY||l||(n.blocked.none=!1,n.blocked.left=!0),n.physicsType!==h.STATIC_BODY||l||(s.blocked.none=!1,s.blocked.right=!0))),n.overlapX=r,s.overlapX=r}},function(g,b,t){var h=t(62);g.exports=function(n,s,l,e){var r=0,o=n.deltaAbsY()+s.deltaAbsY()+e;return 0===n._dy&&0===s._dy?(n.embedded=!0,s.embedded=!0):n._dy>s._dy?o<(r=n.bottom-s.y)&&!l||!1===n.checkCollision.down||!1===s.checkCollision.up?r=0:(n.touching.none=!1,n.touching.down=!0,s.touching.none=!1,s.touching.up=!0,s.physicsType!==h.STATIC_BODY||l||(n.blocked.none=!1,n.blocked.down=!0),n.physicsType!==h.STATIC_BODY||l||(s.blocked.none=!1,s.blocked.up=!0)):n._dy<s._dy&&(o<-(r=n.y-s.bottom)&&!l||!1===n.checkCollision.up||!1===s.checkCollision.down?r=0:(n.touching.none=!1,n.touching.up=!0,s.touching.none=!1,s.touching.down=!0,s.physicsType!==h.STATIC_BODY||l||(n.blocked.none=!1,n.blocked.up=!0),n.physicsType!==h.STATIC_BODY||l||(s.blocked.none=!1,s.blocked.down=!0))),n.overlapY=r,s.overlapY=r}},function(g,b){g.exports=function(t,h){return!(h.right<=t.left||h.bottom<=t.top||h.position.x>=t.right||h.position.y>=t.bottom)}},function(g,b,t){g.exports={Bounce:t(1495),Collision:t(1496),Force:t(1497),Friction:t(1498),Gravity:t(1499),Mass:t(1500),Sensor:t(1501),SetBody:t(1502),Sleep:t(1503),Static:t(1520),Transform:t(1521),Velocity:t(1522)}},function(g,b){var t={};(g.exports=t).create=function(h,n){var s=h.bodyA,l=h.bodyB,e={id:t.id(s,l),bodyA:s,bodyB:l,activeContacts:[],separation:0,isActive:!0,confirmedActive:!0,isSensor:s.isSensor||l.isSensor,timeCreated:n,timeUpdated:n,collision:null,inverseMass:0,friction:0,frictionStatic:0,restitution:0,slop:0};return t.update(e,h,n),e},t.update=function(h,n,s){if((h.collision=n).collided){var l=n.supports,e=h.activeContacts,r=n.parentA,o=n.parentB;h.inverseMass=r.inverseMass+o.inverseMass,h.friction=Math.min(r.friction,o.friction),h.frictionStatic=Math.max(r.frictionStatic,o.frictionStatic),h.restitution=Math.max(r.restitution,o.restitution),h.slop=Math.max(r.slop,o.slop);for(var a=0;a<l.length;a++)e[a]=l[a].contact;var i=l.length;i<e.length&&(e.length=i),h.separation=n.depth,t.setActive(h,!0,s)}else!0===h.isActive&&t.setActive(h,!1,s)},t.setActive=function(h,n,s){n?(h.isActive=!0,h.timeUpdated=s):(h.isActive=!1,h.activeContacts.length=0)},t.id=function(h,n){return h.id<n.id?"A"+h.id+"B"+n.id:"A"+n.id+"B"+h.id}},function(g,b,t){g.exports={CalculateFacesAt:t(252),CalculateFacesWithin:t(63),CheckIsoBounds:t(541),Copy:t(1420),CreateFromTiles:t(1421),CullBounds:t(543),CullTiles:t(544),Fill:t(1422),FilterTiles:t(1423),FindByIndex:t(1424),FindTile:t(1425),ForEachTile:t(1426),GetCullTilesFunction:t(1427),GetTileAt:t(158),GetTileAtWorldXY:t(1428),GetTilesWithin:t(26),GetTilesWithinShape:t(1429),GetTilesWithinWorldXY:t(529),GetTileToWorldXFunction:t(1430),GetTileToWorldXYFunction:t(1431),GetTileToWorldYFunction:t(1432),GetWorldToTileXFunction:t(1433),GetWorldToTileXYFunction:t(1434),GetWorldToTileYFunction:t(1435),HasTileAt:t(562),HasTileAtWorldXY:t(1436),HexagonalCullBounds:t(546),HexagonalCullTiles:t(545),HexagonalTileToWorldXY:t(550),HexagonalTileToWorldY:t(554),HexagonalWorldToTileXY:t(556),HexagonalWorldToTileY:t(560),IsInLayerBounds:t(119),IsometricCullTiles:t(547),IsometricTileToWorldXY:t(551),IsometricWorldToTileXY:t(557),PutTileAt:t(257),PutTileAtWorldXY:t(1437),PutTilesAt:t(1438),Randomize:t(1439),RemoveTileAt:t(563),RemoveTileAtWorldXY:t(1440),RenderDebug:t(1441),ReplaceByIndex:t(542),RunCull:t(159),SetCollision:t(1442),SetCollisionBetween:t(1443),SetCollisionByExclusion:t(1444),SetCollisionByProperty:t(1445),SetCollisionFromCollisionGroup:t(1446),SetLayerCollisionIndex:t(160),SetTileCollision:t(72),SetTileIndexCallback:t(1447),SetTileLocationCallback:t(1448),Shuffle:t(1449),StaggeredCullBounds:t(549),StaggeredCullTiles:t(548),StaggeredTileToWorldXY:t(552),StaggeredTileToWorldY:t(555),StaggeredWorldToTileXY:t(558),StaggeredWorldToTileY:t(561),SwapByIndex:t(1450),TileToWorldX:t(253),TileToWorldXY:t(553),TileToWorldY:t(254),WeightedRandomize:t(1451),WorldToTileX:t(255),WorldToTileXY:t(559),WorldToTileY:t(256)}},function(g,b,t){var h=t(158);g.exports=function(n,s,l){var e=h(n,s,!0,l),r=h(n,s-1,!0,l),o=h(n,s+1,!0,l),a=h(n-1,s,!0,l),i=h(n+1,s,!0,l),u=e&&e.collides;return u&&(e.faceTop=!0,e.faceBottom=!0,e.faceLeft=!0,e.faceRight=!0),r&&r.collides&&(u&&(e.faceTop=!1),r.faceBottom=!u),o&&o.collides&&(u&&(e.faceBottom=!1),o.faceTop=!u),a&&a.collides&&(u&&(e.faceLeft=!1),a.faceRight=!u),i&&i.collides&&(u&&(e.faceRight=!1),i.faceLeft=!u),e&&!e.collides&&e.resetFaces(),e}},function(g,b){g.exports=function(t,h,n){var s=n.baseTileWidth,l=n.tilemapLayer,e=0;return l&&(e=l.x+(h=h||l.scene.cameras.main).scrollX*(1-l.scrollFactorX),s*=l.scaleX),e+t*s}},function(g,b){g.exports=function(t,h,n){var s=n.baseTileHeight,l=n.tilemapLayer,e=0;return l&&(e=l.y+(h=h||l.scene.cameras.main).scrollY*(1-l.scrollFactorY),s*=l.scaleY),e+t*s}},function(g,b){g.exports=function(t,h,n,s){void 0===h&&(h=!0);var l=s.baseTileWidth,e=s.tilemapLayer;return e&&(t-=e.x+(n=n||e.scene.cameras.main).scrollX*(1-e.scrollFactorX),l*=e.scaleX),h?Math.floor(t/l):t/l}},function(g,b){g.exports=function(t,h,n,s){void 0===h&&(h=!0);var l=s.baseTileHeight,e=s.tilemapLayer;return e&&(t-=e.y+(n=n||e.scene.cameras.main).scrollY*(1-e.scrollFactorY),l*=e.scaleY),h?Math.floor(t/l):t/l}},function(g,b,t){var h=t(85),n=t(119),s=t(252),l=t(72);g.exports=function(e,r,o,a,i){if(void 0===a&&(a=!0),!n(r,o,i))return null;var u,c=i.data[o][r],d=c&&c.collides;e instanceof h?(null===i.data[o][r]&&(i.data[o][r]=new h(i,e.index,r,o,i.tileWidth,i.tileHeight)),i.data[o][r].copy(e)):(u=e,null===i.data[o][r]?i.data[o][r]=new h(i,u,r,o,i.tileWidth,i.tileHeight):i.data[o][r].index=u);var f=i.data[o][r],p=-1!==i.collideIndexes.indexOf(f.index);return l(f,p),a&&d!==f.collides&&s(r,o,i),f}},function(g,b,t){var h=t(29);g.exports=function(n){return"isometric"===(n=n.toLowerCase())?h.ISOMETRIC:"staggered"===n?h.STAGGERED:"hexagonal"===n?h.HEXAGONAL:h.ORTHOGONAL}},function(g,b,t){var h=t(40),n=t(120),s=t(121),l=t(85);g.exports=function(e,r,o,a,i){for(var u=new n({tileWidth:o,tileHeight:a}),c=new s({name:e,tileWidth:o,tileHeight:a,format:h.ARRAY_2D,layers:[u]}),d=[],f=r.length,p=0,v=0;v<r.length;v++){d[v]=[];for(var m=r[v],T=0;T<m.length;T++){var y=parseInt(m[T],10);d[v][T]=isNaN(y)||-1===y?i?null:new l(u,-1,T,v,o,a):new l(u,y,T,v,o,a)}0===p&&(p=m.length)}return c.width=u.width=p,c.height=u.height=f,c.widthInPixels=u.widthInPixels=p*o,c.heightInPixels=u.heightInPixels=f*a,u.data=d,c}},function(g,b,t){function h(e){return{x:e.x,y:e.y}}var n=t(571),s=t(261),l=["id","name","type","rotation","properties","visible","x","y","width","height"];g.exports=function(e,r,o){void 0===r&&(r=0),void 0===o&&(o=0);var a,i=n(e,l);return i.x+=r,i.y+=o,e.gid?(a=s(e.gid),i.gid=a.gid,i.flippedHorizontal=a.flippedHorizontal,i.flippedVertical=a.flippedVertical,i.flippedAntiDiagonal=a.flippedAntiDiagonal):e.polyline?i.polyline=e.polyline.map(h):e.polygon?i.polygon=e.polygon.map(h):e.ellipse?i.ellipse=e.ellipse:e.text?i.text=e.text:e.point?i.point=!0:i.rectangle=!0,i}},function(g,b){g.exports=function(t){var h=Boolean(2147483648&t),n=Boolean(1073741824&t),s=Boolean(536870912&t);t&=536870911;var l=0,e=!1;return h&&n&&s?(l=Math.PI/2,e=!0):h&&n&&!s?(l=Math.PI,e=!1):h&&!n&&s?(l=Math.PI/2,e=!1):!h||n||s?!h&&n&&s?(l=3*Math.PI/2,e=!1):h||!n||s?h||n||!s?h||n||s||(l=0,e=!1):(l=3*Math.PI/2,e=!0):(l=Math.PI,e=!0):e=!(l=0),{gid:t,flippedHorizontal:h,flippedVertical:n,flippedAntiDiagonal:s,rotation:l,flipped:e}}},function(g,b,t){var h=t(40),n=t(121),s=t(564),l=t(580);g.exports=function(e,r,o,a,i,u,c,d){void 0===o&&(o=32),void 0===a&&(a=32),void 0===i&&(i=10),void 0===u&&(u=10),void 0===d&&(d=!1);var f,p=null;return Array.isArray(c)?p=s(void 0!==r?r:"map",h.ARRAY_2D,c,o,a,d):void 0!==r&&((f=e.cache.tilemap.get(r))?p=s(r,f.format,f.data,o,a,d):console.warn("No map data found for key "+r)),null===p&&(p=new n({tileWidth:o,tileHeight:a,width:i,height:u})),new l(e,p)}},function(g,b,t){var h=t(6);g.exports=function(n){var s=h(n,"targets",null);return null===s||("function"==typeof s&&(s=s.call()),Array.isArray(s)||(s=[s])),s}},function(g,b){function t(l){return!!l.getActive&&"function"==typeof l.getActive}function h(l){return!!l.getStart&&"function"==typeof l.getStart}function n(l){return!!l.getEnd&&"function"==typeof l.getEnd}var s=function(l,e){var r,o,a,i,u,c,d,f=function(x,w,E){return E},p=function(x,w,E){return E},v=null,m=typeof e;if("number"==m)f=function(){return e};else if("string"==m){var T=e[0],y=parseFloat(e.substr(2));switch(T){case"+":f=function(x,w,E){return E+y};break;case"-":f=function(x,w,E){return E-y};break;case"*":f=function(x,w,E){return E*y};break;case"/":f=function(x,w,E){return E/y};break;default:f=function(){return parseFloat(e)}}}else"function"==m?f=e:"object"==m&&(h(d=e)||n(d)||t(d)?(t(e)&&(v=e.getActive),n(e)&&(f=e.getEnd),h(e)&&(p=e.getStart)):e.hasOwnProperty("value")?c=s(l,e.value):(r=e.hasOwnProperty("to"),o=e.hasOwnProperty("from"),a=e.hasOwnProperty("start"),r&&(o||a)&&(c=s(l,e.to),a&&(i=s(l,e.start),c.getActive=i.getEnd),o&&(u=s(l,e.from),c.getStart=u.getEnd))));return c||{getActive:v,getEnd:f,getStart:p}};g.exports=s},function(g,b){g.exports={targets:null,delay:0,duration:1e3,ease:"Power0",easeParams:null,hold:0,repeat:0,repeatDelay:0,yoyo:!1,flipX:!1,flipY:!1}},function(g,b,t){var h=t(0),n=t(9),s=t(267),l=t(16),e=t(5),r=t(100),o=t(14),a=new h({Extends:n,initialize:function(i,u,c){n.call(this),this.parent=i,this.parentIsTimeline=i.hasOwnProperty("isTimeline"),this.data=u,this.totalData=u.length,this.targets=c,this.totalTargets=c.length,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.startDelay=0,this.hasStarted=!1,this.isSeeking=!1,this.completeDelay=0,this.countdown=0,this.offset=0,this.calculatedOffset=0,this.state=r.PENDING_ADD,this._pausedState=r.INIT,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onActive:null,onComplete:null,onLoop:null,onRepeat:null,onStart:null,onStop:null,onUpdate:null,onYoyo:null}},getValue:function(i){return void 0===i&&(i=0),this.data[i].current},setTimeScale:function(i){return this.timeScale=i,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===r.ACTIVE},isPaused:function(){return this.state===r.PAUSED},hasTarget:function(i){return-1!==this.targets.indexOf(i)},updateTo:function(i,u,c){void 0===c&&(c=!1);for(var d=0;d<this.totalData;d++){var f=this.data[d];f.key===i&&(f.end=u,c&&(f.start=f.current))}return this},restart:function(){return this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0,this.state===r.ACTIVE?this.seek(0):this.state===r.REMOVED?(this.seek(0),this.parent.makeActive(this),this):this.state===r.PENDING_ADD?this:this.play()},calcDuration:function(){for(var i=0,u=o.MAX_SAFE_INTEGER,c=this.data,d=0;d<this.totalData;d++){var f=c[d];f.t1=f.duration+f.hold,f.yoyo&&(f.t1+=f.duration),f.t2=f.t1+f.repeatDelay,f.totalDuration=f.delay+f.t1,-1===f.repeat?f.totalDuration+=999999999999*f.t2:0<f.repeat&&(f.totalDuration+=f.t2*f.repeat),f.totalDuration>i&&(i=f.totalDuration),f.delay<u&&(u=f.delay)}this.duration=Math.max(i,.001),this.loopCounter=-1===this.loop?999999999999:this.loop,this.totalDuration=0<this.loopCounter?this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.duration+this.completeDelay,this.startDelay=u},init:function(){if(this.paused&&!this.parentIsTimeline)return this.state=r.PENDING_ADD,this._pausedState=r.INIT,!1;for(var i=this.data,u=this.totalTargets,c=0;c<this.totalData;c++){var d=i[c],f=d.target,p=d.gen,v=d.key,m=d.index;d.delay=p.delay(f,v,0,m,u,this),d.duration=Math.max(p.duration(f,v,0,m,u,this),.001),d.hold=p.hold(f,v,0,m,u,this),d.repeat=p.repeat(f,v,0,m,u,this),d.repeatDelay=p.repeatDelay(f,v,0,m,u,this)}return this.calcDuration(),this.progress=0,this.totalProgress=0,this.elapsed=0,this.totalElapsed=0,this.state=r.INIT,!0},makeActive:function(){this.parent.makeActive(this),this.dispatchTweenEvent(s.TWEEN_ACTIVE,this.callbacks.onActive)},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweenData(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=r.LOOP_DELAY):(this.state=r.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=r.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))},pause:function(){return this.state===r.PAUSED||(this.paused=!0,this._pausedState=this.state,this.state=r.PAUSED),this},play:function(i){void 0===i&&(i=!1);var u=this.state;return u!==r.INIT||this.parentIsTimeline?u===r.ACTIVE||u===r.PENDING_ADD&&this._pausedState===r.PENDING_ADD||(this.parentIsTimeline||u!==r.PENDING_REMOVE&&u!==r.REMOVED?this.parentIsTimeline?(this.resetTweenData(i),0===this.calculatedOffset?this.state=r.ACTIVE:(this.countdown=this.calculatedOffset,this.state=r.OFFSET_DELAY)):(this.paused?this.paused=!1:(this.resetTweenData(i),this.state=r.ACTIVE),this.makeActive()):(this.seek(0),this.parent.makeActive(this))):(this.resetTweenData(!1),this.state=r.ACTIVE),this},resetTweenData:function(i){for(var u=this.data,c=this.totalData,d=this.totalTargets,f=0;f<c;f++){var p=u[f],v=p.target,m=p.key,T=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=-1===p.repeat?999999999999:p.repeat,i?(p.start=p.getStartValue(v,m,p.start,T,d,this),p.end=p.getEndValue(v,m,p.end,T,d,this),p.current=p.start,p.state=r.PLAYING_FORWARD):p.state=r.PENDING_RENDER,0<p.delay&&(p.elapsed=p.delay,p.state=r.DELAY),p.getActiveValue&&(v[m]=p.getActiveValue(p.target,p.key,p.start))}},resume:function(){return this.state===r.PAUSED?(this.paused=!1,this.state=this._pausedState):this.play(),this},seek:function(i,u){void 0===u&&(u=16.6),this.state===r.REMOVED&&this.makeActive(),this.elapsed=0,this.progress=0,this.totalElapsed=0,this.totalProgress=0;for(var c=this.data,d=this.totalTargets,f=0;f<this.totalData;f++){var p=c[f],v=p.target,m=p.gen,T=p.key,y=p.index;p.progress=0,p.elapsed=0,p.repeatCounter=-1===p.repeat?999999999999:p.repeat,p.delay=m.delay(v,T,0,y,d,this),p.duration=Math.max(m.duration(v,T,0,y,d,this),.001),p.hold=m.hold(v,T,0,y,d,this),p.repeat=m.repeat(v,T,0,y,d,this),p.repeatDelay=m.repeatDelay(v,T,0,y,d,this),p.current=p.start,p.state=r.PLAYING_FORWARD,this.updateTweenData(this,p,0,y,d),0<p.delay&&(p.elapsed=p.delay,p.state=r.DELAY)}this.calcDuration();var x=!1;for(this.state===r.PAUSED&&(x=!0,this.state=r.ACTIVE),this.isSeeking=!0;this.update(0,u),this.totalProgress<i;);return this.isSeeking=!1,x&&(this.state=r.PAUSED),this},setCallback:function(i,u,c,d){return this.callbacks[i]={func:u,scope:d,params:c},this},complete:function(i){return void 0===i&&(i=0),i?(this.state=r.COMPLETE_DELAY,this.countdown=i):(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete)),this},remove:function(){return this.parent.remove(this),this},stop:function(i){return this.state===r.ACTIVE&&void 0!==i&&this.seek(i),this.state!==r.REMOVED&&(this.state!==r.PAUSED&&this.state!==r.PENDING_ADD||(this.parentIsTimeline?(this.parent.manager._destroy.push(this),this.parent.manager._toProcess++):(this.parent._destroy.push(this),this.parent._toProcess++)),this.dispatchTweenEvent(s.TWEEN_STOP,this.callbacks.onStop),this.removeAllListeners(),this.state=r.PENDING_REMOVE),this},update:function(i,u){if(this.state===r.PAUSED)return!1;switch(this.useFrames&&(u=+this.parent.timeScale),this.elapsed+=u*=this.timeScale,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=u,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case r.ACTIVE:this.hasStarted||this.isSeeking||(this.startDelay-=u,this.startDelay<=0&&(this.hasStarted=!0,this.dispatchTweenEvent(s.TWEEN_START,this.callbacks.onStart)));for(var c=!1,d=0;d<this.totalData;d++)this.updateTweenData(this,this.data[d],u)&&(c=!0);c||this.nextState();break;case r.LOOP_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=r.ACTIVE,this.dispatchTweenEvent(s.TWEEN_LOOP,this.callbacks.onLoop));break;case r.OFFSET_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=r.ACTIVE);break;case r.COMPLETE_DELAY:this.countdown-=u,this.countdown<=0&&(this.state=r.PENDING_REMOVE,this.dispatchTweenEvent(s.TWEEN_COMPLETE,this.callbacks.onComplete))}return this.state===r.PENDING_REMOVE},dispatchTweenDataEvent:function(i,u,c){this.isSeeking||(this.emit(i,this,c.key,c.target,c.current,c.previous),u&&(u.params[1]=c.target,u.func.apply(u.scope,u.params)))},dispatchTweenEvent:function(i,u){this.isSeeking||(this.emit(i,this,this.targets),u&&(u.params[1]=this.targets,u.func.apply(u.scope,u.params)))},setStateFromEnd:function(i,u,c){return u.yoyo?(u.elapsed=c,u.progress=c/u.duration,u.flipX&&u.target.toggleFlipX(),u.flipY&&u.target.toggleFlipY(),this.dispatchTweenDataEvent(s.TWEEN_YOYO,i.callbacks.onYoyo,u),u.start=u.getStartValue(u.target,u.key,u.start,u.index,i.totalTargets,i),r.PLAYING_BACKWARD):0<u.repeatCounter?(u.repeatCounter--,u.elapsed=c,u.progress=c/u.duration,u.flipX&&u.target.toggleFlipX(),u.flipY&&u.target.toggleFlipY(),u.start=u.getStartValue(u.target,u.key,u.start,u.index,i.totalTargets,i),u.end=u.getEndValue(u.target,u.key,u.start,u.index,i.totalTargets,i),0<u.repeatDelay?(u.elapsed=u.repeatDelay-c,u.current=u.start,u.target[u.key]=u.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,i.callbacks.onRepeat,u),r.PLAYING_FORWARD)):r.COMPLETE},setStateFromStart:function(i,u,c){return 0<u.repeatCounter?(u.repeatCounter--,u.elapsed=c,u.progress=c/u.duration,u.flipX&&u.target.toggleFlipX(),u.flipY&&u.target.toggleFlipY(),u.end=u.getEndValue(u.target,u.key,u.start,u.index,i.totalTargets,i),0<u.repeatDelay?(u.elapsed=u.repeatDelay-c,u.current=u.start,u.target[u.key]=u.current,r.REPEAT_DELAY):(this.dispatchTweenDataEvent(s.TWEEN_REPEAT,i.callbacks.onRepeat,u),r.PLAYING_FORWARD)):r.COMPLETE},updateTweenData:function(i,u,c){var d=u.target;switch(u.state){case r.PLAYING_FORWARD:case r.PLAYING_BACKWARD:if(!d){u.state=r.COMPLETE;break}var f=u.elapsed,p=u.duration,v=0;p<(f+=c)&&(v=f-p,f=p);var m,T=u.state===r.PLAYING_FORWARD,y=f/p;u.elapsed=f,u.progress=y,u.previous=u.current,1==y?T?(u.current=u.end,d[u.key]=u.end,0<u.hold?(u.elapsed=u.hold-v,u.state=r.HOLD_DELAY):u.state=this.setStateFromEnd(i,u,v)):(u.current=u.start,d[u.key]=u.start,u.state=this.setStateFromStart(i,u,v)):(m=u.ease(T?y:1-y),u.current=u.start+(u.end-u.start)*m,d[u.key]=u.current),this.dispatchTweenDataEvent(s.TWEEN_UPDATE,i.callbacks.onUpdate,u);break;case r.DELAY:u.elapsed-=c,u.elapsed<=0&&(u.elapsed=Math.abs(u.elapsed),u.state=r.PENDING_RENDER);break;case r.REPEAT_DELAY:u.elapsed-=c,u.elapsed<=0&&(u.elapsed=Math.abs(u.elapsed),u.state=r.PLAYING_FORWARD,this.dispatchTweenDataEvent(s.TWEEN_REPEAT,i.callbacks.onRepeat,u));break;case r.HOLD_DELAY:u.elapsed-=c,u.elapsed<=0&&(u.state=this.setStateFromEnd(i,u,Math.abs(u.elapsed)));break;case r.PENDING_RENDER:d?(u.start=u.getStartValue(d,u.key,d[u.key],u.index,i.totalTargets,i),u.end=u.getEndValue(d,u.key,u.start,u.index,i.totalTargets,i),u.current=u.start,d[u.key]=u.start,u.state=r.PLAYING_FORWARD):u.state=r.COMPLETE}return u.state!==r.COMPLETE}});a.TYPES=["onActive","onComplete","onLoop","onRepeat","onStart","onStop","onUpdate","onYoyo"],e.register("tween",function(i){return this.scene.sys.tweens.add(i)}),l.register("tween",function(i){return this.scene.sys.tweens.create(i)}),g.exports=a},function(g,b,t){g.exports={TIMELINE_COMPLETE:t(1466),TIMELINE_LOOP:t(1467),TIMELINE_PAUSE:t(1468),TIMELINE_RESUME:t(1469),TIMELINE_START:t(1470),TIMELINE_UPDATE:t(1471),TWEEN_ACTIVE:t(1472),TWEEN_COMPLETE:t(1473),TWEEN_LOOP:t(1474),TWEEN_REPEAT:t(1475),TWEEN_START:t(1476),TWEEN_STOP:t(1477),TWEEN_UPDATE:t(1478),TWEEN_YOYO:t(1479)}},function(g,b){g.exports=function(t,h,n,s,l,e,r,o,a,i,u,c,d,f,p){return{target:t,index:h,key:n,getActiveValue:e,getEndValue:s,getStartValue:l,ease:r,duration:0,totalDuration:0,delay:0,yoyo:i,hold:0,repeat:0,repeatDelay:0,flipX:f,flipY:p,progress:0,elapsed:0,repeatCounter:0,start:0,previous:0,current:0,end:0,t1:0,t2:0,gen:{delay:o,duration:a,hold:u,repeat:c,repeatDelay:d},state:0}}},function(g,b,t){var h=t(68);g.exports=function(n){return h(n,-Math.PI,Math.PI)}},function(g,b,t){var h=t(68);g.exports=function(n){return h(n,-180,180)}},function(g,b,t){var h={};g.exports=h;var n=t(83),s=t(32);h.fromVertices=function(l){for(var e={},r=0;r<l.length;r++){var o=(r+1)%l.length,a=n.normalise({x:l[o].y-l[r].y,y:l[r].x-l[o].x});e[(0===a.y?1/0:a.x/a.y).toFixed(3).toString()]=a}return s.values(e)},h.rotate=function(l,e){if(0!==e)for(var r=Math.cos(e),o=Math.sin(e),a=0;a<l.length;a++){var i=l[a],u=i.x*r-i.y*o;i.y=i.x*o+i.y*r,i.x=u}}},function(g,b,t){g.exports={AFTER_ADD:t(1504),AFTER_REMOVE:t(1505),AFTER_UPDATE:t(1506),BEFORE_ADD:t(1507),BEFORE_REMOVE:t(1508),BEFORE_UPDATE:t(1509),COLLISION_ACTIVE:t(1510),COLLISION_END:t(1511),COLLISION_START:t(1512),DRAG_END:t(1513),DRAG:t(1514),DRAG_START:t(1515),PAUSE:t(1516),RESUME:t(1517),SLEEP_END:t(1518),SLEEP_START:t(1519)}},function(g,b,t){var h={};g.exports=h;var n=t(274),s=t(250),l=t(84);h.collisions=function(e,r){for(var o=[],a=r.pairs.table,i=r.metrics,u=0;u<e.length;u++){var c=e[u][0],d=e[u][1];if((!c.isStatic&&!c.isSleeping||!d.isStatic&&!d.isSleeping)&&h.canCollide(c.collisionFilter,d.collisionFilter)&&(i.midphaseTests+=1,l.overlaps(c.bounds,d.bounds)))for(var f=1<c.parts.length?1:0;f<c.parts.length;f++)for(var p=c.parts[f],v=1<d.parts.length?1:0;v<d.parts.length;v++){var m,T,y,x=d.parts[v];(p===c&&x===d||l.overlaps(p.bounds,x.bounds))&&(T=(m=a[s.id(p,x)])&&m.isActive?m.collision:null,y=n.collides(p,x,T),i.narrowphaseTests+=1,y.reused&&(i.narrowReuseCount+=1),y.collided&&(o.push(y),i.narrowDetections+=1))}}return o},h.canCollide=function(e,r){return e.group===r.group&&0!==e.group?0<e.group:0!=(e.mask&r.category)&&0!=(r.mask&e.category)}},function(g,b,t){var h={};g.exports=h;var n=t(64),s=t(83);h.collides=function(l,e,r){var o,a,i,u,d,f=!1;if(d=r?(i=l.parent,u=e.parent,f=r&&r.collided&&i.speed*i.speed+i.angularSpeed*i.angularSpeed+u.speed*u.speed+u.angularSpeed*u.angularSpeed<.2,r):{collided:!1,bodyA:l,bodyB:e},r&&f){var p=d.axisBody,T=h._overlapAxes(p.vertices,(p===l?e:l).vertices,[p.axes[r.axisNumber]]);if(d.reused=!0,T.overlap<=0)return d.collided=!1,d}else{if((o=h._overlapAxes(l.vertices,e.vertices,l.axes)).overlap<=0||(a=h._overlapAxes(e.vertices,l.vertices,e.axes)).overlap<=0)return d.collided=!1,d;o.overlap<a.overlap?(T=o,d.axisBody=l):(T=a,d.axisBody=e),d.axisNumber=T.axisNumber}d.bodyA=l.id<e.id?l:e,d.bodyB=l.id<e.id?e:l,d.collided=!0,d.depth=T.overlap,d.parentA=d.bodyA.parent,d.parentB=d.bodyB.parent,d.normal=s.dot(T.axis,s.sub((e=d.bodyB).position,(l=d.bodyA).position))<0?{x:T.axis.x,y:T.axis.y}:{x:-T.axis.x,y:-T.axis.y},d.tangent=s.perp(d.normal),d.penetration=d.penetration||{},d.penetration.x=d.normal.x*d.depth,d.penetration.y=d.normal.y*d.depth;var y,x=h._findSupports(l,e,d.normal),w=[];return n.contains(l.vertices,x[0])&&w.push(x[0]),n.contains(l.vertices,x[1])&&w.push(x[1]),w.length<2&&(y=h._findSupports(e,l,s.neg(d.normal)),n.contains(e.vertices,y[0])&&w.push(y[0]),w.length<2&&n.contains(e.vertices,y[1])&&w.push(y[1])),w.length<1&&(w=[x[0]]),d.supports=w,d},h._overlapAxes=function(l,e,r){for(var o,a,i=s._temp[0],u=s._temp[1],c={overlap:Number.MAX_VALUE},d=0;d<r.length;d++){if(h._projectToAxis(i,l,a=r[d]),h._projectToAxis(u,e,a),(o=Math.min(i.max-u.min,u.max-i.min))<=0)return c.overlap=o,c;o<c.overlap&&(c.overlap=o,c.axis=a,c.axisNumber=d)}return c},h._projectToAxis=function(l,e,r){for(var o=s.dot(e[0],r),a=o,i=1;i<e.length;i+=1){var u=s.dot(e[i],r);a<u?a=u:u<o&&(o=u)}l.min=o,l.max=a},h._findSupports=function(l,e,r){for(var o,a,i,u=Number.MAX_VALUE,c=s._temp[0],d=e.vertices,f=l.position,p=0;p<d.length;p++)c.x=(v=d[p]).x-f.x,c.y=v.y-f.y,(o=-s.dot(r,c))<u&&(u=o,a=v);var v=d[0<=a.index-1?a.index-1:d.length-1];return c.x=v.x-f.x,c.y=v.y-f.y,u=-s.dot(r,c),i=v,c.x=(v=d[(a.index+1)%d.length]).x-f.x,c.y=v.y-f.y,(o=-s.dot(r,c))<u&&(i=v),[a,i]}},function(g,b,t){g.exports={AlignTo:t(601),Angle:t(602),Call:t(603),GetFirst:t(604),GetLast:t(605),GridAlign:t(606),IncAlpha:t(678),IncX:t(679),IncXY:t(680),IncY:t(681),PlaceOnCircle:t(682),PlaceOnEllipse:t(683),PlaceOnLine:t(684),PlaceOnRectangle:t(685),PlaceOnTriangle:t(686),PlayAnimation:t(687),PropertyValueInc:t(46),PropertyValueSet:t(27),RandomCircle:t(688),RandomEllipse:t(689),RandomLine:t(690),RandomRectangle:t(691),RandomTriangle:t(692),Rotate:t(693),RotateAround:t(694),RotateAroundDistance:t(695),ScaleX:t(696),ScaleXY:t(697),ScaleY:t(698),SetAlpha:t(699),SetBlendMode:t(700),SetDepth:t(701),SetHitArea:t(702),SetOrigin:t(703),SetRotation:t(704),SetScale:t(705),SetScaleX:t(706),SetScaleY:t(707),SetScrollFactor:t(708),SetScrollFactorX:t(709),SetScrollFactorY:t(710),SetTint:t(711),SetVisible:t(712),SetX:t(713),SetXY:t(714),SetY:t(715),ShiftPosition:t(716),Shuffle:t(717),SmootherStep:t(718),SmoothStep:t(719),Spread:t(720),ToggleVisible:t(721),WrapInRectangle:t(722)}},function(g,b,t){var h=t(123),n=[];n[h.BOTTOM_CENTER]=t(277),n[h.BOTTOM_LEFT]=t(278),n[h.BOTTOM_RIGHT]=t(279),n[h.LEFT_BOTTOM]=t(280),n[h.LEFT_CENTER]=t(281),n[h.LEFT_TOP]=t(282),n[h.RIGHT_BOTTOM]=t(283),n[h.RIGHT_CENTER]=t(284),n[h.RIGHT_TOP]=t(285),n[h.TOP_CENTER]=t(286),n[h.TOP_LEFT]=t(287),n[h.TOP_RIGHT]=t(288),g.exports=function(s,l,e,r,o){return n[e](s,l,r,o)}},function(g,b,t){var h=t(42),n=t(87),s=t(88),l=t(52);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),s(e,n(r)+o),l(e,h(r)+a),e}},function(g,b,t){var h=t(42),n=t(43),s=t(53),l=t(52);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),s(e,n(r)-o),l(e,h(r)+a),e}},function(g,b,t){var h=t(42),n=t(44),s=t(54),l=t(52);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),s(e,n(r)+o),l(e,h(r)+a),e}},function(g,b,t){var h=t(42),n=t(43),s=t(55),l=t(54);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,n(r)-o),s(e,h(r)+a),e}},function(g,b,t){var h=t(89),n=t(43),s=t(90),l=t(54);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,n(r)-o),s(e,h(r)+a),e}},function(g,b,t){var h=t(43),n=t(45),s=t(54),l=t(52);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),s(e,h(r)-o),l(e,n(r)-a),e}},function(g,b,t){var h=t(42),n=t(44),s=t(55),l=t(53);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,n(r)+o),s(e,h(r)+a),e}},function(g,b,t){var h=t(89),n=t(44),s=t(90),l=t(53);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,n(r)+o),s(e,h(r)+a),e}},function(g,b,t){var h=t(44),n=t(45),s=t(53),l=t(52);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),s(e,h(r)+o),l(e,n(r)-a),e}},function(g,b,t){var h=t(87),n=t(45),s=t(55),l=t(88);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,h(r)+o),s(e,n(r)-a),e}},function(g,b,t){var h=t(43),n=t(45),s=t(55),l=t(53);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,h(r)-o),s(e,n(r)-a),e}},function(g,b,t){var h=t(44),n=t(45),s=t(55),l=t(54);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,h(r)+o),s(e,n(r)-a),e}},function(g,b,t){var h=t(123),n=[];n[h.BOTTOM_CENTER]=t(290),n[h.BOTTOM_LEFT]=t(291),n[h.BOTTOM_RIGHT]=t(292),n[h.CENTER]=t(293),n[h.LEFT_CENTER]=t(295),n[h.RIGHT_CENTER]=t(296),n[h.TOP_CENTER]=t(297),n[h.TOP_LEFT]=t(298),n[h.TOP_RIGHT]=t(299),n[h.LEFT_BOTTOM]=n[h.BOTTOM_LEFT],n[h.LEFT_TOP]=n[h.TOP_LEFT],n[h.RIGHT_BOTTOM]=n[h.BOTTOM_RIGHT],n[h.RIGHT_TOP]=n[h.TOP_RIGHT],g.exports=function(s,l,e,r,o){return n[e](s,l,r,o)}},function(g,b,t){var h=t(42),n=t(87),s=t(55),l=t(88);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,n(r)+o),s(e,h(r)+a),e}},function(g,b,t){var h=t(42),n=t(43),s=t(55),l=t(53);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,n(r)-o),s(e,h(r)+a),e}},function(g,b,t){var h=t(42),n=t(44),s=t(55),l=t(54);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,n(r)+o),s(e,h(r)+a),e}},function(g,b,t){var h=t(294),n=t(87),s=t(89);g.exports=function(l,e,r,o){return void 0===r&&(r=0),void 0===o&&(o=0),h(l,n(e)+r,s(e)+o),l}},function(g,b,t){var h=t(88),n=t(90);g.exports=function(s,l,e){return h(s,l),n(s,e)}},function(g,b,t){var h=t(89),n=t(43),s=t(90),l=t(53);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,n(r)-o),s(e,h(r)+a),e}},function(g,b,t){var h=t(89),n=t(44),s=t(90),l=t(54);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),l(e,n(r)+o),s(e,h(r)+a),e}},function(g,b,t){var h=t(87),n=t(45),s=t(88),l=t(52);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),s(e,h(r)+o),l(e,n(r)-a),e}},function(g,b,t){var h=t(43),n=t(45),s=t(53),l=t(52);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),s(e,h(r)-o),l(e,n(r)-a),e}},function(g,b,t){var h=t(44),n=t(45),s=t(54),l=t(52);g.exports=function(e,r,o,a){return void 0===o&&(o=0),void 0===a&&(a=0),s(e,h(r)+o),l(e,n(r)-a),e}},function(g,b,t){var h=t(169),n=t(98),s=t(14),l=t(4);g.exports=function(e,r,o){void 0===o&&(o=new l);var a=n(r,0,s.PI2);return h(e,a,o)}},function(g,b,t){var h=t(302),n=t(169),s=t(98),l=t(14);g.exports=function(e,r,o,a){void 0===a&&(a=[]),!r&&0<o&&(r=h(e)/o);for(var i=0;i<r;i++){var u=s(i/r,0,l.PI2);a.push(n(e,u))}return a}},function(g,b){g.exports=function(t){return Math.PI*t.radius*2}},function(g,b,t){var h=t(18);g.exports={_alpha:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(s){return void 0===s&&(s=1),this.alpha=s,this},alpha:{get:function(){return this._alpha},set:function(s){var l=h(s,0,1);0===(this._alpha=l)?this.renderFlags&=-3:this.renderFlags|=2}}}},function(g,b,t){var h=t(35);g.exports={_blendMode:h.NORMAL,blendMode:{get:function(){return this._blendMode},set:function(s){"string"==typeof s&&(s=h[s]),-1<=(s|=0)&&(this._blendMode=s)}},setBlendMode:function(s){return this.blendMode=s,this}}},function(g,b){g.exports={_depth:0,depth:{get:function(){return this._depth},set:function(h){this.displayList&&this.displayList.queueDepthSort(),this._depth=h}},setDepth:function(h){return void 0===h&&(h=0),this.depth=h,this}}},function(g,b,t){var h=t(171),n=t(130);g.exports=function(s,l,e,r){void 0===r&&(r=[]),!l&&0<e&&(l=n(s)/e);for(var o=0;o<l;o++)r.push(h(s,o/l));return r}},function(g,b,t){var h=t(4);g.exports=function(n,s,l){return void 0===l&&(l=new h),l.x=n.x1+(n.x2-n.x1)*s,l.y=n.y1+(n.y2-n.y1)*s,l}},function(g,b){g.exports=function(t,h,n,s){var l=Math.cos(s),e=Math.sin(s),r=t.x-h,o=t.y-n;return t.x=r*l-o*e+h,t.y=r*e+o*l+n,t}},function(g,b,t){var h=t(310),n=t(311);g.exports={mask:null,setMask:function(l){return this.mask=l,this},clearMask:function(l){return void 0===l&&(l=!1),l&&this.mask&&this.mask.destroy(),this.mask=null,this},createBitmapMask:function(l){return void 0===l&&(this.texture||this.shader)&&(l=this),new h(this.scene,l)},createGeometryMask:function(l){return void 0===l&&"Graphics"===this.type&&(l=this),new n(this.scene,l)}}},function(g,b,t){var h=t(0),n=t(22),s=t(91),l=new h({initialize:function(e,r){var o=e.sys.renderer;this.renderer=o,this.bitmapMask=r,this.maskTexture=null,this.mainTexture=null,this.dirty=!0,this.mainFramebuffer=null,this.maskFramebuffer=null,this.invertAlpha=!1,this.isStencil=!1,this.createMask(),e.sys.game.events.on(n.CONTEXT_RESTORED,this.createMask,this),o&&o.on(s.RESIZE,this.createMask,this)},createMask:function(){var e,r,a,i,u,c=this.renderer;c&&c.gl&&(this.mainTexture&&this.clearMask(),r=c.height,this.mainTexture=c.createTexture2D(0,u=(a=c.gl).LINEAR,u,i=0==((e=c.width)&e-1)&&0==(r&r-1)?a.REPEAT:a.CLAMP_TO_EDGE,i,a.RGBA,null,e,r),this.maskTexture=c.createTexture2D(0,u,u,i,i,a.RGBA,null,e,r),this.mainFramebuffer=c.createFramebuffer(e,r,this.mainTexture,!0),this.maskFramebuffer=c.createFramebuffer(e,r,this.maskTexture,!0))},clearMask:function(){var e=this.renderer;e&&e.gl&&this.mainTexture&&(e.deleteTexture(this.mainTexture),e.deleteTexture(this.maskTexture),e.deleteFramebuffer(this.mainFramebuffer),e.deleteFramebuffer(this.maskFramebuffer),this.mainTexture=null,this.maskTexture=null,this.mainFramebuffer=null,this.maskFramebuffer=null)},setBitmap:function(e){this.bitmapMask=e},preRenderWebGL:function(e,r,o){e.pipelines.BITMAPMASK_PIPELINE.beginMask(this,r,o)},postRenderWebGL:function(e,r){e.pipelines.BITMAPMASK_PIPELINE.endMask(this,r)},preRenderCanvas:function(){},postRenderCanvas:function(){},destroy:function(){this.clearMask(),this.renderer&&this.renderer.off(s.RESIZE,this.createMask,this),this.bitmapMask=null,this.prevFramebuffer=null,this.renderer=null}});g.exports=l},function(g,b,t){var h=new(t(0))({initialize:function(n,s){this.geometryMask=s,this.invertAlpha=!1,this.isStencil=!0,this.level=0},setShape:function(n){return this.geometryMask=n,this},setInvertAlpha:function(n){return void 0===n&&(n=!0),this.invertAlpha=n,this},preRenderWebGL:function(n,s,l){var e=n.gl;n.flush(),0===n.maskStack.length&&(e.enable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),n.maskCount=0),n.currentCameraMask.mask!==this&&(n.currentMask.mask=this),n.maskStack.push({mask:this,camera:l}),this.applyStencil(n,l,!0),n.maskCount++},applyStencil:function(n,s,l){var e=n.gl,r=this.geometryMask,o=n.maskCount;e.colorMask(!1,!1,!1,!1),l?(e.stencilFunc(e.EQUAL,o,255),e.stencilOp(e.KEEP,e.KEEP,e.INCR)):(e.stencilFunc(e.EQUAL,o+1,255),e.stencilOp(e.KEEP,e.KEEP,e.DECR)),r.renderWebGL(n,r,s),n.flush(),e.colorMask(!0,!0,!0,!0),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.stencilFunc(this.invertAlpha?e.NOTEQUAL:e.EQUAL,l?o+1:o,255)},postRenderWebGL:function(n){var s=n.gl;n.maskStack.pop(),n.maskCount--,n.flush();var l,e=n.currentMask;0===n.maskStack.length?(e.mask=null,s.disable(s.STENCIL_TEST)):((l=n.maskStack[n.maskStack.length-1]).mask.applyStencil(n,l.camera,!1),n.currentCameraMask.mask!==l.mask?(e.mask=l.mask,e.camera=l.camera):e.mask=null)},preRenderCanvas:function(n,s,l){var e=this.geometryMask;n.currentContext.save(),e.renderCanvas(n,e,l,null,null,!0),n.currentContext.clip()},postRenderCanvas:function(n){n.currentContext.restore()},destroy:function(){this.geometryMask=null}});g.exports=h},function(g,b){g.exports={scrollFactorX:1,scrollFactorY:1,setScrollFactor:function(h,n){return void 0===n&&(n=h),this.scrollFactorX=h,this.scrollFactorY=n,this}}},function(g,b,t){var h=t(14),n=t(25),s=t(177),l=t(269),e=t(270),r=t(3);g.exports={_scaleX:1,_scaleY:1,_rotation:0,x:0,y:0,z:0,w:0,scale:{get:function(){return(this._scaleX+this._scaleY)/2},set:function(a){this._scaleX=a,0===(this._scaleY=a)?this.renderFlags&=-5:this.renderFlags|=4}},scaleX:{get:function(){return this._scaleX},set:function(a){0===(this._scaleX=a)?this.renderFlags&=-5:this.renderFlags|=4}},scaleY:{get:function(){return this._scaleY},set:function(a){0===(this._scaleY=a)?this.renderFlags&=-5:this.renderFlags|=4}},angle:{get:function(){return e(this._rotation*h.RAD_TO_DEG)},set:function(a){this.rotation=e(a)*h.DEG_TO_RAD}},rotation:{get:function(){return this._rotation},set:function(a){this._rotation=l(a)}},setPosition:function(a,i,u,c){return void 0===a&&(a=0),void 0===i&&(i=a),void 0===u&&(u=0),void 0===c&&(c=0),this.x=a,this.y=i,this.z=u,this.w=c,this},copyPosition:function(a){return void 0!==a.x&&(this.x=a.x),void 0!==a.y&&(this.y=a.y),void 0!==a.z&&(this.z=a.z),void 0!==a.w&&(this.w=a.w),this},setRandomPosition:function(a,i,u,c){return void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=this.scene.sys.scale.width),void 0===c&&(c=this.scene.sys.scale.height),this.x=a+Math.random()*u,this.y=i+Math.random()*c,this},setRotation:function(a){return void 0===a&&(a=0),this.rotation=a,this},setAngle:function(a){return void 0===a&&(a=0),this.angle=a,this},setScale:function(a,i){return void 0===a&&(a=1),void 0===i&&(i=a),this.scaleX=a,this.scaleY=i,this},setX:function(a){return void 0===a&&(a=0),this.x=a,this},setY:function(a){return void 0===a&&(a=0),this.y=a,this},setZ:function(a){return void 0===a&&(a=0),this.z=a,this},setW:function(a){return void 0===a&&(a=0),this.w=a,this},getLocalTransformMatrix:function(a){return void 0===a&&(a=new n),a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY)},getWorldTransformMatrix:function(a,i){void 0===a&&(a=new n),void 0===i&&(i=new n);var u=this.parentContainer;if(!u)return this.getLocalTransformMatrix(a);for(a.applyITRS(this.x,this.y,this._rotation,this._scaleX,this._scaleY);u;)i.applyITRS(u.x,u.y,u._rotation,u._scaleX,u._scaleY),i.multiply(a,a),u=u.parentContainer;return a},getLocalPoint:function(a,i,u,c){u=u||new r;var d=(c=c||this.scene.sys.cameras.main).scrollX,f=c.scrollY,p=a+d*this.scrollFactorX-d,v=i+f*this.scrollFactorY-f;return this.parentContainer?this.getWorldTransformMatrix().applyInverse(p,v,u):s(p,v,this.x,this.y,this.rotation,this.scaleX,this.scaleY,u),this._originComponent&&(u.x+=this._displayOriginX,u.y+=this._displayOriginY),u},getParentRotation:function(){for(var a=0,i=this.parentContainer;i;)a+=i.rotation,i=i.parentContainer;return a}}},function(g,b){g.exports={_visible:!0,visible:{get:function(){return this._visible},set:function(h){h?(this._visible=!0,this.renderFlags|=1):(this._visible=!1,this.renderFlags&=-2)}},setVisible:function(h){return this.visible=h,this}}},function(g,b,t){g.exports={CHANGE_DATA:t(638),CHANGE_DATA_KEY:t(639),DESTROY:t(640),REMOVE_DATA:t(641),SET_DATA:t(642)}},function(g,b,t){var h=t(130),n=t(4);g.exports=function(s,l,e,r){if(void 0===r&&(r=[]),!l&&!e)return r;l?e=Math.round(h(s)/l):l=h(s)/e;for(var o=s.x,a=s.y,i=0,u=0;u<e;u++)switch(r.push(new n(o,a)),i){case 0:(o+=l)>=s.right&&(i=1,a+=o-s.right,o=s.right);break;case 1:(a+=l)>=s.bottom&&(i=2,o-=a-s.bottom,a=s.bottom);break;case 2:(o-=l)<=s.left&&(i=3,a-=s.left-o,o=s.left);break;case 3:(a-=l)<=s.top&&(i=0,a=s.top)}return r}},function(g,b){g.exports=function(t,h,n){void 0===h&&(h=1),void 0===n&&(n=[]);var s=Math.round(t.x1),l=Math.round(t.y1),e=Math.round(t.x2),r=Math.round(t.y2),o=Math.abs(e-s),a=Math.abs(r-l),i=s<e?1:-1,u=l<r?1:-1,c=o-a;n.push({x:s,y:l});for(var d=1;s!==e||l!==r;){var f=c<<1;-a<f&&(c-=a,s+=i),f<o&&(c+=o,l+=u),d%h==0&&n.push({x:s,y:l}),d++}return n}},function(g,b){g.exports=function(t,h,n){if(!h.length)return NaN;if(1===h.length)return h[0];var s,l,e=1;if(n){if(t<h[0][n])return h[0];for(;h[e][n]<t;)e++}else for(;h[e]<t;)e++;return e>h.length&&(e=h.length),n?(l=h[e][n])-t<=t-(s=h[e-1][n])?h[e]:h[e-1]:(l=h[e])-t<=t-(s=h[e-1])?l:s}},function(g,b,t){var h=new(t(0))({initialize:function(n,s,l,e,r){void 0===r&&(r=!1),this.textureKey=n,this.textureFrame=s,this.index=l,this.frame=e,this.isFirst=!1,this.isLast=!1,this.prevFrame=null,this.nextFrame=null,this.duration=0,this.progress=0,this.isKeyFrame=r},toJSON:function(){return{key:this.textureKey,frame:this.textureFrame,duration:this.duration,keyframe:this.isKeyFrame}},destroy:function(){this.frame=void 0}});g.exports=h},function(g,b){g.exports=function(t){var h=/\D/g;return t.sort(function(n,s){return parseInt(n.replace(h,""),10)-parseInt(s.replace(h,""),10)}),t}},function(g,b,t){var h=t(185),n=t(0),s=t(102),l=t(9),e=t(132),r=t(22),o=t(2),a=t(6),i=t(186),u=t(322),c=new n({Extends:l,initialize:function(d){l.call(this),this.game=d,this.textureManager=null,this.globalTimeScale=1,this.anims=new s,this.mixes=new s,this.paused=!1,this.name="AnimationManager",d.events.once(r.BOOT,this.boot,this)},boot:function(){this.textureManager=this.game.textures,this.game.events.once(r.DESTROY,this.destroy,this)},addMix:function(d,f,p){var v,m=this.anims,T=this.mixes,y="string"==typeof d?d:d.key,x="string"==typeof f?f:f.key;return m.has(y)&&m.has(x)&&((v=(v=T.get(y))||{})[x]=p,T.set(y,v)),this},removeMix:function(d,f){var p,v=this.mixes,m="string"==typeof d?d:d.key,T=v.get(m);return T&&(f?T.hasOwnProperty(p="string"==typeof f?f:f.key)&&delete T[p]:f||v.delete(m)),this},getMix:function(d,f){var m="string"==typeof f?f:f.key,T=this.mixes.get("string"==typeof d?d:d.key);return T&&T.hasOwnProperty(m)?T[m]:0},add:function(d,f){return this.anims.has(d)?console.warn("Animation key exists: "+d):(f.key=d,this.anims.set(d,f),this.emit(e.ADD_ANIMATION,d,f)),this},exists:function(d){return this.anims.has(d)},createFromAseprite:function(d,f){var p=[],v=this.game.cache.json.get(d);if(!v)return p;var m=this,T=a(v,"meta",null),y=a(v,"frames",null);return T&&y&&a(T,"frameTags",[]).forEach(function(x){var w=[],E=o(x,"name",null),S=o(x,"from",0),A=o(x,"to",0),_=o(x,"direction","forward");if(E&&(!f||f&&-1<f.indexOf(E))){for(var C=[],M=Number.MAX_SAFE_INTEGER,P=S;P<=A;P++){var L,D=P.toString(),F=y[D];F&&((L=o(F,"duration",Number.MAX_SAFE_INTEGER))<M&&(M=L),C.push({frame:D,duration:L}))}C.forEach(function(N){w.push({key:d,frame:N.frame,duration:M-N.duration})});var X=M*w.length;"reverse"===_&&(w=w.reverse());var O=m.create({key:E,frames:w,duration:X,yoyo:"pingpong"===_});O&&p.push(O)}}),p},create:function(d){var f=d.key,p=!1;return f&&((p=this.get(f))||(p=new h(this,f,d),this.anims.set(f,p),this.emit(e.ADD_ANIMATION,f,p))),p},fromJSON:function(d,f){void 0===f&&(f=!1),f&&this.anims.clear(),"string"==typeof d&&(d=JSON.parse(d));var p=[];if(d.hasOwnProperty("anims")&&Array.isArray(d.anims)){for(var v=0;v<d.anims.length;v++)p.push(this.create(d.anims[v]));d.hasOwnProperty("globalTimeScale")&&(this.globalTimeScale=d.globalTimeScale)}else d.hasOwnProperty("key")&&"frame"===d.type&&p.push(this.create(d));return p},generateFrameNames:function(d,f){var p,v=a(f,"prefix",""),m=a(f,"start",0),T=a(f,"end",0),y=a(f,"suffix",""),x=a(f,"zeroPad",0),w=a(f,"outputArray",[]),E=a(f,"frames",!1),S=this.textureManager.get(d);if(!S)return w;if(f)for(E=E||u(m,T),p=0;p<E.length;p++){var A=v+i(E[p],x,"0",1)+y;S.has(A)?w.push({key:d,frame:A}):console.warn("generateFrameNames: Frame missing: "+A+" from texture: "+d)}else for(E=S.getFrameNames(),p=0;p<E.length;p++)w.push({key:d,frame:E[p]});return w},generateFrameNumbers:function(d,f){var p=a(f,"start",0),v=a(f,"end",-1),m=a(f,"first",!1),T=a(f,"outputArray",[]),y=a(f,"frames",!1),x=this.textureManager.get(d);if(!x)return T;m&&x.has(m)&&T.push({key:d,frame:m}),y||(-1===v&&(v=x.frameTotal-2),y=u(p,v));for(var w=0;w<y.length;w++)x.has(y[w])?T.push({key:d,frame:y[w]}):console.warn("generateFrameNumbers: Frame "+w+" missing from texture: "+d);return T},get:function(d){return this.anims.get(d)},pauseAll:function(){return this.paused||(this.paused=!0,this.emit(e.PAUSE_ALL)),this},play:function(d,f){Array.isArray(f)||(f=[f]);for(var p=0;p<f.length;p++)f[p].anims.play(d);return this},staggerPlay:function(d,f,p,v){void 0===p&&(p=0),void 0===v&&(v=!0),Array.isArray(f)||(f=[f]);var m=f.length;v||m--;for(var T=0;T<f.length;T++){var y=p<0?Math.abs(p)*(m-T):p*T;f[T].anims.playAfterDelay(d,y)}return this},remove:function(d){var f=this.get(d);return f&&(this.emit(e.REMOVE_ANIMATION,d,f),this.anims.delete(d),this.removeMix(d)),f},resumeAll:function(){return this.paused&&(this.paused=!1,this.emit(e.RESUME_ALL)),this},toJSON:function(d){var f={anims:[],globalTimeScale:this.globalTimeScale};return void 0!==d&&""!==d?f.anims.push(this.anims.get(d).toJSON()):this.anims.each(function(p,v){f.anims.push(v.toJSON())}),f},destroy:function(){this.anims.clear(),this.mixes.clear(),this.textureManager=null,this.game=null}});g.exports=c},function(g,b){g.exports=function(t,h,n,s){var l,e=[],r=!1;if((n||s)&&(r=!0,n=n||"",s=s||""),h<t)for(l=t;h<=l;l--)e.push(r?n+l.toString()+s:l);else for(l=t;l<=h;l++)e.push(r?n+l.toString()+s:l);return e}},function(g,b,t){var h=t(0),n=t(102),s=t(9),l=t(324),e=new h({initialize:function(){this.entries=new n,this.events=new s},add:function(r,o){return this.entries.set(r,o),this.events.emit(l.ADD,this,r,o),this},has:function(r){return this.entries.has(r)},exists:function(r){return this.entries.has(r)},get:function(r){return this.entries.get(r)},remove:function(r){var o=this.get(r);return o&&(this.entries.delete(r),this.events.emit(l.REMOVE,this,r,o.data)),this},getKeys:function(){return this.entries.keys()},destroy:function(){this.entries.clear(),this.events.removeAllListeners(),this.entries=null,this.events=null}});g.exports=e},function(g,b,t){g.exports={ADD:t(736),REMOVE:t(737)}},function(g,b,t){var h=t(323),n=t(0),s=t(22),l=new n({initialize:function(e){this.game=e,this.binary=new h,this.bitmapFont=new h,this.json=new h,this.physics=new h,this.shader=new h,this.audio=new h,this.video=new h,this.text=new h,this.html=new h,this.obj=new h,this.tilemap=new h,this.xml=new h,this.custom={},this.game.events.once(s.DESTROY,this.destroy,this)},addCustom:function(e){return this.custom.hasOwnProperty(e)||(this.custom[e]=new h),this.custom[e]},destroy:function(){for(var e=["binary","bitmapFont","json","physics","shader","audio","video","text","html","obj","tilemap","xml"],r=0;r<e.length;r++)this[e[r]].destroy(),this[e[r]]=null;for(var o in this.custom)this.custom[o].destroy();this.custom=null,this.game=null}});g.exports=l},function(g,b,t){var h=t(133),n=t(190),s=t(18),l=t(0),e=t(11),r=t(333),o=t(37),a=t(135),i=t(10),u=t(3),c=new l({Extends:h,Mixins:[e.Flip,e.Tint,e.Pipeline],initialize:function(d,f,p,v){h.call(this,d,f,p,v),this.postPipelines=[],this.pipelineData={},this.inputEnabled=!0,this.fadeEffect=new r.Fade(this),this.flashEffect=new r.Flash(this),this.shakeEffect=new r.Shake(this),this.panEffect=new r.Pan(this),this.rotateToEffect=new r.RotateTo(this),this.zoomEffect=new r.Zoom(this),this.lerp=new u(1,1),this.followOffset=new u,this.deadzone=null,this._follow=null},setDeadzone:function(d,f){var p,v,m,T;return void 0===d?this.deadzone=null:(this.deadzone?(this.deadzone.width=d,this.deadzone.height=f):this.deadzone=new i(0,0,d,f),this._follow&&(p=this.width/2,v=this.height/2,this.midPoint.set(m=this._follow.x-this.followOffset.x,T=this._follow.y-this.followOffset.y),this.scrollX=m-p,this.scrollY=T-v),n(this.deadzone,this.midPoint.x,this.midPoint.y)),this},fadeIn:function(d,f,p,v,m,T){return this.fadeEffect.start(!1,d,f,p,v,!0,m,T)},fadeOut:function(d,f,p,v,m,T){return this.fadeEffect.start(!0,d,f,p,v,!0,m,T)},fadeFrom:function(d,f,p,v,m,T,y){return this.fadeEffect.start(!1,d,f,p,v,m,T,y)},fade:function(d,f,p,v,m,T,y){return this.fadeEffect.start(!0,d,f,p,v,m,T,y)},flash:function(d,f,p,v,m,T,y){return this.flashEffect.start(d,f,p,v,m,T,y)},shake:function(d,f,p,v,m){return this.shakeEffect.start(d,f,p,v,m)},pan:function(d,f,p,v,m,T,y){return this.panEffect.start(d,f,p,v,m,T,y)},rotateTo:function(d,f,p,v,m,T,y){return this.rotateToEffect.start(d,f,p,v,m,T,y)},zoomTo:function(d,f,p,v,m,T){return this.zoomEffect.start(d,f,p,v,m,T)},preRender:function(){this.renderList.length=0;var d=this.width,f=this.height,p=.5*d,v=.5*f,m=this.zoom,T=this.matrix,y=d*this.originX,x=f*this.originY,w=this._follow,E=this.deadzone,S=this.scrollX,A=this.scrollY;E&&n(E,this.midPoint.x,this.midPoint.y);var _,C,M=!1;w&&!this.panEffect.isRunning&&(_=w.x-this.followOffset.x,C=w.y-this.followOffset.y,E?(_<E.x?S=a(S,S-(E.x-_),this.lerp.x):_>E.right&&(S=a(S,S+(_-E.right),this.lerp.x)),C<E.y?A=a(A,A-(E.y-C),this.lerp.y):C>E.bottom&&(A=a(A,A+(C-E.bottom),this.lerp.y))):(S=a(S,_-y,this.lerp.x),A=a(A,C-x,this.lerp.y)),M=!0),this.useBounds&&(S=this.clampX(S),A=this.clampY(A)),this.roundPixels&&(y=Math.round(y),x=Math.round(x),S=Math.round(S),A=Math.round(A));var P=(this.scrollX=S)+p,L=(this.scrollY=A)+v;this.midPoint.set(P,L);var D=d/m,F=f/m,X=P-D/2,R=L-F/2;this.roundPixels&&(X=Math.round(X),R=Math.round(R)),this.worldView.setTo(X,R,D,F),T.applyITRS(this.x+y,this.y+x,this.rotation,m,m),T.translate(-y,-x),this.shakeEffect.preRender(),M&&this.emit(o.FOLLOW_UPDATE,this,w)},setLerp:function(d,f){return void 0===d&&(d=1),void 0===f&&(f=d),this.lerp.set(d,f),this},setFollowOffset:function(d,f){return void 0===d&&(d=0),void 0===f&&(f=0),this.followOffset.set(d,f),this},startFollow:function(d,f,p,v,m,T){void 0===f&&(f=!1),void 0===p&&(p=1),void 0===v&&(v=p),void 0===m&&(m=0),void 0===T&&(T=m),this._follow=d,this.roundPixels=f,p=s(p,0,1),v=s(v,0,1),this.lerp.set(p,v),this.followOffset.set(m,T);var y=this.width/2,x=this.height/2,w=d.x-m,E=d.y-T;return this.midPoint.set(w,E),this.scrollX=w-y,this.scrollY=E-x,this.useBounds&&(this.scrollX=this.clampX(this.scrollX),this.scrollY=this.clampY(this.scrollY)),this},stopFollow:function(){return this._follow=null,this},resetFX:function(){return this.rotateToEffect.reset(),this.panEffect.reset(),this.shakeEffect.reset(),this.flashEffect.reset(),this.fadeEffect.reset(),this},update:function(d,f){this.visible&&(this.rotateToEffect.update(d,f),this.panEffect.update(d,f),this.zoomEffect.update(d,f),this.shakeEffect.update(d,f),this.flashEffect.update(d,f),this.fadeEffect.update(d,f))},destroy:function(){this.resetFX(),h.prototype.destroy.call(this),this._follow=null,this.deadzone=null}});g.exports=c},function(g,b,t){var h=t(38);g.exports=function(n){var s=new h;n=n.replace(/^(?:#|0x)?([a-f\d])([a-f\d])([a-f\d])$/i,function(a,i,u,c){return i+i+u+u+c+c});var l,e,r,o=/^(?:#|0x)?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);return o&&(l=parseInt(o[1],16),e=parseInt(o[2],16),r=parseInt(o[3],16),s.setTo(l,e,r)),s}},function(g,b){g.exports=function(t,h,n,s){return s<<24|t<<16|h<<8|n}},function(g,b){g.exports=function(t,h,n,s){void 0===s&&(s={h:0,s:0,v:0}),t/=255,h/=255,n/=255;var l=Math.min(t,h,n),e=Math.max(t,h,n),r=e-l,o=0,a=0===e?0:r/e,i=e;return e!==l&&(e===t?o=(h-n)/r+(h<n?6:0):e===h?o=(n-t)/r+2:e===n&&(o=(t-h)/r+4),o/=6),s.hasOwnProperty("_h")?(s._h=o,s._s=a,s._v=i):(s.h=o,s.s=a,s.v=i),s}},function(g,b){g.exports=function(t){return 16777215<t?{a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{a:255,r:t>>16&255,g:t>>8&255,b:255&t}}},function(g,b,t){var h=t(38);g.exports=function(n){return new h(n.r,n.g,n.b,n.a)}},function(g,b,t){var h=t(38);g.exports=function(n){var s,l,e,r,o=new h,a=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d+(?:\.\d+)?))?\s*\)$/.exec(n.toLowerCase());return a&&(s=parseInt(a[1],10),l=parseInt(a[2],10),e=parseInt(a[3],10),r=void 0!==a[4]?parseFloat(a[4]):1,o.setTo(s,l,e,255*r)),o}},function(g,b,t){g.exports={Fade:t(761),Flash:t(762),Pan:t(763),Shake:t(796),RotateTo:t(797),Zoom:t(798)}},function(g,b,t){g.exports={In:t(764),Out:t(765),InOut:t(766)}},function(g,b,t){g.exports={In:t(767),Out:t(768),InOut:t(769)}},function(g,b,t){g.exports={In:t(770),Out:t(771),InOut:t(772)}},function(g,b,t){g.exports={In:t(773),Out:t(774),InOut:t(775)}},function(g,b,t){g.exports={In:t(776),Out:t(777),InOut:t(778)}},function(g,b,t){g.exports={In:t(779),Out:t(780),InOut:t(781)}},function(g,b,t){g.exports=t(782)},function(g,b,t){g.exports={In:t(783),Out:t(784),InOut:t(785)}},function(g,b,t){g.exports={In:t(786),Out:t(787),InOut:t(788)}},function(g,b,t){g.exports={In:t(789),Out:t(790),InOut:t(791)}},function(g,b,t){g.exports={In:t(792),Out:t(793),InOut:t(794)}},function(g,b,t){g.exports=t(795)},function(g,b,t){var h=t(0),n=t(33),s=t(347),l=t(2),e=t(6),r=t(7),o=t(193),a=t(1),i=t(197),u=t(187),c=new h({initialize:function(d){void 0===d&&(d={}),this.width=e(d,"width",1024),this.height=e(d,"height",768),this.zoom=e(d,"zoom",1),this.parent=e(d,"parent",void 0),this.scaleMode=e(d,"scaleMode",0),this.expandParent=e(d,"expandParent",!0),this.autoRound=e(d,"autoRound",!1),this.autoCenter=e(d,"autoCenter",0),this.resizeInterval=e(d,"resizeInterval",500),this.fullscreenTarget=e(d,"fullscreenTarget",null),this.minWidth=e(d,"minWidth",0),this.maxWidth=e(d,"maxWidth",0),this.minHeight=e(d,"minHeight",0),this.maxHeight=e(d,"maxHeight",0);var f=e(d,"scale",null);f&&(this.width=e(f,"width",this.width),this.height=e(f,"height",this.height),this.zoom=e(f,"zoom",this.zoom),this.parent=e(f,"parent",this.parent),this.scaleMode=e(f,"mode",this.scaleMode),this.expandParent=e(f,"expandParent",this.expandParent),this.autoRound=e(f,"autoRound",this.autoRound),this.autoCenter=e(f,"autoCenter",this.autoCenter),this.resizeInterval=e(f,"resizeInterval",this.resizeInterval),this.fullscreenTarget=e(f,"fullscreenTarget",this.fullscreenTarget),this.minWidth=e(f,"min.width",this.minWidth),this.maxWidth=e(f,"max.width",this.maxWidth),this.minHeight=e(f,"min.height",this.minHeight),this.maxHeight=e(f,"max.height",this.maxHeight)),this.renderType=e(d,"type",n.AUTO),this.canvas=e(d,"canvas",null),this.context=e(d,"context",null),this.canvasStyle=e(d,"canvasStyle",null),this.customEnvironment=e(d,"customEnvironment",!1),this.sceneConfig=e(d,"scene",null),this.seed=e(d,"seed",[(Date.now()*Math.random()).toString()]),o.RND=new o.RandomDataGenerator(this.seed),this.gameTitle=e(d,"title",""),this.gameURL=e(d,"url","https://phaser.io"),this.gameVersion=e(d,"version",""),this.autoFocus=e(d,"autoFocus",!0),this.domCreateContainer=e(d,"dom.createContainer",!1),this.domBehindCanvas=e(d,"dom.behindCanvas",!1),this.domPointerEvents=e(d,"dom.pointerEvents","none"),this.inputKeyboard=e(d,"input.keyboard",!0),this.inputKeyboardEventTarget=e(d,"input.keyboard.target",window),this.inputKeyboardCapture=e(d,"input.keyboard.capture",[]),this.inputMouse=e(d,"input.mouse",!0),this.inputMouseEventTarget=e(d,"input.mouse.target",null),this.inputMousePreventDefaultDown=e(d,"input.mouse.preventDefaultDown",!0),this.inputMousePreventDefaultUp=e(d,"input.mouse.preventDefaultUp",!0),this.inputMousePreventDefaultMove=e(d,"input.mouse.preventDefaultMove",!0),this.inputMousePreventDefaultWheel=e(d,"input.mouse.preventDefaultWheel",!0),this.inputTouch=e(d,"input.touch",s.input.touch),this.inputTouchEventTarget=e(d,"input.touch.target",null),this.inputTouchCapture=e(d,"input.touch.capture",!0),this.inputActivePointers=e(d,"input.activePointers",1),this.inputSmoothFactor=e(d,"input.smoothFactor",0),this.inputWindowEvents=e(d,"input.windowEvents",!0),this.inputGamepad=e(d,"input.gamepad",!1),this.inputGamepadEventTarget=e(d,"input.gamepad.target",window),this.disableContextMenu=e(d,"disableContextMenu",!1),this.audio=e(d,"audio",{}),this.hideBanner=!1===e(d,"banner",null),this.hidePhaser=e(d,"banner.hidePhaser",!1),this.bannerTextColor=e(d,"banner.text","#ffffff"),this.bannerBackgroundColor=e(d,"banner.background",["#ff0000","#ffff00","#00ff00","#00ffff","#000000"]),""===this.gameTitle&&this.hidePhaser&&(this.hideBanner=!0),this.fps=e(d,"fps",null);var p=e(d,"render",d);this.pipeline=e(p,"pipeline",null),this.antialias=e(p,"antialias",!0),this.antialiasGL=e(p,"antialiasGL",!0),this.mipmapFilter=e(p,"mipmapFilter","LINEAR"),this.desynchronized=e(p,"desynchronized",!1),this.roundPixels=e(p,"roundPixels",!1),this.pixelArt=e(p,"pixelArt",1!==this.zoom),this.pixelArt&&(this.antialias=!1,this.antialiasGL=!1,this.roundPixels=!0),this.transparent=e(p,"transparent",!1),this.clearBeforeRender=e(p,"clearBeforeRender",!0),this.preserveDrawingBuffer=e(p,"preserveDrawingBuffer",!1),this.premultipliedAlpha=e(p,"premultipliedAlpha",!0),this.failIfMajorPerformanceCaveat=e(p,"failIfMajorPerformanceCaveat",!1),this.powerPreference=e(p,"powerPreference","default"),this.batchSize=e(p,"batchSize",4096),this.maxTextures=e(p,"maxTextures",-1),this.maxLights=e(p,"maxLights",10);var v=e(d,"backgroundColor",0);this.backgroundColor=u(v),this.transparent&&(this.backgroundColor=u(0),this.backgroundColor.alpha=0),this.preBoot=e(d,"callbacks.preBoot",a),this.postBoot=e(d,"callbacks.postBoot",a),this.physics=e(d,"physics",{}),this.defaultPhysicsSystem=e(this.physics,"default",!1),this.loaderBaseURL=e(d,"loader.baseURL",""),this.loaderPath=e(d,"loader.path",""),this.loaderMaxParallelDownloads=e(d,"loader.maxParallelDownloads",s.os.android?6:32),this.loaderCrossOrigin=e(d,"loader.crossOrigin",void 0),this.loaderResponseType=e(d,"loader.responseType",""),this.loaderAsync=e(d,"loader.async",!0),this.loaderUser=e(d,"loader.user",""),this.loaderPassword=e(d,"loader.password",""),this.loaderTimeout=e(d,"loader.timeout",0),this.loaderWithCredentials=e(d,"loader.withCredentials",!1),this.installGlobalPlugins=[],this.installScenePlugins=[];var T=e(d,"plugins",null),y=i.DefaultScene;T&&(Array.isArray(T)?this.defaultPlugins=T:r(T)&&(this.installGlobalPlugins=l(T,"global",[]),this.installScenePlugins=l(T,"scene",[]),Array.isArray(T.default)?y=T.default:Array.isArray(T.defaultMerge)&&(y=y.concat(T.defaultMerge)))),this.defaultPlugins=y;var x="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAg";this.defaultImage=e(d,"images.default",x+"AQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg=="),this.missingImage=e(d,"images.missing",x+"CAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg=="),this.whiteImage=e(d,"images.white","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAIAAAAmkwkpAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABdJREFUeNpi/P//PwMMMDEgAdwcgAADAJZuAwXJYZOzAAAAAElFTkSuQmCC"),window&&(window.FORCE_WEBGL?this.renderType=n.WEBGL:window.FORCE_CANVAS&&(this.renderType=n.CANVAS))}});g.exports=c},function(g,b,t){g.exports={os:t(105),browser:t(136),features:t(191),input:t(808),audio:t(809),video:t(810),fullscreen:t(811),canvasFeatures:t(348)}},function(g,b,t){var h,n,s,l=t(31),e={supportInverseAlpha:!1,supportNewBlendModes:!1};g.exports=("function"!=typeof importScripts&&void 0!==document&&(e.supportNewBlendModes=(h="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",n="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(s=new Image).onload=function(){var r=new Image;r.onload=function(){var o=l.create(r,6,1).getContext("2d");if(o.globalCompositeOperation="multiply",o.drawImage(s,0,0),o.drawImage(r,2,0),!o.getImageData(2,0,1,1))return!1;var a=o.getImageData(2,0,1,1).data;l.remove(r),e.supportNewBlendModes=255===a[0]&&0===a[1]&&0===a[2]},r.src=h+"/wCKxvRF"+n},s.src=h+"AP804Oa6"+n,!1),e.supportInverseAlpha=function(){var r=l.create(this,2,1).getContext("2d");r.fillStyle="rgba(10, 20, 30, 0.5)",r.fillRect(0,0,1,1);var o=r.getImageData(0,0,1,1);if(null===o)return!1;r.putImageData(o,1,0);var a=r.getImageData(1,0,1,1);return a.data[0]===o.data[0]&&a.data[1]===o.data[1]&&a.data[2]===o.data[2]&&a.data[3]===o.data[3]}()),e)},function(g,b){g.exports=function(t,h,n,s){return Math.atan2(s-h,n-t)}},function(g,b){g.exports=function(t,h){return Math.atan2(h.y-t.y,h.x-t.x)}},function(g,b){g.exports=function(t){return 0<=(t%=2*Math.PI)?t:t+2*Math.PI}},function(g,b){g.exports=function(t,h){var n=t.x-h.x,s=t.y-h.y;return Math.sqrt(n*n+s*s)}},function(g,b){g.exports=function(t,h,n,s){var l=t-n,e=h-s;return l*l+e*e}},function(g,b){g.exports=function(t,h,n){return void 0===n&&(n=1e-4),h-n<t}},function(g,b){g.exports=function(t,h,n){return void 0===n&&(n=1e-4),t<h+n}},function(g,b,t){var h=t(357);g.exports=function(n,s){return h(n)/h(s)/h(n-s)}},function(g,b){g.exports=function(t){if(0===t)return 1;for(var h=t;--t;)h*=t;return h}},function(g,b){g.exports=function(t,h,n,s,l){return(i=1-t)*i*i*h+3*(a=1-(o=t))*a*o*n+3*(1-(r=t))*r*r*s+(e=t)*e*e*l;var e,r,o,a,i}},function(g,b){g.exports=function(t,h,n,s){return(r=1-t)*r*h+2*(1-(e=t))*e*n+(l=t)*l*s;var l,e,r}},function(g,b,t){var h=t(184);g.exports=function(n,s,l){return s+(l-s)*h(n,0,1)}},function(g,b){g.exports=function(t){var h=Math.log(t)/.6931471805599453;return 1<<Math.ceil(h)}},function(g,b){g.exports=function(t,h){var n=t.x,s=t.y;return t.x=n*Math.cos(h)-s*Math.sin(h),t.y=n*Math.sin(h)+s*Math.cos(h),t}},function(g,b){g.exports=function(t){return 0<t?Math.ceil(t):Math.floor(t)}},function(g,b,t){var h=new(t(0))({initialize:function(n){this.val=new Float32Array(9),n?this.copy(n):this.identity()},clone:function(){return new h(this)},set:function(n){return this.copy(n)},copy:function(n){var s=this.val,l=n.val;return s[0]=l[0],s[1]=l[1],s[2]=l[2],s[3]=l[3],s[4]=l[4],s[5]=l[5],s[6]=l[6],s[7]=l[7],s[8]=l[8],this},fromMat4:function(n){var s=n.val,l=this.val;return l[0]=s[0],l[1]=s[1],l[2]=s[2],l[3]=s[4],l[4]=s[5],l[5]=s[6],l[6]=s[8],l[7]=s[9],l[8]=s[10],this},fromArray:function(n){var s=this.val;return s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],s[4]=n[4],s[5]=n[5],s[6]=n[6],s[7]=n[7],s[8]=n[8],this},identity:function(){var n=this.val;return n[0]=1,n[1]=0,n[2]=0,n[3]=0,n[4]=1,n[5]=0,n[6]=0,n[7]=0,n[8]=1,this},transpose:function(){var n=this.val,s=n[1],l=n[2],e=n[5];return n[1]=n[3],n[2]=n[6],n[3]=s,n[5]=n[7],n[6]=l,n[7]=e,this},invert:function(){var n=this.val,s=n[0],l=n[1],e=n[2],r=n[3],o=n[4],a=n[5],i=n[6],u=n[7],c=n[8],d=c*o-a*u,f=-c*r+a*i,p=u*r-o*i,v=s*d+l*f+e*p;return v?(n[0]=d*(v=1/v),n[1]=(-c*l+e*u)*v,n[2]=(a*l-e*o)*v,n[3]=f*v,n[4]=(c*s-e*i)*v,n[5]=(-a*s+e*r)*v,n[6]=p*v,n[7]=(-u*s+l*i)*v,n[8]=(o*s-l*r)*v,this):null},adjoint:function(){var n=this.val,s=n[0],l=n[1],e=n[2],r=n[3],o=n[4],a=n[5],i=n[6],u=n[7],c=n[8];return n[0]=o*c-a*u,n[1]=e*u-l*c,n[2]=l*a-e*o,n[3]=a*i-r*c,n[4]=s*c-e*i,n[5]=e*r-s*a,n[6]=r*u-o*i,n[7]=l*i-s*u,n[8]=s*o-l*r,this},determinant:function(){var n=this.val,r=n[3],o=n[4],a=n[5],i=n[6],u=n[7],c=n[8];return n[0]*(c*o-a*u)+n[1]*(-c*r+a*i)+n[2]*(u*r-o*i)},multiply:function(n){var s=this.val,l=s[0],e=s[1],r=s[2],o=s[3],a=s[4],i=s[5],u=s[6],c=s[7],d=s[8],f=n.val,p=f[0],v=f[1],m=f[2],T=f[3],y=f[4],x=f[5],w=f[6],E=f[7],S=f[8];return s[0]=p*l+v*o+m*u,s[1]=p*e+v*a+m*c,s[2]=p*r+v*i+m*d,s[3]=T*l+y*o+x*u,s[4]=T*e+y*a+x*c,s[5]=T*r+y*i+x*d,s[6]=w*l+E*o+S*u,s[7]=w*e+E*a+S*c,s[8]=w*r+E*i+S*d,this},translate:function(n){var s=this.val,l=n.x,e=n.y;return s[6]=l*s[0]+e*s[3]+s[6],s[7]=l*s[1]+e*s[4]+s[7],s[8]=l*s[2]+e*s[5]+s[8],this},rotate:function(n){var s=this.val,l=s[0],e=s[1],r=s[2],o=s[3],a=s[4],i=s[5],u=Math.sin(n),c=Math.cos(n);return s[0]=c*l+u*o,s[1]=c*e+u*a,s[2]=c*r+u*i,s[3]=c*o-u*l,s[4]=c*a-u*e,s[5]=c*i-u*r,this},scale:function(n){var s=this.val,l=n.x,e=n.y;return s[0]=l*s[0],s[1]=l*s[1],s[2]=l*s[2],s[3]=e*s[3],s[4]=e*s[4],s[5]=e*s[5],this},fromQuat:function(n){var s=n.x,l=n.y,e=n.z,r=n.w,o=s+s,a=l+l,i=e+e,u=s*o,c=s*a,d=s*i,f=l*a,p=l*i,v=e*i,m=r*o,T=r*a,y=r*i,x=this.val;return x[0]=1-(f+v),x[3]=c+y,x[6]=d-T,x[1]=c-y,x[4]=1-(u+v),x[7]=p+m,x[2]=d+T,x[5]=p-m,x[8]=1-(u+f),this},normalFromMat4:function(n){var s=n.val,l=this.val,e=s[0],r=s[1],o=s[2],a=s[3],i=s[4],u=s[5],c=s[6],d=s[7],f=s[8],p=s[9],v=s[10],m=s[11],T=s[12],y=s[13],x=s[14],w=s[15],E=e*u-r*i,S=e*c-o*i,A=e*d-a*i,_=r*c-o*u,C=r*d-a*u,M=o*d-a*c,P=f*y-p*T,L=f*x-v*T,D=f*w-m*T,F=p*x-v*y,X=p*w-m*y,R=v*w-m*x,O=E*R-S*X+A*F+_*D-C*L+M*P;return O?(l[0]=(u*R-c*X+d*F)*(O=1/O),l[1]=(c*D-i*R-d*L)*O,l[2]=(i*X-u*D+d*P)*O,l[3]=(o*X-r*R-a*F)*O,l[4]=(e*R-o*D+a*L)*O,l[5]=(r*D-e*X-a*P)*O,l[6]=(y*M-x*C+w*_)*O,l[7]=(x*A-T*M-w*S)*O,l[8]=(T*C-y*A+w*E)*O,this):null}});g.exports=h},function(g,b,t){var h=t(0),n=t(364),s=t(1),l=t(39),e=new Int8Array([1,2,0]),r=new Float32Array([0,0,0]),o=new l(1,0,0),a=new l(0,1,0),i=new l,u=new n,c=new h({initialize:function(d,f,p,v){this.onChangeCallback=s,this.set(d,f,p,v)},x:{get:function(){return this._x},set:function(d){this._x=d,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(d){this._y=d,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(d){this._z=d,this.onChangeCallback(this)}},w:{get:function(){return this._w},set:function(d){this._w=d,this.onChangeCallback(this)}},copy:function(d){return this.set(d)},set:function(d,f,p,v,m){return void 0===m&&(m=!0),"object"==typeof d?(this._x=d.x||0,this._y=d.y||0,this._z=d.z||0,this._w=d.w||0):(this._x=d||0,this._y=f||0,this._z=p||0,this._w=v||0),m&&this.onChangeCallback(this),this},add:function(d){return this._x+=d.x,this._y+=d.y,this._z+=d.z,this._w+=d.w,this.onChangeCallback(this),this},subtract:function(d){return this._x-=d.x,this._y-=d.y,this._z-=d.z,this._w-=d.w,this.onChangeCallback(this),this},scale:function(d){return this._x*=d,this._y*=d,this._z*=d,this._w*=d,this.onChangeCallback(this),this},length:function(){var d=this.x,f=this.y,p=this.z,v=this.w;return Math.sqrt(d*d+f*f+p*p+v*v)},lengthSq:function(){var d=this.x,f=this.y,p=this.z,v=this.w;return d*d+f*f+p*p+v*v},normalize:function(){var d=this.x,f=this.y,p=this.z,v=this.w,m=d*d+f*f+p*p+v*v;return 0<m&&(m=1/Math.sqrt(m),this._x=d*m,this._y=f*m,this._z=p*m,this._w=v*m),this.onChangeCallback(this),this},dot:function(d){return this.x*d.x+this.y*d.y+this.z*d.z+this.w*d.w},lerp:function(d,f){void 0===f&&(f=0);var p=this.x,v=this.y,m=this.z,T=this.w;return this.set(p+f*(d.x-p),v+f*(d.y-v),m+f*(d.z-m),T+f*(d.w-T))},rotationTo:function(d,f){var p=d.x*f.x+d.y*f.y+d.z*f.z;return p<-.999999?(i.copy(o).cross(d).length()<1e-6&&i.copy(a).cross(d),i.normalize(),this.setAxisAngle(i,Math.PI)):.999999<p?this.set(0,0,0,1):(i.copy(d).cross(f),this._x=i.x,this._y=i.y,this._z=i.z,this._w=1+p,this.normalize())},setAxes:function(d,f,p){var v=u.val;return v[0]=f.x,v[3]=f.y,v[6]=f.z,v[1]=p.x,v[4]=p.y,v[7]=p.z,v[2]=-d.x,v[5]=-d.y,v[8]=-d.z,this.fromMat3(u).normalize()},identity:function(){return this.set(0,0,0,1)},setAxisAngle:function(d,f){f*=.5;var p=Math.sin(f);return this.set(p*d.x,p*d.y,p*d.z,Math.cos(f))},multiply:function(d){var f=this.x,p=this.y,v=this.z,m=this.w,T=d.x,y=d.y,x=d.z,w=d.w;return this.set(f*w+m*T+p*x-v*y,p*w+m*y+v*T-f*x,v*w+m*x+f*y-p*T,m*w-f*T-p*y-v*x)},slerp:function(d,f){var p=this.x,v=this.y,m=this.z,T=this.w,y=d.x,x=d.y,w=d.z,E=d.w,S=p*y+v*x+m*w+T*E;S<0&&(S=-S,y=-y,x=-x,w=-w,E=-E);var A,_,C=1-f,M=f;return 1e-6<1-S&&(A=Math.acos(S),_=Math.sin(A),C=Math.sin((1-f)*A)/_,M=Math.sin(f*A)/_),this.set(C*p+M*y,C*v+M*x,C*m+M*w,C*T+M*E)},invert:function(){var d=this.x,f=this.y,p=this.z,v=this.w,m=d*d+f*f+p*p+v*v,T=m?1/m:0;return this.set(-d*T,-f*T,-p*T,v*T)},conjugate:function(){return this._x=-this.x,this._y=-this.y,this._z=-this.z,this.onChangeCallback(this),this},rotateX:function(d){d*=.5;var f=this.x,p=this.y,v=this.z,m=this.w,T=Math.sin(d),y=Math.cos(d);return this.set(f*y+m*T,p*y+v*T,v*y-p*T,m*y-f*T)},rotateY:function(d){d*=.5;var f=this.x,p=this.y,v=this.z,m=this.w,T=Math.sin(d),y=Math.cos(d);return this.set(f*y-v*T,p*y+m*T,v*y+f*T,m*y-p*T)},rotateZ:function(d){d*=.5;var f=this.x,p=this.y,v=this.z,m=this.w,T=Math.sin(d),y=Math.cos(d);return this.set(f*y+p*T,p*y-f*T,v*y+m*T,m*y-v*T)},calculateW:function(){var d=this.x,f=this.y,p=this.z;return this.w=-Math.sqrt(1-d*d-f*f-p*p),this},setFromEuler:function(d,f){var p=d.x/2,v=d.y/2,m=d.z/2,T=Math.cos(p),y=Math.cos(v),x=Math.cos(m),w=Math.sin(p),E=Math.sin(v),S=Math.sin(m);switch(d.order){case"XYZ":this.set(w*y*x+T*E*S,T*E*x-w*y*S,T*y*S+w*E*x,T*y*x-w*E*S,f);break;case"YXZ":this.set(w*y*x+T*E*S,T*E*x-w*y*S,T*y*S-w*E*x,T*y*x+w*E*S,f);break;case"ZXY":this.set(w*y*x-T*E*S,T*E*x+w*y*S,T*y*S+w*E*x,T*y*x-w*E*S,f);break;case"ZYX":this.set(w*y*x-T*E*S,T*E*x+w*y*S,T*y*S-w*E*x,T*y*x+w*E*S,f);break;case"YZX":this.set(w*y*x+T*E*S,T*E*x+w*y*S,T*y*S-w*E*x,T*y*x-w*E*S,f);break;case"XZY":this.set(w*y*x-T*E*S,T*E*x-w*y*S,T*y*S+w*E*x,T*y*x+w*E*S,f)}return this},setFromRotationMatrix:function(d){var f,p=d.val,v=p[0],m=p[4],T=p[8],y=p[1],x=p[5],w=p[9],E=p[2],S=p[6],A=p[10],_=v+x+A;return 0<_?(f=.5/Math.sqrt(_+1),this.set((S-w)*f,(T-E)*f,(y-m)*f,.25/f)):x<v&&A<v?(f=2*Math.sqrt(1+v-x-A),this.set(.25*f,(m+y)/f,(T+E)/f,(S-w)/f)):A<x?(f=2*Math.sqrt(1+x-v-A),this.set((m+y)/f,.25*f,(w+S)/f,(T-E)/f)):(f=2*Math.sqrt(1+A-v-x),this.set((T+E)/f,(w+S)/f,.25*f,(y-m)/f)),this},fromMat3:function(d){var f,p,v,m,T=d.val,y=T[0]+T[4]+T[8];return 0<y?(m=Math.sqrt(y+1),this.w=.5*m,this._x=(T[7]-T[5])*(m=.5/m),this._y=(T[2]-T[6])*m,this._z=(T[3]-T[1])*m):(f=0,T[4]>T[0]&&(f=1),T[8]>T[3*f+f]&&(f=2),v=e[p=e[f]],m=Math.sqrt(T[3*f+f]-T[3*p+p]-T[3*v+v]+1),r[f]=.5*m,r[p]=(T[3*p+f]+T[3*f+p])*(m=.5/m),r[v]=(T[3*v+f]+T[3*f+v])*m,this._x=r[0],this._y=r[1],this._z=r[2],this._w=(T[3*v+p]-T[3*p+v])*m),this.onChangeCallback(this),this}});g.exports=c},function(g,b,t){var h=t(367),n=t(31),s=t(33),l=t(191);g.exports=function(e){var r=e.config;if((r.customEnvironment||r.canvas)&&r.renderType===s.AUTO)throw new Error("Must set explicit renderType in custom environment");if(!r.customEnvironment&&!r.canvas&&r.renderType!==s.HEADLESS)if(r.renderType===s.CANVAS||r.renderType!==s.CANVAS&&!l.webGL){if(!l.canvas)throw new Error("Cannot create Canvas or WebGL context, aborting.");r.renderType=s.CANVAS}else r.renderType=s.WEBGL;r.antialias||n.disableSmoothing();var o,a,i=e.scale.baseSize,u=i.width,c=i.height;r.canvas?(e.canvas=r.canvas,e.canvas.width=u,e.canvas.height=c):e.canvas=n.create(e,u,c,r.renderType),r.canvasStyle&&(e.canvas.style=r.canvasStyle),r.antialias||h.setCrisp(e.canvas),r.renderType!==s.HEADLESS&&(o=t(368),a=t(371),r.renderType===s.WEBGL?e.renderer=new a(e):(e.renderer=new o(e),e.context=e.renderer.gameContext))}},function(g,b){g.exports={setCrisp:function(t){return["optimizeSpeed","-moz-crisp-edges","-o-crisp-edges","-webkit-optimize-contrast","optimize-contrast","crisp-edges","pixelated"].forEach(function(h){t.style["image-rendering"]=h}),t.style.msInterpolationMode="nearest-neighbor",t},setBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}}},function(g,b,t){var h=t(37),n=t(369),s=t(0),l=t(33),e=t(9),r=t(91),o=t(370),a=t(104),i=t(106),u=t(25),c=new s({Extends:e,initialize:function(d){e.call(this);var f=d.config;this.config={clearBeforeRender:f.clearBeforeRender,backgroundColor:f.backgroundColor,antialias:f.antialias,roundPixels:f.roundPixels},this.game=d,this.type=l.CANVAS,this.drawCount=0,this.width=0,this.height=0,this.gameCanvas=d.canvas,this.gameContext=f.context?f.context:this.gameCanvas.getContext("2d",{alpha:d.config.transparent,desynchronized:d.config.desynchronized}),this.currentContext=this.gameContext,this.antialias=d.config.antialias,this.blendModes=o(),this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92},this._tempMatrix1=new u,this._tempMatrix2=new u,this._tempMatrix3=new u,this.isBooted=!1,this.init()},init:function(){this.game.textures.once(i.READY,this.boot,this)},boot:function(){var d=this.game,f=d.scale.baseSize;this.width=f.width,this.height=f.height,this.isBooted=!0,d.scale.on(a.RESIZE,this.onResize,this),this.resize(f.width,f.height)},onResize:function(d,f){f.width===this.width&&f.height===this.height||this.resize(f.width,f.height)},resize:function(d,f){this.width=d,this.height=f,this.emit(r.RESIZE,d,f)},resetTransform:function(){this.currentContext.setTransform(1,0,0,1,0,0)},setBlendMode:function(d){return this.currentContext.globalCompositeOperation=d,this},setContext:function(d){return this.currentContext=d||this.gameContext,this},setAlpha:function(d){return this.currentContext.globalAlpha=d,this},preRender:function(){var d=this.gameContext,f=this.config,p=this.width,v=this.height;d.globalAlpha=1,d.globalCompositeOperation="source-over",d.setTransform(1,0,0,1,0,0),f.clearBeforeRender&&(d.clearRect(0,0,p,v),f.transparent||(d.fillStyle=f.backgroundColor.rgba,d.fillRect(0,0,p,v))),d.save(),this.drawCount=0,this.emit(r.PRE_RENDER)},render:function(d,f,p){var v=f.length;this.emit(r.RENDER,d,p);var m=p.x,T=p.y,y=p.width,x=p.height,w=p.renderToTexture?p.context:d.sys.context;w.save(),this.game.scene.customViewports&&(w.beginPath(),w.rect(m,T,y,x),w.clip()),this.currentContext=w;var E=p.mask;E&&E.preRenderCanvas(this,null,p._maskCamera),p.transparent||(w.fillStyle=p.backgroundColor.rgba,w.fillRect(m,T,y,x)),w.globalAlpha=p.alpha,w.globalCompositeOperation="source-over",this.drawCount+=v,p.renderToTexture&&p.emit(h.PRE_RENDER,p),p.matrix.copyToContext(w);for(var S=0;S<v;S++){var A=f[S];A.mask&&A.mask.preRenderCanvas(this,A,p),A.renderCanvas(this,A,p),A.mask&&A.mask.postRenderCanvas(this,A,p)}w.setTransform(1,0,0,1,0,0),w.globalCompositeOperation="source-over",w.globalAlpha=1,p.flashEffect.postRenderCanvas(w),p.fadeEffect.postRenderCanvas(w),p.dirty=!1,E&&E.postRenderCanvas(this),w.restore(),p.renderToTexture&&(p.emit(h.POST_RENDER,p),p.renderToGame&&d.sys.context.drawImage(p.canvas,m,T))},postRender:function(){this.gameContext.restore(),this.emit(r.POST_RENDER);var d=this.snapshotState;d.callback&&(n(this.gameCanvas,d),d.callback=null)},snapshotCanvas:function(d,f,p,v,m,T,y,x,w){void 0===p&&(p=!1),this.snapshotArea(v,m,T,y,f,x,w);var E=this.snapshotState;return E.getPixel=p,n(this.canvas,E),E.callback=null,this},snapshot:function(d,f,p){return this.snapshotArea(0,0,this.gameCanvas.width,this.gameCanvas.height,d,f,p)},snapshotArea:function(d,f,p,v,m,T,y){var x=this.snapshotState;return x.callback=m,x.type=T,x.encoder=y,x.getPixel=!1,x.x=d,x.y=f,x.width=Math.min(p,this.gameCanvas.width),x.height=Math.min(v,this.gameCanvas.height),this},snapshotPixel:function(d,f,p){return this.snapshotArea(d,f,1,1,p),this.snapshotState.getPixel=!0,this},batchSprite:function(d,f,p,v){var m,T,y,x,w,E,S,A,_,C,M,P,L,D,F,X,R,O=p.alpha*d.alpha;0!=O&&(m=this.currentContext,T=this._tempMatrix1,y=this._tempMatrix2,w=(x=f.canvasData).x,E=x.y,S=f.cutWidth,A=f.cutHeight,_=f.customPivot,C=f.source.resolution,L=-(M=d.displayOriginX)+f.x,D=-(P=d.displayOriginY)+f.y,d.isCropped&&((F=d._crop).flipX===d.flipX&&F.flipY===d.flipY||f.updateCropUVs(F,d.flipX,d.flipY),S=F.cw,A=F.ch,w=F.cx,E=F.cy,L=-M+F.x,D=-P+F.y,d.flipX&&(0<=L?L=-(L+S):L<0&&(L=Math.abs(L)-S)),d.flipY&&(0<=D?D=-(D+A):D<0&&(D=Math.abs(D)-A))),R=X=1,d.flipX&&(_||(L+=2*M-f.realWidth),X=-1),d.flipY&&(_||(D+=2*P-f.realHeight),R=-1),y.applyITRS(d.x,d.y,d.rotation,d.scaleX*X,d.scaleY*R),T.copyFrom(p.matrix),v?(T.multiplyWithOffset(v,-p.scrollX*d.scrollFactorX,-p.scrollY*d.scrollFactorY),y.e=d.x,y.f=d.y):(y.e-=p.scrollX*d.scrollFactorX,y.f-=p.scrollY*d.scrollFactorY),T.multiply(y),m.save(),T.setToContext(m),m.globalCompositeOperation=this.blendModes[d.blendMode],m.globalAlpha=O,m.imageSmoothingEnabled=!(!this.antialias||f.source.scaleMode),d.mask&&d.mask.preRenderCanvas(this,d,p),m.drawImage(f.source.image,w,E,S,A,L,D,S/C,A/C),d.mask&&d.mask.postRenderCanvas(this,d,p),m.restore())},destroy:function(){this.removeAllListeners(),this.game=null,this.gameCanvas=null,this.gameContext=null}});g.exports=c},function(g,b,t){var h=t(31),n=t(38),s=t(2);g.exports=function(l,e){var r,o,a,i,u=s(e,"callback"),c=s(e,"type","image/png"),d=s(e,"encoder",.92),f=Math.abs(Math.round(s(e,"x",0))),p=Math.abs(Math.round(s(e,"y",0))),v=s(e,"width",l.width),m=s(e,"height",l.height);s(e,"getPixel",!1)?(r=l.getContext("2d").getImageData(f,p,1,1).data,u.call(null,new n(r[0],r[1],r[2],r[3]/255))):0!==f||0!==p||v!==l.width||m!==l.height?((o=h.createWebGL(this,v,m)).getContext("2d").drawImage(l,f,p,v,m,0,0,v,m),(a=new Image).onerror=function(){u.call(null),h.remove(o)},a.onload=function(){u.call(null,a),h.remove(o)},a.src=o.toDataURL(c,d)):((i=new Image).onerror=function(){u.call(null)},i.onload=function(){u.call(null,i)},i.src=l.toDataURL(c,d))}},function(g,b,t){var h=t(35),n=t(348);g.exports=function(){var s=[],l=n.supportNewBlendModes,e="source-over";return s[h.NORMAL]=e,s[h.ADD]="lighter",s[h.MULTIPLY]=l?"multiply":e,s[h.SCREEN]=l?"screen":e,s[h.OVERLAY]=l?"overlay":e,s[h.DARKEN]=l?"darken":e,s[h.LIGHTEN]=l?"lighten":e,s[h.COLOR_DODGE]=l?"color-dodge":e,s[h.COLOR_BURN]=l?"color-burn":e,s[h.HARD_LIGHT]=l?"hard-light":e,s[h.SOFT_LIGHT]=l?"soft-light":e,s[h.DIFFERENCE]=l?"difference":e,s[h.EXCLUSION]=l?"exclusion":e,s[h.HUE]=l?"hue":e,s[h.SATURATION]=l?"saturation":e,s[h.COLOR]=l?"color":e,s[h.LUMINOSITY]=l?"luminosity":e,s[h.ERASE]="destination-out",s[h.SOURCE_IN]="source-in",s[h.SOURCE_OUT]="source-out",s[h.SOURCE_ATOP]="source-atop",s[h.DESTINATION_OVER]="destination-over",s[h.DESTINATION_IN]="destination-in",s[h.DESTINATION_OUT]="destination-out",s[h.DESTINATION_ATOP]="destination-atop",s[h.LIGHTER]="lighter",s[h.COPY]="copy",s[h.XOR]="xor",s}},function(g,b,t){var h=t(93),n=t(37),s=t(0),l=t(33),e=t(9),r=t(91),o=t(22),a=t(138),i=t(69),u=t(1),c=t(372),d=t(141),f=t(104),p=t(106),v=t(12),m=t(383),T=new s({Extends:e,initialize:function(y){e.call(this);var x=y.config;this.config={clearBeforeRender:x.clearBeforeRender,antialias:x.antialias,backgroundColor:x.backgroundColor,contextCreation:{alpha:x.transparent,desynchronized:x.desynchronized,depth:!1,antialias:x.antialiasGL,premultipliedAlpha:x.premultipliedAlpha,stencil:!0,failIfMajorPerformanceCaveat:x.failIfMajorPerformanceCaveat,powerPreference:x.powerPreference,preserveDrawingBuffer:x.preserveDrawingBuffer},roundPixels:x.roundPixels,maxTextures:x.maxTextures,maxTextureSize:x.maxTextureSize,batchSize:x.batchSize,maxLights:x.maxLights,mipmapFilter:x.mipmapFilter},this.game=y,this.type=l.WEBGL,this.pipelines=null,this.width=0,this.height=0,this.canvas=y.canvas,this.blendModes=[],this.contextLost=!1,this.snapshotState={x:0,y:0,width:1,height:1,getPixel:!1,callback:null,type:"image/png",encoder:.92,isFramebuffer:!1,bufferWidth:0,bufferHeight:0},this.currentActiveTexture=0,this.startActiveTexture=0,this.maxTextures=0,this.currentFramebuffer=null,this.fboStack=[],this.currentProgram=null,this.currentBlendMode=1/0,this.currentScissorEnabled=!1,this.currentScissor=null,this.scissorStack=[],this.contextLostHandler=u,this.contextRestoredHandler=u,this.gl=null,this.supportedExtensions=null,this.instancedArraysExtension=null,this.vaoExtension=null,this.extensions={},this.glFormats=[],this.compression={ETC1:!1,PVRTC:!1,S3TC:!1},this.drawingBufferHeight=0,this.blankTexture=null,this.whiteTexture=null,this.maskCount=0,this.maskStack=[],this.currentMask={mask:null,camera:null},this.currentCameraMask={mask:null,camera:null},this.glFuncMap=null,this.currentType="",this.newType=!1,this.nextTypeMatch=!1,this.finalType=!1,this.mipmapFilter=null,this.textureFlush=0,this.isTextureClean=!1,this.defaultScissor=[0,0,0,0],this.isBooted=!1,this.renderTarget=null,this.projectionWidth=0,this.projectionHeight=0,this.init(this.config)},init:function(y){var x=this.game,w=this.canvas,E=y.backgroundColor,S=x.config.context?x.config.context:w.getContext("webgl",y.contextCreation)||w.getContext("experimental-webgl",y.contextCreation);if(!S||S.isContextLost())throw this.contextLost=!0,new Error("WebGL unsupported");this.gl=S;var A=this;this.contextLostHandler=function(N){A.contextLost=!0,A.game.events.emit(o.CONTEXT_LOST,A),N.preventDefault()},this.contextRestoredHandler=function(){A.contextLost=!1,A.init(A.config),A.game.events.emit(o.CONTEXT_RESTORED,A)},w.addEventListener("webglcontextlost",this.contextLostHandler,!1),w.addEventListener("webglcontextrestored",this.contextRestoredHandler,!1),x.context=S;for(var _=0;_<=27;_++)this.blendModes.push({func:[S.ONE,S.ONE_MINUS_SRC_ALPHA],equation:S.FUNC_ADD});this.blendModes[1].func=[S.ONE,S.DST_ALPHA],this.blendModes[2].func=[S.DST_COLOR,S.ONE_MINUS_SRC_ALPHA],this.blendModes[3].func=[S.ONE,S.ONE_MINUS_SRC_COLOR],this.blendModes[17]={func:[S.ZERO,S.ONE_MINUS_SRC_ALPHA],equation:S.FUNC_REVERSE_SUBTRACT},this.glFormats[0]=S.BYTE,this.glFormats[1]=S.SHORT,this.glFormats[2]=S.UNSIGNED_BYTE,this.glFormats[3]=S.UNSIGNED_SHORT,this.glFormats[4]=S.FLOAT,this.glFuncMap={mat2:{func:S.uniformMatrix2fv,length:1,matrix:!0},mat3:{func:S.uniformMatrix3fv,length:1,matrix:!0},mat4:{func:S.uniformMatrix4fv,length:1,matrix:!0},"1f":{func:S.uniform1f,length:1},"1fv":{func:S.uniform1fv,length:1},"1i":{func:S.uniform1i,length:1},"1iv":{func:S.uniform1iv,length:1},"2f":{func:S.uniform2f,length:2},"2fv":{func:S.uniform2fv,length:1},"2i":{func:S.uniform2i,length:2},"2iv":{func:S.uniform2iv,length:1},"3f":{func:S.uniform3f,length:3},"3fv":{func:S.uniform3fv,length:1},"3i":{func:S.uniform3i,length:3},"3iv":{func:S.uniform3iv,length:1},"4f":{func:S.uniform4f,length:4},"4fv":{func:S.uniform4fv,length:1},"4i":{func:S.uniform4i,length:4},"4iv":{func:S.uniform4iv,length:1}};var C=S.getSupportedExtensions();y.maxTextures&&-1!==y.maxTextures||(y.maxTextures=S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS)),y.maxTextureSize||(y.maxTextureSize=S.getParameter(S.MAX_TEXTURE_SIZE));var M="WEBGL_compressed_texture_",P="WEBKIT_"+M;this.compression.ETC1=S.getExtension(M+"etc1")||S.getExtension(P+"etc1"),this.compression.PVRTC=S.getExtension(M+"pvrtc")||S.getExtension(P+"pvrtc"),this.compression.S3TC=S.getExtension(M+"s3tc")||S.getExtension(P+"s3tc"),this.supportedExtensions=C;var L="ANGLE_instanced_arrays";this.instancedArraysExtension=-1<C.indexOf(L)?S.getExtension(L):null;var D="OES_vertex_array_object";this.vaoExtension=-1<C.indexOf(D)?S.getExtension(D):null,S.disable(S.DEPTH_TEST),S.disable(S.CULL_FACE),S.enable(S.BLEND),S.clearColor(E.redGL,E.greenGL,E.blueGL,E.alphaGL),this.mipmapFilter=S[y.mipmapFilter],this.maxTextures=v.checkShaderMax(S,y.maxTextures),this.textureIndexes=[];var F=this.tempTextures;if(Array.isArray(F))for(var X=0;_<this.maxTextures;X++)S.deleteTexture(F[X]);else F=new Array(this.maxTextures);for(var R=0;R<this.maxTextures;R++){var O=S.createTexture();S.activeTexture(S.TEXTURE0+R),S.bindTexture(S.TEXTURE_2D,O),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,new Uint8Array([0,0,255,255])),F[R]=O,this.textureIndexes.push(R)}return this.tempTextures=F,this.currentActiveTexture=1,this.startActiveTexture++,S.activeTexture(S.TEXTURE1),this.pipelines=new c(this),this.setBlendMode(l.BlendModes.NORMAL),this.projectionMatrix=(new i).identity(),x.textures.once(p.READY,this.boot,this),this},boot:function(){var y=this.game,x=this.pipelines,w=y.scale.baseSize;this.width=w.width,this.height=w.height,this.isBooted=!0,this.renderTarget=new d(this,this.width,this.height,1,0,!0,!0),x.boot(y.config.pipeline),this.blankTexture=y.textures.getFrame("__DEFAULT"),this.whiteTexture=y.textures.getFrame("__WHITE");var E=this.gl;E.bindFramebuffer(E.FRAMEBUFFER,null),E.enable(E.SCISSOR_TEST),y.scale.on(f.RESIZE,this.onResize,this),this.resize(w.width,w.height)},onResize:function(y,x){x.width===this.width&&x.height===this.height||this.resize(x.width,x.height)},beginCapture:function(y,x){void 0===y&&(y=this.width),void 0===x&&(x=this.height),this.renderTarget.bind(!0,y,x),this.setProjectionMatrix(y,x),this.resetTextures()},endCapture:function(){return this.renderTarget.unbind(!0),this.resetProjectionMatrix(),this.renderTarget},resize:function(y,x){var w=this.gl;return this.width=y,this.height=x,this.setProjectionMatrix(y,x),w.viewport(0,0,y,x),this.drawingBufferHeight=w.drawingBufferHeight,w.scissor(0,w.drawingBufferHeight-x,y,x),this.defaultScissor[2]=y,this.defaultScissor[3]=x,this.emit(r.RESIZE,y,x),this},getAspectRatio:function(){return this.width/this.height},setProjectionMatrix:function(y,x){return y===this.projectionWidth&&x===this.projectionHeight||(this.projectionWidth=y,this.projectionHeight=x,this.projectionMatrix.ortho(0,y,x,0,-1e3,1e3)),this},resetProjectionMatrix:function(){this.projectionWidth=this.width,this.projectionHeight=this.height,this.projectionMatrix.ortho(0,this.width,this.height,0,-1e3,1e3)},hasExtension:function(y){return!!this.supportedExtensions&&this.supportedExtensions.indexOf(y)},getExtension:function(y){return this.hasExtension(y)?(y in this.extensions||(this.extensions[y]=this.gl.getExtension(y)),this.extensions[y]):null},flush:function(){this.pipelines.flush()},pushScissor:function(y,x,w,E,S){void 0===S&&(S=this.drawingBufferHeight);var A=[y,x,w,E];return this.scissorStack.push(A),this.setScissor(y,x,w,E,S),this.currentScissor=A},setScissor:function(y,x,w,E,S){void 0===S&&(S=this.drawingBufferHeight);var P=this.gl,L=this.currentScissor,D=0<w&&0<E;L&&D&&(D=L[0]!==y||L[1]!==x||L[2]!==w||L[3]!==E),D&&(this.flush(),P.scissor(y,S-x-E,w,E))},resetScissor:function(){var y=this.gl;y.enable(y.SCISSOR_TEST);var E,S,A=this.currentScissor;A&&(S=A[3],0<(E=A[2])&&0<S&&y.scissor(A[0],this.drawingBufferHeight-A[1]-S,E,S))},popScissor:function(){var y=this.scissorStack;y.pop();var x=y[y.length-1];x&&this.setScissor(x[0],x[1],x[2],x[3]),this.currentScissor=x},hasActiveStencilMask:function(){var y=this.currentMask.mask,x=this.currentCameraMask.mask;return y&&y.isStencil||x&&x.isStencil},resetViewport:function(){var y=this.gl;y.viewport(0,0,this.width,this.height),this.drawingBufferHeight=y.drawingBufferHeight},setBlendMode:function(y,x){void 0===x&&(x=!1);var w=this.gl,E=this.blendModes[y];return!!(x||y!==l.BlendModes.SKIP_CHECK&&this.currentBlendMode!==y)&&(this.flush(),w.enable(w.BLEND),w.blendEquation(E.equation),2<E.func.length?w.blendFuncSeparate(E.func[0],E.func[1],E.func[2],E.func[3]):w.blendFunc(E.func[0],E.func[1]),this.currentBlendMode=y,!0)},addBlendMode:function(y,x){return this.blendModes.push({func:y,equation:x})-1},updateBlendMode:function(y,x,w){return this.blendModes[y]&&(this.blendModes[y].func=x,w&&(this.blendModes[y].equation=w)),this},removeBlendMode:function(y){return 17<y&&this.blendModes[y]&&this.blendModes.splice(y,1),this},setBlankTexture:function(){this.setTexture2D(this.blankTexture.glTexture)},setTextureSource:function(y){if(this.pipelines.forceZero())return this.setTextureZero(y.glTexture,!0),0;var x=this.gl,w=this.currentActiveTexture;return y.glIndexCounter<this.startActiveTexture&&(y.glIndexCounter=this.startActiveTexture,w<this.maxTextures?(y.glIndex=w,x.activeTexture(x.TEXTURE0+w),x.bindTexture(x.TEXTURE_2D,y.glTexture),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,y.glIndexCounter=this.startActiveTexture,y.glIndex=1,x.activeTexture(x.TEXTURE1),x.bindTexture(x.TEXTURE_2D,y.glTexture),this.currentActiveTexture=2)),this.isTextureClean=!1,y.glIndex},isNewNormalMap:function(y,x){return this.textureZero!==y||this.normalTexture!==x},setTextureZero:function(y,x){var w;this.textureZero!==y&&(x&&this.flush(),(w=this.gl).activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,y),this.textureZero=y)},clearTextureZero:function(){this.textureZero=null},setNormalMap:function(y){var x;this.normalTexture!==y&&((x=this.gl).activeTexture(x.TEXTURE1),x.bindTexture(x.TEXTURE_2D,y),this.normalTexture=y,1===this.currentActiveTexture&&(this.currentActiveTexture=2))},clearNormalMap:function(){this.normalTexture=null,this.startActiveTexture++,this.currentActiveTexture=1,this.textureFlush++},unbindTextures:function(){for(var y=this.gl,x=this.tempTextures,w=0;w<x.length;w++)y.activeTexture(y.TEXTURE0+w),y.bindTexture(y.TEXTURE_2D,null);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++},resetTextures:function(y){if(void 0===y&&(y=!1),!this.isTextureClean){this.flush();var x=this.gl,w=this.tempTextures;if(y){for(var E=0;E<w.length;E++)x.activeTexture(x.TEXTURE0+E),x.bindTexture(x.TEXTURE_2D,w[E]);x.activeTexture(x.TEXTURE1),x.bindTexture(x.TEXTURE_2D,w[1]),this.isTextureClean=!0}else x.activeTexture(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,w[0]),x.activeTexture(x.TEXTURE1),x.bindTexture(x.TEXTURE_2D,w[1]);this.normalTexture=null,this.textureZero=null,this.currentActiveTexture=1,this.startActiveTexture++,this.textureFlush++}},setTexture2D:function(y){if(this.pipelines.forceZero())return this.setTextureZero(y,!0),0;var x=this.gl,w=this.currentActiveTexture;return y.glIndexCounter<this.startActiveTexture&&(y.glIndexCounter=this.startActiveTexture,w<this.maxTextures?(y.glIndex=w,x.activeTexture(x.TEXTURE0+w),x.bindTexture(x.TEXTURE_2D,y),this.currentActiveTexture++):(this.flush(),this.startActiveTexture++,this.textureFlush++,y.glIndexCounter=this.startActiveTexture,y.glIndex=1,x.activeTexture(x.TEXTURE1),x.bindTexture(x.TEXTURE_2D,y),this.currentActiveTexture=2)),this.isTextureClean=!1,y.glIndex},pushFramebuffer:function(y,x,w,E){return y===this.currentFramebuffer?this:(this.fboStack.push(y),this.setFramebuffer(y,x,w,E))},setFramebuffer:function(y,x,w,E){if(void 0===x&&(x=!1),void 0===w&&(w=!1),void 0===E&&(E=!0),y===this.currentFramebuffer)return this;var S=this.gl,A=this.width,_=this.height;return y&&y.renderTexture&&E?(A=y.renderTexture.width,_=y.renderTexture.height):this.flush(),S.bindFramebuffer(S.FRAMEBUFFER,y),E&&S.viewport(0,0,A,_),x&&(y?(this.drawingBufferHeight=_,this.pushScissor(0,0,A,_)):(this.drawingBufferHeight=this.height,this.popScissor())),this.currentFramebuffer=y,w&&this.resetTextures(),this},popFramebuffer:function(y,x,w){void 0===y&&(y=!1),void 0===x&&(x=!1),void 0===w&&(w=!0);var E=this.fboStack;E.pop();var S=(S=E[E.length-1])||null;return this.setFramebuffer(S,y,x,w),S},setProgram:function(y){return y!==this.currentProgram&&(this.flush(),this.gl.useProgram(y),this.currentProgram=y,!0)},resetProgram:function(){return this.gl.useProgram(this.currentProgram),this},createTextureFromSource:function(y,x,w,E){var S=this.gl,A=S.NEAREST,_=S.NEAREST,C=S.CLAMP_TO_EDGE,M=a(x=y?y.width:x,w=y?y.height:w);return M&&(C=S.REPEAT),E===l.ScaleModes.LINEAR&&this.config.antialias&&(A=M?this.mipmapFilter:S.LINEAR,_=S.LINEAR),y||"number"!=typeof x||"number"!=typeof w?this.createTexture2D(0,A,_,C,C,S.RGBA,y):this.createTexture2D(0,A,_,C,C,S.RGBA,null,x,w)},createTexture2D:function(y,x,w,E,S,A,_,C,M,P,L,D){P=null==P||P,void 0===L&&(L=!1),void 0===D&&(D=!1);var F=this.gl,X=F.createTexture();F.activeTexture(F.TEXTURE0);var R=F.getParameter(F.TEXTURE_BINDING_2D);return F.bindTexture(F.TEXTURE_2D,X),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,x),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,w),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,S),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,E),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,P),F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,D),null==_?F.texImage2D(F.TEXTURE_2D,y,A,C,M,0,A,F.UNSIGNED_BYTE,null):(L||(C=_.width,M=_.height),F.texImage2D(F.TEXTURE_2D,y,A,A,F.UNSIGNED_BYTE,_)),a(C,M)&&F.generateMipmap(F.TEXTURE_2D),R&&F.bindTexture(F.TEXTURE_2D,R),X.isAlphaPremultiplied=P,X.isRenderTexture=!1,X.width=C,X.height=M,X.glIndex=0,X.glIndexCounter=-1,X},createFramebuffer:function(y,x,w,E){var S,A,_=this.gl,C=_.createFramebuffer();if(this.setFramebuffer(C),E&&(A=_.createRenderbuffer(),_.bindRenderbuffer(_.RENDERBUFFER,A),_.renderbufferStorage(_.RENDERBUFFER,_.DEPTH_STENCIL,y,x),_.framebufferRenderbuffer(_.FRAMEBUFFER,_.DEPTH_STENCIL_ATTACHMENT,_.RENDERBUFFER,A)),w.isRenderTexture=!0,w.isAlphaPremultiplied=!1,_.framebufferTexture2D(_.FRAMEBUFFER,_.COLOR_ATTACHMENT0,_.TEXTURE_2D,w,0),(S=_.checkFramebufferStatus(_.FRAMEBUFFER))===_.FRAMEBUFFER_COMPLETE)return C.renderTexture=w,this.setFramebuffer(null),this.resetTextures(),C;throw new Error("Framebuffer status: "+{36054:"Incomplete Attachment",36055:"Missing Attachment",36057:"Incomplete Dimensions",36061:"Framebuffer Unsupported"}[S])},createProgram:function(y,x){var w=this.gl,E=w.createProgram(),S=w.createShader(w.VERTEX_SHADER),A=w.createShader(w.FRAGMENT_SHADER);if(w.shaderSource(S,y),w.shaderSource(A,x),w.compileShader(S),w.compileShader(A),!w.getShaderParameter(S,w.COMPILE_STATUS))throw new Error("Vertex Shader failed:\n"+w.getShaderInfoLog(S));if(!w.getShaderParameter(A,w.COMPILE_STATUS))throw new Error("Fragment Shader failed:\n"+w.getShaderInfoLog(A));if(w.attachShader(E,S),w.attachShader(E,A),w.linkProgram(E),!w.getProgramParameter(E,w.LINK_STATUS))throw new Error("Link Program failed:\n"+w.getProgramInfoLog(E));return w.useProgram(E),E},createVertexBuffer:function(y,x){var w=this.gl,E=w.createBuffer();return w.bindBuffer(w.ARRAY_BUFFER,E),w.bufferData(w.ARRAY_BUFFER,y,x),w.bindBuffer(w.ARRAY_BUFFER,null),E},createIndexBuffer:function(y,x){var w=this.gl,E=w.createBuffer();return w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,E),w.bufferData(w.ELEMENT_ARRAY_BUFFER,y,x),w.bindBuffer(w.ELEMENT_ARRAY_BUFFER,null),E},deleteTexture:function(y,x){return x&&this.resetTextures(!0),y&&this.gl.deleteTexture(y),this},deleteFramebuffer:function(y){return y&&(this.gl.deleteFramebuffer(y),h(this.fboStack,y),this.currentFramebuffer===y&&(this.currentFramebuffer=null)),this},deleteProgram:function(y){return y&&this.gl.deleteProgram(y),this},deleteBuffer:function(y){return this.gl.deleteBuffer(y),this},preRenderCamera:function(y){var x=y.x,w=y.y,E=y.width,S=y.height,A=y.backgroundColor;y.emit(n.PRE_RENDER,y),this.pipelines.preBatchCamera(y),this.pushScissor(x,w,E,S),y.mask&&(this.currentCameraMask.mask=y.mask,this.currentCameraMask.camera=y._maskCamera,y.mask.preRenderWebGL(this,y,y._maskCamera)),0<A.alphaGL&&this.pipelines.setMulti().drawFillRect(x,w,E,S,v.getTintFromFloats(A.blueGL,A.greenGL,A.redGL,1),A.alphaGL)},getCurrentStencilMask:function(){var y=null,x=this.maskStack,w=this.currentCameraMask;return 0<x.length?y=x[x.length-1]:w.mask&&w.mask.isStencil&&(y=w),y},postRenderCamera:function(y){var x,w=y.flashEffect,E=y.fadeEffect;(w.isRunning||E.isRunning||E.isComplete)&&(x=this.pipelines.setMulti(),w.postRenderWebGL(x,v.getTintFromFloats),E.postRenderWebGL(x,v.getTintFromFloats)),y.dirty=!1,this.popScissor(),y.mask&&(this.currentCameraMask.mask=null,y.mask.postRenderWebGL(this,y._maskCamera)),this.pipelines.postBatchCamera(y),y.emit(n.POST_RENDER,y)},preRender:function(){var y,x;this.contextLost||((y=this.gl).bindFramebuffer(y.FRAMEBUFFER,null),this.config.clearBeforeRender&&(y.clearColor((x=this.config.backgroundColor).redGL,x.greenGL,x.blueGL,x.alphaGL),y.clear(y.COLOR_BUFFER_BIT|y.DEPTH_BUFFER_BIT|y.STENCIL_BUFFER_BIT)),y.enable(y.SCISSOR_TEST),this.currentScissor=this.defaultScissor,this.scissorStack.length=0,this.scissorStack.push(this.currentScissor),this.game.scene.customViewports&&y.scissor(0,this.drawingBufferHeight-this.height,this.width,this.height),this.currentMask.mask=null,this.currentCameraMask.mask=null,this.maskStack.length=0,this.textureFlush=0,this.emit(r.PRE_RENDER))},render:function(y,x,w){if(!this.contextLost){var E=x.length;if(this.emit(r.RENDER,y,w),this.preRenderCamera(w),0===E)return this.setBlendMode(l.BlendModes.NORMAL),void this.postRenderCamera(w);this.currentType="";for(var S=this.currentMask,A=0;A<E;A++){this.finalType=A===E-1;var _=x[A],C=_.mask;(S=this.currentMask).mask&&S.mask!==C&&S.mask.postRenderWebGL(this,S.camera),C&&S.mask!==C&&C.preRenderWebGL(this,_,w),_.blendMode!==this.currentBlendMode&&this.setBlendMode(_.blendMode);var M=_.type;M!==this.currentType&&(this.newType=!0,this.currentType=M),this.nextTypeMatch=!this.finalType&&x[A+1].type===this.currentType,_.renderWebGL(this,_,w),this.newType=!1}(S=this.currentMask).mask&&S.mask.postRenderWebGL(this,S.camera),this.setBlendMode(l.BlendModes.NORMAL),this.postRenderCamera(w)}},postRender:function(){var y;this.contextLost||(this.flush(),this.emit(r.POST_RENDER),(y=this.snapshotState).callback&&(m(this.canvas,y),y.callback=null),0<this.textureFlush&&(this.startActiveTexture++,this.currentActiveTexture=1))},snapshot:function(y,x,w){return this.snapshotArea(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight,y,x,w)},snapshotArea:function(y,x,w,E,S,A,_){var C=this.snapshotState;return C.callback=S,C.type=A,C.encoder=_,C.getPixel=!1,C.x=y,C.y=x,C.width=Math.min(w,this.gl.drawingBufferWidth),C.height=Math.min(E,this.gl.drawingBufferHeight),this},snapshotPixel:function(y,x,w){return this.snapshotArea(y,x,1,1,w),this.snapshotState.getPixel=!0,this},snapshotFramebuffer:function(y,x,w,E,S,A,_,C,M,P,L){void 0===S&&(S=!1),void 0===A&&(A=0),void 0===_&&(_=0),void 0===C&&(C=x),void 0===M&&(M=w);var D=this.currentFramebuffer;this.snapshotArea(A,_,C,M,E,P,L);var F=this.snapshotState;return F.getPixel=S,F.isFramebuffer=!0,F.bufferWidth=x,F.bufferHeight=w,this.setFramebuffer(y),m(this.canvas,F),this.setFramebuffer(D),F.callback=null,F.isFramebuffer=!1,this},canvasToTexture:function(y,x,w,E){return void 0===w&&(w=!1),void 0===E&&(E=!1),x?this.updateCanvasTexture(y,x,E):this.createCanvasTexture(y,w,E)},createCanvasTexture:function(y,x,w){void 0===x&&(x=!1),void 0===w&&(w=!1);var E=this.gl,S=E.NEAREST,A=E.NEAREST,_=y.width,C=y.height,M=E.CLAMP_TO_EDGE,P=a(_,C);return!x&&P&&(M=E.REPEAT),this.config.antialias&&(S=P?this.mipmapFilter:E.LINEAR,A=E.LINEAR),this.createTexture2D(0,S,A,M,M,E.RGBA,y,_,C,!0,!1,w)},updateCanvasTexture:function(y,x,w){void 0===w&&(w=!1);var E,S=this.gl,A=y.width,_=y.height;return 0<A&&0<_&&(S.activeTexture(S.TEXTURE0),E=S.getParameter(S.TEXTURE_BINDING_2D),S.bindTexture(S.TEXTURE_2D,x),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,w),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,y),x.width=A,x.height=_,E&&S.bindTexture(S.TEXTURE_2D,E)),x},createVideoTexture:function(y,x,w){void 0===x&&(x=!1),void 0===w&&(w=!1);var E=this.gl,S=E.NEAREST,A=E.NEAREST,_=y.videoWidth,C=y.videoHeight,M=E.CLAMP_TO_EDGE,P=a(_,C);return!x&&P&&(M=E.REPEAT),this.config.antialias&&(S=P?this.mipmapFilter:E.LINEAR,A=E.LINEAR),this.createTexture2D(0,S,A,M,M,E.RGBA,y,_,C,!0,!0,w)},updateVideoTexture:function(y,x,w){void 0===w&&(w=!1);var E,S=this.gl,A=y.videoWidth,_=y.videoHeight;return 0<A&&0<_&&(S.activeTexture(S.TEXTURE0),E=S.getParameter(S.TEXTURE_BINDING_2D),S.bindTexture(S.TEXTURE_2D,x),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,w),S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,y),x.width=A,x.height=_,E&&S.bindTexture(S.TEXTURE_2D,E)),x},setTextureFilter:function(y,x){var w=this.gl,E=[w.LINEAR,w.NEAREST][x];w.activeTexture(w.TEXTURE0);var S=w.getParameter(w.TEXTURE_BINDING_2D);return w.bindTexture(w.TEXTURE_2D,y),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,E),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,E),S&&w.bindTexture(w.TEXTURE_2D,S),this},getMaxTextureSize:function(){return this.config.maxTextureSize},destroy:function(){this.canvas.removeEventListener("webglcontextlost",this.contextLostHandler,!1),this.canvas.removeEventListener("webglcontextrestored",this.contextRestoredHandler,!1);for(var y=this.gl,x=this.tempTextures,w=0;w<x.length;w++)y.deleteTexture(x[w]);this.pipelines.destroy(),this.removeAllListeners(),this.fboStack=[],this.maskStack=[],this.extensions={},this.textureIndexes=[],this.gl=null,this.game=null,this.canvas=null,this.contextLost=!0,this.currentMask=null,this.currentCameraMask=null}});g.exports=T},function(g,b,t){var h=t(0),n=t(92),s=t(102),l=t(373),e=t(376),r=t(377),o=t(108),a=t(378),i=t(379),u=t(380),c=t(381),d=new h({initialize:function(f){this.game=f.game,this.renderer=f,this.classes=new s([[n.UTILITY_PIPELINE,c],[n.MULTI_PIPELINE,o],[n.BITMAPMASK_PIPELINE,l],[n.SINGLE_PIPELINE,u],[n.ROPE_PIPELINE,i],[n.LIGHT_PIPELINE,r],[n.POINTLIGHT_PIPELINE,a],[n.GRAPHICS_PIPELINE,e]]),this.postPipelineClasses=new s,this.pipelines=new s,this.current=null,this.previous=null,this.MULTI_PIPELINE=null,this.BITMAPMASK_PIPELINE=null,this.UTILITY_PIPELINE=null},boot:function(f){var p,v=this,m=this.game;if(this.classes.each(function(x,w){T=v.add(x,new w({game:m})),x===n.UTILITY_PIPELINE&&(v.UTILITY_PIPELINE=T,v.fullFrame1=T.fullFrame1,v.fullFrame2=T.fullFrame2,v.halfFrame1=T.halfFrame1,v.halfFrame2=T.halfFrame2)}),this.MULTI_PIPELINE=this.get(n.MULTI_PIPELINE),this.BITMAPMASK_PIPELINE=this.get(n.BITMAPMASK_PIPELINE),f)for(p in f){var T,y=f[p];(T=new y(m)).isPostFX?this.postPipelineClasses.set(p,y):this.has(p)||(this.classes.set(p,y),this.add(p,T))}},add:function(f,p){if(!p.isPostFX){var v=this.pipelines,m=this.renderer;return v.has(f)?console.warn("Pipeline exists: "+f):(p.name=f,p.manager=this,v.set(f,p)),p.hasBooted||p.boot(),0!==m.width&&0!==m.height&&p.resize(m.width,m.height),p}console.warn(f+" is a Post Pipeline. Use `addPostPipeline` instead")},addPostPipeline:function(f,p){this.postPipelineClasses.has(f)||this.postPipelineClasses.set(f,p)},flush:function(){this.current&&this.current.flush()},has:function(f){var p=this.pipelines;return"string"==typeof f?p.has(f):!!p.contains(f)},get:function(f){var p=this.pipelines;return"string"==typeof f?p.get(f):p.contains(f)?f:void 0},getPostPipeline:function(f,p){var v,m=this.postPipelineClasses;if("string"==typeof f?v=m.get(f):"function"==typeof f?m.contains(f)&&(v=f):"object"==typeof f&&(v=m.get(f.name)),v){var T=new v(this.game);return p&&(T.gameObject=p),T}},remove:function(f,p,v){void 0===p&&(p=!0),void 0===v&&(v=!0),this.pipelines.delete(f),p&&this.classes.delete(f),v&&this.postPipelineClasses.delete(f)},set:function(f,p,v){if(!f.isPostFX)return this.isCurrent(f,v)||(this.flush(),this.current&&this.current.unbind(),(this.current=f).bind(v)),f.updateProjectionMatrix(),f.onBind(p),f},preBatch:function(f){if(f.hasPostPipeline){this.flush();for(var p=f.postPipelines,v=p.length-1;0<=v;v--){var m=p[v];m.active&&m.preBatch(f)}}},postBatch:function(f){if(f.hasPostPipeline){this.flush();for(var p=f.postPipelines,v=0;v<p.length;v++){var m=p[v];m.active&&m.postBatch(f)}}},preBatchCamera:function(f){if(f.hasPostPipeline){this.flush();for(var p=f.postPipelines,v=p.length-1;0<=v;v--){var m=p[v];m.active&&m.preBatch(f)}}},postBatchCamera:function(f){if(f.hasPostPipeline){this.flush();for(var p=f.postPipelines,v=0;v<p.length;v++){var m=p[v];m.active&&m.postBatch(f)}}},isCurrent:function(f,p){var m=this.current;return m&&!p&&(p=m.currentShader),!(m!==f||p.program!==this.renderer.currentProgram)},copyFrame:function(f,p,v,m,T){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyFrame(f,p,v,m,T),this},copyToGame:function(f){return this.setUtility(this.UTILITY_PIPELINE.copyShader).copyToGame(f),this},drawFrame:function(f,p,v,m){return this.setUtility(this.UTILITY_PIPELINE.colorMatrixShader).drawFrame(f,p,v,m),this},blendFrames:function(f,p,v,m,T){return this.setUtility(this.UTILITY_PIPELINE.linearShader).blendFrames(f,p,v,m,T),this},blendFramesAdditive:function(f,p,v,m,T){return this.setUtility(this.UTILITY_PIPELINE.addShader).blendFramesAdditive(f,p,v,m,T),this},clearFrame:function(f,p){return this.UTILITY_PIPELINE.clearFrame(f,p),this},blitFrame:function(f,p,v,m,T,y){return this.setUtility(this.UTILITY_PIPELINE.copyShader).blitFrame(f,p,v,m,T,y),this},copyFrameRect:function(f,p,v,m,T,y,x,w){return this.UTILITY_PIPELINE.copyFrameRect(f,p,v,m,T,y,x,w),this},forceZero:function(){return this.current&&this.current.forceZero},setMulti:function(){return this.set(this.MULTI_PIPELINE)},setUtility:function(f){return this.UTILITY_PIPELINE.bind(f)},rebind:function(f){void 0===f&&this.previous&&(f=this.previous);var p=this.renderer,v=p.gl;v.disable(v.DEPTH_TEST),v.disable(v.CULL_FACE),p.hasActiveStencilMask()?v.clear(v.DEPTH_BUFFER_BIT):(v.disable(v.STENCIL_TEST),v.clear(v.DEPTH_BUFFER_BIT|v.STENCIL_BUFFER_BIT)),v.viewport(0,0,p.width,p.height),p.currentProgram=null,p.setBlendMode(0,!0);var m=this.pipelines.entries;for(var T in m)m[T].glReset=!0;f&&(this.current=f).rebind(),p.resetTextures()},clear:function(){var f=this.renderer;this.flush(),this.current?(this.current.unbind(),this.previous=this.current,this.current=null):this.previous=null,f.currentProgram=null,f.setBlendMode(0,!0)},destroy:function(){this.flush(),this.classes.clear(),this.postPipelineClasses.clear(),this.pipelines.clear(),this.renderer=null,this.game=null,this.classes=null,this.postPipelineClasses=null,this.pipelines=null,this.current=null,this.previous=null}});g.exports=d},function(g,b,t){var h=t(0),n=t(2),s=t(866),l=t(867),e=t(107),r=t(58),o=new h({Extends:r,initialize:function(a){a.fragShader=n(a,"fragShader",s),a.vertShader=n(a,"vertShader",l),a.batchSize=n(a,"batchSize",1),a.vertices=n(a,"vertices",[-1,1,-1,-7,7,1]),a.attributes=n(a,"attributes",[{name:"inPosition",size:2,type:e.FLOAT}]),r.call(this,a)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0),this.set1i("uMaskSampler",1)},resize:function(a,i){r.prototype.resize.call(this,a,i),this.set2f("uResolution",a,i)},beginMask:function(a,i,u){var c,d=this.gl;a.bitmapMask&&d&&((c=this.renderer).flush(),c.pushFramebuffer(a.mainFramebuffer),d.disable(d.STENCIL_TEST),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),c.currentCameraMask.mask!==a&&(c.currentMask.mask=a,c.currentMask.camera=u))},endMask:function(a,i){var u,c=this.gl,d=this.renderer,f=a.bitmapMask;f&&c&&(d.flush(),d.pushFramebuffer(a.maskFramebuffer),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),d.setBlendMode(0,!0),f.renderWebGL(d,f,i),d.flush(),d.popFramebuffer(),d.popFramebuffer(),(u=d.getCurrentStencilMask())?(c.enable(c.STENCIL_TEST),u.mask.applyStencil(d,u.camera,!0)):d.currentMask.mask=null,d.pipelines.set(this),c.activeTexture(c.TEXTURE1),c.bindTexture(c.TEXTURE_2D,a.maskTexture),c.activeTexture(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,a.mainTexture),this.set1i("uInvertMaskAlpha",a.invertAlpha),c.drawArrays(this.topology,0,3),d.resetTextures())}});g.exports=o},function(g,b,t){g.exports={AFTER_FLUSH:t(868),BEFORE_FLUSH:t(869),BIND:t(870),BOOT:t(871),DESTROY:t(872),REBIND:t(873),RESIZE:t(874)}},function(g,b,t){var h=t(0),n=t(2),s=t(107),l=new h({initialize:function(e,r,o,a,i){this.pipeline=e,this.name=r,this.renderer=e.renderer,this.gl=this.renderer.gl,this.program=this.renderer.createProgram(o,a),this.vertexComponentCount=0,this.vertexSize=0,this.uniforms={},this.createAttributes(i),this.createUniforms()},createAttributes:function(e){for(var r=0,o=0,a=[],i=this.vertexComponentCount=0;i<e.length;i++){var u=e[i],c=u.name,d=n(u,"size",1),f=n(u,"type",s.FLOAT),v=f.size;a.push({name:c,size:d,type:f.enum,normalized:!!u.normalized,offset:o,enabled:!1,location:-1}),4===v?r+=d:r++,o+=d*v}this.vertexSize=o,this.vertexComponentCount=r,this.attributes=a},bind:function(e,r){return void 0===e&&(e=!1),void 0===r&&(r=!1),r&&this.pipeline.flush(),this.renderer.setProgram(this.program),e&&this.setAttribPointers(),this},rebind:function(){return this.renderer.setProgram(this.program),this.setAttribPointers(!0),this},setAttribPointers:function(e){void 0===e&&(e=!1);for(var r=this.gl,o=this.vertexSize,a=this.attributes,i=this.program,u=0;u<a.length;u++){var c,d=a[u],f=d.size,p=d.type,v=d.offset,m=d.enabled,T=d.location,y=!!d.normalized;e?0<=(c=r.getAttribLocation(i,d.name))?(r.enableVertexAttribArray(c),r.vertexAttribPointer(c,f,p,y,o,v),d.enabled=!0,d.location=c):-1!==c&&r.disableVertexAttribArray(c):m?r.vertexAttribPointer(T,f,p,y,o,v):!m&&-1<T&&(r.disableVertexAttribArray(T),d.location=-1)}return this},createUniforms:function(){for(var e,r,o=this.gl,a=this.program,i=this.uniforms,u=o.getProgramParameter(a,o.ACTIVE_UNIFORMS),c=0;c<u;c++){var d,f=o.getActiveUniform(a,c);f&&(null!==(r=o.getUniformLocation(a,e=f.name))&&(i[e]={name:e,location:r,value1:null,value2:null,value3:null,value4:null}),0<(d=e.indexOf("["))&&(e=e.substr(0,d),i.hasOwnProperty(e)||null!==(r=o.getUniformLocation(a,e))&&(i[e]={name:e,location:r,value1:null,value2:null,value3:null,value4:null})))}return this},hasUniform:function(e){return this.uniforms.hasOwnProperty(e)},resetUniform:function(e){var r=this.uniforms[e];return r&&(r.value1=null,r.value2=null,r.value3=null,r.value4=null),this},setUniform1:function(e,r,o,a){var i=this.uniforms[r];return i&&(!a&&i.value1===o||(i.value1=o,this.renderer.setProgram(this.program),e.call(this.gl,i.location,o),this.pipeline.currentShader=this)),this},setUniform2:function(e,r,o,a,i){var u=this.uniforms[r];return u&&(!i&&u.value1===o&&u.value2===a||(u.value1=o,u.value2=a,this.renderer.setProgram(this.program),e.call(this.gl,u.location,o,a),this.pipeline.currentShader=this)),this},setUniform3:function(e,r,o,a,i,u){var c=this.uniforms[r];return c&&(!u&&c.value1===o&&c.value2===a&&c.value3===i||(c.value1=o,c.value2=a,c.value3=i,this.renderer.setProgram(this.program),e.call(this.gl,c.location,o,a,i),this.pipeline.currentShader=this)),this},setUniform4:function(e,r,o,a,i,u,c){var d=this.uniforms[r];return d&&(!c&&d.value1===o&&d.value2===a&&d.value3===i&&d.value4===u||(d.value1=o,d.value2=a,d.value3=i,d.value4=u,this.renderer.setProgram(this.program),e.call(this.gl,d.location,o,a,i,u),this.pipeline.currentShader=this)),this},set1f:function(e,r){return this.setUniform1(this.gl.uniform1f,e,r)},set2f:function(e,r,o){return this.setUniform2(this.gl.uniform2f,e,r,o)},set3f:function(e,r,o,a){return this.setUniform3(this.gl.uniform3f,e,r,o,a)},set4f:function(e,r,o,a,i){return this.setUniform4(this.gl.uniform4f,e,r,o,a,i)},set1fv:function(e,r){return this.setUniform1(this.gl.uniform1fv,e,r,!0)},set2fv:function(e,r){return this.setUniform1(this.gl.uniform2fv,e,r,!0)},set3fv:function(e,r){return this.setUniform1(this.gl.uniform3fv,e,r,!0)},set4fv:function(e,r){return this.setUniform1(this.gl.uniform4fv,e,r,!0)},set1iv:function(e,r){return this.setUniform1(this.gl.uniform1iv,e,r,!0)},set2iv:function(e,r){return this.setUniform1(this.gl.uniform2iv,e,r,!0)},set3iv:function(e,r){return this.setUniform1(this.gl.uniform3iv,e,r,!0)},set4iv:function(e,r){return this.setUniform1(this.gl.uniform4iv,e,r,!0)},set1i:function(e,r){return this.setUniform1(this.gl.uniform1i,e,r)},set2i:function(e,r,o){return this.setUniform2(this.gl.uniform2i,e,r,o)},set3i:function(e,r,o,a){return this.setUniform3(this.gl.uniform3i,e,r,o,a)},set4i:function(e,r,o,a,i){return this.setUniform4(this.gl.uniform4i,e,r,o,a,i)},setMatrix2fv:function(e,r,o){return this.setUniform2(this.gl.uniformMatrix2fv,e,r,o,!0)},setMatrix3fv:function(e,r,o){return this.setUniform2(this.gl.uniformMatrix3fv,e,r,o,!0)},setMatrix4fv:function(e,r,o){return this.setUniform2(this.gl.uniformMatrix4fv,e,r,o,!0)},destroy:function(){this.gl.deleteProgram(this.program),this.pipeline=null,this.renderer=null,this.gl=null,this.program=null,this.attributes=null,this.uniforms=null}});g.exports=l},function(g,b,t){var h=t(0),n=t(59),s=t(2),l=t(875),e=t(876),r=t(25),o=t(107),a=t(58),i=new h({Extends:a,initialize:function(u){u.fragShader=s(u,"fragShader",l),u.vertShader=s(u,"vertShader",e),u.attributes=s(u,"attributes",[{name:"inPosition",size:2},{name:"inColor",size:4,type:o.UNSIGNED_BYTE,normalized:!0}]),a.call(this,u),this.calcMatrix=new r,this.tempTriangle=[{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0},{x:0,y:0,width:0}],this.strokeTint={TL:0,TR:0,BL:0,BR:0},this.fillTint={TL:0,TR:0,BL:0,BR:0},this.currentFrame={u0:0,v0:0,u1:1,v1:1},this.firstQuad=[0,0,0,0,0],this.prevQuad=[0,0,0,0,0],this.polygonCache=[]},batchFillRect:function(u,c,d,f,p,v){this.renderer.pipelines.set(this);var m=this.calcMatrix;v&&v.multiply(p,m);var T=u+d,y=c+f,x=m.getX(u,c),w=m.getY(u,c),E=m.getX(u,y),S=m.getY(u,y),A=m.getX(T,y),_=m.getY(T,y),C=m.getX(T,c),M=m.getY(T,c),P=this.fillTint;this.batchQuad(x,w,E,S,A,_,C,M,P.TL,P.TR,P.BL,P.BR)},batchFillTriangle:function(u,c,d,f,p,v,m,T){this.renderer.pipelines.set(this);var y=this.calcMatrix;T&&T.multiply(m,y);var x=y.getX(u,c),w=y.getY(u,c),E=y.getX(d,f),S=y.getY(d,f),A=y.getX(p,v),_=y.getY(p,v),C=this.fillTint;this.batchTri(x,w,E,S,A,_,C.TL,C.TR,C.BL)},batchStrokeTriangle:function(u,c,d,f,p,v,m,T,y){var x=this.tempTriangle;x[0].x=u,x[0].y=c,x[0].width=m,x[1].x=d,x[1].y=f,x[1].width=m,x[2].x=p,x[2].y=v,x[2].width=m,x[3].x=u,x[3].y=c,x[3].width=m,this.batchStrokePath(x,m,!1,T,y)},batchFillPath:function(u,c,d){this.renderer.pipelines.set(this);var f=this.calcMatrix;d&&d.multiply(c,f);for(var p,v,m=u.length,T=this.polygonCache,y=this.fillTint.TL,x=this.fillTint.TR,w=this.fillTint.BL,E=0;E<m;++E)T.push((v=u[E]).x,v.y);m=(p=n(T)).length;for(var S=0;S<m;S+=3){var A=2*p[S+0],_=2*p[S+1],C=2*p[S+2],M=T[0+A],P=T[1+A],L=T[0+_],D=T[1+_],F=T[0+C],X=T[1+C],R=f.getX(M,P),O=f.getY(M,P),N=f.getX(L,D),k=f.getY(L,D),I=f.getX(F,X),B=f.getY(F,X);this.batchTri(R,O,N,k,I,B,y,x,w)}T.length=0},batchStrokePath:function(u,c,d,f,p){this.renderer.pipelines.set(this),this.prevQuad[4]=0,this.firstQuad[4]=0;for(var v=u.length-1,m=0;m<v;m++){var T=u[m],y=u[m+1];this.batchLine(T.x,T.y,y.x,y.y,T.width/2,y.width/2,c,m,!d&&m===v-1,f,p)}},batchLine:function(u,c,d,f,p,v,m,T,y,x,w){this.renderer.pipelines.set(this);var E=this.calcMatrix;w&&w.multiply(x,E);var S,A,_=d-u,C=f-c,M=Math.sqrt(_*_+C*C),P=p*(f-c)/M,L=p*(u-d)/M,D=v*(f-c)/M,F=v*(u-d)/M,X=d-D,R=f-F,O=u-P,N=c-L,k=d+D,I=f+F,B=u+P,Y=c+L,U=E.getX(X,R),G=E.getY(X,R),W=E.getX(O,N),z=E.getY(O,N),V=E.getX(k,I),H=E.getY(k,I),j=E.getX(B,Y),q=E.getY(B,Y),Q=this.strokeTint,Z=Q.TL,J=Q.TR,K=Q.BL,tt=Q.BR;this.batchQuad(j,q,W,z,U,G,V,H,Z,J,K,tt),m<=2||(S=this.prevQuad,A=this.firstQuad,0<T&&S[4]?this.batchQuad(j,q,W,z,S[0],S[1],S[2],S[3],Z,J,K,tt):(A[0]=j,A[1]=q,A[2]=W,A[3]=z,A[4]=1),y&&A[4]?this.batchQuad(U,G,V,H,A[0],A[1],A[2],A[3],Z,J,K,tt):(S[0]=U,S[1]=G,S[2]=V,S[3]=H,S[4]=1))},batchVert:function(u,c,d){var f=this.vertexViewF32,p=this.vertexViewU32,v=this.vertexCount*this.currentShader.vertexComponentCount-1;f[++v]=u,f[++v]=c,p[++v]=d,this.vertexCount++},batchQuad:function(u,c,d,f,p,v,m,T,y,x,w,E){var S=!1;return this.shouldFlush(6)&&(this.flush(),S=!0),this.batchVert(u,c,y),this.batchVert(d,f,w),this.batchVert(p,v,E),this.batchVert(u,c,y),this.batchVert(p,v,E),this.batchVert(m,T,x),S},batchTri:function(u,c,d,f,p,v,m,T,y){var x=!1;return this.shouldFlush(3)&&(this.flush(),x=!0),this.batchVert(u,c,m),this.batchVert(d,f,T),this.batchVert(p,v,y),x},destroy:function(){return a.prototype.destroy.call(this),this.polygonCache=null,this}});g.exports=i},function(g,b,t){var h=t(0),n=t(2),s=t(877),l=t(108),e=t(3),r=t(58),o=10,a=new e,i=new h({Extends:l,initialize:function(u){o=u.game.renderer.config.maxLights;for(var c=n(u,"fragShader",s),d=[],f=1;f<=o;f++)d.push({name:"lights"+f,fragShader:c.replace("%LIGHT_COUNT%",f.toString())});u.shaders=d,l.call(this,u),this.inverseRotationMatrix=new Float32Array([1,0,0,0,1,0,0,0,1]),this.lightsActive=!0},boot:function(){r.prototype.boot.call(this);var u=this.gl,c=u.createTexture();u.activeTexture(u.TEXTURE0),u.bindTexture(u.TEXTURE_2D,c),u.texImage2D(u.TEXTURE_2D,0,u.RGBA,1,1,0,u.RGBA,u.UNSIGNED_BYTE,new Uint8Array([127,127,255,255])),this.defaultNormalMap={glTexture:c};for(var d=0;d<this.shaders.length;d++)this["lightShader"+(d+1)]=this.shaders[d]},onRender:function(u,c){var d=u.sys.lights;if(this.lightsActive=!1,d&&d.active){var f,p=d.getLights(c),v=p.length;if(0!==v){this.lightsActive=!0,this.setShader(this["lightShader"+v],!0);var m=this.renderer.height,T=c.matrix;for(this.set1i("uMainSampler",0),this.set1i("uNormSampler",1),this.set2f("uResolution",this.width/2,this.height/2),this.set4f("uCamera",c.x,c.y,c.rotation,c.zoom),this.set3f("uAmbientLightColor",d.ambientColor.r,d.ambientColor.g,d.ambientColor.b),f=0;f<v;f++){var y=p[f].light,x=y.color,w="uLights["+f+"].";T.transformPoint(y.x,y.y,a),this.set2f(w+"position",a.x-c.scrollX*y.scrollFactorX*c.zoom,m-(a.y-c.scrollY*y.scrollFactorY*c.zoom)),this.set3f(w+"color",x.r,x.g,x.b),this.set1f(w+"intensity",y.intensity),this.set1f(w+"radius",y.radius)}this.currentNormalMapRotation=null}}},setNormalMapRotation:function(u){var c,d,f,p;u===this.currentNormalMapRotation&&0!==this.vertexCount||(0<this.vertexCount&&this.flush(),c=this.inverseRotationMatrix,u?(d=-u,f=Math.cos(d),p=Math.sin(d),c[1]=p,c[3]=-p,c[0]=c[4]=f):(c[0]=c[4]=1,c[1]=c[3]=0),this.setMatrix3fv("uInverseRotationMatrix",!1,c),this.currentNormalMapRotation=u)},setTexture2D:function(u,c){var d=this.renderer;void 0===u&&(u=d.tempTextures[0]);var f=this.getNormalMap(c);return d.isNewNormalMap(u,f)&&(this.flush(),d.setTextureZero(u),d.setNormalMap(f)),this.setNormalMapRotation(c?c.rotation:0),this.currentUnit=0},setGameObject:function(u,c){void 0===c&&(c=u.frame);var d=this.renderer,f=c.glTexture,p=this.getNormalMap(u);return d.isNewNormalMap()&&(this.flush(),d.setTextureZero(f),d.setNormalMap(p)),this.setNormalMapRotation(u.rotation),this.currentUnit=0},getNormalMap:function(u){var c;return u?u.displayTexture?c=u.displayTexture.dataSource[u.displayFrame.sourceIndex]:u.texture?c=u.texture.dataSource[u.frame.sourceIndex]:u.tileset&&(c=Array.isArray(u.tileset)?u.tileset[0].image.dataSource[0]:u.tileset.image.dataSource[0]):c=this.defaultNormalMap,(c=c||this.defaultNormalMap).glTexture},batchSprite:function(u,c,d){this.lightsActive&&l.prototype.batchSprite.call(this,u,c,d)},batchTexture:function(u,c,d,f,p,v,m,T,y,x,w,E,S,A,_,C,M,P,L,D,F,X,R,O,N,k,I,B,Y,U,G,W){this.lightsActive&&l.prototype.batchTexture.call(this,u,c,d,f,p,v,m,T,y,x,w,E,S,A,_,C,M,P,L,D,F,X,R,O,N,k,I,B,Y,U,G,W)},batchTextureFrame:function(u,c,d,f,p,v,m){this.lightsActive&&l.prototype.batchTextureFrame.call(this,u,c,d,f,p,v,m)}});i.LIGHT_COUNT=o,g.exports=i},function(g,b,t){var h=t(0),n=t(2),s=t(880),l=t(881),e=t(58),r=new h({Extends:e,initialize:function(o){o.vertShader=n(o,"vertShader",l),o.fragShader=n(o,"fragShader",s),o.attributes=n(o,"attributes",[{name:"inPosition",size:2},{name:"inLightPosition",size:2},{name:"inLightRadius"},{name:"inLightAttenuation"},{name:"inLightColor",size:4}]),e.call(this,o)},onRender:function(o,a){this.set2f("uResolution",this.width,this.height),this.set1f("uCameraZoom",a.zoom)},batchPointLight:function(o,a,i,u,c,d,f,p,v,m,T,y){var x=o.color,w=o.intensity,E=o.radius,S=o.attenuation,A=x.r*w,_=x.g*w,C=x.b*w,M=a.alpha*o.alpha;this.shouldFlush(6)&&this.flush(),this.batchLightVert(i,u,T,y,E,S,A,_,C,M),this.batchLightVert(c,d,T,y,E,S,A,_,C,M),this.batchLightVert(f,p,T,y,E,S,A,_,C,M),this.batchLightVert(i,u,T,y,E,S,A,_,C,M),this.batchLightVert(f,p,T,y,E,S,A,_,C,M),this.batchLightVert(v,m,T,y,E,S,A,_,C,M)},batchLightVert:function(o,a,i,u,c,d,f,p,v,m){var T=this.vertexViewF32,y=this.vertexCount*this.currentShader.vertexComponentCount-1;T[++y]=o,T[++y]=a,T[++y]=i,T[++y]=u,T[++y]=c,T[++y]=d,T[++y]=f,T[++y]=p,T[++y]=v,T[++y]=m,this.vertexCount++}});g.exports=r},function(g,b,t){var h=t(0),n=t(2),s=t(108),l=new h({Extends:s,initialize:function(e){e.topology=5,e.batchSize=n(e,"batchSize",256),s.call(this,e)}});g.exports=l},function(g,b,t){var h=t(0),n=t(2),s=t(108),l=t(882),e=t(883),r=t(58),o=new h({Extends:s,initialize:function(a){a.fragShader=n(a,"fragShader",l),a.vertShader=n(a,"vertShader",e),a.forceZero=!0,s.call(this,a)},boot:function(){r.prototype.boot.call(this),this.set1i("uMainSampler",0)}});g.exports=o},function(g,b,t){var h=t(884),n=t(35),s=t(0),l=t(198),e=t(885),r=t(886),o=t(2),a=t(887),i=t(382),u=t(58),c=new s({Extends:u,initialize:function(d){d.renderTarget=o(d,"renderTarget",[{scale:1},{scale:1},{scale:.5},{scale:.5}]),d.vertShader=o(d,"vertShader",i),d.shaders=o(d,"shaders",[{name:"Copy",fragShader:r},{name:"AddBlend",fragShader:h},{name:"LinearBlend",fragShader:a},{name:"ColorMatrix",fragShader:e}]),d.attributes=o(d,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),d.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],d.batchSize=1,u.call(this,d),this.colorMatrix=new l},boot:function(){u.prototype.boot.call(this);var d=this.shaders,f=this.renderTargets;this.copyShader=d[0],this.addShader=d[1],this.linearShader=d[2],this.colorMatrixShader=d[3],this.fullFrame1=f[0],this.fullFrame2=f[1],this.halfFrame1=f[2],this.halfFrame2=f[3]},copyFrame:function(d,f,p,v,m){void 0===p&&(p=1),void 0===v&&(v=!0),void 0===m&&(m=!0);var T=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),T.activeTexture(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,d.texture),f?(T.viewport(0,0,f.width,f.height),T.bindFramebuffer(T.FRAMEBUFFER,f.framebuffer),T.framebufferTexture2D(T.FRAMEBUFFER,T.COLOR_ATTACHMENT0,T.TEXTURE_2D,f.texture,0)):T.viewport(0,0,d.width,d.height),v&&(T.clearColor(0,0,0,m?0:1),T.clear(T.COLOR_BUFFER_BIT)),T.bufferData(T.ARRAY_BUFFER,this.vertexData,T.STATIC_DRAW),T.drawArrays(T.TRIANGLES,0,6),T.bindFramebuffer(T.FRAMEBUFFER,null),T.bindTexture(T.TEXTURE_2D,null)},blitFrame:function(d,f,p,v,m,T){void 0===p&&(p=1),void 0===v&&(v=!0),void 0===m&&(m=!0),void 0===T&&(T=!1);var x,w=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",p),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,d.texture),d.height>f.height?(w.viewport(0,0,d.width,d.height),this.setTargetUVs(d,f)):w.viewport(0,f.height-d.height,d.width,d.height),w.bindFramebuffer(w.FRAMEBUFFER,f.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,f.texture,0),v&&(w.clearColor(0,0,0,m?0:1),w.clear(w.COLOR_BUFFER_BIT)),T&&(x=this.renderer.currentBlendMode,this.renderer.setBlendMode(n.ERASE)),w.bufferData(w.ARRAY_BUFFER,this.vertexData,w.STATIC_DRAW),w.drawArrays(w.TRIANGLES,0,6),T&&this.renderer.setBlendMode(x),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null),this.resetUVs()},copyFrameRect:function(d,f,p,v,m,T,y,x){void 0===y&&(y=!0),void 0===x&&(x=!0);var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,d.framebuffer),w.framebufferTexture2D(w.FRAMEBUFFER,w.COLOR_ATTACHMENT0,w.TEXTURE_2D,d.texture,0),y&&(w.clearColor(0,0,0,x?0:1),w.clear(w.COLOR_BUFFER_BIT)),w.activeTexture(w.TEXTURE0),w.bindTexture(w.TEXTURE_2D,f.texture),w.copyTexSubImage2D(w.TEXTURE_2D,0,0,0,p,v,m,T),w.bindFramebuffer(w.FRAMEBUFFER,null),w.bindTexture(w.TEXTURE_2D,null)},copyToGame:function(d){var f=this.gl;this.setShader(this.copyShader),this.set1i("uMainSampler",0),this.set1f("uBrightness",1),this.renderer.popFramebuffer(),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,d.texture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),this.renderer.resetTextures()},drawFrame:function(d,f,p,v){void 0===p&&(p=!0),void 0===v&&(v=this.colorMatrix);var m=this.gl;this.setShader(this.colorMatrixShader),this.set1i("uMainSampler",0),this.set1fv("uColorMatrix",v.getData()),this.set1f("uAlpha",v.alpha),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,d.texture),f?(m.viewport(0,0,f.width,f.height),m.bindFramebuffer(m.FRAMEBUFFER,f.framebuffer),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,f.texture,0)):m.viewport(0,0,d.width,d.height),m.clearColor(0,0,0,p?0:1),m.clear(m.COLOR_BUFFER_BIT),m.bufferData(m.ARRAY_BUFFER,this.vertexData,m.STATIC_DRAW),m.drawArrays(m.TRIANGLES,0,6),m.bindFramebuffer(m.FRAMEBUFFER,null),m.bindTexture(m.TEXTURE_2D,null)},blendFrames:function(d,f,p,v,m,T){void 0===v&&(v=1),void 0===m&&(m=!0),void 0===T&&(T=this.linearShader);var y=this.gl;this.setShader(T),this.set1i("uMainSampler1",0),this.set1i("uMainSampler2",1),this.set1f("uStrength",v),y.activeTexture(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,d.texture),y.activeTexture(y.TEXTURE1),y.bindTexture(y.TEXTURE_2D,f.texture),p?(y.bindFramebuffer(y.FRAMEBUFFER,p.framebuffer),y.framebufferTexture2D(y.FRAMEBUFFER,y.COLOR_ATTACHMENT0,y.TEXTURE_2D,p.texture,0),y.viewport(0,0,p.width,p.height)):y.viewport(0,0,d.width,d.height),y.clearColor(0,0,0,m?0:1),y.clear(y.COLOR_BUFFER_BIT),y.bufferData(y.ARRAY_BUFFER,this.vertexData,y.STATIC_DRAW),y.drawArrays(y.TRIANGLES,0,6),y.bindFramebuffer(y.FRAMEBUFFER,null),y.bindTexture(y.TEXTURE_2D,null)},blendFramesAdditive:function(d,f,p,v,m){this.blendFrames(d,f,p,v,m,this.addShader)},clearFrame:function(d,f){void 0===f&&(f=!0);var p=this.gl;p.viewport(0,0,d.width,d.height),p.bindFramebuffer(p.FRAMEBUFFER,d.framebuffer),p.clearColor(0,0,0,f?0:1),p.clear(p.COLOR_BUFFER_BIT),p.bindFramebuffer(p.FRAMEBUFFER,this.renderer.currentFramebuffer)},setUVs:function(d,f,p,v,m,T,y,x){var w=this.vertexViewF32;w[2]=d,w[3]=f,w[6]=p,w[7]=v,w[10]=m,w[11]=T,w[14]=d,w[15]=f,w[18]=m,w[19]=T,w[22]=y,w[23]=x},setTargetUVs:function(d,f){var p=.5<(p=f.height/d.height)?.5-(p-.5):.5-p+.5;this.setUVs(0,p,0,1+p,1,1+p,1,p)},flipX:function(){this.setUVs(1,0,1,1,0,1,0,0)},flipY:function(){this.setUVs(0,1,0,0,1,0,1,1)},resetUVs:function(){this.setUVs(0,0,0,1,1,1,1,0)}});g.exports=c},function(g,b){g.exports=["#define SHADER_NAME PHASER_QUAD_VS","","precision mediump float;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","","varying vec2 outFragCoord;","varying vec2 outTexCoord;","","void main ()","{","    outFragCoord = inPosition.xy * 0.5 + 0.5;","    outTexCoord = inTexCoord;","","    gl_Position = vec4(inPosition, 0, 1);","}",""].join("\n")},function(g,b,t){var h=t(31),n=t(38),s=t(2);g.exports=function(l,e){var r=l.getContext("experimental-webgl"),o=s(e,"callback"),a=s(e,"type","image/png"),i=s(e,"encoder",.92),u=s(e,"x",0),c=s(e,"y",0),d=s(e,"getPixel",!1),f=s(e,"isFramebuffer",!1),p=f?s(e,"bufferWidth",1):r.drawingBufferWidth,v=f?s(e,"bufferHeight",1):r.drawingBufferHeight;if(d){var m=new Uint8Array(4);r.readPixels(u,f?c:v-c,1,1,r.RGBA,r.UNSIGNED_BYTE,m),o.call(null,new n(m[0],m[1],m[2],m[3]/255))}else{var y=s(e,"width",p),x=s(e,"height",v),w=new Uint8Array(y*x*4);r.readPixels(u,v-c-x,y,x,r.RGBA,r.UNSIGNED_BYTE,w);for(var E=h.createWebGL(this,y,x),S=E.getContext("2d"),A=S.getImageData(0,0,y,x),_=A.data,C=0;C<x;C++)for(var M=0;M<y;M++){var P=4*((x-C-1)*y+M),L=4*(C*y+M);_[0+L]=w[0+P],_[1+L]=w[1+P],_[2+L]=w[2+P],_[3+L]=w[3+P]}S.putImageData(A,0,0);var D=new Image;D.onerror=function(){o.call(null),h.remove(E)},D.onload=function(){o.call(null,D),h.remove(E)},D.src=E.toDataURL(a,i)}}},function(g,b,t){var h=t(33);g.exports=function(n){var s,l,e,r,o,a,i,u=n.config;u.hideBanner||(s="WebGL",u.renderType===h.CANVAS?s="Canvas":u.renderType===h.HEADLESS&&(s="Headless"),l=u.audio,i=(e=n.device.audio).webAudio&&!l.disableWebAudio?"Web Audio":l.noAudio||!e.webAudio&&!e.audioData?"No Audio":"HTML5 Audio",n.device.browser.ie?window.console&&console.log("Phaser v"+h.VERSION+" / https://phaser.io"):(o=[r=""],Array.isArray(u.bannerBackgroundColor)?(u.bannerBackgroundColor.forEach(function(c){r=r.concat("%c "),o.push("background: "+c),a=c}),o[o.length-1]="color: "+u.bannerTextColor+"; background: "+a):(r=r.concat("%c "),o.push("color: "+u.bannerTextColor+"; background: "+u.bannerBackgroundColor)),o.push("background: transparent"),u.gameTitle&&(r=r.concat(u.gameTitle),u.gameVersion&&(r=r.concat(" v"+u.gameVersion)),u.hidePhaser||(r=r.concat(" / "))),u.hidePhaser||(r=r.concat("Phaser v"+h.VERSION+" ("+s+" | "+i+")")),r=r.concat(" %c "+u.gameURL),o[0]=r,console.log.apply(console,o)))}},function(g,b,t){var h=t(0),n=t(6),s=t(1),l=t(386),e=new h({initialize:function(r,o){this.game=r,this.raf=new l,this.started=!1,this.running=!1,this.minFps=n(o,"min",5),this.targetFps=n(o,"target",60),this._min=1e3/this.minFps,this._target=1e3/this.targetFps,this.actualFps=this.targetFps,this.nextFpsUpdate=0,this.framesThisSecond=0,this.callback=s,this.forceSetTimeOut=n(o,"forceSetTimeOut",!1),this.time=0,this.startTime=0,this.lastTime=0,this.frame=0,this.inFocus=!0,this._pauseTime=0,this._coolDown=0,this.delta=0,this.deltaIndex=0,this.deltaHistory=[],this.deltaSmoothingMax=n(o,"deltaHistory",10),this.panicMax=n(o,"panicMax",120),this.rawDelta=0,this.now=0,this.smoothStep=n(o,"smoothStep",!0)},blur:function(){this.inFocus=!1},focus:function(){this.inFocus=!0,this.resetDelta()},pause:function(){this._pauseTime=window.performance.now()},resume:function(){this.resetDelta(),this.startTime+=this.time-this._pauseTime},resetDelta:function(){var r=window.performance.now();this.time=r,this.lastTime=r,this.nextFpsUpdate=r+1e3;for(var o=this.framesThisSecond=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=Math.min(this._target,this.deltaHistory[o]);this.delta=0,this.deltaIndex=0,this._coolDown=this.panicMax},start:function(r){if(this.started)return this;this.started=!0,this.running=!0;for(var o=0;o<this.deltaSmoothingMax;o++)this.deltaHistory[o]=this._target;this.resetDelta(),this.startTime=window.performance.now(),this.callback=r,this.raf.start(this.step.bind(this),this.forceSetTimeOut,this._target)},step:function(){var r=window.performance.now(),o=(this.now=r)-this.lastTime;o<0&&(o=0),this.rawDelta=o;var a=this.deltaIndex,i=this.deltaHistory,u=this.deltaSmoothingMax,c=o,d=o;if(this.smoothStep){(0<this._coolDown||!this.inFocus)&&(this._coolDown--,c=Math.min(c,this._target)),c>this._min&&(c=i[a],c=Math.min(c,this._min)),i[a]=c,this.deltaIndex++,this.deltaIndex>u&&(this.deltaIndex=0);for(var f=d=0;f<u;f++)d+=i[f];d/=u}this.delta=d,this.time+=this.rawDelta,r>this.nextFpsUpdate&&(this.actualFps=.25*this.framesThisSecond+.75*this.actualFps,this.nextFpsUpdate=r+1e3,this.framesThisSecond=0),this.framesThisSecond++,this.callback(r,d,d/this._target),this.lastTime=r,this.frame++},tick:function(){this.step()},sleep:function(){this.running&&(this.raf.stop(),this.running=!1)},wake:function(r){this.running||(r&&(this.startTime+=-this.lastTime+(this.lastTime+window.performance.now())),this.raf.start(this.step.bind(this),this.useRAF),this.running=!0,this.step())},getDuration:function(){return Math.round(this.lastTime-this.startTime)/1e3},getDurationMS:function(){return Math.round(this.lastTime-this.startTime)},stop:function(){return this.running=!1,this.started=!1,this.raf.stop(),this},destroy:function(){this.stop(),this.callback=s,this.raf=null,this.game=null}});g.exports=e},function(g,b,t){var h=t(0),n=t(1),s=new h({initialize:function(){this.isRunning=!1,this.callback=n,this.tick=0,this.isSetTimeOut=!1,this.timeOutID=null,this.lastTime=0,this.target=0;var l=this;this.step=function e(){var r=window.performance.now();l.lastTime=l.tick,l.tick=r,l.callback(r),l.timeOutID=window.requestAnimationFrame(e)},this.stepTimeout=function e(){var r=Date.now(),o=Math.min(Math.max(2*l.target+l.tick-r,0),l.target);l.lastTime=l.tick,l.tick=r,l.callback(r),l.timeOutID=window.setTimeout(e,o)}},start:function(l,e,r){this.isRunning||(this.callback=l,this.isSetTimeOut=e,this.target=r,this.isRunning=!0,this.timeOutID=e?window.setTimeout(this.stepTimeout,0):window.requestAnimationFrame(this.step))},stop:function(){this.isRunning=!1,this.isSetTimeOut?clearTimeout(this.timeOutID):window.cancelAnimationFrame(this.timeOutID)},destroy:function(){this.stop(),this.callback=n}});g.exports=s},function(g,b,t){var h=t(22);g.exports=function(n){var s,l=n.events;void 0!==document.hidden?s="visibilitychange":["webkit","moz","ms"].forEach(function(e){void 0!==document[e+"Hidden"]&&(document.hidden=function(){return document[e+"Hidden"]},s=e+"visibilitychange")}),s&&document.addEventListener(s,function(e){document.hidden||"pause"===e.type?l.emit(h.HIDDEN):l.emit(h.VISIBLE)},!1),window.onblur=function(){l.emit(h.BLUR)},window.onfocus=function(){l.emit(h.FOCUS)},window.focus&&n.config.autoFocus&&window.focus()}},function(g,b,t){var h=t(389),n=t(31),s=t(6);g.exports=function(l){var e=s(l,"data",[]),r=s(l,"canvas",null),o=s(l,"palette",h),a=s(l,"pixelWidth",1),i=s(l,"pixelHeight",a),u=s(l,"resizeCanvas",!0),c=s(l,"clearCanvas",!0),d=s(l,"preRender",null),f=s(l,"postRender",null),p=Math.floor(Math.abs(e[0].length*a)),v=Math.floor(Math.abs(e.length*i));r||(r=n.create2D(this,p,v),c=u=!1),u&&(r.width=p,r.height=v);var m=r.getContext("2d");c&&m.clearRect(0,0,p,v),d&&d(r,m);for(var T=0;T<e.length;T++)for(var y=e[T],x=0;x<y.length;x++){var w=y[x];"."!==w&&" "!==w&&(m.fillStyle=o[w],m.fillRect(x*a,T*i,a,i))}return f&&f(r,m),r}},function(g,b){g.exports={0:"#000",1:"#9D9D9D",2:"#FFF",3:"#BE2633",4:"#E06F8B",5:"#493C2B",6:"#A46422",7:"#EB8931",8:"#F7E26B",9:"#2F484E",A:"#44891A",B:"#A3CE27",C:"#1B2632",D:"#005784",E:"#31A2F2",F:"#B2DCEF"}},function(g,b,t){var h=t(0),n=t(358),s=t(94),l=t(3),e=new h({Extends:s,initialize:function(r,o,a,i){s.call(this,"CubicBezierCurve"),Array.isArray(r)&&(i=new l(r[6],r[7]),a=new l(r[4],r[5]),o=new l(r[2],r[3]),r=new l(r[0],r[1])),this.p0=r,this.p1=o,this.p2=a,this.p3=i},getStartPoint:function(r){return void 0===r&&(r=new l),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,o){void 0===o&&(o=new l);var a=this.p0,i=this.p1,u=this.p2,c=this.p3;return o.set(n(r,a.x,i.x,u.x,c.x),n(r,a.y,i.y,u.y,c.y))},draw:function(r,o){void 0===o&&(o=32);var a=this.getPoints(o);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var i=1;i<a.length;i++)r.lineTo(a[i].x,a[i].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y,this.p3.x,this.p3.y]}}});e.fromJSON=function(r){var o=r.points,a=new l(o[0],o[1]),i=new l(o[2],o[3]),u=new l(o[4],o[5]),c=new l(o[6],o[7]);return new e(a,i,u,c)},g.exports=e},function(g,b,t){var h=t(0),n=t(94),s=t(36),l=t(6),e=t(196),r=t(3),o=new h({Extends:n,initialize:function(a,i,u,c,d,f,p,v){var m;"object"==typeof a?(a=l(m=a,"x",0),i=l(m,"y",0),u=l(m,"xRadius",0),c=l(m,"yRadius",u),d=l(m,"startAngle",0),f=l(m,"endAngle",360),p=l(m,"clockwise",!1),v=l(m,"rotation",0)):(void 0===c&&(c=u),void 0===d&&(d=0),void 0===f&&(f=360),void 0===p&&(p=!1),void 0===v&&(v=0)),n.call(this,"EllipseCurve"),this.p0=new r(a,i),this._xRadius=u,this._yRadius=c,this._startAngle=s(d),this._endAngle=s(f),this._clockwise=p,this._rotation=s(v)},getStartPoint:function(a){return void 0===a&&(a=new r),this.getPoint(0,a)},getResolution:function(a){return 2*a},getPoint:function(a,i){void 0===i&&(i=new r);for(var u=2*Math.PI,c=this._endAngle-this._startAngle,d=Math.abs(c)<Number.EPSILON;c<0;)c+=u;for(;u<c;)c-=u;c<Number.EPSILON&&(c=d?0:u),this._clockwise&&!d&&(c===u?c=-u:c-=u);var f,p,v,m,T=this._startAngle+a*c,y=this.p0.x+this._xRadius*Math.cos(T),x=this.p0.y+this._yRadius*Math.sin(T);return 0!==this._rotation&&(f=Math.cos(this._rotation),p=Math.sin(this._rotation),y=(v=y-this.p0.x)*f-(m=x-this.p0.y)*p+this.p0.x,x=v*p+m*f+this.p0.y),i.set(y,x)},setXRadius:function(a){return this.xRadius=a,this},setYRadius:function(a){return this.yRadius=a,this},setWidth:function(a){return this.xRadius=a/2,this},setHeight:function(a){return this.yRadius=a/2,this},setStartAngle:function(a){return this.startAngle=a,this},setEndAngle:function(a){return this.endAngle=a,this},setClockwise:function(a){return this.clockwise=a,this},setRotation:function(a){return this.rotation=a,this},x:{get:function(){return this.p0.x},set:function(a){this.p0.x=a}},y:{get:function(){return this.p0.y},set:function(a){this.p0.y=a}},xRadius:{get:function(){return this._xRadius},set:function(a){this._xRadius=a}},yRadius:{get:function(){return this._yRadius},set:function(a){this._yRadius=a}},startAngle:{get:function(){return e(this._startAngle)},set:function(a){this._startAngle=s(a)}},endAngle:{get:function(){return e(this._endAngle)},set:function(a){this._endAngle=s(a)}},clockwise:{get:function(){return this._clockwise},set:function(a){this._clockwise=a}},angle:{get:function(){return e(this._rotation)},set:function(a){this._rotation=s(a)}},rotation:{get:function(){return this._rotation},set:function(a){this._rotation=a}},toJSON:function(){return{type:this.type,x:this.p0.x,y:this.p0.y,xRadius:this._xRadius,yRadius:this._yRadius,startAngle:e(this._startAngle),endAngle:e(this._endAngle),clockwise:this._clockwise,rotation:e(this._rotation)}}});o.fromJSON=function(a){return new o(a)},g.exports=o},function(g,b,t){var h=t(0),n=t(94),s=t(199),l=t(10),e=t(3),r=new h({Extends:n,initialize:function(o,a){n.call(this,"LineCurve"),Array.isArray(o)&&(a=new e(o[2],o[3]),o=new e(o[0],o[1])),this.p0=o,this.p1=a,this.arcLengthDivisions=1},getBounds:function(o){return void 0===o&&(o=new l),s([this.p0,this.p1],o)},getStartPoint:function(o){return void 0===o&&(o=new e),o.copy(this.p0)},getResolution:function(o){return void 0===o&&(o=1),o},getPoint:function(o,a){return void 0===a&&(a=new e),1===o?a.copy(this.p1):(a.copy(this.p1).subtract(this.p0).scale(o).add(this.p0),a)},getPointAt:function(o,a){return this.getPoint(o,a)},getTangent:function(o,a){return void 0===a&&(a=new e),a.copy(this.p1).subtract(this.p0).normalize(),a},getUtoTmapping:function(o,a,i){var u,c;return a?(c=(u=this.getLengths(i))[u.length-1],Math.min(a,c)/c):o},draw:function(o){return o.lineBetween(this.p0.x,this.p0.y,this.p1.x,this.p1.y),o},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y]}}});r.fromJSON=function(o){var a=o.points,i=new e(a[0],a[1]),u=new e(a[2],a[3]);return new r(i,u)},g.exports=r},function(g,b,t){var h=t(0),n=t(3),s=new h({initialize:function(l,e){this.active=!1,this.p0=new n(l,e)},getPoint:function(l,e){return void 0===e&&(e=new n),e.copy(this.p0)},getPointAt:function(l,e){return this.getPoint(l,e)},getResolution:function(){return 1},getLength:function(){return 0},toJSON:function(){return{type:"MoveTo",points:[this.p0.x,this.p0.y]}}});g.exports=s},function(g,b,t){var h=t(0),n=t(94),s=t(359),l=t(3),e=new h({Extends:n,initialize:function(r,o,a){n.call(this,"QuadraticBezier"),Array.isArray(r)&&(a=new l(r[4],r[5]),o=new l(r[2],r[3]),r=new l(r[0],r[1])),this.p0=r,this.p1=o,this.p2=a},getStartPoint:function(r){return void 0===r&&(r=new l),r.copy(this.p0)},getResolution:function(r){return r},getPoint:function(r,o){void 0===o&&(o=new l);var a=this.p0,i=this.p1,u=this.p2;return o.set(s(r,a.x,i.x,u.x),s(r,a.y,i.y,u.y))},draw:function(r,o){void 0===o&&(o=32);var a=this.getPoints(o);r.beginPath(),r.moveTo(this.p0.x,this.p0.y);for(var i=1;i<a.length;i++)r.lineTo(a[i].x,a[i].y);return r.strokePath(),r},toJSON:function(){return{type:this.type,points:[this.p0.x,this.p0.y,this.p1.x,this.p1.y,this.p2.x,this.p2.y]}}});e.fromJSON=function(r){var o=r.points,a=new l(o[0],o[1]),i=new l(o[2],o[3]),u=new l(o[4],o[5]);return new e(a,i,u)},g.exports=e},function(g,b,t){var h=t(194),n=t(0),s=t(94),l=t(3),e=new n({Extends:s,initialize:function(r){void 0===r&&(r=[]),s.call(this,"SplineCurve"),this.points=[],this.addPoints(r)},addPoints:function(r){for(var o=0;o<r.length;o++){var a=new l;"number"==typeof r[o]?(a.x=r[o],a.y=r[o+1],o++):Array.isArray(r[o])?(a.x=r[o][0],a.y=r[o][1]):(a.x=r[o].x,a.y=r[o].y),this.points.push(a)}return this},addPoint:function(r,o){var a=new l(r,o);return this.points.push(a),a},getStartPoint:function(r){return void 0===r&&(r=new l),r.copy(this.points[0])},getResolution:function(r){return r*this.points.length},getPoint:function(r,o){void 0===o&&(o=new l);var a=this.points,i=(a.length-1)*r,u=Math.floor(i),c=i-u,d=a[0===u?u:u-1],f=a[u],p=a[u>a.length-2?a.length-1:u+1],v=a[u>a.length-3?a.length-1:u+2];return o.set(h(c,d.x,f.x,p.x,v.x),h(c,d.y,f.y,p.y,v.y))},toJSON:function(){for(var r=[],o=0;o<this.points.length;o++)r.push(this.points[o].x),r.push(this.points[o].y);return{type:this.type,points:r}}});e.fromJSON=function(r){return new e(r.points)},g.exports=e},function(g,b,t){var h=new(t(0))({initialize:function(n,s,l,e){s&&""!==s||(s=["precision mediump float;","uniform vec2 resolution;","varying vec2 fragCoord;","void main () {","    vec2 uv = fragCoord / resolution.xy;","    gl_FragColor = vec4(uv.xyx, 1.0);","}"].join("\n")),l&&""!==l||(l=["precision mediump float;","uniform mat4 uProjectionMatrix;","uniform mat4 uViewMatrix;","uniform vec2 uResolution;","attribute vec2 inPosition;","varying vec2 fragCoord;","varying vec2 outTexCoord;","void main () {","   gl_Position = uProjectionMatrix * uViewMatrix * vec4(inPosition, 1.0, 1.0);","   fragCoord = vec2(inPosition.x, uResolution.y - inPosition.y);","   outTexCoord = vec2(inPosition.x / uResolution.x, fragCoord.y / uResolution.y);","}"].join("\n")),void 0===e&&(e=null),this.key=n,this.fragmentSrc=s,this.vertexSrc=l,this.uniforms=e}});g.exports=h},function(g,b,t){var h=t(38);h.ColorSpectrum=t(909),h.ColorToRGBA=t(910),h.ComponentToHex=t(398),h.GetColor=t(103),h.GetColor32=t(328),h.HexStringToColor=t(327),h.HSLToColor=t(911),h.HSVColorWheel=t(912),h.HSVToRGB=t(188),h.HueToComponent=t(399),h.IntegerToColor=t(189),h.IntegerToRGB=t(330),h.Interpolate=t(913),h.ObjectToColor=t(331),h.RandomRGB=t(914),h.RGBStringToColor=t(332),h.RGBToHSV=t(329),h.RGBToString=t(915),h.ValueToColor=t(187),g.exports=h},function(g,b){g.exports=function(t){var h=t.toString(16);return 1===h.length?"0"+h:h}},function(g,b){g.exports=function(t,h,n){return n<0&&(n+=1),1<n&&--n,n<1/6?t+6*(h-t)*n:n<.5?h:n<2/3?t+(h-t)*(2/3-n)*6:t}},function(g,b,t){var h=t(105);g.exports=function(n){var s;"complete"!==document.readyState&&"interactive"!==document.readyState?(s=function(){document.removeEventListener("deviceready",s,!0),document.removeEventListener("DOMContentLoaded",s,!0),window.removeEventListener("load",s,!0),n()},document.body?h.cordova?document.addEventListener("deviceready",s,!1):(document.addEventListener("DOMContentLoaded",s,!0),window.addEventListener("load",s,!0)):window.setTimeout(s,20)):n()}},function(g,b){g.exports=function(t){if(!t)return window.innerHeight;var h=Math.abs(window.orientation),n={w:0,h:0},s=document.createElement("div");return s.setAttribute("style","position: fixed; height: 100vh; width: 0; top: 0"),document.documentElement.appendChild(s),n.w=90===h?s.offsetHeight:window.innerWidth,n.h=90===h?window.innerWidth:s.offsetHeight,document.documentElement.removeChild(s),s=null,90!==Math.abs(window.orientation)?n.h:n.w}},function(g,b,t){var h=t(201);g.exports=function(n,s){var l=window.screen,e=!!l&&(l.orientation||l.mozOrientation||l.msOrientation);return e&&"string"==typeof e.type?e.type:"string"==typeof e?e:"number"==typeof window.orientation?0===window.orientation||180===window.orientation?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE:window.matchMedia?window.matchMedia("(orientation: portrait)").matches?h.ORIENTATION.PORTRAIT:window.matchMedia("(orientation: landscape)").matches?h.ORIENTATION.LANDSCAPE:void 0:n<s?h.ORIENTATION.PORTRAIT:h.ORIENTATION.LANDSCAPE}},function(g,b){g.exports={NO_CENTER:0,CENTER_BOTH:1,CENTER_HORIZONTALLY:2,CENTER_VERTICALLY:3}},function(g,b){g.exports={LANDSCAPE:"landscape-primary",PORTRAIT:"portrait-primary"}},function(g,b){g.exports={NONE:0,WIDTH_CONTROLS_HEIGHT:1,HEIGHT_CONTROLS_WIDTH:2,FIT:3,ENVELOP:4,RESIZE:5}},function(g,b){g.exports={NO_ZOOM:1,ZOOM_2X:2,ZOOM_4X:4,MAX_ZOOM:-1}},function(g,b){g.exports=function(t){var h;return""!==t&&("string"==typeof t?h=document.getElementById(t):t&&1===t.nodeType&&(h=t)),h||document.body}},function(g,b){g.exports=function(t){var h="";try{window.DOMParser?h=(new DOMParser).parseFromString(t,"text/xml"):(h=new ActiveXObject("Microsoft.XMLDOM")).loadXML(t)}catch{h=null}return h&&h.documentElement&&!h.getElementsByTagName("parsererror").length?h:null}},function(g,b,t){var h=t(0),n=t(203),s=t(9),l=t(51),e=t(22),r=t(410),o=t(411),a=t(412),i=t(413),u=t(25),c=t(177),d=new h({initialize:function(f,p){this.game=f,this.config=p,this.enabled=!0,this.events=new s,this.isOver=!0,this.defaultCursor="",this.keyboard=p.inputKeyboard?new r(this):null,this.mouse=p.inputMouse?new o(this):null,this.touch=p.inputTouch?new i(this):null,this.pointers=[],this.pointersTotal=p.inputActivePointers,p.inputTouch&&1===this.pointersTotal&&(this.pointersTotal=2);for(var v=0;v<=this.pointersTotal;v++){var m=new a(this,v);m.smoothFactor=p.inputSmoothFactor,this.pointers.push(m)}this.mousePointer=p.inputMouse?this.pointers[0]:null,this.activePointer=this.pointers[0],this.globalTopOnly=!0,this.time=0,this._tempPoint={x:0,y:0},this._tempHitTest=[],this._tempMatrix=new u,this._tempMatrix2=new u,this._tempSkip=!1,this.mousePointerContainer=[this.mousePointer],f.events.once(e.BOOT,this.boot,this)},boot:function(){this.canvas=this.game.canvas,this.scaleManager=this.game.scale,this.events.emit(l.MANAGER_BOOT),this.game.events.on(e.PRE_RENDER,this.preRender,this),this.game.events.once(e.DESTROY,this.destroy,this)},setCanvasOver:function(f){this.isOver=!0,this.events.emit(l.GAME_OVER,f)},setCanvasOut:function(f){this.isOver=!1,this.events.emit(l.GAME_OUT,f)},preRender:function(){var f=this.game.loop.now,p=this.game.loop.delta,v=this.game.scene.getScenes(!0,!0);this.time=f,this.events.emit(l.MANAGER_UPDATE);for(var m=0;m<v.length;m++){var T=v[m];if(T.sys.input&&T.sys.input.updatePoll(f,p)&&this.globalTopOnly)return}},setDefaultCursor:function(f){this.defaultCursor=f,this.canvas.style.cursor!==f&&(this.canvas.style.cursor=f)},setCursor:function(f){f.cursor&&(this.canvas.style.cursor=f.cursor)},resetCursor:function(f){f.cursor&&this.canvas&&(this.canvas.style.cursor=this.defaultCursor)},addPointer:function(f){void 0===f&&(f=1);var p=[];10<this.pointersTotal+f&&(f=10-this.pointersTotal);for(var v=0;v<f;v++){var T=new a(this,this.pointers.length);T.smoothFactor=this.config.inputSmoothFactor,this.pointers.push(T),this.pointersTotal++,p.push(T)}return p},updateInputPlugins:function(f,p){var v=this.game.scene.getScenes(!0,!0);this._tempSkip=!1;for(var m=0;m<v.length;m++){var T=v[m];if(T.sys.input&&(T.sys.input.update(f,p)&&this.globalTopOnly||this._tempSkip))return}},onTouchStart:function(f){for(var p=this.pointers,v=[],m=0;m<f.changedTouches.length;m++)for(var T=f.changedTouches[m],y=1;y<this.pointersTotal;y++){var x=p[y];if(!x.active){x.touchstart(T,f),this.activePointer=x,v.push(x);break}}this.updateInputPlugins(n.TOUCH_START,v)},onTouchMove:function(f){for(var p=this.pointers,v=[],m=0;m<f.changedTouches.length;m++)for(var T=f.changedTouches[m],y=1;y<this.pointersTotal;y++){var x=p[y];if(x.active&&x.identifier===T.identifier){x.touchmove(T,f),this.activePointer=x,v.push(x);break}}this.updateInputPlugins(n.TOUCH_MOVE,v)},onTouchEnd:function(f){for(var p=this.pointers,v=[],m=0;m<f.changedTouches.length;m++)for(var T=f.changedTouches[m],y=1;y<this.pointersTotal;y++){var x=p[y];if(x.active&&x.identifier===T.identifier){x.touchend(T,f),v.push(x);break}}this.updateInputPlugins(n.TOUCH_END,v)},onTouchCancel:function(f){for(var p=this.pointers,v=[],m=0;m<f.changedTouches.length;m++)for(var T=f.changedTouches[m],y=1;y<this.pointersTotal;y++){var x=p[y];if(x.active&&x.identifier===T.identifier){x.touchcancel(T,f),v.push(x);break}}this.updateInputPlugins(n.TOUCH_CANCEL,v)},onMouseDown:function(f){var p=this.mousePointer;p.down(f),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(n.MOUSE_DOWN,this.mousePointerContainer)},onMouseMove:function(f){var p=this.mousePointer;p.move(f),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(n.MOUSE_MOVE,this.mousePointerContainer)},onMouseUp:function(f){var p=this.mousePointer;p.up(f),p.updateMotion(),this.activePointer=p,this.updateInputPlugins(n.MOUSE_UP,this.mousePointerContainer)},onMouseWheel:function(f){var p=this.mousePointer;p.wheel(f),this.activePointer=p,this.updateInputPlugins(n.MOUSE_WHEEL,this.mousePointerContainer)},onPointerLockChange:function(f){var p=this.mouse.locked;this.mousePointer.locked=p,this.events.emit(l.POINTERLOCK_CHANGE,f,p)},inputCandidate:function(f,p){var v=f.input;if(!v||!v.enabled||!v.alwaysEnabled&&!f.willRender(p))return!1;var m=!0,T=f.parentContainer;if(T)do{if(!T.willRender(p)){m=!1;break}T=T.parentContainer}while(T);return m},hitTest:function(f,p,v,m){void 0===m&&(m=this._tempHitTest);var T=this._tempPoint,y=v.scrollX,x=v.scrollY;m.length=0,v.getWorldPoint(f.x,f.y,T),f.worldX=T.x,f.worldY=T.y;for(var S={x:0,y:0},A=this._tempMatrix,_=this._tempMatrix2,C=0;C<p.length;C++){var M,P,L=p[C];this.inputCandidate(L,v)&&(M=T.x+y*L.scrollFactorX-y,P=T.y+x*L.scrollFactorY-x,L.parentContainer?(L.getWorldTransformMatrix(A,_),A.applyInverse(M,P,S)):c(M,P,L.x,L.y,L.rotation,L.scaleX,L.scaleY,S),this.pointWithinHitArea(L,S.x,S.y)&&m.push(L))}return m},pointWithinHitArea:function(f,p,v){p+=f.displayOriginX,v+=f.displayOriginY;var m=f.input;return!(!m||!m.hitAreaCallback(m.hitArea,p,v,f)||(m.localX=p,m.localY=v,0))},pointWithinInteractiveObject:function(f,p,v){return!!f.hitArea&&(v+=f.gameObject.displayOriginY,f.localX=p+=f.gameObject.displayOriginX,f.localY=v,f.hitAreaCallback(f.hitArea,p,v,f))},transformPointer:function(f,p,v,m){var T=f.position,y=f.prevPosition;y.x=T.x,y.y=T.y;var x=this.scaleManager.transformX(p),w=this.scaleManager.transformY(v),E=f.smoothFactor;m&&0!==E?(T.x=x*E+y.x*(1-E),T.y=w*E+y.y*(1-E)):(T.x=x,T.y=w)},destroy:function(){this.events.removeAllListeners(),this.game.events.off(e.PRE_RENDER),this.keyboard&&this.keyboard.destroy(),this.mouse&&this.mouse.destroy(),this.touch&&this.touch.destroy();for(var f=0;f<this.pointers.length;f++)this.pointers[f].destroy();this.pointers=[],this._tempHitTest=[],this._tempMatrix.destroy(),this.canvas=null,this.game=null}});g.exports=d},function(g,b,t){var h=t(93),n=t(0),s=t(22),l=t(51),e=t(143),r=t(1),o=new n({initialize:function(a){this.manager=a,this.queue=[],this.preventDefault=!0,this.captures=[],this.enabled=!1,this.onKeyDown=r,this.onKeyUp=r,a.events.once(l.MANAGER_BOOT,this.boot,this)},boot:function(){var a=this.manager.config;this.enabled=a.inputKeyboard,this.target=a.inputKeyboardEventTarget,this.addCapture(a.inputKeyboardCapture),!this.target&&window&&(this.target=window),this.enabled&&this.target&&this.startListeners(),this.manager.game.events.on(s.POST_STEP,this.postUpdate,this)},startListeners:function(){var a=this;this.onKeyDown=function(u){!u.defaultPrevented&&a.enabled&&a.manager&&(a.queue.push(u),a.manager.events.emit(l.MANAGER_PROCESS),a.preventDefault&&!(u.altKey||u.ctrlKey||u.shiftKey||u.metaKey)&&-1<a.captures.indexOf(u.keyCode)&&u.preventDefault())},this.onKeyUp=function(u){!u.defaultPrevented&&a.enabled&&a.manager&&(a.queue.push(u),a.manager.events.emit(l.MANAGER_PROCESS),a.preventDefault&&!(u.altKey||u.ctrlKey||u.shiftKey||u.metaKey)&&-1<a.captures.indexOf(u.keyCode)&&u.preventDefault())};var i=this.target;i&&(i.addEventListener("keydown",this.onKeyDown,!1),i.addEventListener("keyup",this.onKeyUp,!1),this.enabled=!0)},stopListeners:function(){var a=this.target;a.removeEventListener("keydown",this.onKeyDown,!1),a.removeEventListener("keyup",this.onKeyUp,!1),this.enabled=!1},postUpdate:function(){this.queue=[]},addCapture:function(a){"string"==typeof a&&(a=a.split(",")),Array.isArray(a)||(a=[a]);for(var i=this.captures,u=0;u<a.length;u++){var c=a[u];"string"==typeof c&&(c=e[c.trim().toUpperCase()]),-1===i.indexOf(c)&&i.push(c)}this.preventDefault=0<i.length},removeCapture:function(a){"string"==typeof a&&(a=a.split(",")),Array.isArray(a)||(a=[a]);for(var i=this.captures,u=0;u<a.length;u++){var c=a[u];"string"==typeof c&&(c=e[c.toUpperCase()]),h(i,c)}this.preventDefault=0<i.length},clearCaptures:function(){this.captures=[],this.preventDefault=!1},destroy:function(){this.stopListeners(),this.clearCaptures(),this.queue=[],this.manager.game.events.off(s.POST_RENDER,this.postUpdate,this),this.target=null,this.enabled=!1,this.manager=null}});g.exports=o},function(g,b,t){var h=t(0),n=t(191),s=t(51),l=t(1),e=new h({initialize:function(r){this.manager=r,this.preventDefaultDown=!0,this.preventDefaultUp=!0,this.preventDefaultMove=!0,this.preventDefaultWheel=!1,this.enabled=!1,this.locked=!1,this.onMouseMove=l,this.onMouseDown=l,this.onMouseUp=l,this.onMouseDownWindow=l,this.onMouseUpWindow=l,this.onMouseOver=l,this.onMouseOut=l,this.onMouseWheel=l,this.pointerLockChange=l,this.isTop=!0,r.events.once(s.MANAGER_BOOT,this.boot,this)},boot:function(){var r=this.manager.config;this.enabled=r.inputMouse,this.target=r.inputMouseEventTarget,this.passive=r.inputMousePassive,this.preventDefaultDown=r.inputMousePreventDefaultDown,this.preventDefaultUp=r.inputMousePreventDefaultUp,this.preventDefaultMove=r.inputMousePreventDefaultMove,this.preventDefaultWheel=r.inputMousePreventDefaultWheel,this.target?"string"==typeof this.target&&(this.target=document.getElementById(this.target)):this.target=this.manager.game.canvas,r.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(r){return r.preventDefault(),!1}),this},requestPointerLock:function(){var r;n.pointerLock&&((r=this.target).requestPointerLock=r.requestPointerLock||r.mozRequestPointerLock||r.webkitRequestPointerLock,r.requestPointerLock())},releasePointerLock:function(){n.pointerLock&&(document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock())},startListeners:function(){var r=this.target;if(r){var o=this,a=this.manager,i=a.canvas,u=window&&window.focus&&a.game.config.autoFocus;this.onMouseMove=function(d){!d.defaultPrevented&&o.enabled&&a&&a.enabled&&(a.onMouseMove(d),o.preventDefaultMove&&d.preventDefault())},this.onMouseDown=function(d){u&&window.focus(),!d.defaultPrevented&&o.enabled&&a&&a.enabled&&(a.onMouseDown(d),o.preventDefaultDown&&d.target===i&&d.preventDefault())},this.onMouseDownWindow=function(d){!d.defaultPrevented&&o.enabled&&a&&a.enabled&&d.target!==i&&a.onMouseDown(d)},this.onMouseUp=function(d){!d.defaultPrevented&&o.enabled&&a&&a.enabled&&(a.onMouseUp(d),o.preventDefaultUp&&d.target===i&&d.preventDefault())},this.onMouseUpWindow=function(d){!d.defaultPrevented&&o.enabled&&a&&a.enabled&&d.target!==i&&a.onMouseUp(d)},this.onMouseOver=function(d){!d.defaultPrevented&&o.enabled&&a&&a.enabled&&a.setCanvasOver(d)},this.onMouseOut=function(d){!d.defaultPrevented&&o.enabled&&a&&a.enabled&&a.setCanvasOut(d)},this.onMouseWheel=function(d){!d.defaultPrevented&&o.enabled&&a&&a.enabled&&a.onMouseWheel(d),o.preventDefaultWheel&&d.target===i&&d.preventDefault()};var c={passive:!0};if(r.addEventListener("mousemove",this.onMouseMove),r.addEventListener("mousedown",this.onMouseDown),r.addEventListener("mouseup",this.onMouseUp),r.addEventListener("mouseover",this.onMouseOver,c),r.addEventListener("mouseout",this.onMouseOut,c),r.addEventListener("wheel",this.onMouseWheel,this.preventDefaultWheel?{passive:!1}:c),window&&a.game.config.inputWindowEvents)try{window.top.addEventListener("mousedown",this.onMouseDownWindow,c),window.top.addEventListener("mouseup",this.onMouseUpWindow,c)}catch{window.addEventListener("mousedown",this.onMouseDownWindow,c),window.addEventListener("mouseup",this.onMouseUpWindow,c),this.isTop=!1}n.pointerLock&&(this.pointerLockChange=function(d){var f=o.target;o.locked=document.pointerLockElement===f||document.mozPointerLockElement===f||document.webkitPointerLockElement===f,a.onPointerLockChange(d)},document.addEventListener("pointerlockchange",this.pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this.pointerLockChange,!0)),this.enabled=!0}},stopListeners:function(){var r=this.target;r.removeEventListener("mousemove",this.onMouseMove),r.removeEventListener("mousedown",this.onMouseDown),r.removeEventListener("mouseup",this.onMouseUp),r.removeEventListener("mouseover",this.onMouseOver),r.removeEventListener("mouseout",this.onMouseOut),window&&((r=this.isTop?window.top:window).removeEventListener("mousedown",this.onMouseDownWindow),r.removeEventListener("mouseup",this.onMouseUpWindow)),n.pointerLock&&(document.removeEventListener("pointerlockchange",this.pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this.pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this.pointerLockChange,!0))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});g.exports=e},function(g,b,t){var h=t(349),n=t(0),s=t(50),l=t(124),e=t(360),r=t(3),o=t(105),a=new n({initialize:function(i,u){this.manager=i,this.id=u,this.camera=null,this.button=0,this.buttons=0,this.position=new r,this.prevPosition=new r,this.midPoint=new r(-1,-1),this.velocity=new r,this.angle=0,this.distance=0,this.smoothFactor=0,this.motionFactor=.2,this.worldX=0,this.worldY=0,this.moveTime=0,this.downX=0,this.downY=0,this.downTime=0,this.upX=0,this.upY=0,this.upTime=0,this.primaryDown=!1,this.isDown=!1,this.wasTouch=!1,this.wasCanceled=!1,this.movementX=0,this.movementY=0,this.identifier=0,this.pointerId=null,this.active=0===u,this.locked=!1,this.deltaX=0,this.deltaY=0,this.deltaZ=0},updateWorldPoint:function(i){var u=i.getWorldPoint(this.x,this.y);return this.worldX=u.x,this.worldY=u.y,this},positionToCamera:function(i,u){return i.getWorldPoint(this.x,this.y,u)},updateMotion:function(){var i,u,c,d,f=this.position.x,p=this.position.y,v=this.midPoint.x,m=this.midPoint.y;f===v&&p===m||(i=e(this.motionFactor,v,f),u=e(this.motionFactor,m,p),l(i,f,.1)&&(i=f),l(u,p,.1)&&(u=p),this.midPoint.set(i,u),this.velocity.set(c=f-i,d=p-u),this.angle=h(i,u,f,p),this.distance=Math.sqrt(c*c+d*d))},up:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.button=i.button,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),0===i.button&&(this.primaryDown=!1,this.upX=this.x,this.upY=this.y),0===this.buttons&&(this.isDown=!1,this.upTime=i.timeStamp,this.wasTouch=!1)},down:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.button=i.button,this.downElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),0===i.button&&(this.primaryDown=!0,this.downX=this.x,this.downY=this.y),o.macOS&&i.ctrlKey&&(this.buttons=2,this.primaryDown=!1),this.isDown||(this.isDown=!0,this.downTime=i.timeStamp),this.wasTouch=!1},move:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.manager.transformPointer(this,i.pageX,i.pageY,!0),this.locked&&(this.movementX=i.movementX||i.mozMovementX||i.webkitMovementX||0,this.movementY=i.movementY||i.mozMovementY||i.webkitMovementY||0),this.moveTime=i.timeStamp,this.wasTouch=!1},wheel:function(i){"buttons"in i&&(this.buttons=i.buttons),this.event=i,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.deltaX=i.deltaX,this.deltaY=i.deltaY,this.deltaZ=i.deltaZ,this.wasTouch=!1},touchstart:function(i,u){i.pointerId&&(this.pointerId=i.pointerId),this.identifier=i.identifier,this.target=i.target,this.active=!0,this.buttons=1,this.event=u,this.downElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!0,this.downX=this.x,this.downY=this.y,this.downTime=u.timeStamp,this.isDown=!0,this.wasTouch=!0,this.wasCanceled=!1,this.updateMotion()},touchmove:function(i,u){this.event=u,this.manager.transformPointer(this,i.pageX,i.pageY,!0),this.moveTime=u.timeStamp,this.wasTouch=!0,this.updateMotion()},touchend:function(i,u){this.buttons=0,this.event=u,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=u.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!1,this.active=!1,this.updateMotion()},touchcancel:function(i,u){this.buttons=0,this.event=u,this.upElement=i.target,this.manager.transformPointer(this,i.pageX,i.pageY,!1),this.primaryDown=!1,this.upX=this.x,this.upY=this.y,this.upTime=u.timeStamp,this.isDown=!1,this.wasTouch=!0,this.wasCanceled=!0,this.active=!1},noButtonDown:function(){return 0===this.buttons},leftButtonDown:function(){return!!(1&this.buttons)},rightButtonDown:function(){return!!(2&this.buttons)},middleButtonDown:function(){return!!(4&this.buttons)},backButtonDown:function(){return!!(8&this.buttons)},forwardButtonDown:function(){return!!(16&this.buttons)},leftButtonReleased:function(){return 0===this.button&&!this.isDown},rightButtonReleased:function(){return 2===this.button&&!this.isDown},middleButtonReleased:function(){return 1===this.button&&!this.isDown},backButtonReleased:function(){return 3===this.button&&!this.isDown},forwardButtonReleased:function(){return 4===this.button&&!this.isDown},getDistance:function(){return this.isDown?s(this.downX,this.downY,this.x,this.y):s(this.downX,this.downY,this.upX,this.upY)},getDistanceX:function(){return this.isDown?Math.abs(this.downX-this.x):Math.abs(this.downX-this.upX)},getDistanceY:function(){return this.isDown?Math.abs(this.downY-this.y):Math.abs(this.downY-this.upY)},getDuration:function(){return this.isDown?this.manager.time-this.downTime:this.upTime-this.downTime},getAngle:function(){return this.isDown?h(this.downX,this.downY,this.x,this.y):h(this.downX,this.downY,this.upX,this.upY)},getInterpolatedPosition:function(i,u){void 0===i&&(i=10),void 0===u&&(u=[]);for(var c=this.prevPosition.x,d=this.prevPosition.y,f=this.position.x,p=this.position.y,v=0;v<i;v++){var m=1/i*v;u[v]={x:e(m,c,f),y:e(m,d,p)}}return u},destroy:function(){this.camera=null,this.manager=null,this.position=null},x:{get:function(){return this.position.x},set:function(i){this.position.x=i}},y:{get:function(){return this.position.y},set:function(i){this.position.y=i}},time:{get:function(){return this.event?this.event.timeStamp:0}}});g.exports=a},function(g,b,t){var h=t(0),n=t(51),s=t(1),l=new h({initialize:function(e){this.manager=e,this.capture=!0,this.enabled=!1,this.onTouchStart=s,this.onTouchStartWindow=s,this.onTouchMove=s,this.onTouchEnd=s,this.onTouchEndWindow=s,this.onTouchCancel=s,this.onTouchCancelWindow=s,this.onTouchOver=s,this.onTouchOut=s,e.events.once(n.MANAGER_BOOT,this.boot,this)},boot:function(){var e=this.manager.config;this.enabled=e.inputTouch,this.target=e.inputTouchEventTarget,this.capture=e.inputTouchCapture,this.target||(this.target=this.manager.game.canvas),e.disableContextMenu&&this.disableContextMenu(),this.enabled&&this.target&&this.startListeners()},disableContextMenu:function(){return document.body.addEventListener("contextmenu",function(e){return e.preventDefault(),!1}),this},startListeners:function(){var e=this,r=this.manager.canvas,o=window&&window.focus&&this.manager.game.config.autoFocus;this.onTouchStart=function(c){o&&window.focus(),!c.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchStart(c),e.capture&&c.cancelable&&c.target===r&&c.preventDefault())},this.onTouchStartWindow=function(c){!c.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&c.target!==r&&e.manager.onTouchStart(c)},this.onTouchMove=function(c){!c.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchMove(c),e.capture&&c.cancelable&&c.preventDefault())},this.onTouchEnd=function(c){!c.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchEnd(c),e.capture&&c.cancelable&&c.target===r&&c.preventDefault())},this.onTouchEndWindow=function(c){!c.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&c.target!==r&&e.manager.onTouchEnd(c)},this.onTouchCancel=function(c){!c.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&(e.manager.onTouchCancel(c),e.capture&&c.preventDefault())},this.onTouchCancelWindow=function(c){!c.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.onTouchCancel(c)},this.onTouchOver=function(c){!c.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOver(c)},this.onTouchOut=function(c){!c.defaultPrevented&&e.enabled&&e.manager&&e.manager.enabled&&e.manager.setCanvasOut(c)};var a,i,u=this.target;u&&(i={passive:!(a={passive:!0})},u.addEventListener("touchstart",this.onTouchStart,this.capture?i:a),u.addEventListener("touchmove",this.onTouchMove,this.capture?i:a),u.addEventListener("touchend",this.onTouchEnd,this.capture?i:a),u.addEventListener("touchcancel",this.onTouchCancel,this.capture?i:a),u.addEventListener("touchover",this.onTouchOver,this.capture?i:a),u.addEventListener("touchout",this.onTouchOut,this.capture?i:a),window&&this.manager.game.config.inputWindowEvents&&(window.addEventListener("touchstart",this.onTouchStartWindow,i),window.addEventListener("touchend",this.onTouchEndWindow,i),window.addEventListener("touchcancel",this.onTouchCancelWindow,i)),this.enabled=!0)},stopListeners:function(){var e=this.target;e.removeEventListener("touchstart",this.onTouchStart),e.removeEventListener("touchmove",this.onTouchMove),e.removeEventListener("touchend",this.onTouchEnd),e.removeEventListener("touchcancel",this.onTouchCancel),e.removeEventListener("touchover",this.onTouchOver),e.removeEventListener("touchout",this.onTouchOut),window&&(window.removeEventListener("touchstart",this.onTouchStartWindow),window.removeEventListener("touchend",this.onTouchEndWindow))},destroy:function(){this.stopListeners(),this.target=null,this.enabled=!1,this.manager=null}});g.exports=l},function(g,b,t){var h=t(0),n=t(22),s=t(9),l=t(8),e=t(16),r=t(5),o=t(2),a=t(24),i=t(93),u=new h({Extends:s,initialize:function(c){s.call(this),this.game=c,this.plugins=[],this.scenePlugins=[],this._pendingGlobal=[],this._pendingScene=[],c.isBooted?this.boot():c.events.once(n.BOOT,this.boot,this)},boot:function(){for(var c,d,f,p,v,m,T=this.game.config,y=(y=T.installGlobalPlugins).concat(this._pendingGlobal),x=0;x<y.length;x++)d=o(c=y[x],"key",null),f=o(c,"plugin",null),p=o(c,"start",!1),v=o(c,"mapping",null),m=o(c,"data",null),d&&(f?this.install(d,f,p,v,m):console.warn("Missing `plugin` for key: "+d));for(y=(y=T.installScenePlugins).concat(this._pendingScene),x=0;x<y.length;x++)d=o(c=y[x],"key",null),f=o(c,"plugin",null),v=o(c,"mapping",null),d&&(f?this.installScenePlugin(d,f,v):console.warn("Missing `plugin` for key: "+d));this._pendingGlobal=[],this._pendingScene=[],this.game.events.once(n.DESTROY,this.destroy,this)},addToScene:function(c,d,f){for(var p,v=this.game,m=c.scene,T=c.settings.map,y=c.settings.isBooted,x=0;x<d.length;x++)v[_=d[x]]?(c[_]=v[_],T.hasOwnProperty(_)&&(m[T[_]]=c[_])):"game"===_&&T.hasOwnProperty(_)&&(m[T[_]]=v);for(var w=0;w<f.length;w++)for(p=f[w],x=0;x<p.length;x++){var E,S,A,_=p[x];a.hasCore(_)&&(S=(E=a.getCore(_)).mapping,A=new E.plugin(m,this,S),c[S]=A,E.custom?m[S]=A:T.hasOwnProperty(S)&&(m[T[S]]=A),y&&A.boot())}for(p=this.plugins,x=0;x<p.length;x++){var C=p[x];C.mapping&&(m[C.mapping]=C.plugin)}},getDefaultScenePlugins:function(){return this.game.config.defaultPlugins.concat(this.scenePlugins)},installScenePlugin:function(c,d,f,p,v){if(void 0===v&&(v=!1),"function"==typeof d){if(a.hasCore(c)){if(!v&&a.hasCore(c))return void console.warn("Scene Plugin key in use: "+c)}else a.register(c,d,f,!0),this.scenePlugins.push(c);var m;p&&(m=new d(p,this,c),p.sys[c]=m,f&&""!==f&&(p[f]=m),m.boot())}else console.warn("Invalid Scene Plugin: "+c)},install:function(c,d,f,p,v){if(void 0===f&&(f=!1),void 0===p&&(p=null),void 0===v&&(v=null),"function"!=typeof d)return console.warn("Invalid Plugin: "+c),null;if(a.hasCustom(c))return console.warn("Plugin key in use: "+c),null;if(null!==p&&(f=!0),this.game.isBooted){if(a.registerCustom(c,d,p,v),f)return this.start(c)}else this._pendingGlobal.push({key:c,plugin:d,start:f,mapping:p,data:v});return null},getIndex:function(c){for(var d=this.plugins,f=0;f<d.length;f++)if(d[f].key===c)return f;return-1},getEntry:function(c){var d=this.getIndex(c);if(-1!==d)return this.plugins[d]},isActive:function(c){var d=this.getEntry(c);return d&&d.active},start:function(c,d){void 0===d&&(d=c);var f=this.getEntry(d);return f&&!f.active?(f.active=!0,f.plugin.start()):f=f||this.createEntry(c,d),f?f.plugin:null},createEntry:function(c,d){var f,p=a.getCustom(c);return p&&(p={key:d,plugin:f=new p.plugin(this),active:!0,mapping:p.mapping,data:p.data},this.plugins.push(p),f.init(p.data),f.start()),p},stop:function(c){var d=this.getEntry(c);return d&&d.active&&(d.active=!1,d.plugin.stop()),this},get:function(c,d){void 0===d&&(d=!0);var f=this.getEntry(c);if(f)return f.plugin;var p=this.getClass(c);return p&&d?(f=this.createEntry(c,c))?f.plugin:null:p||null},getClass:function(c){return a.getCustomClass(c)},removeGlobalPlugin:function(c){var d=this.getEntry(c);d&&i(this.plugins,d),a.removeCustom(c)},removeScenePlugin:function(c){i(this.scenePlugins,c),a.remove(c)},registerGameObject:function(c,d,f){return d&&r.register(c,d),f&&e.register(c,f),this},removeGameObject:function(c,d,f){return void 0===d&&(d=!0),void 0===f&&(f=!0),d&&r.remove(c),f&&e.remove(c),this},registerFileType:function(c,d,f){l.register(c,d),f&&f.sys.load&&(f.sys.load[c]=d)},destroy:function(){for(var c=0;c<this.plugins.length;c++)this.plugins[c].plugin.destroy();a.destroyCustomPlugins(),this.game.noReturn&&a.destroyCorePlugins(),this.game=null,this.plugins=[],this.scenePlugins=[]}});g.exports=u},function(g,b,t){var h=t(201),n=t(0),s=t(9),l=t(104),e=t(22),r=t(401),o=t(407),a=t(402),i=t(1),u=t(10),c=t(416),d=t(76),f=t(3),p=new n({Extends:s,initialize:function(v){s.call(this),this.game=v,this.canvasBounds=new u,this.parent=null,this.parentIsWindow=!1,this.parentSize=new c,this.gameSize=new c,this.baseSize=new c,this.displaySize=new c,this.scaleMode=h.SCALE_MODE.NONE,this.zoom=1,this._resetZoom=!1,this.displayScale=new f(1,1),this.autoRound=!1,this.autoCenter=h.CENTER.NO_CENTER,this.orientation=h.ORIENTATION.LANDSCAPE,this.fullscreenTarget=null,this._createdFullscreenTarget=!1,this.dirty=!1,this.resizeInterval=500,this._lastCheck=0,this._checkOrientation=!1,this.listeners={orientationChange:i,windowResize:i,fullScreenChange:i,fullScreenError:i}},preBoot:function(){this.parseConfig(this.game.config),this.game.events.once(e.BOOT,this.boot,this)},boot:function(){var v=this.game;this.canvas=v.canvas,this.fullscreen=v.device.fullscreen,this.scaleMode!==h.SCALE_MODE.RESIZE&&this.displaySize.setAspectMode(this.scaleMode),this.scaleMode===h.SCALE_MODE.NONE?this.resize(this.width,this.height):(this.getParentBounds(),0<this.parentSize.width&&0<this.parentSize.height&&this.displaySize.setParent(this.parentSize),this.refresh()),v.events.on(e.PRE_STEP,this.step,this),v.events.once(e.READY,this.refresh,this),v.events.once(e.DESTROY,this.destroy,this),this.startListeners()},parseConfig:function(v){this.getParent(v),this.getParentBounds();var m,T,y,x,w=v.width,E=v.height,S=v.scaleMode,A=v.zoom,_=v.autoRound;"string"==typeof w&&(0===(m=this.parentSize.width)&&(m=window.innerWidth),T=parseInt(w,10)/100,w=Math.floor(m*T)),"string"==typeof E&&(0===(y=this.parentSize.height)&&(y=window.innerHeight),x=parseInt(E,10)/100,E=Math.floor(y*x)),this.scaleMode=S,this.autoRound=_,this.autoCenter=v.autoCenter,this.resizeInterval=v.resizeInterval,_&&(w=Math.floor(w),E=Math.floor(E)),this.gameSize.setSize(w,E),A===h.ZOOM.MAX_ZOOM&&(A=this.getMaxZoom()),1!==(this.zoom=A)&&(this._resetZoom=!0),this.baseSize.setSize(w,E),_&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),0<v.minWidth&&this.displaySize.setMin(v.minWidth*A,v.minHeight*A),0<v.maxWidth&&this.displaySize.setMax(v.maxWidth*A,v.maxHeight*A),this.displaySize.setSize(w,E),this.orientation=a(w,E)},getParent:function(v){var m,T=v.parent;null!==T&&(this.parent=o(T),this.parentIsWindow=this.parent===document.body,v.expandParent&&v.scaleMode!==h.SCALE_MODE.NONE&&(m=this.parent.getBoundingClientRect(),!this.parentIsWindow&&0!==m.height||(document.documentElement.style.height="100%",document.body.style.height="100%",m=this.parent.getBoundingClientRect(),this.parentIsWindow||0!==m.height||(this.parent.style.overflow="hidden",this.parent.style.width="100%",this.parent.style.height="100%"))),v.fullscreenTarget&&!this.fullscreenTarget&&(this.fullscreenTarget=o(v.fullscreenTarget)))},getParentBounds:function(){if(!this.parent)return!1;var v=this.parentSize,m=this.parent.getBoundingClientRect();this.parentIsWindow&&this.game.device.os.iOS&&(m.height=r(!0));var T=m.width,y=m.height;return(v.width!==T||v.height!==y)&&(v.setSize(T,y),!0)},lockOrientation:function(v){var m=screen.lockOrientation||screen.mozLockOrientation||screen.msLockOrientation;return!!m&&m.call(screen,v)},setParentSize:function(v,m){return this.parentSize.setSize(v,m),this.refresh()},setGameSize:function(v,m){var T=this.autoRound;T&&(v=Math.floor(v),m=Math.floor(m));var y=this.width,x=this.height;return this.gameSize.resize(v,m),this.baseSize.resize(v,m),T&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setAspectRatio(v/m),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height,this.refresh(y,x)},resize:function(v,m){var T=this.zoom,y=this.autoRound;y&&(v=Math.floor(v),m=Math.floor(m));var x=this.width,w=this.height;this.gameSize.resize(v,m),this.baseSize.resize(v,m),y&&(this.baseSize.width=Math.floor(this.baseSize.width),this.baseSize.height=Math.floor(this.baseSize.height)),this.displaySize.setSize(v*T,m*T),this.canvas.width=this.baseSize.width,this.canvas.height=this.baseSize.height;var E=this.canvas.style,S=v*T,A=m*T;return y&&(S=Math.floor(S),A=Math.floor(A)),S===v&&A===m||(E.width=S+"px",E.height=A+"px"),this.refresh(x,w)},setZoom:function(v){return this.zoom=v,this._resetZoom=!0,this.refresh()},setMaxZoom:function(){return this.zoom=this.getMaxZoom(),this._resetZoom=!0,this.refresh()},refresh:function(v,m){void 0===v&&(v=this.width),void 0===m&&(m=this.height),this.updateScale(),this.updateBounds(),this.updateOrientation(),this.displayScale.set(this.baseSize.width/this.canvasBounds.width,this.baseSize.height/this.canvasBounds.height);var T,y,x=this.game.domContainer;return x&&(this.baseSize.setCSS(x),T=this.canvas.style,(y=x.style).transform="scale("+this.displaySize.width/this.baseSize.width+","+this.displaySize.height/this.baseSize.height+")",y.marginLeft=T.marginLeft,y.marginTop=T.marginTop),this.emit(l.RESIZE,this.gameSize,this.baseSize,this.displaySize,v,m),this},updateOrientation:function(){var v;this._checkOrientation&&(this._checkOrientation=!1,(v=a(this.width,this.height))!==this.orientation&&(this.orientation=v,this.emit(l.ORIENTATION_CHANGE,v)))},updateScale:function(){var v,m,T=this.canvas.style,w=this.zoom,E=this.autoRound;this.scaleMode===h.SCALE_MODE.NONE?(this.displaySize.setSize(this.gameSize.width*w,this.gameSize.height*w),v=this.displaySize.width,m=this.displaySize.height,E&&(v=Math.floor(v),m=Math.floor(m)),this._resetZoom&&(T.width=v+"px",T.height=m+"px",this._resetZoom=!1)):this.scaleMode===h.SCALE_MODE.RESIZE?(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),this.gameSize.setSize(this.displaySize.width,this.displaySize.height),this.baseSize.setSize(this.displaySize.width,this.displaySize.height),v=this.displaySize.width,m=this.displaySize.height,E&&(v=Math.floor(v),m=Math.floor(m)),this.canvas.width=v,this.canvas.height=m):(this.displaySize.setSize(this.parentSize.width,this.parentSize.height),v=this.displaySize.width,m=this.displaySize.height,E&&(v=Math.floor(v),m=Math.floor(m)),T.width=v+"px",T.height=m+"px"),this.getParentBounds(),this.updateCenter()},getMaxZoom:function(){var v=d(this.parentSize.width,this.gameSize.width,0,!0),m=d(this.parentSize.height,this.gameSize.height,0,!0);return Math.max(Math.min(v,m),1)},updateCenter:function(){var v,m,T,y,x,w,E,S=this.autoCenter;S!==h.CENTER.NO_CENTER&&(m=(v=this.canvas).style,y=(T=v.getBoundingClientRect()).width,x=T.height,w=Math.floor((this.parentSize.width-y)/2),E=Math.floor((this.parentSize.height-x)/2),S===h.CENTER.CENTER_HORIZONTALLY?E=0:S===h.CENTER.CENTER_VERTICALLY&&(w=0),m.marginLeft=w+"px",m.marginTop=E+"px")},updateBounds:function(){var v=this.canvasBounds,m=this.canvas.getBoundingClientRect();v.x=m.left+(window.pageXOffset||0)-(document.documentElement.clientLeft||0),v.y=m.top+(window.pageYOffset||0)-(document.documentElement.clientTop||0),v.width=m.width,v.height=m.height},transformX:function(v){return(v-this.canvasBounds.left)*this.displayScale.x},transformY:function(v){return(v-this.canvasBounds.top)*this.displayScale.y},startFullscreen:function(v){void 0===v&&(v={navigationUI:"hide"});var T=this.fullscreen;T.available?T.active||this.getFullscreenTarget()[T.request](T.keyboard?Element.ALLOW_KEYBOARD_INPUT:v):this.emit(l.FULLSCREEN_UNSUPPORTED)},fullscreenSuccessHandler:function(){this.getParentBounds(),this.refresh(),this.emit(l.ENTER_FULLSCREEN)},fullscreenErrorHandler:function(v){this.removeFullscreenTarget(),this.emit(l.FULLSCREEN_FAILED,v)},getFullscreenTarget:function(){var v;return this.fullscreenTarget||((v=document.createElement("div")).style.margin="0",v.style.padding="0",v.style.width="100%",v.style.height="100%",this.fullscreenTarget=v,this._createdFullscreenTarget=!0),this._createdFullscreenTarget&&(this.canvas.parentNode.insertBefore(this.fullscreenTarget,this.canvas),this.fullscreenTarget.appendChild(this.canvas)),this.fullscreenTarget},removeFullscreenTarget:function(){var v,m;!this._createdFullscreenTarget||(v=this.fullscreenTarget)&&v.parentNode&&((m=v.parentNode).insertBefore(this.canvas,v),m.removeChild(v))},stopFullscreen:function(){var v=this.fullscreen;if(!v.available)return this.emit(l.FULLSCREEN_UNSUPPORTED),!1;v.active&&document[v.cancel](),this.removeFullscreenTarget(),this.getParentBounds(),this.emit(l.LEAVE_FULLSCREEN),this.refresh()},toggleFullscreen:function(v){this.fullscreen.active?this.stopFullscreen():this.startFullscreen(v)},startListeners:function(){var v=this,m=this.listeners;m.orientationChange=function(){v.updateBounds(),v._checkOrientation=!0,v.dirty=!0},m.windowResize=function(){v.updateBounds(),v.dirty=!0},window.addEventListener("orientationchange",m.orientationChange,!1),window.addEventListener("resize",m.windowResize,!1),this.fullscreen.available&&(m.fullScreenChange=function(T){return v.onFullScreenChange(T)},m.fullScreenError=function(T){return v.onFullScreenError(T)},["webkit","moz",""].forEach(function(T){document.addEventListener(T+"fullscreenchange",m.fullScreenChange,!1),document.addEventListener(T+"fullscreenerror",m.fullScreenError,!1)}),document.addEventListener("MSFullscreenChange",m.fullScreenChange,!1),document.addEventListener("MSFullscreenError",m.fullScreenError,!1))},onFullScreenChange:function(){document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement?this.fullscreenSuccessHandler():this.stopFullscreen()},onFullScreenError:function(){this.removeFullscreenTarget()},step:function(v,m){this.parent&&(this._lastCheck+=m,(this.dirty||this._lastCheck>this.resizeInterval)&&(this.getParentBounds()&&this.refresh(),this.dirty=!1,this._lastCheck=0))},stopListeners:function(){var v=this.listeners;window.removeEventListener("orientationchange",v.orientationChange,!1),window.removeEventListener("resize",v.windowResize,!1),["webkit","moz",""].forEach(function(m){document.removeEventListener(m+"fullscreenchange",v.fullScreenChange,!1),document.removeEventListener(m+"fullscreenerror",v.fullScreenError,!1)}),document.removeEventListener("MSFullscreenChange",v.fullScreenChange,!1),document.removeEventListener("MSFullscreenError",v.fullScreenError,!1)},destroy:function(){this.removeAllListeners(),this.stopListeners(),this.game=null,this.canvas=null,this.canvasBounds=null,this.parent=null,this.fullscreenTarget=null,this.parentSize.destroy(),this.gameSize.destroy(),this.baseSize.destroy(),this.displaySize.destroy()},isFullscreen:{get:function(){return this.fullscreen.active}},width:{get:function(){return this.gameSize.width}},height:{get:function(){return this.gameSize.height}},isPortrait:{get:function(){return this.orientation===h.ORIENTATION.PORTRAIT}},isLandscape:{get:function(){return this.orientation===h.ORIENTATION.LANDSCAPE}},isGamePortrait:{get:function(){return this.height>this.width}},isGameLandscape:{get:function(){return this.width>this.height}}});g.exports=p},function(g,b,t){var h=t(18),n=t(0),s=t(76),l=t(3),e=new n({initialize:function(r,o,a,i){void 0===r&&(r=0),void 0===o&&(o=r),void 0===a&&(a=0),void 0===i&&(i=null),this._width=r,this._height=o,this._parent=i,this.aspectMode=a,this.aspectRatio=0===o?1:r/o,this.minWidth=0,this.minHeight=0,this.maxWidth=Number.MAX_VALUE,this.maxHeight=Number.MAX_VALUE,this.snapTo=new l},setAspectMode:function(r){return void 0===r&&(r=0),this.aspectMode=r,this.setSize(this._width,this._height)},setSnap:function(r,o){return void 0===r&&(r=0),void 0===o&&(o=r),this.snapTo.set(r,o),this.setSize(this._width,this._height)},setParent:function(r){return this._parent=r,this.setSize(this._width,this._height)},setMin:function(r,o){return void 0===r&&(r=0),void 0===o&&(o=r),this.minWidth=h(r,0,this.maxWidth),this.minHeight=h(o,0,this.maxHeight),this.setSize(this._width,this._height)},setMax:function(r,o){return void 0===r&&(r=Number.MAX_VALUE),void 0===o&&(o=r),this.maxWidth=h(r,this.minWidth,Number.MAX_VALUE),this.maxHeight=h(o,this.minHeight,Number.MAX_VALUE),this.setSize(this._width,this._height)},setSize:function(r,o){switch(void 0===r&&(r=0),void 0===o&&(o=r),this.aspectMode){case e.NONE:this._width=this.getNewWidth(s(r,this.snapTo.x)),this._height=this.getNewHeight(s(o,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height;break;case e.WIDTH_CONTROLS_HEIGHT:this._width=this.getNewWidth(s(r,this.snapTo.x)),this._height=this.getNewHeight(this._width*(1/this.aspectRatio),!1);break;case e.HEIGHT_CONTROLS_WIDTH:this._height=this.getNewHeight(s(o,this.snapTo.y)),this._width=this.getNewWidth(this._height*this.aspectRatio,!1);break;case e.FIT:this.constrain(r,o,!0);break;case e.ENVELOP:this.constrain(r,o,!1)}return this},setAspectRatio:function(r){return this.aspectRatio=r,this.setSize(this._width,this._height)},resize:function(r,o){return this._width=this.getNewWidth(s(r,this.snapTo.x)),this._height=this.getNewHeight(s(o,this.snapTo.y)),this.aspectRatio=0===this._height?1:this._width/this._height,this},getNewWidth:function(r,o){return void 0===o&&(o=!0),r=h(r,this.minWidth,this.maxWidth),o&&this._parent&&r>this._parent.width&&(r=Math.max(this.minWidth,this._parent.width)),r},getNewHeight:function(r,o){return void 0===o&&(o=!0),r=h(r,this.minHeight,this.maxHeight),o&&this._parent&&r>this._parent.height&&(r=Math.max(this.minHeight,this._parent.height)),r},constrain:function(r,o,a){void 0===r&&(r=0),void 0===o&&(o=r),void 0===a&&(a=!0),r=this.getNewWidth(r),o=this.getNewHeight(o);var i=this.snapTo,u=0===o?1:r/o;return a&&this.aspectRatio>u||!a&&this.aspectRatio<u?(o=(r=s(r,i.x))/this.aspectRatio,0<i.y&&(r=(o=s(o,i.y))*this.aspectRatio)):(a&&this.aspectRatio<u||!a&&this.aspectRatio>u)&&(r=(o=s(o,i.y))*this.aspectRatio,0<i.x&&(o=(r=s(r,i.x))*(1/this.aspectRatio))),this._width=r,this._height=o,this},fitTo:function(r,o){return this.constrain(r,o,!0)},envelop:function(r,o){return this.constrain(r,o,!1)},setWidth:function(r){return this.setSize(r,this._height)},setHeight:function(r){return this.setSize(this._width,r)},toString:function(){return"[{ Size (width="+this._width+" height="+this._height+" aspectRatio="+this.aspectRatio+" aspectMode="+this.aspectMode+") }]"},setCSS:function(r){r&&r.style&&(r.style.width=this._width+"px",r.style.height=this._height+"px")},copy:function(r){return r.setAspectMode(this.aspectMode),r.aspectRatio=this.aspectRatio,r.setSize(this.width,this.height)},destroy:function(){this._parent=null,this.snapTo=null},width:{get:function(){return this._width},set:function(r){this.setSize(r,this._height)}},height:{get:function(){return this._height},set:function(r){this.setSize(this._width,r)}}});e.NONE=0,e.WIDTH_CONTROLS_HEIGHT=1,e.HEIGHT_CONTROLS_WIDTH=2,e.FIT=3,e.ENVELOP=4,g.exports=e},function(g,b,t){var h=t(0),n=t(144),s=t(20),l=t(22),e=t(6),r=t(95),o=t(1),a=t(418),i=t(204),u=new h({initialize:function(c,d){if(this.game=c,this.keys={},this.scenes=[],this._pending=[],this._start=[],this._queue=[],this._data={},this.isProcessing=!1,this.isBooted=!1,this.customViewports=0,d){Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++)this._pending.push({key:"default",scene:d[f],autoStart:0===f,data:{}})}c.events.once(l.READY,this.bootQueue,this)},bootQueue:function(){if(!this.isBooted){for(var c=0;c<this._pending.length;c++){var d,f,p,v=(f=this._pending[c]).key;(p=f.scene)instanceof a?d=this.createSceneFromInstance(v,p):"object"==typeof p?d=this.createSceneFromObject(v,p):"function"==typeof p&&(d=this.createSceneFromFunction(v,p)),this.keys[v=d.sys.settings.key]=d,this.scenes.push(d),this._data[v]&&(d.sys.settings.data=this._data[v].data,this._data[v].autoStart&&(f.autoStart=!0)),(f.autoStart||d.sys.settings.active)&&this._start.push(v)}for(this._pending.length=0,this._data={},this.isBooted=!0,c=0;c<this._start.length;c++)this.start(f=this._start[c]);this._start.length=0}},processQueue:function(){var c,d,f=this._pending.length;if(0!==f||0!==this._queue.length){if(f){for(c=0;c<f;c++)this.add((d=this._pending[c]).key,d.scene,d.autoStart,d.data);for(c=0;c<this._start.length;c++)this.start(d=this._start[c]);return this._start.length=0,void(this._pending.length=0)}for(c=0;c<this._queue.length;c++)this[(d=this._queue[c]).op](d.keyA,d.keyB);this._queue.length=0}},add:function(c,d,f,p){return void 0===f&&(f=!1),void 0===p&&(p={}),this.isProcessing||!this.isBooted?(this._pending.push({key:c,scene:d,autoStart:f,data:p}),this.isBooted||(this._data[c]={data:p}),null):(c=this.getKey(c,d),d instanceof a?v=this.createSceneFromInstance(c,d):"object"==typeof d?(d.key=c,v=this.createSceneFromObject(c,d)):"function"==typeof d&&(v=this.createSceneFromFunction(c,d)),v.sys.settings.data=p,this.keys[c=v.sys.settings.key]=v,this.scenes.push(v),(f||v.sys.settings.active)&&(this._pending.length?this._start.push(c):this.start(c)),v);var v},remove:function(c){if(this.isProcessing)this._queue.push({op:"remove",keyA:c,keyB:null});else{var d=this.getScene(c);if(!d||d.sys.isTransitioning())return this;var f=this.scenes.indexOf(d),p=d.sys.settings.key;-1<f&&(delete this.keys[p],this.scenes.splice(f,1),-1<this._start.indexOf(p)&&(f=this._start.indexOf(p),this._start.splice(f,1)),d.sys.destroy())}return this},bootScene:function(c){var d,f=c.sys,p=f.settings;f.sceneUpdate=o,c.init&&(c.init.call(c,p.data),p.status=n.INIT,p.isTransition&&f.events.emit(s.TRANSITION_INIT,p.transitionFrom,p.transitionDuration)),f.load&&(d=f.load).reset(),d&&c.preload?(c.preload.call(c),0===d.list.size?this.create(c):(p.status=n.LOADING,d.once(r.COMPLETE,this.loadComplete,this),d.start())):this.create(c)},loadComplete:function(c){this.create(c.scene)},payloadComplete:function(c){this.bootScene(c.scene)},update:function(c,d){this.processQueue(),this.isProcessing=!0;for(var f=this.scenes.length-1;0<=f;f--){var p=this.scenes[f].sys;p.settings.status>n.START&&p.settings.status<=n.RUNNING&&p.step(c,d)}},render:function(c){for(var d=0;d<this.scenes.length;d++){var f=this.scenes[d].sys;f.settings.visible&&f.settings.status>=n.LOADING&&f.settings.status<n.SLEEPING&&f.render(c)}this.isProcessing=!1},create:function(c){var d=c.sys,f=d.settings;c.create&&(f.status=n.CREATING,c.create.call(c,f.data),f.status===n.DESTROYED)||(f.isTransition&&d.events.emit(s.TRANSITION_START,f.transitionFrom,f.transitionDuration),c.update&&(d.sceneUpdate=c.update),f.status=n.RUNNING,d.events.emit(s.CREATE,c))},createSceneFromFunction:function(c,d){var f=new d;if(f instanceof a){var p=f.sys.settings.key;if(""!==p&&(c=p),this.keys.hasOwnProperty(c))throw new Error("Cannot add a Scene with duplicate key: "+c);return this.createSceneFromInstance(c,f)}return f.sys=new i(f),f.sys.settings.key=c,f.sys.init(this.game),f},createSceneFromInstance:function(c,d){return""===d.sys.settings.key&&(d.sys.settings.key=c),d.sys.init(this.game),d},createSceneFromObject:function(c,d){var f=new a(d),p=f.sys.settings.key;""!==p?c=p:f.sys.settings.key=c,f.sys.init(this.game);for(var v,m=["init","preload","create","update","render"],T=0;T<m.length;T++){var y=e(d,m[T],null);y&&(f[m[T]]=y)}if(d.hasOwnProperty("extend"))for(var x in d.extend)d.extend.hasOwnProperty(x)&&(v=d.extend[x],"data"===x&&f.hasOwnProperty("data")&&"object"==typeof v?f.data.merge(v):"sys"!==x&&(f[x]=v));return f},getKey:function(c,d){if(c=c||"default","function"==typeof d)return c;if(d instanceof a?c=d.sys.settings.key:"object"==typeof d&&d.hasOwnProperty("key")&&(c=d.key),this.keys.hasOwnProperty(c))throw new Error("Cannot add a Scene with duplicate key: "+c);return c},getScenes:function(c,d){void 0===c&&(c=!0),void 0===d&&(d=!1);for(var f=[],p=this.scenes,v=0;v<p.length;v++){var m=p[v];m&&(!c||c&&m.sys.isActive())&&f.push(m)}return d?f.reverse():f},getScene:function(c){if("string"==typeof c){if(this.keys[c])return this.keys[c]}else for(var d=0;d<this.scenes.length;d++)if(c===this.scenes[d])return c;return null},isActive:function(c){var d=this.getScene(c);return d?d.sys.isActive():null},isPaused:function(c){var d=this.getScene(c);return d?d.sys.isPaused():null},isVisible:function(c){var d=this.getScene(c);return d?d.sys.isVisible():null},isSleeping:function(c){var d=this.getScene(c);return d?d.sys.isSleeping():null},pause:function(c,d){var f=this.getScene(c);return f&&f.sys.pause(d),this},resume:function(c,d){var f=this.getScene(c);return f&&f.sys.resume(d),this},sleep:function(c,d){var f=this.getScene(c);return f&&!f.sys.isTransitioning()&&f.sys.sleep(d),this},wake:function(c,d){var f=this.getScene(c);return f&&f.sys.wake(d),this},run:function(c,d){var f=this.getScene(c);if(!f){for(var p=0;p<this._pending.length;p++)if(this._pending[p].key===c){this.queueOp("start",c,d);break}return this}f.sys.isSleeping()?f.sys.wake(d):f.sys.isPaused()?f.sys.resume(d):this.start(c,d)},start:function(c,d){if(!this.isBooted)return this._data[c]={autoStart:!0,data:d},this;var f=this.getScene(c);if(f){var p,v=f.sys;if(v.isActive()||v.isPaused())v.shutdown(),v.sceneUpdate=o,v.start(d);else if(v.sceneUpdate=o,v.start(d),v.load&&(p=v.load),p&&v.settings.hasOwnProperty("pack")&&(p.reset(),p.addPack({payload:v.settings.pack})))return v.settings.status=n.LOADING,p.once(r.COMPLETE,this.payloadComplete,this),p.start(),this;this.bootScene(f)}return this},stop:function(c,d){var f=this.getScene(c);return f&&!f.sys.isTransitioning()&&f.sys.shutdown(d),this},switch:function(c,d){var f=this.getScene(c),p=this.getScene(d);return f&&p&&f!==p&&(this.sleep(c),this.isSleeping(d)?this.wake(d):this.start(d)),this},getAt:function(c){return this.scenes[c]},getIndex:function(c){var d=this.getScene(c);return this.scenes.indexOf(d)},bringToTop:function(c){var d,f;return this.isProcessing?this._queue.push({op:"bringToTop",keyA:c,keyB:null}):-1!==(d=this.getIndex(c))&&d<this.scenes.length&&(f=this.getScene(c),this.scenes.splice(d,1),this.scenes.push(f)),this},sendToBack:function(c){var d,f;return this.isProcessing?this._queue.push({op:"sendToBack",keyA:c,keyB:null}):-1!==(d=this.getIndex(c))&&0<d&&(f=this.getScene(c),this.scenes.splice(d,1),this.scenes.unshift(f)),this},moveDown:function(c){var d,f,p,v;return this.isProcessing?this._queue.push({op:"moveDown",keyA:c,keyB:null}):0<(d=this.getIndex(c))&&(f=d-1,p=this.getScene(c),v=this.getAt(f),this.scenes[d]=v,this.scenes[f]=p),this},moveUp:function(c){var d,f,p,v;return this.isProcessing?this._queue.push({op:"moveUp",keyA:c,keyB:null}):(d=this.getIndex(c))<this.scenes.length-1&&(f=d+1,p=this.getScene(c),v=this.getAt(f),this.scenes[d]=v,this.scenes[f]=p),this},moveAbove:function(c,d){return c===d||(this.isProcessing?this._queue.push({op:"moveAbove",keyA:c,keyB:d}):(f=this.getIndex(c),p=this.getIndex(d),-1!==f&&-1!==p&&(v=this.getAt(p),this.scenes.splice(p,1),this.scenes.splice(f+1,0,v)))),this;var f,p,v},moveBelow:function(c,d){return c===d||(this.isProcessing?this._queue.push({op:"moveBelow",keyA:c,keyB:d}):(f=this.getIndex(c),p=this.getIndex(d),-1!==f&&-1!==p&&(v=this.getAt(p),this.scenes.splice(p,1),0===f?this.scenes.unshift(v):this.scenes.splice(f,0,v)))),this;var f,p,v},queueOp:function(c,d,f){return this._queue.push({op:c,keyA:d,keyB:f}),this},swapPosition:function(c,d){return c===d||(this.isProcessing?this._queue.push({op:"swapPosition",keyA:c,keyB:d}):(f=this.getIndex(c))!==(p=this.getIndex(d))&&-1!==f&&-1!==p&&(v=this.getAt(f),this.scenes[f]=this.scenes[p],this.scenes[p]=v)),this;var f,p,v},dump:function(){for(var c=[],d=["pending","init","start","loading","creating","running","paused","sleeping","shutdown","destroyed"],f=0;f<this.scenes.length;f++){var p=this.scenes[f].sys,v=!p.settings.visible||p.settings.status!==n.RUNNING&&p.settings.status!==n.PAUSED?"[-] ":"[*] ";c.push(v+=p.settings.key+" ("+d[p.settings.status]+")")}console.log(c.join("\n"))},destroy:function(){for(var c=0;c<this.scenes.length;c++)this.scenes[c].sys.destroy();this.update=o,this.scenes=[],this._pending=[],this._start=[],this._queue=[],this.game=null}});g.exports=u},function(g,b,t){var h=t(0),n=t(204),s=new h({initialize:function(l){this.sys=new n(this,l)},update:function(){}});g.exports=s},function(g,b,t){var h=t(2),n=t(205);g.exports=function(s){var l=s.game.config.defaultPhysicsSystem,e=h(s.settings,"physics",!1);if(l||e){var r=[];if(l&&r.push(n(l+"Physics")),e)for(var o in e)o=n(o.concat("Physics")),-1===r.indexOf(o)&&r.push(o);return r}}},function(g,b,t){var h=t(2);g.exports=function(n){var s=n.plugins.getDefaultScenePlugins(),l=h(n.settings,"plugins",!1);return Array.isArray(l)?l:s||[]}},function(g,b,t){var h=t(144),n=t(6),s=t(127),l=t(978);g.exports={create:function(r){return"string"==typeof r?r={key:r}:void 0===r&&(r={}),{status:h.PENDING,key:n(r,"key",""),active:n(r,"active",!1),visible:n(r,"visible",!0),isBooted:!1,isTransition:!1,transitionFrom:null,transitionDuration:0,transitionAllowInput:!0,data:{},pack:n(r,"pack",!1),cameras:n(r,"cameras",null),map:n(r,"map",s(l,n(r,"mapAdd",{}))),physics:n(r,"physics",{}),loader:n(r,"loader",{}),plugins:n(r,"plugins",!1),input:n(r,"input",{})}}}},function(g,b,t){var h=t(31),n=t(423),s=t(0),l=t(38),e=t(33),r=t(9),o=t(106),a=t(22),i=t(388),u=t(6),c=t(425),d=t(206),f=new s({Extends:r,initialize:function(p){r.call(this),this.game=p,this.name="TextureManager",this.list={},this._tempCanvas=h.create2D(this,1,1),this._tempContext=this._tempCanvas.getContext("2d"),this._pending=0,p.events.once(a.BOOT,this.boot,this)},boot:function(){this._pending=3,this.on(o.LOAD,this.updatePending,this),this.on(o.ERROR,this.updatePending,this);var p=this.game.config;this.addBase64("__DEFAULT",p.defaultImage),this.addBase64("__MISSING",p.missingImage),this.addBase64("__WHITE",p.whiteImage),this.game.events.once(a.DESTROY,this.destroy,this)},updatePending:function(){this._pending--,0===this._pending&&(this.off(o.LOAD),this.off(o.ERROR),this.emit(o.READY))},checkKey:function(p){return!this.exists(p)||(console.error("Texture key already in use: "+p),!1)},remove:function(p){if("string"==typeof p){if(!this.exists(p))return console.warn("No texture found matching key: "+p),this;p=this.get(p)}return this.list.hasOwnProperty(p.key)&&(p.destroy(),this.emit(o.REMOVE,p.key)),this},removeKey:function(p){return this.list.hasOwnProperty(p)&&delete this.list[p],this},addBase64:function(p,v){var m,T;return this.checkKey(p)&&(m=this,(T=new Image).onerror=function(){m.emit(o.ERROR,p)},T.onload=function(){var y=m.create(p,T);c.Image(y,0),m.emit(o.ADD,p,y),m.emit(o.LOAD,p,y)},T.src=v),this},getBase64:function(p,v,m,T){void 0===m&&(m="image/png"),void 0===T&&(T=.92);var y,x,w="",E=this.getFrame(p,v);return E&&(E.source.isRenderTexture||E.source.isGLTexture)?console.warn("Cannot getBase64 from WebGL Texture"):E&&((x=h.create2D(this,(y=E.canvasData).width,y.height)).getContext("2d").drawImage(E.source.image,y.x,y.y,y.width,y.height,0,0,y.width,y.height),w=x.toDataURL(m,T),h.remove(x)),w},addImage:function(p,v,m){var T=null;return this.checkKey(p)&&(T=this.create(p,v),c.Image(T,0),m&&T.setDataSource(m),this.emit(o.ADD,p,T)),T},addGLTexture:function(p,v,m,T){var y=null;return this.checkKey(p)&&(void 0===m&&(m=v.width),void 0===T&&(T=v.height),(y=this.create(p,v,m,T)).add("__BASE",0,0,0,m,T),this.emit(o.ADD,p,y)),y},addRenderTexture:function(p,v){var m=null;return this.checkKey(p)&&((m=this.create(p,v)).add("__BASE",0,0,0,v.width,v.height),this.emit(o.ADD,p,m)),m},generate:function(p,v){if(this.checkKey(p)){var m=h.create(this,1,1);return v.canvas=m,i(v),this.addCanvas(p,m)}return null},createCanvas:function(p,v,m){if(void 0===v&&(v=256),void 0===m&&(m=256),this.checkKey(p)){var T=h.create(this,v,m,e.CANVAS,!0);return this.addCanvas(p,T)}return null},addCanvas:function(p,v,m){void 0===m&&(m=!1);var T=null;return m?T=new n(this,p,v,v.width,v.height):this.checkKey(p)&&(T=new n(this,p,v,v.width,v.height),this.list[p]=T,this.emit(o.ADD,p,T)),T},addAtlas:function(p,v,m,T){return Array.isArray(m.textures)||Array.isArray(m.frames)?this.addAtlasJSONArray(p,v,m,T):this.addAtlasJSONHash(p,v,m,T)},addAtlasJSONArray:function(p,v,m,T){var y=null;if(this.checkKey(p)){if(y=this.create(p,v),Array.isArray(m))for(var x=1===m.length,w=0;w<y.source.length;w++)c.JSONArray(y,w,x?m[0]:m[w]);else c.JSONArray(y,0,m);T&&y.setDataSource(T),this.emit(o.ADD,p,y)}return y},addAtlasJSONHash:function(p,v,m,T){var y=null;if(this.checkKey(p)){if(y=this.create(p,v),Array.isArray(m))for(var x=0;x<m.length;x++)c.JSONHash(y,x,m[x]);else c.JSONHash(y,0,m);T&&y.setDataSource(T),this.emit(o.ADD,p,y)}return y},addAtlasXML:function(p,v,m,T){var y=null;return this.checkKey(p)&&(y=this.create(p,v),c.AtlasXML(y,0,m),T&&y.setDataSource(T),this.emit(o.ADD,p,y)),y},addUnityAtlas:function(p,v,m,T){var y=null;return this.checkKey(p)&&(y=this.create(p,v),c.UnityYAML(y,0,m),T&&y.setDataSource(T),this.emit(o.ADD,p,y)),y},addSpriteSheet:function(p,v,m){var T,x=null;return this.checkKey(p)&&(T=(x=this.create(p,v)).source[0].width,c.SpriteSheet(x,0,0,0,T,x.source[0].height,m),this.emit(o.ADD,p,x)),x},addSpriteSheetFromAtlas:function(p,v){if(!this.checkKey(p))return null;var m=u(v,"atlas",null),T=u(v,"frame",null);if(m&&T){var y=this.get(m).get(T);if(y){var x=this.create(p,y.source.image);return y.trimmed?c.SpriteSheetFromAtlas(x,y,v):c.SpriteSheet(x,0,y.cutX,y.cutY,y.cutWidth,y.cutHeight,v),this.emit(o.ADD,p,x),x}}},create:function(p,v,m,T){var y=null;return this.checkKey(p)&&(y=new d(this,p,v,m,T),this.list[p]=y),y},exists:function(p){return this.list.hasOwnProperty(p)},get:function(p){return void 0===p&&(p="__DEFAULT"),this.list[p]?this.list[p]:p instanceof d?p:this.list.__MISSING},cloneFrame:function(p,v){if(this.list[p])return this.list[p].get(v).clone()},getFrame:function(p,v){if(this.list[p])return this.list[p].get(v)},getTextureKeys:function(){var p=[];for(var v in this.list)"__DEFAULT"!==v&&"__MISSING"!==v&&p.push(v);return p},getPixel:function(p,v,m,T){var y=this.getFrame(m,T);if(y){p-=y.x,v-=y.y;var x=y.data.cut;if(v+=x.y,(p+=x.x)>=x.x&&p<x.r&&v>=x.y&&v<x.b){var w=this._tempContext;w.clearRect(0,0,1,1),w.drawImage(y.source.image,p,v,1,1,0,0,1,1);var E=w.getImageData(0,0,1,1);return new l(E.data[0],E.data[1],E.data[2],E.data[3])}}return null},getPixelAlpha:function(p,v,m,T){var y=this.getFrame(m,T);if(y){p-=y.x,v-=y.y;var x=y.data.cut;if(v+=x.y,(p+=x.x)>=x.x&&p<x.r&&v>=x.y&&v<x.b){var w=this._tempContext;return w.clearRect(0,0,1,1),w.drawImage(y.source.image,p,v,1,1,0,0,1,1),w.getImageData(0,0,1,1).data[3]}}return null},setTexture:function(p,v,m){return this.list[v]&&(p.texture=this.list[v],p.frame=p.texture.get(m)),p},renameTexture:function(p,v){var m=this.get(p);return!(!m||p===v||(m.key=v,this.list[v]=m,delete this.list[p],0))},each:function(p,v){for(var m=[null],T=1;T<arguments.length;T++)m.push(arguments[T]);for(var y in this.list)m[0]=this.list[y],p.apply(v,m)},destroy:function(){for(var p in this.list)this.list[p].destroy();this.list={},this.game=null,h.remove(this._tempCanvas)}});g.exports=f},function(g,b,t){var h=t(0),n=t(18),s=t(38),l=t(33),e=t(138),r=t(206),o=new h({Extends:r,initialize:function(a,i,u,c,d){r.call(this,a,i,u,c,d),this.add("__BASE",0,0,0,c,d),this._source=this.frames.__BASE.source,this.canvas=this._source.image,this.context=this.canvas.getContext("2d"),this.width=c,this.height=d,this.imageData=this.context.getImageData(0,0,c,d),this.data=null,this.imageData&&(this.data=this.imageData.data),this.pixels=null,this.data&&(this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data)},update:function(){return this.imageData=this.context.getImageData(0,0,this.width,this.height),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.manager.game.config.renderType===l.WEBGL&&this.refresh(),this},draw:function(a,i,u){return this.context.drawImage(u,a,i),this.update()},drawFrame:function(a,i,u,c){void 0===u&&(u=0),void 0===c&&(c=0);var d=this.manager.getFrame(a,i);if(d){var f=d.canvasData,p=d.cutWidth,v=d.cutHeight,m=d.source.resolution;return this.context.drawImage(d.source.image,f.x,f.y,p,v,u,c,p/m,v/m),this.update()}return this},setPixel:function(a,i,u,c,d,f){var p;return void 0===f&&(f=255),a=Math.abs(Math.floor(a)),i=Math.abs(Math.floor(i)),-1<this.getIndex(a,i)&&((p=this.context.getImageData(a,i,1,1)).data[0]=u,p.data[1]=c,p.data[2]=d,p.data[3]=f,this.context.putImageData(p,a,i)),this},putData:function(a,i,u,c,d,f,p){return void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=a.width),void 0===p&&(p=a.height),this.context.putImageData(a,i,u,c,d,f,p),this},getData:function(a,i,u,c){return a=n(Math.floor(a),0,this.width-1),i=n(Math.floor(i),0,this.height-1),u=n(u,1,this.width-a),c=n(c,1,this.height-i),this.context.getImageData(a,i,u,c)},getPixel:function(a,i,u){u=u||new s;var c,d,m=this.getIndex(a,i);return-1<m&&(d=(c=this.data)[m+0],u.setTo(d,c[m+1],c[m+2],c[m+3])),u},getPixels:function(a,i,u,c){void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=this.width),void 0===c&&(c=u),a=Math.abs(Math.round(a)),i=Math.abs(Math.round(i));for(var d=n(a,0,this.width),f=n(a+u,0,this.width),p=n(i,0,this.height),v=n(i+c,0,this.height),m=new s,T=[],y=p;y<v;y++){for(var x=[],w=d;w<f;w++)m=this.getPixel(w,y,m),x.push({x:w,y,color:m.color,alpha:m.alphaGL});T.push(x)}return T},getIndex:function(a,i){return a=Math.abs(Math.round(a)),i=Math.abs(Math.round(i)),a<this.width&&i<this.height?4*(a+i*this.width):-1},refresh:function(){return this._source.update(),this},getCanvas:function(){return this.canvas},getContext:function(){return this.context},clear:function(a,i,u,c){return void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=this.width),void 0===c&&(c=this.height),this.context.clearRect(a,i,u,c),this.update()},setSize:function(a,i){return void 0===i&&(i=a),a===this.width&&i===this.height||(this.canvas.width=a,this.canvas.height=i,this._source.width=a,this._source.height=i,this._source.isPowerOf2=e(a,i),this.frames.__BASE.setSize(a,i,0,0),this.width=a,this.height=i,this.refresh()),this},destroy:function(){r.prototype.destroy.call(this),this._source=null,this.canvas=null,this.context=null,this.imageData=null,this.data=null,this.pixels=null,this.buffer=null}});g.exports=o},function(g,b,t){var h=t(31),n=t(0),s=t(138),l=t(168),e=new n({initialize:function(r,o,a,i,u){void 0===u&&(u=!1);var c=r.manager.game;this.renderer=c.renderer,this.texture=r,this.source=o,this.image=o,this.compressionAlgorithm=null,this.resolution=1,this.width=a||o.naturalWidth||o.videoWidth||o.width||0,this.height=i||o.naturalHeight||o.videoHeight||o.height||0,this.scaleMode=l.DEFAULT,this.isCanvas=o instanceof HTMLCanvasElement,this.isVideo=window.hasOwnProperty("HTMLVideoElement")&&o instanceof HTMLVideoElement,this.isRenderTexture="RenderTexture"===o.type,this.isGLTexture=window.hasOwnProperty("WebGLTexture")&&o instanceof WebGLTexture,this.isPowerOf2=s(this.width,this.height),this.glTexture=null,this.glIndex=0,this.glIndexCounter=-1,this.flipY=u,this.init(c)},init:function(r){var o=this.renderer;o&&(o.gl?this.isCanvas?this.glTexture=o.createCanvasTexture(this.image,!1,this.flipY):this.isVideo?this.glTexture=o.createVideoTexture(this.image,!1,this.flipY):this.isRenderTexture?(this.image=this.source.canvas,this.glTexture=o.createTextureFromSource(null,this.width,this.height,this.scaleMode)):this.glTexture=this.isGLTexture?this.source:o.createTextureFromSource(this.image,this.width,this.height,this.scaleMode):this.isRenderTexture&&(this.image=this.source.canvas)),r.config.antialias||this.setFilter(1)},setFilter:function(r){this.renderer.gl&&this.renderer.setTextureFilter(this.glTexture,r),this.scaleMode=r},setFlipY:function(r){return void 0===r&&(r=!0),this.flipY=r,this},update:function(){var r=this.renderer.gl;r&&this.isCanvas?this.glTexture=this.renderer.updateCanvasTexture(this.image,this.glTexture,this.flipY):r&&this.isVideo&&(this.glTexture=this.renderer.updateVideoTexture(this.image,this.glTexture,this.flipY))},destroy:function(){this.glTexture&&this.renderer.deleteTexture(this.glTexture,!0),this.isCanvas&&h.remove(this.image),this.renderer=null,this.texture=null,this.source=null,this.image=null,this.glTexture=null}});g.exports=e},function(g,b,t){g.exports={AtlasXML:t(979),Canvas:t(980),Image:t(981),JSONArray:t(982),JSONHash:t(983),SpriteSheet:t(984),SpriteSheetFromAtlas:t(985),UnityYAML:t(986)}},function(g,b,t){var h=t(427),n=t(430),s=t(432);g.exports={create:function(e){var r=e.config.audio,o=e.device.audio;return new(r.noAudio||!o.webAudio&&!o.audioData?n:o.webAudio&&!r.disableWebAudio?s:h)(e)}}},function(g,b,t){var h=t(145),n=t(0),s=t(70),l=t(429),e=new n({Extends:h,initialize:function(r){this.override=!0,this.audioPlayDelay=.1,this.loopEndOffset=.05,this.onBlurPausedSounds=[],this.locked="ontouchstart"in window,this.lockedActionsQueue=this.locked?[]:null,this._mute=!1,this._volume=1,h.call(this,r)},add:function(r,o){var a=new l(this,r,o);return this.sounds.push(a),a},unlock:function(){this.locked=!1;var r,o,a,i=this;this.game.cache.audio.entries.each(function(u,c){for(var d=0;d<c.length;d++)if("true"===c[d].dataset.locked)return!(i.locked=!0);return!0}),this.locked&&(r=!1,o=function(){r=!0},a=function(){var u,c;r?r=!1:(document.body.removeEventListener("touchmove",o),document.body.removeEventListener("touchend",a),u=[],i.game.cache.audio.entries.each(function(d,f){for(var p=0;p<f.length;p++){var v=f[p];"true"===v.dataset.locked&&u.push(v)}return!0}),0!==u.length&&((c=u[u.length-1]).oncanplaythrough=function(){c.oncanplaythrough=null,u.forEach(function(d){d.dataset.locked="false"}),i.unlocked=!0},u.forEach(function(d){d.load()})))},this.once(s.UNLOCKED,function(){for(this.forEachActiveSound(function(c){null===c.currentMarker&&0===c.duration&&(c.duration=c.tags[0].duration),c.totalDuration=c.tags[0].duration});this.lockedActionsQueue.length;){var u=this.lockedActionsQueue.shift();u.sound[u.prop].apply?u.sound[u.prop].apply(u.sound,u.value||[]):u.sound[u.prop]=u.value}},this),document.body.addEventListener("touchmove",o,!1),document.body.addEventListener("touchend",a,!1))},onBlur:function(){this.forEachActiveSound(function(r){r.isPlaying&&(this.onBlurPausedSounds.push(r),r.onBlur())})},onFocus:function(){this.onBlurPausedSounds.forEach(function(r){r.onFocus()}),this.onBlurPausedSounds.length=0},destroy:function(){h.prototype.destroy.call(this),this.onBlurPausedSounds.length=0,this.onBlurPausedSounds=null},isLocked:function(r,o,a){return"true"===r.tags[0].dataset.locked&&(this.lockedActionsQueue.push({sound:r,prop:o,value:a}),!0)},setMute:function(r){return this.mute=r,this},mute:{get:function(){return this._mute},set:function(r){this._mute=r,this.forEachActiveSound(function(o){o.updateMute()}),this.emit(s.GLOBAL_MUTE,this,r)}},setVolume:function(r){return this.volume=r,this},volume:{get:function(){return this._volume},set:function(r){this._volume=r,this.forEachActiveSound(function(o){o.updateVolume()}),this.emit(s.GLOBAL_VOLUME,this,r)}}});g.exports=e},function(g,b,t){var h=t(78);g.exports=function(n,s,l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=n.length),h(n,e,r))for(var o=e;o<r;o++){var a=n[o];if(!s||s&&void 0===l&&a.hasOwnProperty(s)||s&&void 0!==l&&a[s]===l)return a}return null}},function(g,b,t){var h=t(146),n=t(0),s=t(70),l=t(18),e=new n({Extends:h,initialize:function(r,o,a){if(void 0===a&&(a={}),this.tags=r.game.cache.audio.get(o),!this.tags)throw new Error('There is no audio asset with key "'+o+'" in the audio cache');this.audio=null,this.startTime=0,this.previousTime=0,this.duration=this.tags[0].duration,this.totalDuration=this.tags[0].duration,h.call(this,r,o,a)},play:function(r,o){return!(this.manager.isLocked(this,"play",[r,o])||!h.prototype.play.call(this,r,o)||!this.pickAndPlayAudioTag()||(this.emit(s.PLAY,this),0))},pause:function(){return!(this.manager.isLocked(this,"pause")||0<this.startTime||!h.prototype.pause.call(this)||(this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.stopAndReleaseAudioTag(),this.emit(s.PAUSE,this),0))},resume:function(){return!(this.manager.isLocked(this,"resume")||0<this.startTime||!h.prototype.resume.call(this)||!this.pickAndPlayAudioTag()||(this.emit(s.RESUME,this),0))},stop:function(){return!this.manager.isLocked(this,"stop")&&!!h.prototype.stop.call(this)&&(this.stopAndReleaseAudioTag(),this.emit(s.STOP,this),!0)},pickAndPlayAudioTag:function(){if(!this.pickAudioTag())return this.reset(),!1;var o=this.currentConfig.delay,a=(this.currentMarker?this.currentMarker.start:0)+this.currentConfig.seek;return this.previousTime=a,this.audio.currentTime=a,this.applyConfig(),0===o?(this.startTime=0,this.audio.paused&&this.playCatchPromise()):(this.startTime=window.performance.now()+1e3*o,this.audio.paused||this.audio.pause()),this.resetConfig(),!0},pickAudioTag:function(){if(this.audio)return!0;for(var r=0;r<this.tags.length;r++){var o=this.tags[r];if("false"===o.dataset.used)return o.dataset.used="true",this.audio=o,!0}if(!this.manager.override)return!1;var a=[];this.manager.forEachActiveSound(function(u){u.key===this.key&&u.audio&&a.push(u)},this),a.sort(function(u,c){return u.loop===c.loop?c.seek/c.duration-u.seek/u.duration:u.loop?1:-1});var i=a[0];return this.audio=i.audio,i.reset(),i.audio=null,i.startTime=0,!(i.previousTime=0)},playCatchPromise:function(){var r=this.audio.play();r&&r.catch(function(o){console.warn(o)})},stopAndReleaseAudioTag:function(){this.startTime=0,this.previousTime=0,this.audio&&(this.audio.pause(),this.audio.dataset.used="false",this.audio=null)},reset:function(){h.prototype.stop.call(this)},onBlur:function(){this.isPlaying=!1,this.isPaused=!0,this.currentConfig.seek=this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0),this.currentConfig.delay=Math.max(0,(this.startTime-window.performance.now())/1e3),this.stopAndReleaseAudioTag()},onFocus:function(){this.isPlaying=!0,this.isPaused=!1,this.pickAndPlayAudioTag()},update:function(r){if(this.isPlaying)if(0<this.startTime)this.startTime<r-this.manager.audioPlayDelay&&(this.audio.currentTime+=Math.max(0,r-this.startTime)/1e3,this.startTime=0,this.previousTime=this.audio.currentTime,this.playCatchPromise());else{var o=this.currentMarker?this.currentMarker.start:0,a=o+this.duration,i=this.audio.currentTime;if(this.currentConfig.loop)i>=a-this.manager.loopEndOffset?(this.audio.currentTime=o+Math.max(0,i-a),i=this.audio.currentTime):i<o&&(this.audio.currentTime+=o,i=this.audio.currentTime),i<this.previousTime&&this.emit(s.LOOPED,this);else if(a<=i)return this.reset(),this.stopAndReleaseAudioTag(),void this.emit(s.COMPLETE,this);this.previousTime=i}},destroy:function(){h.prototype.destroy.call(this),this.tags=null,this.audio&&this.stopAndReleaseAudioTag()},updateMute:function(){this.audio&&(this.audio.muted=this.currentConfig.mute||this.manager.mute)},updateVolume:function(){this.audio&&(this.audio.volume=l(this.currentConfig.volume*this.manager.volume,0,1))},calculateRate:function(){h.prototype.calculateRate.call(this),this.audio&&(this.audio.playbackRate=this.totalRate)},mute:{get:function(){return this.currentConfig.mute},set:function(r){this.currentConfig.mute=r,this.manager.isLocked(this,"mute",r)||(this.updateMute(),this.emit(s.MUTE,this,r))}},setMute:function(r){return this.mute=r,this},volume:{get:function(){return this.currentConfig.volume},set:function(r){this.currentConfig.volume=r,this.manager.isLocked(this,"volume",r)||(this.updateVolume(),this.emit(s.VOLUME,this,r))}},setVolume:function(r){return this.volume=r,this},rate:{get:function(){return this.currentConfig.rate},set:function(r){this.currentConfig.rate=r,this.manager.isLocked(this,s.RATE,r)||(this.calculateRate(),this.emit(s.RATE,this,r))}},setRate:function(r){return this.rate=r,this},detune:{get:function(){return this.currentConfig.detune},set:function(r){this.currentConfig.detune=r,this.manager.isLocked(this,s.DETUNE,r)||(this.calculateRate(),this.emit(s.DETUNE,this,r))}},setDetune:function(r){return this.detune=r,this},seek:{get:function(){return this.isPlaying?this.audio.currentTime-(this.currentMarker?this.currentMarker.start:0):this.isPaused?this.currentConfig.seek:0},set:function(r){this.manager.isLocked(this,"seek",r)||0<this.startTime||(this.isPlaying||this.isPaused)&&(r=Math.min(Math.max(0,r),this.duration),this.isPlaying?(this.previousTime=r,this.audio.currentTime=r):this.isPaused&&(this.currentConfig.seek=r),this.emit(s.SEEK,this,r))}},setSeek:function(r){return this.seek=r,this},loop:{get:function(){return this.currentConfig.loop},set:function(r){this.currentConfig.loop=r,this.manager.isLocked(this,"loop",r)||(this.audio&&(this.audio.loop=r),this.emit(s.LOOP,this,r))}},setLoop:function(r){return this.loop=r,this},pan:{get:function(){return this.currentConfig.pan},set:function(r){this.currentConfig.pan=r,this.emit(s.PAN,this,r)}},setPan:function(r){return this.pan=r,this}});g.exports=e},function(g,b,t){var h=t(145),n=t(0),s=t(9),l=t(431),e=t(1),r=new n({Extends:s,initialize:function(o){s.call(this),this.game=o,this.sounds=[],this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.pauseOnBlur=!0,this.locked=!1},add:function(o,a){var i=new l(this,o,a);return this.sounds.push(i),i},addAudioSprite:function(o,a){var i=this.add(o,a);return i.spritemap={},i},play:function(o,a){return!1},playAudioSprite:function(o,a,i){return!1},remove:function(o){return h.prototype.remove.call(this,o)},removeByKey:function(o){return h.prototype.removeByKey.call(this,o)},pauseAll:e,resumeAll:e,stopAll:e,update:e,setRate:e,setDetune:e,setMute:e,setVolume:e,forEachActiveSound:function(o,a){h.prototype.forEachActiveSound.call(this,o,a)},destroy:function(){h.prototype.destroy.call(this)}});g.exports=r},function(g,b,t){function h(){return!1}function n(){return this}var s=t(146),l=t(0),e=t(9),r=t(17),o=new l({Extends:e,initialize:function(a,i,u){void 0===u&&(u={}),e.call(this),this.manager=a,this.key=i,this.isPlaying=!1,this.isPaused=!1,this.totalRate=1,this.duration=0,this.totalDuration=0,this.config=r({mute:!1,volume:1,rate:1,detune:0,seek:0,loop:!1,delay:0,pan:0},u),this.currentConfig=this.config,this.mute=!1,this.volume=1,this.rate=1,this.detune=0,this.seek=0,this.loop=!1,this.pan=0,this.markers={},this.currentMarker=null,this.pendingRemove=!1},addMarker:h,updateMarker:h,removeMarker:function(){return null},play:h,pause:h,resume:h,stop:h,destroy:function(){s.prototype.destroy.call(this)},setMute:n,setVolume:n,setRate:n,setDetune:n,setSeek:n,setLoop:n,setPan:n});g.exports=o},function(g,b,t){var h=t(433),n=t(145),s=t(0),l=t(70),e=t(22),r=t(434),o=new s({Extends:n,initialize:function(a){this.context=this.createAudioContext(a),this.masterMuteNode=this.context.createGain(),this.masterVolumeNode=this.context.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(this.context.destination),this.destination=this.masterMuteNode,this.locked="suspended"===this.context.state&&("ontouchstart"in window||"onclick"in window),n.call(this,a),this.locked&&a.isBooted?this.unlock():a.events.once(e.BOOT,this.unlock,this)},createAudioContext:function(a){var i=a.config.audio;return i.context?(i.context.resume(),i.context):window.hasOwnProperty("AudioContext")?new AudioContext:window.hasOwnProperty("webkitAudioContext")?new window.webkitAudioContext:void 0},setAudioContext:function(a){return this.context&&this.context.close(),this.masterMuteNode&&this.masterMuteNode.disconnect(),this.masterVolumeNode&&this.masterVolumeNode.disconnect(),this.context=a,this.masterMuteNode=a.createGain(),this.masterVolumeNode=a.createGain(),this.masterMuteNode.connect(this.masterVolumeNode),this.masterVolumeNode.connect(a.destination),this.destination=this.masterMuteNode,this},add:function(a,i){var u=new r(this,a,i);return this.sounds.push(u),u},decodeAudio:function(a,i){for(var u=Array.isArray(a)?a:[{key:a,data:i}],c=this.game.cache.audio,d=u.length,f=0;f<u.length;f++){var p=u[f],v=p.key,m=p.data;"string"==typeof m&&(m=h(m));var T=function(x,w){c.add(x,w),this.emit(l.DECODED,x),0==--d&&this.emit(l.DECODED_ALL)}.bind(this,v),y=function(x,w){console.error("Error decoding audio: "+x+" - ",w?w.message:""),0==--d&&this.emit(l.DECODED_ALL)}.bind(this,v);this.context.decodeAudioData(m,T,y)}},unlock:function(){function a(){var c;i.context&&u&&(c=u.removeEventListener,i.context.resume().then(function(){c("touchstart",a),c("touchend",a),c("click",a),c("keydown",a),i.unlocked=!0},function(){c("touchstart",a),c("touchend",a),c("click",a),c("keydown",a)}))}var i=this,u=document.body;u&&(u.addEventListener("touchstart",a,!1),u.addEventListener("touchend",a,!1),u.addEventListener("click",a,!1),u.addEventListener("keydown",a,!1))},onBlur:function(){this.locked||this.context.suspend()},onFocus:function(){var a=this.context;"suspended"!==a.state&&"interrupted"!==a.state||this.locked||a.resume()},update:function(a,i){n.prototype.update.call(this,a,i);var u=this.context;u&&"interrupted"===u.state&&u.resume()},destroy:function(){var a;this.destination=null,this.masterVolumeNode.disconnect(),this.masterVolumeNode=null,this.masterMuteNode.disconnect(),this.masterMuteNode=null,this.game.config.audio.context?this.context.suspend():(a=this).context.close().then(function(){a.context=null}),n.prototype.destroy.call(this)},setMute:function(a){return this.mute=a,this},mute:{get:function(){return 0===this.masterMuteNode.gain.value},set:function(a){this.masterMuteNode.gain.setValueAtTime(a?0:1,0),this.emit(l.GLOBAL_MUTE,this,a)}},setVolume:function(a){return this.volume=a,this},volume:{get:function(){return this.masterVolumeNode.gain.value},set:function(a){this.masterVolumeNode.gain.setValueAtTime(a,0),this.emit(l.GLOBAL_VOLUME,this,a)}}});g.exports=o},function(g,b){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=new Uint8Array(256),n=0;n<t.length;n++)h[t.charCodeAt(n)]=n;g.exports=function(s){var l,e,r,o,a=(s=s.substr(s.indexOf(",")+1)).length,i=.75*a,u=0;"="===s[a-1]&&(i--,"="===s[a-2]&&i--);for(var c=new ArrayBuffer(i),d=new Uint8Array(c),f=0;f<a;f+=4)l=h[s.charCodeAt(f)],e=h[s.charCodeAt(f+1)],r=h[s.charCodeAt(f+2)],o=h[s.charCodeAt(f+3)],d[u++]=l<<2|e>>4,d[u++]=(15&e)<<4|r>>2,d[u++]=(3&r)<<6|63&o;return c}},function(g,b,t){var h=t(146),n=t(0),s=t(70),l=new n({Extends:h,initialize:function(e,r,o){if(void 0===o&&(o={}),this.audioBuffer=e.game.cache.audio.get(r),!this.audioBuffer)throw new Error('Audio key "'+r+'" missing from cache');this.source=null,this.loopSource=null,this.muteNode=e.context.createGain(),this.volumeNode=e.context.createGain(),this.pannerNode=null,this.playTime=0,this.startTime=0,this.loopTime=0,this.rateUpdates=[],this.hasEnded=!1,this.hasLooped=!1,this.muteNode.connect(this.volumeNode),e.context.createStereoPanner?(this.pannerNode=e.context.createStereoPanner(),this.volumeNode.connect(this.pannerNode),this.pannerNode.connect(e.destination)):this.volumeNode.connect(e.destination),this.duration=this.audioBuffer.duration,this.totalDuration=this.audioBuffer.duration,h.call(this,e,r,o)},play:function(e,r){return!!h.prototype.play.call(this,e,r)&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource(),this.emit(s.PLAY,this),!0)},pause:function(){return!(this.manager.context.currentTime<this.startTime||!h.prototype.pause.call(this)||(this.currentConfig.seek=this.getCurrentTime(),this.stopAndRemoveBufferSource(),this.emit(s.PAUSE,this),0))},resume:function(){return!(this.manager.context.currentTime<this.startTime||!h.prototype.resume.call(this)||(this.createAndStartBufferSource(),this.emit(s.RESUME,this),0))},stop:function(){return!!h.prototype.stop.call(this)&&(this.stopAndRemoveBufferSource(),this.emit(s.STOP,this),!0)},createAndStartBufferSource:function(){var e=this.currentConfig.seek,o=this.manager.context.currentTime+this.currentConfig.delay,a=(this.currentMarker?this.currentMarker.start:0)+e,i=this.duration-e;this.playTime=o-e,this.startTime=o,this.source=this.createBufferSource(),this.applyConfig(),this.source.start(Math.max(0,o),Math.max(0,a),Math.max(0,i)),this.resetConfig()},createAndStartLoopBufferSource:function(){var e=this.getLoopTime(),r=this.currentMarker?this.currentMarker.start:0,o=this.duration;this.loopTime=e,this.loopSource=this.createBufferSource(),this.loopSource.playbackRate.setValueAtTime(this.totalRate,0),this.loopSource.start(Math.max(0,e),Math.max(0,r),Math.max(0,o))},createBufferSource:function(){var e=this,r=this.manager.context.createBufferSource();return r.buffer=this.audioBuffer,r.connect(this.muteNode),r.onended=function(o){o.target===e.source&&(e.currentConfig.loop?e.hasLooped=!0:e.hasEnded=!0)},r},stopAndRemoveBufferSource:function(){this.source&&(this.source.stop(),this.source.disconnect(),this.source=null),this.playTime=0,this.startTime=0,this.stopAndRemoveLoopBufferSource()},stopAndRemoveLoopBufferSource:function(){this.loopSource&&(this.loopSource.stop(),this.loopSource.disconnect(),this.loopSource=null),this.loopTime=0},applyConfig:function(){this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:1}),h.prototype.applyConfig.call(this)},update:function(){this.hasEnded?(this.hasEnded=!1,h.prototype.stop.call(this),this.stopAndRemoveBufferSource(),this.emit(s.COMPLETE,this)):this.hasLooped&&(this.hasLooped=!1,this.source=this.loopSource,this.loopSource=null,this.playTime=this.startTime=this.loopTime,this.rateUpdates.length=0,this.rateUpdates.push({time:0,rate:this.totalRate}),this.createAndStartLoopBufferSource(),this.emit(s.LOOPED,this))},destroy:function(){h.prototype.destroy.call(this),this.audioBuffer=null,this.stopAndRemoveBufferSource(),this.muteNode.disconnect(),this.muteNode=null,this.volumeNode.disconnect(),this.volumeNode=null,this.pannerNode&&(this.pannerNode.disconnect(),this.pannerNode=null),this.rateUpdates.length=0,this.rateUpdates=null},calculateRate:function(){h.prototype.calculateRate.call(this);var e=this.manager.context.currentTime;this.source&&"number"==typeof this.totalRate&&this.source.playbackRate.setValueAtTime(this.totalRate,e),this.isPlaying&&(this.rateUpdates.push({time:Math.max(this.startTime,e)-this.playTime,rate:this.totalRate}),this.loopSource&&(this.stopAndRemoveLoopBufferSource(),this.createAndStartLoopBufferSource()))},getCurrentTime:function(){for(var e=0,r=0;r<this.rateUpdates.length;r++)e+=((r<this.rateUpdates.length-1?this.rateUpdates[r+1].time:this.manager.context.currentTime-this.playTime)-this.rateUpdates[r].time)*this.rateUpdates[r].rate;return e},getLoopTime:function(){for(var e=0,r=0;r<this.rateUpdates.length-1;r++)e+=(this.rateUpdates[r+1].time-this.rateUpdates[r].time)*this.rateUpdates[r].rate;var o=this.rateUpdates[this.rateUpdates.length-1];return this.playTime+o.time+(this.duration-e)/o.rate},rate:{get:function(){return this.currentConfig.rate},set:function(e){this.currentConfig.rate=e,this.calculateRate(),this.emit(s.RATE,this,e)}},setRate:function(e){return this.rate=e,this},detune:{get:function(){return this.currentConfig.detune},set:function(e){this.currentConfig.detune=e,this.calculateRate(),this.emit(s.DETUNE,this,e)}},setDetune:function(e){return this.detune=e,this},mute:{get:function(){return 0===this.muteNode.gain.value},set:function(e){this.currentConfig.mute=e,this.muteNode.gain.setValueAtTime(e?0:1,0),this.emit(s.MUTE,this,e)}},setMute:function(e){return this.mute=e,this},volume:{get:function(){return this.volumeNode.gain.value},set:function(e){this.currentConfig.volume=e,this.volumeNode.gain.setValueAtTime(e,0),this.emit(s.VOLUME,this,e)}},setVolume:function(e){return this.volume=e,this},seek:{get:function(){return this.isPlaying?this.manager.context.currentTime<this.startTime?this.startTime-this.playTime:this.getCurrentTime():this.isPaused?this.currentConfig.seek:0},set:function(e){this.manager.context.currentTime<this.startTime||(this.isPlaying||this.isPaused)&&(e=Math.min(Math.max(0,e),this.duration),this.currentConfig.seek=e,this.isPlaying&&(this.stopAndRemoveBufferSource(),this.createAndStartBufferSource()),this.emit(s.SEEK,this,e))}},setSeek:function(e){return this.seek=e,this},loop:{get:function(){return this.currentConfig.loop},set:function(e){this.currentConfig.loop=e,this.isPlaying&&(this.stopAndRemoveLoopBufferSource(),e&&this.createAndStartLoopBufferSource()),this.emit(s.LOOP,this,e)}},setLoop:function(e){return this.loop=e,this},pan:{get:function(){return this.pannerNode?this.pannerNode.pan.value:0},set:function(e){this.currentConfig.pan=e,this.pannerNode&&this.pannerNode.pan.setValueAtTime(e,this.manager.context.currentTime),this.emit(s.PAN,this,e)}},setPan:function(e){return this.pan=e,this}});g.exports=l},function(g,b){g.exports=function(t){for(var h=t.length,n=t[0].length,s=new Array(n),l=0;l<n;l++){s[l]=new Array(h);for(var e=h-1;-1<e;e--)s[l][e]=t[e][l]}return s}},function(g,b){function t(s,l,e){var r=s[l];s[l]=s[e],s[e]=r}function h(s,l){return s<l?-1:l<s?1:0}var n=function(s,l,e,r,o){for(void 0===e&&(e=0),void 0===r&&(r=s.length-1),void 0===o&&(o=h);e<r;){var a,i,u,c,d,f,p;600<r-e&&(a=r-e+1,i=l-e+1,u=Math.log(a),c=.5*Math.exp(2*u/3),d=.5*Math.sqrt(u*c*(a-c)/a)*(i-a/2<0?-1:1),f=Math.max(e,Math.floor(l-i*c/a+d)),p=Math.min(r,Math.floor(l+(a-i)*c/a+d)),n(s,l,f,p,o));var v=s[l],m=e,T=r;for(t(s,e,l),0<o(s[r],v)&&t(s,e,r);m<T;){for(t(s,m,T),m++,T--;o(s[m],v)<0;)m++;for(;0<o(s[T],v);)T--}0===o(s[e],v)?t(s,e,T):t(s,++T,r),T<=l&&(e=T+1),l<=T&&(r=T-1)}};g.exports=n},function(g,b,t){var h=t(6),n=t(131);g.exports=function(s,l,e){var r,o=h(e,"max",0),a=h(e,"qty",1),i=h(e,"random",!1),u=h(e,"randomB",!1),c=h(e,"repeat",0),d=h(e,"yoyo",!1),f=[];u&&n(l),-1===c&&(c=0===o?0:(r=s.length*l.length*a,d&&(r*=2),Math.ceil(o/r)));for(var p=0;p<=c;p++){var v=function(m,T,y){for(var x=[],w=0;w<m.length;w++)for(var E=0;E<T.length;E++)for(var S=0;S<y;S++)x.push({a:m[w],b:T[E]});return x}(s,l,a);i&&n(v),f=f.concat(v),d&&(v.reverse(),f=f.concat(v))}return o&&f.splice(o),f}},function(g,b,t){g.exports={PROCESS_QUEUE_ADD:t(1041),PROCESS_QUEUE_REMOVE:t(1042)}},function(g,b,t){var h=t(13);g.exports=function(n,s){var l,e,r,o,a,i,u,c,d,f,p=h(s,"anims",null);return null===p||("string"==typeof p?n.anims.play(p):"object"==typeof p&&(l=n.anims,(e=h(p,"key",void 0))&&(r=h(p,"startFrame",void 0),o=h(p,"delay",0),a=h(p,"repeat",0),i=h(p,"repeatDelay",0),u=h(p,"yoyo",!1),c=h(p,"play",!1),d=h(p,"delayedPlay",0),f={key:e,delay:o,repeat:a,repeatDelay:i,yoyo:u,startFrame:r},c?l.play(f):0<d?l.playAfterDelay(f,d):l.load(f)))),n}},function(g,b,t){var h=t(0),n=t(109),s=new h({initialize:function(l,e,r,o,a){this.parent=l,this.x=e,this.y=r,this.frame=o,this.data={},this.tint=16777215,this._visible=a,this._alpha=1,this.flipX=!1,this.flipY=!1},setFrame:function(l){return this.frame=void 0===l?this.parent.frame:l instanceof n&&l.texture===this.parent.texture?l:this.parent.texture.get(l),this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this},reset:function(l,e,r){return this.x=l,this.y=e,this.flipX=!1,this.flipY=!1,this._alpha=1,this._visible=!0,this.parent.dirty=!0,r&&this.setFrame(r),this},setPosition:function(l,e){return this.x=l,this.y=e,this},setFlipX:function(l){return this.flipX=l,this},setFlipY:function(l){return this.flipY=l,this},setFlip:function(l,e){return this.flipX=l,this.flipY=e,this},setVisible:function(l){return this.visible=l,this},setAlpha:function(l){return this.alpha=l,this},setTint:function(l){return this.tint=l,this},destroy:function(){this.parent.dirty=!0,this.parent.children.remove(this),this.parent=void 0,this.frame=void 0,this.data=void 0},visible:{get:function(){return this._visible},set:function(l){this.parent.dirty|=this._visible!==l,this._visible=l}},alpha:{get:function(){return this._alpha},set:function(l){this.parent.dirty|=0<this._alpha!=0<l,this._alpha=l}}});g.exports=s},function(g,b,t){var h=t(10);g.exports=function(n,s,l){void 0===l&&(l=new h);var e=Math.min(n.x,s.x),r=Math.min(n.y,s.y),o=Math.max(n.right,s.right)-e,a=Math.max(n.bottom,s.bottom)-r;return l.setTo(e,r,o,a)}},function(g,b,t){var h=t(0),n=t(11),s=t(1055),l=t(15),e=t(7),r=t(202),o=t(20),a=t(140),i=new h({Extends:l,Mixins:[n.AlphaSingle,n.BlendMode,n.Depth,n.Origin,n.ScrollFactor,n.Transform,n.Visible,s],initialize:function(u,c,d,f,p,v){l.call(this,u,"DOMElement"),this.parent=u.sys.game.domContainer,this.cache=u.sys.cache.html,this.transformOnly=!1,this.skewX=0,this.skewY=0,this.rotate3d=new a,this.rotate3dAngle="deg",this.pointerEvents="auto",this.width=0,this.height=0,this.displayWidth=0,this.displayHeight=0,this.handler=this.dispatchNativeEvent.bind(this),this.setPosition(c,d),"string"==typeof f?"#"===f[0]?this.setElement(f.substr(1),p,v):this.createElement(f,p,v):f&&this.setElement(f,p,v),u.sys.events.on(o.SLEEP,this.handleSceneEvent,this),u.sys.events.on(o.WAKE,this.handleSceneEvent,this)},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},handleSceneEvent:function(u){var c=this.node;c&&(c.style.display=u.settings.visible?"block":"none")},setSkew:function(u,c){return void 0===u&&(u=0),void 0===c&&(c=u),this.skewX=u,this.skewY=c,this},setPerspective:function(u){return this.parent.style.perspective=u+"px",this},perspective:{get:function(){return parseFloat(this.parent.style.perspective)},set:function(u){this.parent.style.perspective=u+"px"}},addListener:function(u){if(this.node){u=u.split(" ");for(var c=0;c<u.length;c++)this.node.addEventListener(u[c],this.handler,!1)}return this},removeListener:function(u){if(this.node){u=u.split(" ");for(var c=0;c<u.length;c++)this.node.removeEventListener(u[c],this.handler)}return this},dispatchNativeEvent:function(u){this.emit(u.type,u)},createElement:function(u,c,d){return this.setElement(document.createElement(u),c,d)},setElement:function(u,c,d){var f;if(this.removeElement(),"string"==typeof u?("#"===u[0]&&(u=u.substr(1)),f=document.getElementById(u)):"object"==typeof u&&1===u.nodeType&&(f=u),!f)return this;if(this.node=f,c&&e(c))for(var p in c)f.style[p]=c[p];else"string"==typeof c&&(f.style=c);return f.style.zIndex="0",f.style.display="inline",f.style.position="absolute",(f.phaser=this).parent&&this.parent.appendChild(f),d&&(f.innerText=d),this.updateSize()},createFromCache:function(u,c){var d=this.cache.get(u);return d&&this.createFromHTML(d,c),this},createFromHTML:function(u,c){void 0===c&&(c="div"),this.removeElement();var d=document.createElement(c);return(this.node=d).style.zIndex="0",d.style.display="inline",d.style.position="absolute",(d.phaser=this).parent&&this.parent.appendChild(d),d.innerHTML=u,this.updateSize()},removeElement:function(){return this.node&&(r(this.node),this.node=null),this},updateSize:function(){var u=this.node,c=u.getBoundingClientRect();return this.width=u.clientWidth,this.height=u.clientHeight,this.displayWidth=c.width||0,this.displayHeight=c.height||0,this},getChildByProperty:function(u,c){if(this.node)for(var d=this.node.querySelectorAll("*"),f=0;f<d.length;f++)if(d[f][u]===c)return d[f];return null},getChildByID:function(u){return this.getChildByProperty("id",u)},getChildByName:function(u){return this.getChildByProperty("name",u)},setClassName:function(u){return this.node&&(this.node.className=u,this.updateSize()),this},setText:function(u){return this.node&&(this.node.innerText=u,this.updateSize()),this},setHTML:function(u){return this.node&&(this.node.innerHTML=u,this.updateSize()),this},preUpdate:function(){var u=this.parentContainer,c=this.node;c&&u&&!u.willRender()&&(c.style.display="none")},willRender:function(){return!0},preDestroy:function(){this.removeElement(),this.scene.sys.events.off(o.SLEEP,this.handleSceneEvent,this),this.scene.sys.events.off(o.WAKE,this.handleSceneEvent,this)}});g.exports=i},function(g,b,t){var h=t(1056),n=t(15),s=t(25),l=new s,e=new s,r=new s;g.exports=function(o,a,i,u){var c,f,p,v,m,T,y,x,w,E;a.node&&(!(c=a.node.style)||!a.scene.sys.settings.visible||n.RENDER_MASK!==a.renderFlags||0!==a.cameraFilter&&a.cameraFilter&i.id||a.parentContainer&&!a.parentContainer.willRender()?c.display="none":(p=i.alpha*a.alpha,(f=a.parentContainer)&&(p*=f.alpha),v=l,m=e,T=r,x=y=0,E=w="0%",u?(m.applyITRS(a.x-(y=a.width*a.scaleX*a.originX),a.y-(x=a.height*a.scaleY*a.originY),a.rotation,a.scaleX,a.scaleY),v.copyFrom(i.matrix),v.multiplyWithOffset(u,-i.scrollX*a.scrollFactorX,-i.scrollY*a.scrollFactorY),m.e=a.x-y,m.f=a.y-x):(m.applyITRS(a.x-(y=a.width*a.originX),a.y-(x=a.height*a.originY),a.rotation,a.scaleX,a.scaleY),v.copyFrom(i.matrix),w=100*a.originX+"%",E=100*a.originY+"%",m.e-=i.scrollX*a.scrollFactorX,m.f-=i.scrollY*a.scrollFactorY),v.multiply(m,T),a.transformOnly||(c.display="block",c.opacity=p,c.zIndex=a._depth,c.pointerEvents=a.pointerEvents,c.mixBlendMode=h[a._blendMode]),c.transform=T.getCSSMatrix()+" skew("+a.skewX+"rad, "+a.skewY+"rad) rotate3d("+a.rotate3d.x+","+a.rotate3d.y+","+a.rotate3d.z+","+a.rotate3d.w+a.rotate3dAngle+")",c.transformOrigin=w+" "+E))}},function(g,b,t){var h=t(0),n=t(11),s=t(15),l=t(1060),e=new h({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.Depth,n.Flip,n.Origin,n.ScrollFactor,n.Size,n.Texture,n.Tint,n.Transform,n.Visible,l],initialize:function(r){s.call(this,r,"Extern")},addedToScene:function(){this.scene.sys.updateList.add(this)},removedFromScene:function(){this.scene.sys.updateList.remove(this)},preUpdate:function(){},render:function(){}});g.exports=e},function(g,b,t){var h=t(218),n=t(98),s=t(14),l=t(4);g.exports=function(e,r,o){void 0===o&&(o=new l);var a=n(r,0,s.PI2);return h(e,a,o)}},function(g,b,t){var h=t(447),n=t(218),s=t(98),l=t(14);g.exports=function(e,r,o,a){void 0===a&&(a=[]),!r&&0<o&&(r=h(e)/o);for(var i=0;i<r;i++){var u=s(i/r,0,l.PI2);a.push(n(e,u))}return a}},function(g,b){g.exports=function(t){var h=t.width/2,n=t.height/2,s=Math.pow(h-n,2)/Math.pow(h+n,2);return Math.PI*(h+n)*(1+3*s/(10+Math.sqrt(4-3*s)))}},function(g,b,t){var h=t(217),n=t(30);g.exports=function(s,l,e,r,o,a){var i=l.commandBuffer,u=i.length,c=o||s.currentContext;if(0!==u&&n(s,c,l,e,r)){var p,v,m;e.addToRenderList(l),c.beginPath();for(var w=0;w<u;++w)switch(i[w]){case h.ARC:c.arc(i[w+1],i[w+2],i[w+3],i[w+4],i[w+5],i[w+6]),w+=7;break;case h.LINE_STYLE:m=i[w+1],c.strokeStyle="rgba("+((16711680&(p=i[w+2]))>>>16)+","+((65280&p)>>>8)+","+(255&p)+","+i[w+3]+")",c.lineWidth=m,w+=3;break;case h.FILL_STYLE:c.fillStyle="rgba("+((16711680&(v=i[w+1]))>>>16)+","+((65280&v)>>>8)+","+(255&v)+","+i[w+2]+")",w+=2;break;case h.BEGIN_PATH:c.beginPath();break;case h.CLOSE_PATH:c.closePath();break;case h.FILL_PATH:a||c.fill();break;case h.STROKE_PATH:a||c.stroke();break;case h.FILL_RECT:a?c.rect(i[w+1],i[w+2],i[w+3],i[w+4]):c.fillRect(i[w+1],i[w+2],i[w+3],i[w+4]),w+=4;break;case h.FILL_TRIANGLE:c.beginPath(),c.moveTo(i[w+1],i[w+2]),c.lineTo(i[w+3],i[w+4]),c.lineTo(i[w+5],i[w+6]),c.closePath(),a||c.fill(),w+=6;break;case h.STROKE_TRIANGLE:c.beginPath(),c.moveTo(i[w+1],i[w+2]),c.lineTo(i[w+3],i[w+4]),c.lineTo(i[w+5],i[w+6]),c.closePath(),a||c.stroke(),w+=6;break;case h.LINE_TO:c.lineTo(i[w+1],i[w+2]),w+=2;break;case h.MOVE_TO:c.moveTo(i[w+1],i[w+2]),w+=2;break;case h.LINE_FX_TO:c.lineTo(i[w+1],i[w+2]),w+=5;break;case h.MOVE_FX_TO:c.moveTo(i[w+1],i[w+2]),w+=5;break;case h.SAVE:c.save();break;case h.RESTORE:c.restore();break;case h.TRANSLATE:c.translate(i[w+1],i[w+2]),w+=2;break;case h.SCALE:c.scale(i[w+1],i[w+2]),w+=2;break;case h.ROTATE:c.rotate(i[w+1]),w+=1;break;case h.GRADIENT_FILL_STYLE:w+=5;break;case h.GRADIENT_LINE_STYLE:w+=6}c.restore()}}},function(g,b,t){var h=t(0),n=t(137),s=t(80),l=t(2),e=t(68),r=new h({initialize:function(o,a,i,u){void 0===u&&(u=!1),this.propertyKey=a,this.propertyValue=i,this.defaultValue=i,this.steps=0,this.counter=0,this.start=0,this.end=0,this.emitOnly=u,this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,this.loadConfig(o)},loadConfig:function(o,a){void 0===o&&(o={}),a&&(this.propertyKey=a),this.propertyValue=l(o,this.propertyKey,this.defaultValue),this.setMethods(),this.emitOnly&&(this.onUpdate=this.defaultUpdate)},toJSON:function(){return this.propertyValue},onChange:function(o){return this.propertyValue=o,this.setMethods()},setMethods:function(){var o,a,i,u=this.propertyValue,c=typeof u;return this.onEmit=this.defaultEmit,this.onUpdate=this.defaultUpdate,"number"==c?(this.onEmit=this.staticValueEmit,this.onUpdate=this.staticValueUpdate):Array.isArray(u)?this.onEmit=this.randomStaticValueEmit:"function"==c?this.emitOnly?this.onEmit=u:this.onUpdate=u:"object"==c&&this.hasBoth(u,"start","end")?(this.start=u.start,this.end=u.end,(o=this.has(u,"random"))&&(this.onEmit=this.randomRangedValueEmit),this.has(u,"steps")?(this.steps=u.steps,this.counter=this.start,this.onEmit=this.steppedEmit):(a=this.has(u,"ease")?u.ease:"Linear",this.ease=s(a,u.easeParams),o||(this.onEmit=this.easedValueEmit),this.onUpdate=this.easeValueUpdate)):"object"==c&&this.hasBoth(u,"min","max")?(this.start=u.min,this.end=u.max,this.onEmit=this.randomRangedValueEmit):"object"==c&&this.has(u,"random")?(i=u.random,Array.isArray(i)&&(this.start=i[0],this.end=i[1]),this.onEmit=this.randomRangedValueEmit):"object"==c&&this.hasEither(u,"onEmit","onUpdate")&&(this.has(u,"onEmit")&&(this.onEmit=u.onEmit),this.has(u,"onUpdate")&&(this.onUpdate=u.onUpdate)),this},has:function(o,a){return o.hasOwnProperty(a)},hasBoth:function(o,a,i){return o.hasOwnProperty(a)&&o.hasOwnProperty(i)},hasEither:function(o,a,i){return o.hasOwnProperty(a)||o.hasOwnProperty(i)},defaultEmit:function(o,a,i){return i},defaultUpdate:function(o,a,i,u){return u},staticValueEmit:function(){return this.propertyValue},staticValueUpdate:function(){return this.propertyValue},randomStaticValueEmit:function(){var o=Math.floor(Math.random()*this.propertyValue.length);return this.propertyValue[o]},randomRangedValueEmit:function(o,a){var i=n(this.start,this.end);return o&&o.data[a]&&(o.data[a].min=i),i},steppedEmit:function(){var o=this.counter;return this.counter=e(this.counter+(this.end-this.start)/this.steps,this.start,this.end),o},easedValueEmit:function(o,a){var i;return o&&o.data[a]&&((i=o.data[a]).min=this.start,i.max=this.end),this.start},easeValueUpdate:function(o,a,i){var u=o.data[a];return(u.max-u.min)*this.ease(i)+u.min}});g.exports=r},function(g,b,t){var h=t(0),n=t(2),s=new h({initialize:function(l,e,r,o,a){var i;"object"==typeof l?(l=n(i=l,"x",0),e=n(i,"y",0),r=n(i,"power",0),o=n(i,"epsilon",100),a=n(i,"gravity",50)):(void 0===l&&(l=0),void 0===e&&(e=0),void 0===r&&(r=0),void 0===o&&(o=100),void 0===a&&(a=50)),this.x=l,this.y=e,this.active=!0,this._gravity=a,this._power=0,this._epsilon=0,this.power=r,this.epsilon=o},update:function(l,e){var r,o,a=this.x-l.x,i=this.y-l.y,u=a*a+i*i;0!==u&&(r=Math.sqrt(u),u<this._epsilon&&(u=this._epsilon),l.velocityX+=a*(o=this._power*e/(u*r)*100),l.velocityY+=i*o)},epsilon:{get:function(){return Math.sqrt(this._epsilon)},set:function(l){this._epsilon=l*l}},power:{get:function(){return this._power/this._gravity},set:function(l){this._power=l*this._gravity}},gravity:{get:function(){return this._gravity},set:function(l){var e=this.power;this._gravity=l,this.power=e}}});g.exports=s},function(g,b,t){var h=t(0),n=t(36),s=t(50),l=new h({initialize:function(e){this.emitter=e,this.frame=null,this.x=0,this.y=0,this.velocityX=0,this.velocityY=0,this.accelerationX=0,this.accelerationY=0,this.maxVelocityX=1e4,this.maxVelocityY=1e4,this.bounce=0,this.scaleX=1,this.scaleY=1,this.alpha=1,this.angle=0,this.rotation=0,this.tint=16777215,this.life=1e3,this.lifeCurrent=1e3,this.delayCurrent=0,this.lifeT=0,this.data={tint:{min:16777215,max:16777215,current:16777215},alpha:{min:1,max:1},rotate:{min:0,max:0},scaleX:{min:1,max:1},scaleY:{min:1,max:1}}},isAlive:function(){return 0<this.lifeCurrent},resetPosition:function(){this.x=0,this.y=0},fire:function(e,r){var o=this.emitter;this.frame=o.getFrame(),o.emitZone&&o.emitZone.getPoint(this),this.x+=void 0===e?o.x.onEmit(this,"x"):e,this.y+=void 0===r?o.y.onEmit(this,"y"):r,this.life=o.lifespan.onEmit(this,"lifespan"),this.lifeCurrent=this.life,this.lifeT=0;var a,i,u,c,d,f=o.speedX.onEmit(this,"speedX"),p=o.speedY?o.speedY.onEmit(this,"speedY"):f;o.radial?(a=n(o.angle.onEmit(this,"angle")),this.velocityX=Math.cos(a)*Math.abs(f),this.velocityY=Math.sin(a)*Math.abs(p)):o.moveTo?(i=o.moveToX.onEmit(this,"moveToX"),u=o.moveToY?o.moveToY.onEmit(this,"moveToY"):i,c=Math.atan2(u-this.y,i-this.x),d=s(this.x,this.y,i,u)/(this.life/1e3),this.velocityX=Math.cos(c)*d,this.velocityY=Math.sin(c)*d):(this.velocityX=f,this.velocityY=p),o.acceleration&&(this.accelerationX=o.accelerationX.onEmit(this,"accelerationX"),this.accelerationY=o.accelerationY.onEmit(this,"accelerationY")),this.maxVelocityX=o.maxVelocityX.onEmit(this,"maxVelocityX"),this.maxVelocityY=o.maxVelocityY.onEmit(this,"maxVelocityY"),this.delayCurrent=o.delay.onEmit(this,"delay"),this.scaleX=o.scaleX.onEmit(this,"scaleX"),this.scaleY=o.scaleY?o.scaleY.onEmit(this,"scaleY"):this.scaleX,this.angle=o.rotate.onEmit(this,"rotate"),this.rotation=n(this.angle),this.bounce=o.bounce.onEmit(this,"bounce"),this.alpha=o.alpha.onEmit(this,"alpha"),this.tint=o.tint.onEmit(this,"tint")},computeVelocity:function(e,r,o,a){var i=this.velocityX,u=this.velocityY,c=this.accelerationX,d=this.accelerationY,f=this.maxVelocityX,p=this.maxVelocityY;i+=e.gravityX*o,u+=e.gravityY*o,c&&(i+=c*o),d&&(u+=d*o),f<i?i=f:i<-f&&(i=-f),p<u?u=p:u<-p&&(u=-p),this.velocityX=i,this.velocityY=u;for(var v=0;v<a.length;v++)a[v].update(this,r,o)},checkBounds:function(e){var r=e.bounds,o=-this.bounce;this.x<r.x&&e.collideLeft?(this.x=r.x,this.velocityX*=o):this.x>r.right&&e.collideRight&&(this.x=r.right,this.velocityX*=o),this.y<r.y&&e.collideTop?(this.y=r.y,this.velocityY*=o):this.y>r.bottom&&e.collideBottom&&(this.y=r.bottom,this.velocityY*=o)},update:function(e,r,o){if(0<this.delayCurrent)return this.delayCurrent-=e,!1;var a=this.emitter,i=1-this.lifeCurrent/this.life;return this.lifeT=i,this.computeVelocity(a,e,r,o),this.x+=this.velocityX*r,this.y+=this.velocityY*r,a.bounds&&this.checkBounds(a),a.deathZone&&a.deathZone.willKill(this)?!(this.lifeCurrent=0):(this.scaleX=a.scaleX.onUpdate(this,"scaleX",i,this.scaleX),this.scaleY=a.scaleY?a.scaleY.onUpdate(this,"scaleY",i,this.scaleY):this.scaleX,this.angle=a.rotate.onUpdate(this,"rotate",i,this.angle),this.rotation=n(this.angle),this.alpha=a.alpha.onUpdate(this,"alpha",i,this.alpha),this.tint=a.tint.onUpdate(this,"tint",i,this.tint),this.lifeCurrent-=e,this.lifeCurrent<=0)}});g.exports=l},function(g,b,t){var h=t(35),n=t(0),s=t(11),l=t(453),e=t(454),r=t(449),o=t(2),a=t(210),i=t(455),u=t(126),c=t(451),d=t(456),f=t(10),p=t(79),v=t(3),m=t(68),T=new n({Mixins:[s.BlendMode,s.Mask,s.ScrollFactor,s.Visible],initialize:function(y,x){this.manager=y,this.texture=y.texture,this.frames=[y.defaultFrame],this.defaultFrame=y.defaultFrame,this.configFastMap=["active","blendMode","collideBottom","collideLeft","collideRight","collideTop","deathCallback","deathCallbackScope","emitCallback","emitCallbackScope","follow","frequency","gravityX","gravityY","maxParticles","name","on","particleBringToTop","particleClass","radial","timeScale","trackVisible","visible"],this.configOpMap=["accelerationX","accelerationY","angle","alpha","bounce","delay","lifespan","maxVelocityX","maxVelocityY","moveToX","moveToY","quantity","rotate","scaleX","scaleY","speedX","speedY","tint","x","y"],this.name="",this.particleClass=c,this.x=new r(x,"x",0,!0),this.y=new r(x,"y",0,!0),this.radial=!0,this.gravityX=0,this.gravityY=0,this.acceleration=!1,this.accelerationX=new r(x,"accelerationX",0,!0),this.accelerationY=new r(x,"accelerationY",0,!0),this.maxVelocityX=new r(x,"maxVelocityX",1e4,!0),this.maxVelocityY=new r(x,"maxVelocityY",1e4,!0),this.speedX=new r(x,"speedX",0,!0),this.speedY=new r(x,"speedY",0,!0),this.moveTo=!1,this.moveToX=new r(x,"moveToX",0,!0),this.moveToY=new r(x,"moveToY",0,!0),this.bounce=new r(x,"bounce",0,!0),this.scaleX=new r(x,"scaleX",1),this.scaleY=new r(x,"scaleY",1),this.tint=new r(x,"tint",16777215),this.alpha=new r(x,"alpha",1),this.lifespan=new r(x,"lifespan",1e3,!0),this.angle=new r(x,"angle",{min:0,max:360},!0),this.rotate=new r(x,"rotate",0),this.emitCallback=null,this.emitCallbackScope=null,this.deathCallback=null,this.deathCallbackScope=null,this.maxParticles=0,this.quantity=new r(x,"quantity",1,!0),this.delay=new r(x,"delay",0,!0),this.frequency=0,this.on=!0,this.particleBringToTop=!0,this.timeScale=1,this.emitZone=null,this.deathZone=null,this.bounds=null,this.collideLeft=!0,this.collideRight=!0,this.collideTop=!0,this.collideBottom=!0,this.active=!0,this.visible=!0,this.blendMode=h.NORMAL,this.follow=null,this.followOffset=new v,this.trackVisible=!1,this.currentFrame=0,this.randomFrame=!0,this.frameQuantity=1,this.dead=[],this.alive=[],this._counter=0,this._frameCounter=0,x&&this.fromJSON(x)},fromJSON:function(y){if(!y)return this;var x,E=0,w="";for(E=0;E<this.configFastMap.length;E++)u(y,w=this.configFastMap[E])&&(this[w]=o(y,w));for(E=0;E<this.configOpMap.length;E++)u(y,w=this.configOpMap[E])&&this[w].loadConfig(y);return this.acceleration=0!==this.accelerationX.propertyValue||0!==this.accelerationY.propertyValue,this.moveTo=0!==this.moveToX.propertyValue||0!==this.moveToY.propertyValue,u(y,"speed")&&(this.speedX.loadConfig(y,"speed"),this.speedY=null),(i(y,["speedX","speedY"])||this.moveTo)&&(this.radial=!1),u(y,"scale")&&(this.scaleX.loadConfig(y,"scale"),this.scaleY=null),u(y,"callbackScope")&&(x=o(y,"callbackScope",null),this.emitCallbackScope=x,this.deathCallbackScope=x),u(y,"emitZone")&&this.setEmitZone(y.emitZone),u(y,"deathZone")&&this.setDeathZone(y.deathZone),u(y,"bounds")&&this.setBounds(y.bounds),u(y,"followOffset")&&this.followOffset.setFromObject(o(y,"followOffset",0)),u(y,"frame")&&this.setFrame(y.frame),u(y,"reserve")&&this.reserve(y.reserve),this},toJSON:function(y){void 0===y&&(y={});var w=0,x="";for(w=0;w<this.configFastMap.length;w++)y[x=this.configFastMap[w]]=this[x];for(w=0;w<this.configOpMap.length;w++)this[x=this.configOpMap[w]]&&(y[x]=this[x].toJSON());return this.speedY||(delete y.speedX,y.speed=this.speedX.toJSON()),this.scaleY||(delete y.scaleX,y.scale=this.scaleX.toJSON()),y},startFollow:function(y,x,w,E){return void 0===x&&(x=0),void 0===w&&(w=0),void 0===E&&(E=!1),this.follow=y,this.followOffset.set(x,w),this.trackVisible=E,this},stopFollow:function(){return this.follow=null,this.followOffset.set(0,0),this.trackVisible=!1,this},getFrame:function(){if(1===this.frames.length)return this.defaultFrame;if(this.randomFrame)return a(this.frames);var y=this.frames[this.currentFrame];return this._frameCounter++,this._frameCounter===this.frameQuantity&&(this._frameCounter=0,this.currentFrame=m(this.currentFrame+1,0,this._frameLength)),y},setFrame:function(y,x,w){void 0===x&&(x=!0),void 0===w&&(w=1),this.randomFrame=x,this.frameQuantity=w,this.currentFrame=0,this._frameCounter=0;var E,S,A=typeof y;return Array.isArray(y)||"string"==A||"number"==A?this.manager.setEmitterFrames(y,this):"object"==A&&((y=o(E=y,"frames",null))&&this.manager.setEmitterFrames(y,this),S=o(E,"cycle",!1),this.randomFrame=!S,this.frameQuantity=o(E,"quantity",w)),this._frameLength=this.frames.length,1===this._frameLength&&(this.frameQuantity=1,this.randomFrame=!1),this},setRadial:function(y){return void 0===y&&(y=!0),this.radial=y,this},setPosition:function(y,x){return this.x.onChange(y),this.y.onChange(x),this},setBounds:function(y,x,w,E){var S;return"object"==typeof y&&(y=(S=y).x,x=S.y,w=u(S,"w")?S.w:S.width,E=u(S,"h")?S.h:S.height),this.bounds?this.bounds.setTo(y,x,w,E):this.bounds=new f(y,x,w,E),this},setSpeedX:function(y){return this.speedX.onChange(y),this.radial=!1,this},setSpeedY:function(y){return this.speedY&&(this.speedY.onChange(y),this.radial=!1),this},setSpeed:function(y){return this.speedX.onChange(y),this.speedY=null,this.radial=!0,this},setScaleX:function(y){return this.scaleX.onChange(y),this},setScaleY:function(y){return this.scaleY.onChange(y),this},setScale:function(y){return this.scaleX.onChange(y),this.scaleY=null,this},setGravityX:function(y){return this.gravityX=y,this},setGravityY:function(y){return this.gravityY=y,this},setGravity:function(y,x){return this.gravityX=y,this.gravityY=x,this},setAlpha:function(y){return this.alpha.onChange(y),this},setTint:function(y){return this.tint.onChange(y),this},setEmitterAngle:function(y){return this.angle.onChange(y),this},setAngle:function(y){return this.angle.onChange(y),this},setLifespan:function(y){return this.lifespan.onChange(y),this},setQuantity:function(y){return this.quantity.onChange(y),this},setFrequency:function(y,x){return this.frequency=y,this._counter=0,x&&this.quantity.onChange(x),this},setEmitZone:function(y){if(void 0===y)this.emitZone=null;else{var x=o(y,"type","random"),w=o(y,"source",null);switch(x){case"random":this.emitZone=new d(w);break;case"edge":var E=o(y,"quantity",1),S=o(y,"stepRate",0),A=o(y,"yoyo",!1),_=o(y,"seamless",!0);this.emitZone=new e(w,E,S,A,_)}}return this},setDeathZone:function(y){var x,w;return void 0===y?this.deathZone=null:(x=o(y,"type","onEnter"),(w=o(y,"source",null))&&"function"==typeof w.contains&&(this.deathZone=new l(w,"onEnter"===x))),this},reserve:function(y){for(var x=this.dead,w=0;w<y;w++)x.push(new this.particleClass(this));return this},getAliveParticleCount:function(){return this.alive.length},getDeadParticleCount:function(){return this.dead.length},getParticleCount:function(){return this.getAliveParticleCount()+this.getDeadParticleCount()},atLimit:function(){return 0<this.maxParticles&&this.getParticleCount()===this.maxParticles},onParticleEmit:function(y,x){return void 0===y?(this.emitCallback=null,this.emitCallbackScope=null):"function"==typeof y&&(this.emitCallback=y,x&&(this.emitCallbackScope=x)),this},onParticleDeath:function(y,x){return void 0===y?(this.deathCallback=null,this.deathCallbackScope=null):"function"==typeof y&&(this.deathCallback=y,x&&(this.deathCallbackScope=x)),this},killAll:function(){for(var y=this.dead,x=this.alive;0<x.length;)y.push(x.pop());return this},forEachAlive:function(y,x){for(var w=this.alive,E=w.length,S=0;S<E;++S)y.call(x,w[S],this);return this},forEachDead:function(y,x){for(var w=this.dead,E=w.length,S=0;S<E;++S)y.call(x,w[S],this);return this},start:function(){return this.on=!0,this._counter=0,this},stop:function(){return this.on=!1,this},pause:function(){return this.active=!1,this},resume:function(){return this.active=!0,this},remove:function(){return this.manager.removeEmitter(this),this},depthSort:function(){return p(this.alive,this.depthSortCallback),this},flow:function(y,x){return void 0===x&&(x=1),this.frequency=y,this.quantity.onChange(x),this.start()},explode:function(y,x,w){return this.frequency=-1,this.emitParticle(y,x,w)},emitParticleAt:function(y,x,w){return this.emitParticle(w,y,x)},emitParticle:function(y,x,w){if(!this.atLimit()){void 0===y&&(y=this.quantity.onEmit());for(var E=this.dead,S=this.follow?this.follow.x+this.followOffset.x:x,A=this.follow?this.follow.y+this.followOffset.y:w,_=0;_<y;_++){var C=E.pop();if((C=C||new this.particleClass(this)).fire(S,A),this.particleBringToTop?this.alive.push(C):this.alive.unshift(C),this.emitCallback&&this.emitCallback.call(this.emitCallbackScope,C,this),this.atLimit())break}return C}},preUpdate:function(y,x){var w=(x*=this.timeScale)/1e3;this.trackVisible&&(this.visible=this.follow.visible);var E=this.manager.getProcessors(),S=this.alive,A=this.dead,_=0,C=[],M=S.length;for(_=0;_<M;_++){var P=S[_];P.update(x,w,E)&&C.push({index:_,particle:P})}if(0<(M=C.length)){var L=this.deathCallback,D=this.deathCallbackScope;for(_=M-1;0<=_;_--){var F=C[_];S.splice(F.index,1),A.push(F.particle),L&&L.call(D,F.particle),F.particle.resetPosition()}}this.on&&(0===this.frequency?this.emitParticle():0<this.frequency&&(this._counter-=x,this._counter<=0&&(this.emitParticle(),this._counter=this.frequency-Math.abs(this._counter))))},depthSortCallback:function(y,x){return y.y-x.y}});g.exports=T},function(g,b,t){var h=new(t(0))({initialize:function(n,s){this.source=n,this.killOnEnter=s},willKill:function(n){var s=this.source.contains(n.x,n.y);return s&&this.killOnEnter||!s&&!this.killOnEnter}});g.exports=h},function(g,b,t){var h=new(t(0))({initialize:function(n,s,l,e,r){void 0===e&&(e=!1),void 0===r&&(r=!0),this.source=n,this.points=[],this.quantity=s,this.stepRate=l,this.yoyo=e,this.counter=-1,this.seamless=r,this._length=0,this._direction=0,this.updateSource()},updateSource:function(){var n,s;this.points=this.source.getPoints(this.quantity,this.stepRate),this.seamless&&(n=this.points[0]).x===(s=this.points[this.points.length-1]).x&&n.y===s.y&&this.points.pop();var l=this._length;return this._length=this.points.length,this._length<l&&this.counter>this._length&&(this.counter=this._length-1),this},changeSource:function(n){return this.source=n,this.updateSource()},getPoint:function(n){0===this._direction?(this.counter++,this.counter>=this._length&&(this.yoyo?(this._direction=1,this.counter=this._length-1):this.counter=0)):(this.counter--,-1===this.counter&&(this.yoyo?(this._direction=0,this.counter=0):this.counter=this._length-1));var s=this.points[this.counter];s&&(n.x=s.x,n.y=s.y)}});g.exports=h},function(g,b){g.exports=function(t,h){for(var n=0;n<h.length;n++)if(t.hasOwnProperty(h[n]))return!0;return!1}},function(g,b,t){var h=t(0),n=t(3),s=new h({initialize:function(l){this.source=l,this._tempVec=new n},getPoint:function(l){var e=this._tempVec;this.source.getRandomPoint(e),l.x=e.x,l.y=e.y}});g.exports=s},function(g,b,t){var h=t(0),n=t(11),s=t(73),l=new h({Extends:s,Mixins:[n.PathFollower],initialize:function(e,r,o,a,i,u){s.call(this,e,o,a,i,u),this.path=r},preUpdate:function(e,r){this.anims.update(e,r),this.pathUpdate(e)}});g.exports=l},function(g,b){g.exports=function(t,h,n){var l=t.context,e=t.style,r=[],o=0,a=n.length;0<e.maxLines&&e.maxLines<n.length&&(a=e.maxLines),e.syncFont(t.canvas,l);for(var i=0;i<a;i++){var u=e.strokeThickness;u+=l.measureText(n[i]).width,e.wordWrap&&(u-=l.measureText(" ").width),r[i]=Math.ceil(u),o=Math.max(o,r[i])}var c=h.fontSize+e.strokeThickness,d=c*a,f=t.lineSpacing;return 1<a&&(d+=f*(a-1)),{width:o,height:d,lines:a,lineWidths:r,lineSpacing:f,lineHeight:c}}},function(g,b,t){var h=t(0),n=t(13),s=t(6),l=t(460),e={fontFamily:["fontFamily","Courier"],fontSize:["fontSize","16px"],fontStyle:["fontStyle",""],backgroundColor:["backgroundColor",null],color:["color","#fff"],stroke:["stroke","#fff"],strokeThickness:["strokeThickness",0],shadowOffsetX:["shadow.offsetX",0],shadowOffsetY:["shadow.offsetY",0],shadowColor:["shadow.color","#000"],shadowBlur:["shadow.blur",0],shadowStroke:["shadow.stroke",!1],shadowFill:["shadow.fill",!1],align:["align","left"],maxLines:["maxLines",0],fixedWidth:["fixedWidth",0],fixedHeight:["fixedHeight",0],resolution:["resolution",0],rtl:["rtl",!1],testString:["testString","|M\xc3\u2030qgy"],baselineX:["baselineX",1.2],baselineY:["baselineY",1.4],wordWrapWidth:["wordWrap.width",null],wordWrapCallback:["wordWrap.callback",null],wordWrapCallbackScope:["wordWrap.callbackScope",null],wordWrapUseAdvanced:["wordWrap.useAdvancedWrap",!1]},r=new h({initialize:function(o,a){this.parent=o,this.setStyle(a,!1,!0);var i=s(a,"metrics",!1);this.metrics=i?{ascent:s(i,"ascent",0),descent:s(i,"descent",0),fontSize:s(i,"fontSize",0)}:l(this)},setStyle:function(o,a,i){for(var u in void 0===a&&(a=!0),void 0===i&&(i=!1),o&&o.hasOwnProperty("fontSize")&&"number"==typeof o.fontSize&&(o.fontSize=o.fontSize.toString()+"px"),e)this[u]=("wordWrapCallback"===u||"wordWrapCallbackScope"===u?s:n)(o,e[u][0],i?e[u][1]:this[u]);var d=s(o,"font",null);null!==d&&this.setFont(d,!1),this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim();var f=s(o,"fill",null);return null!==f&&(this.color=f),a?this.update(!0):this.parent},syncFont:function(o,a){a.font=this._font},syncStyle:function(o,a){a.textBaseline="alphabetic",a.fillStyle=this.color,a.strokeStyle=this.stroke,a.lineWidth=this.strokeThickness,a.lineCap="round",a.lineJoin="round"},syncShadow:function(o,a){a?(o.shadowOffsetX=this.shadowOffsetX,o.shadowOffsetY=this.shadowOffsetY,o.shadowColor=this.shadowColor,o.shadowBlur=this.shadowBlur):(o.shadowOffsetX=0,o.shadowOffsetY=0,o.shadowColor=0,o.shadowBlur=0)},update:function(o){return o&&(this._font=[this.fontStyle,this.fontSize,this.fontFamily].join(" ").trim(),this.metrics=l(this)),this.parent.updateText()},setFont:function(o,a){void 0===a&&(a=!0);var i,u,c=o,d="",f="";return"string"!=typeof o?(c=s(o,"fontFamily","Courier"),d=s(o,"fontSize","16px"),f=s(o,"fontStyle","")):(u=0,f=2<(i=o.split(" ")).length?i[u++]:"",d=i[u++]||"16px",c=i[u++]||"Courier"),c===this.fontFamily&&d===this.fontSize&&f===this.fontStyle||(this.fontFamily=c,this.fontSize=d,this.fontStyle=f,a&&this.update(!0)),this.parent},setFontFamily:function(o){return this.fontFamily!==o&&(this.fontFamily=o,this.update(!0)),this.parent},setFontStyle:function(o){return this.fontStyle!==o&&(this.fontStyle=o,this.update(!0)),this.parent},setFontSize:function(o){return"number"==typeof o&&(o=o.toString()+"px"),this.fontSize!==o&&(this.fontSize=o,this.update(!0)),this.parent},setTestString:function(o){return this.testString=o,this.update(!0)},setFixedSize:function(o,a){return this.fixedWidth=o,this.fixedHeight=a,o&&(this.parent.width=o),a&&(this.parent.height=a),this.update(!1)},setBackgroundColor:function(o){return this.backgroundColor=o,this.update(!1)},setFill:function(o){return this.color=o,this.update(!1)},setColor:function(o){return this.color=o,this.update(!1)},setResolution:function(o){return this.resolution=o,this.update(!1)},setStroke:function(o,a){return void 0===a&&(a=this.strokeThickness),void 0===o&&0!==this.strokeThickness?(this.strokeThickness=0,this.update(!0)):this.stroke===o&&this.strokeThickness===a||(this.stroke=o,this.strokeThickness=a,this.update(!0)),this.parent},setShadow:function(o,a,i,u,c,d){return void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i="#000"),void 0===u&&(u=0),void 0===c&&(c=!1),void 0===d&&(d=!0),this.shadowOffsetX=o,this.shadowOffsetY=a,this.shadowColor=i,this.shadowBlur=u,this.shadowStroke=c,this.shadowFill=d,this.update(!1)},setShadowOffset:function(o,a){return void 0===o&&(o=0),void 0===a&&(a=o),this.shadowOffsetX=o,this.shadowOffsetY=a,this.update(!1)},setShadowColor:function(o){return void 0===o&&(o="#000"),this.shadowColor=o,this.update(!1)},setShadowBlur:function(o){return void 0===o&&(o=0),this.shadowBlur=o,this.update(!1)},setShadowStroke:function(o){return this.shadowStroke=o,this.update(!1)},setShadowFill:function(o){return this.shadowFill=o,this.update(!1)},setWordWrapWidth:function(o,a){return void 0===a&&(a=!1),this.wordWrapWidth=o,this.wordWrapUseAdvanced=a,this.update(!1)},setWordWrapCallback:function(o,a){return void 0===a&&(a=null),this.wordWrapCallback=o,this.wordWrapCallbackScope=a,this.update(!1)},setAlign:function(o){return void 0===o&&(o="left"),this.align=o,this.update(!1)},setMaxLines:function(o){return void 0===o&&(o=0),this.maxLines=o,this.update(!1)},getTextMetrics:function(){var o=this.metrics;return{ascent:o.ascent,descent:o.descent,fontSize:o.fontSize}},toJSON:function(){var o={};for(var a in e)o[a]=this[a];return o.metrics=this.getTextMetrics(),o},destroy:function(){this.parent=void 0}});g.exports=r},function(g,b,t){var h=t(31);g.exports=function(n){var s=h.create(this),l=s.getContext("2d");n.syncFont(s,l);var e=l.measureText(n.testString);if("actualBoundingBoxAscent"in e){var r=e.actualBoundingBoxAscent,o=e.actualBoundingBoxDescent;return h.remove(s),{ascent:r,descent:o,fontSize:r+o}}var a=Math.ceil(e.width*n.baselineX),i=2*(u=a),u=u*n.baselineY|0;s.width=a,s.height=i,l.fillStyle="#f00",l.fillRect(0,0,a,i),l.font=n._font,l.textBaseline="alphabetic",l.fillStyle="#000",l.fillText(n.testString,0,u);var c={ascent:0,descent:0,fontSize:0},d=l.getImageData(0,0,a,i);if(!d)return c.ascent=u,c.descent=6+u,c.fontSize=c.ascent+c.descent,h.remove(s),c;for(var f,p=d.data,v=p.length,m=4*a,T=0,y=!1,x=0;x<u;x++){for(f=0;f<m;f+=4)if(255!==p[T+f]){y=!0;break}if(y)break;T+=m}for(c.ascent=u-x,T=v-m,y=!1,x=i;u<x;x--){for(f=0;f<m;f+=4)if(255!==p[T+f]){y=!0;break}if(y)break;T-=m}return c.descent=x-u,c.fontSize=c.ascent+c.descent,h.remove(s),c}},function(g,b,t){var h=t(1097),n=t(0),s=t(36),l=t(59),e=t(65),r=t(14),o=t(34),a=new n({Extends:o,Mixins:[h],initialize:function(i,u,c,d,f,p,v,m,T){void 0===u&&(u=0),void 0===c&&(c=0),void 0===d&&(d=128),void 0===f&&(f=0),void 0===p&&(p=360),void 0===v&&(v=!1),o.call(this,i,"Arc",new e(0,0,d)),this._startAngle=f,this._endAngle=p,this._anticlockwise=v,this._iterations=.01,this.setPosition(u,c);var y=2*this.geom.radius;this.setSize(y,y),void 0!==m&&this.setFillStyle(m,T),this.updateDisplayOrigin(),this.updateData()},iterations:{get:function(){return this._iterations},set:function(i){this._iterations=i,this.updateData()}},radius:{get:function(){return this.geom.radius},set:function(i){var u=2*(this.geom.radius=i);this.setSize(u,u),this.updateDisplayOrigin(),this.updateData()}},startAngle:{get:function(){return this._startAngle},set:function(i){this._startAngle=i,this.updateData()}},endAngle:{get:function(){return this._endAngle},set:function(i){this._endAngle=i,this.updateData()}},anticlockwise:{get:function(){return this._anticlockwise},set:function(i){this._anticlockwise=i,this.updateData()}},setRadius:function(i){return this.radius=i,this},setIterations:function(i){return void 0===i&&(i=.01),this.iterations=i,this},setStartAngle:function(i,u){return this._startAngle=i,void 0!==u&&(this._anticlockwise=u),this.updateData()},setEndAngle:function(i,u){return this._endAngle=i,void 0!==u&&(this._anticlockwise=u),this.updateData()},updateData:function(){var i=this._iterations,u=i,c=this.geom.radius,d=s(this._startAngle),f=s(this._endAngle),p=c,v=c;f-=d,this._anticlockwise?f<-r.PI2?f=-r.PI2:0<f&&(f=f%r.PI2-r.PI2):f>r.PI2?f=r.PI2:f<0&&(f=r.PI2+f%r.PI2);for(var m,T=[p+Math.cos(d)*c,v+Math.sin(d)*c];u<1;)m=f*u+d,T.push(p+Math.cos(m)*c,v+Math.sin(m)*c),u+=i;return m=f+d,T.push(p+Math.cos(m)*c,v+Math.sin(m)*c),T.push(p+Math.cos(d)*c,v+Math.sin(d)*c),this.pathIndexes=l(T),this.pathData=T,this}});g.exports=a},function(g,b,t){var h=t(0),n=t(1100),s=t(59),l=t(10),e=t(34),r=new h({Extends:e,Mixins:[n],initialize:function(o,a,i,u,c,d){void 0===a&&(a=0),void 0===i&&(i=0),e.call(this,o,"Curve",u),this._smoothness=32,this._curveBounds=new l,this.closePath=!1,this.setPosition(a,i),void 0!==c&&this.setFillStyle(c,d),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){var o=this._curveBounds,a=this._smoothness;this.geom.getBounds(o,a),this.setSize(o.width,o.height),this.updateDisplayOrigin();for(var i=[],u=this.geom.getPoints(a),c=0;c<u.length;c++)i.push(u[c].x,u[c].y);return i.push(u[0].x,u[0].y),this.pathIndexes=s(i),this.pathData=i,this}});g.exports=r},function(g,b,t){var h=t(0),n=t(59),s=t(1103),l=t(111),e=t(34),r=new h({Extends:e,Mixins:[s],initialize:function(o,a,i,u,c,d,f){void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=128),void 0===c&&(c=128),e.call(this,o,"Ellipse",new l(u/2,c/2,u,c)),this._smoothness=64,this.setPosition(a,i),this.width=u,this.height=c,void 0!==d&&this.setFillStyle(d,f),this.updateDisplayOrigin(),this.updateData()},smoothness:{get:function(){return this._smoothness},set:function(o){this._smoothness=o,this.updateData()}},setSize:function(o,a){return this.width=o,this.height=a,this.geom.setPosition(o/2,a/2),this.geom.setSize(o,a),this.updateData()},setSmoothness:function(o){return this._smoothness=o,this.updateData()},updateData:function(){for(var o=[],a=this.geom.getPoints(this._smoothness),i=0;i<a.length;i++)o.push(a[i].x,a[i].y);return o.push(a[0].x,a[0].y),this.pathIndexes=n(o),this.pathData=o,this}});g.exports=r},function(g,b,t){var h=t(0),n=t(34),s=t(1106),l=new h({Extends:n,Mixins:[s],initialize:function(e,r,o,a,i,u,c,d,f,p,v){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=128),void 0===i&&(i=128),void 0===u&&(u=32),void 0===c&&(c=32),n.call(this,e,"Grid",null),this.cellWidth=u,this.cellHeight=c,this.showCells=!0,this.outlineFillColor=0,this.outlineFillAlpha=0,this.showOutline=!0,this.showAltCells=!1,this.setPosition(r,o),this.setSize(a,i),this.setFillStyle(d,f),void 0!==p&&this.setOutlineStyle(p,v),this.updateDisplayOrigin()},setFillStyle:function(e,r){return void 0===r&&(r=1),void 0===e?this.showCells=!1:(this.fillColor=e,this.fillAlpha=r,this.showCells=!0),this},setAltFillStyle:function(e,r){return void 0===r&&(r=1),void 0===e?this.showAltCells=!1:(this.altFillColor=e,this.altFillAlpha=r,this.showAltCells=!0),this},setOutlineStyle:function(e,r){return void 0===r&&(r=1),void 0===e?this.showOutline=!1:(this.outlineFillColor=e,this.outlineFillAlpha=r,this.showOutline=!0),this}});g.exports=l},function(g,b,t){var h=t(1109),n=t(0),s=t(34),l=new n({Extends:s,Mixins:[h],initialize:function(e,r,o,a,i,u,c,d){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=48),void 0===i&&(i=32),void 0===u&&(u=15658734),void 0===c&&(c=10066329),void 0===d&&(d=13421772),s.call(this,e,"IsoBox",null),this.projection=4,this.fillTop=u,this.fillLeft=c,this.fillRight=d,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isFilled=!0,this.setPosition(r,o),this.setSize(a,i),this.updateDisplayOrigin()},setProjection:function(e){return this.projection=e,this},setFaces:function(e,r,o){return void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.showTop=e,this.showLeft=r,this.showRight=o,this},setFillStyle:function(e,r,o){return this.fillTop=e,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});g.exports=l},function(g,b,t){var h=t(0),n=t(1112),s=t(34),l=new h({Extends:s,Mixins:[n],initialize:function(e,r,o,a,i,u,c,d,f){void 0===r&&(r=0),void 0===o&&(o=0),void 0===a&&(a=48),void 0===i&&(i=32),void 0===u&&(u=!1),void 0===c&&(c=15658734),void 0===d&&(d=10066329),void 0===f&&(f=13421772),s.call(this,e,"IsoTriangle",null),this.projection=4,this.fillTop=c,this.fillLeft=d,this.fillRight=f,this.showTop=!0,this.showLeft=!0,this.showRight=!0,this.isReversed=u,this.isFilled=!0,this.setPosition(r,o),this.setSize(a,i),this.updateDisplayOrigin()},setProjection:function(e){return this.projection=e,this},setReversed:function(e){return this.isReversed=e,this},setFaces:function(e,r,o){return void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===o&&(o=!0),this.showTop=e,this.showLeft=r,this.showRight=o,this},setFillStyle:function(e,r,o){return this.fillTop=e,this.fillLeft=r,this.fillRight=o,this.isFilled=!0,this}});g.exports=l},function(g,b,t){var h=t(0),n=t(34),s=t(47),l=t(1115),e=new h({Extends:n,Mixins:[l],initialize:function(r,o,a,i,u,c,d,f,p){void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=0),void 0===c&&(c=128),void 0===d&&(d=0),n.call(this,r,"Line",new s(i,u,c,d));var v=Math.max(1,this.geom.right-this.geom.left),m=Math.max(1,this.geom.bottom-this.geom.top);this.lineWidth=1,this._startWidth=1,this._endWidth=1,this.setPosition(o,a),this.setSize(v,m),void 0!==f&&this.setStrokeStyle(1,f,p),this.updateDisplayOrigin()},setLineWidth:function(r,o){return void 0===o&&(o=r),this._startWidth=r,this._endWidth=o,this.lineWidth=r,this},setTo:function(r,o,a,i){return this.geom.setTo(r,o,a,i),this}});g.exports=e},function(g,b,t){var h=t(1118),n=t(0),s=t(59),l=t(469),e=t(227),r=t(34),o=t(472),a=new n({Extends:r,Mixins:[h],initialize:function(i,u,c,d,f,p){void 0===u&&(u=0),void 0===c&&(c=0),r.call(this,i,"Polygon",new e(d));var v=l(this.geom);this.setPosition(u,c),this.setSize(v.width,v.height),void 0!==f&&this.setFillStyle(f,p),this.updateDisplayOrigin(),this.updateData()},smooth:function(i){void 0===i&&(i=1);for(var u=0;u<i;u++)o(this.geom);return this.updateData()},updateData:function(){for(var i=[],u=this.geom.points,c=0;c<u.length;c++)i.push(u[c].x,u[c].y);return i.push(u[0].x,u[0].y),this.pathIndexes=s(i),this.pathData=i,this}});g.exports=a},function(g,b,t){var h=t(10);g.exports=function(n,s){void 0===s&&(s=new h);for(var l,e=1/0,r=1/0,o=-e,a=-r,i=0;i<n.points.length;i++)l=n.points[i],e=Math.min(e,l.x),r=Math.min(r,l.y),o=Math.max(o,l.x),a=Math.max(a,l.y);return s.x=e,s.y=r,s.width=o-e,s.height=a-r,s}},function(g,b,t){var h=t(67),n=t(47),s=t(471);g.exports=function(l,e,r,o){void 0===o&&(o=[]);var a=l.points,i=s(l);!e&&0<r&&(e=i/r);for(var u=0;u<e;u++)for(var c=i*(u/e),d=0,f=0;f<a.length;f++){var p=a[f],v=a[(f+1)%a.length],m=new n(p.x,p.y,v.x,v.y),T=h(m);if(!(c<d||d+T<c)){var y=m.getPoint((c-d)/T);o.push(y);break}d+=T}return o}},function(g,b,t){var h=t(67),n=t(47);g.exports=function(s){for(var l=s.points,e=0,r=0;r<l.length;r++){var o=l[r],a=l[(r+1)%l.length],i=new n(o.x,o.y,a.x,a.y);e+=h(i)}return e}},function(g,b){function t(h,n){return h[0]=n[0],h[1]=n[1],h}g.exports=function(h){for(var n=[],s=h.points,l=0;l<s.length;l++)n.push([s[l].x,s[l].y]);var e=[];for(0<n.length&&e.push(t([0,0],n[0])),l=0;l<n.length-1;l++){var r=n[l],o=n[l+1],a=r[0],i=r[1],u=o[0],c=o[1];e.push([.85*a+.15*u,.85*i+.15*c]),e.push([.15*a+.85*u,.15*i+.85*c])}return 1<n.length&&e.push(t([0,0],n[n.length-1])),h.setTo(e)}},function(g,b,t){var h=t(0),n=t(10),s=t(34),l=t(1121),e=new h({Extends:s,Mixins:[l],initialize:function(r,o,a,i,u,c,d){void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=128),void 0===u&&(u=128),s.call(this,r,"Rectangle",new n(0,0,i,u)),this.setPosition(o,a),this.setSize(i,u),void 0!==c&&this.setFillStyle(c,d),this.updateDisplayOrigin(),this.updateData()},setSize:function(r,o){return this.width=r,this.height=o,this.geom.setSize(r,o),this.updateData(),this},updateData:function(){var r=[],o=this.geom,a=this._tempLine;return o.getLineA(a),r.push(a.x1,a.y1,a.x2,a.y2),o.getLineB(a),r.push(a.x2,a.y2),o.getLineC(a),r.push(a.x2,a.y2),o.getLineD(a),r.push(a.x2,a.y2),this.pathData=r,this}});g.exports=e},function(g,b,t){var h=t(1124),n=t(0),s=t(59),l=t(34),e=new n({Extends:l,Mixins:[h],initialize:function(r,o,a,i,u,c,d,f){void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=5),void 0===u&&(u=32),void 0===c&&(c=64),l.call(this,r,"Star",null),this._points=i,this._innerRadius=u,this._outerRadius=c,this.setPosition(o,a),this.setSize(2*c,2*c),void 0!==d&&this.setFillStyle(d,f),this.updateDisplayOrigin(),this.updateData()},setPoints:function(r){return this._points=r,this.updateData()},setInnerRadius:function(r){return this._innerRadius=r,this.updateData()},setOuterRadius:function(r){return this._outerRadius=r,this.updateData()},points:{get:function(){return this._points},set:function(r){this._points=r,this.updateData()}},innerRadius:{get:function(){return this._innerRadius},set:function(r){this._innerRadius=r,this.updateData()}},outerRadius:{get:function(){return this._outerRadius},set:function(r){this._outerRadius=r,this.updateData()}},updateData:function(){var r=[],o=this._points,a=this._innerRadius,i=this._outerRadius,u=Math.PI/2*3,c=Math.PI/o,d=i,f=i;r.push(d,f+-i);for(var p=0;p<o;p++)r.push(d+Math.cos(u)*i,f+Math.sin(u)*i),u+=c,r.push(d+Math.cos(u)*a,f+Math.sin(u)*a),u+=c;return r.push(d,f+-i),this.pathIndexes=s(r),this.pathData=r,this}});g.exports=e},function(g,b,t){var h=t(0),n=t(34),s=t(82),l=t(1127),e=new h({Extends:n,Mixins:[l],initialize:function(r,o,a,i,u,c,d,f,p,v,m){void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=128),void 0===c&&(c=64),void 0===d&&(d=0),void 0===f&&(f=128),void 0===p&&(p=128),n.call(this,r,"Triangle",new s(i,u,c,d,f,p));var T=this.geom.right-this.geom.left,y=this.geom.bottom-this.geom.top;this.setPosition(o,a),this.setSize(T,y),void 0!==v&&this.setFillStyle(v,m),this.updateDisplayOrigin(),this.updateData()},setTo:function(r,o,a,i,u,c){return this.geom.setTo(r,o,a,i,u,c),this.updateData()},updateData:function(){var r=[],o=this.geom,a=this._tempLine;return o.getLineA(a),r.push(a.x1,a.y1,a.x2,a.y2),o.getLineB(a),r.push(a.x2,a.y2),o.getLineC(a),r.push(a.x2,a.y2),this.pathData=r,this}});g.exports=e},function(g,b,t){var h=t(4),n=t(67);g.exports=function(s,l,e){void 0===e&&(e=new h);var r=s.getLineA(),o=s.getLineB(),a=s.getLineC();if(l<=0||1<=l)return e.x=r.x1,e.y=r.y1,e;var i=n(r),u=n(o),c=n(a),d=(i+u+c)*l,f=0;return d<i?(e.x=r.x1+(r.x2-r.x1)*(f=d/i),e.y=r.y1+(r.y2-r.y1)*f):i+u<d?(f=(d-=i+u)/c,e.x=a.x1+(a.x2-a.x1)*f,e.y=a.y1+(a.y2-a.y1)*f):(f=(d-=i)/u,e.x=o.x1+(o.x2-o.x1)*f,e.y=o.y1+(o.y2-o.y1)*f),e}},function(g,b,t){var h=t(67),n=t(4);g.exports=function(s,l,e,r){void 0===r&&(r=[]);var o=s.getLineA(),a=s.getLineB(),i=s.getLineC(),u=h(o),c=h(a),d=h(i),f=u+c+d;!l&&0<e&&(l=f/e);for(var p=0;p<l;p++){var v=f*(p/l),m=0,T=new n;v<u?(T.x=o.x1+(o.x2-o.x1)*(m=v/u),T.y=o.y1+(o.y2-o.y1)*m):u+c<v?(m=(v-=u+c)/d,T.x=i.x1+(i.x2-i.x1)*m,T.y=i.y1+(i.y2-i.y1)*m):(m=(v-=u)/c,T.x=a.x1+(a.x2-a.x1)*m,T.y=a.y1+(a.y2-a.y1)*m),r.push(T)}return r}},function(g,b){g.exports=function(t,h,n){if(!t||"number"==typeof t)return!1;if(t.hasOwnProperty(h))return t[h]=n,!0;if(-1===h.indexOf("."))return!1;for(var s=h.split("."),l=t,e=t,r=0;r<s.length;r++){if(!l.hasOwnProperty(s[r]))return!1;l=(e=l)[s[r]]}return e[s[s.length-1]]=n,!0}},function(g,b,t){var h=t(116),n=t(117);g.exports=function(s,l,e,r,o,a,i){if(void 0===r&&(r=!1),void 0===a&&(a=16777215),void 0===i&&(i=1),s.length===l.length){var u={faces:[],vertices:[]},c=r?3:2,d=Array.isArray(a),f=Array.isArray(i);if(Array.isArray(e)&&0<e.length)for(D=0;D<e.length;D++){var p=e[D],v=2*e[D],m=e[D]*c,T=s[m],y=s[1+m],x=r?s[2+m]:0,w=l[v],E=l[1+v],S=d?a[p]:a,A=f?i[p]:i,_=0,C=0,M=0;o&&(_=o[m],C=o[1+m],M=r?o[2+m]:0),u.vertices.push(new n(T,y,x,w,E,S,A,_,C,M))}else for(var P=0,L=0,D=0;D<s.length;D+=c)M=C=_=0,o&&(_=o[D],C=o[D+1],M=r?o[D+2]:0),u.vertices.push(new n(T=s[D],y=s[D+1],x=r?s[D+2]:0,w=l[P],E=l[P+1],S=d?a[L]:a,A=f?i[L]:i,_,C,M)),P+=2,L++;for(D=0;D<u.vertices.length;D+=3)u.faces.push(new h(u.vertices[D],u.vertices[D+1],u.vertices[D+2]));return u}console.warn("GenerateVerts: vertices and uvs count not equal")}},function(g,b,t){var h=t(116),n=t(69),s=t(39),l=t(117),e=new s,r=new s,o=new n;g.exports=function(a,i,u,c,d,f,p,v,m,T){void 0===u&&(u=1),void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=0),void 0===p&&(p=0),void 0===v&&(v=0),void 0===m&&(m=0),void 0===T&&(T=!0);var y={faces:[],verts:[]},x=a.materials;e.set(c,d,f),r.set(p,v,m),o.fromRotationXYTranslation(r,e,T);for(var w=0;w<a.models.length;w++)for(var E=a.models[w],S=E.vertices,A=E.textureCoords,_=E.faces,C=0;C<_.length;C++){var M=_[C],P=M.vertices[0],L=M.vertices[1],D=M.vertices[2],F=S[P.vertexIndex],X=S[L.vertexIndex],R=S[D.vertexIndex],O=P.textureCoordsIndex,N=L.textureCoordsIndex,k=D.textureCoordsIndex,I=-1===O?{u:0,v:1}:A[O],B=-1===N?{u:0,v:0}:A[N],Y=-1===k?{u:1,v:1}:A[k],U=16777215;""!==M.material&&x[M.material]&&(U=x[M.material]);var G=new l(F.x*u,F.y*u,F.z*u,I.u,I.v,U).transformMat4(o),W=new l(X.x*u,X.y*u,X.z*u,B.u,B.v,U).transformMat4(o),z=new l(R.x*u,R.y*u,R.z*u,Y.u,Y.v,U).transformMat4(o);y.verts.push(G,W,z),y.faces.push(new h(G,W,z))}return i&&(i.faces=i.faces.concat(y.faces),i.vertices=i.vertices.concat(y.verts)),y}},function(g,b,t){var h=t(65),n=t(0),s=t(11),l=t(200),e=t(12),r=new n({Extends:h,Mixins:[s.ScrollFactor,s.Visible],initialize:function(o,a,i,u,c,d,f){h.call(this,o,a,i),this.color=new l(u,c,d),this.intensity=f,this.renderFlags=15,this.cameraFilter=0,this.setScrollFactor(1,1)},willRender:function(o){return!(r.RENDER_MASK!==this.renderFlags||0!==this.cameraFilter&&this.cameraFilter&o.id)},setColor:function(o){var a=e.getFloatsFromUintRGB(o);return this.color.set(a[0],a[1],a[2]),this},setIntensity:function(o){return this.intensity=o,this},setRadius:function(o){return this.radius=o,this}});r.RENDER_MASK=15,g.exports=r},function(g,b,t){var h=t(151),n=t(0),s=t(50),l=t(481),e=t(150),r=t(200),o=t(74),a=t(79),i=t(12),u=new n({initialize:function(){this.lights=[],this.ambientColor=new r(.1,.1,.1),this.active=!1,this.maxLights=-1,this.visibleLights=0},addPointLight:function(c,d,f,p,v,m){return this.systems.displayList.add(new e(this.scene,c,d,f,p,v,m))},enable:function(){return-1===this.maxLights&&(this.maxLights=this.systems.renderer.config.maxLights),this.active=!0,this},disable:function(){return this.active=!1,this},getLights:function(c){for(var d=this.lights,f=c.worldView,p=[],v=0;v<d.length;v++){var m=d[v];m.willRender(c)&&h(m,f)&&p.push({light:m,distance:s(m.x,m.y,f.centerX,f.centerY)})}return p.length>this.maxLights&&(a(p,this.sortByDistance),p=p.slice(0,this.maxLights)),this.visibleLights=p.length,p},sortByDistance:function(c,d){return c.distance>=d.distance},setAmbientColor:function(c){var d=i.getFloatsFromUintRGB(c);return this.ambientColor.set(d[0],d[1],d[2]),this},getMaxVisibleLights:function(){return this.maxLights},getLightCount:function(){return this.lights.length},addLight:function(c,d,f,p,v){void 0===c&&(c=0),void 0===d&&(d=0),void 0===f&&(f=128),void 0===p&&(p=16777215),void 0===v&&(v=1);var m=i.getFloatsFromUintRGB(p),T=new l(c,d,f,m[0],m[1],m[2],v);return this.lights.push(T),T},removeLight:function(c){var d=this.lights.indexOf(c);return 0<=d&&o(this.lights,d),this},shutdown:function(){this.lights.length=0},destroy:function(){this.shutdown()}});g.exports=u},function(g,b,t){var h=t(56),n=t(17)(!1,n={Circle:t(1191),Ellipse:t(1201),Intersects:t(484),Line:t(1221),Mesh:t(1243),Point:t(1246),Polygon:t(1260),Rectangle:t(502),Triangle:t(1293)},h);g.exports=n},function(g,b,t){g.exports={CircleToCircle:t(231),CircleToRectangle:t(151),GetCircleToCircle:t(1211),GetCircleToRectangle:t(1212),GetLineToCircle:t(232),GetLineToLine:t(485),GetLineToPoints:t(486),GetLineToPolygon:t(487),GetLineToRectangle:t(234),GetRaysFromPointToPolygon:t(1213),GetRectangleIntersection:t(1214),GetRectangleToRectangle:t(1215),GetRectangleToTriangle:t(1216),GetTriangleToCircle:t(1217),GetTriangleToLine:t(492),GetTriangleToTriangle:t(1218),LineToCircle:t(233),LineToLine:t(96),LineToRectangle:t(488),PointToLine:t(496),PointToLineSegment:t(1219),RectangleToRectangle:t(152),RectangleToTriangle:t(489),RectangleToValues:t(1220),TriangleToCircle:t(491),TriangleToLine:t(493),TriangleToTriangle:t(494)}},function(g,b,t){var h=t(39);g.exports=function(n,s,l){var e=n.x1,r=n.y1,i=s.x1,u=s.y1,c=n.x2-e,d=n.y2-r,f=s.x2-i,p=s.y2-u;if(0==c||p*c-f*d==0)return!1;var v=(c*(u-r)+d*(e-i))/(f*d-p*c),m=(i+f*v-e)/c;return m<0||v<0||1<v?null:(void 0===l&&(l=new h),l.set(e+c*m,r+d*m,m))}},function(g,b,t){var h=t(39),n=t(485),s=new(t(47)),l=new h;g.exports=function(e,r,o){void 0===o&&(o=new h);var a=!1;o.set(),l.set();for(var i=r[0],u=1;u<r.length;u++){var c=r[u];s.setTo(i.x,i.y,c.x,c.y),i=c,n(e,s,l)&&(!a||l.z<o.z)&&(o.copy(l),a=!0)}return a?o:null}},function(g,b,t){var h=t(39),n=t(140),s=t(486),l=new h;g.exports=function(e,r,o){void 0===o&&(o=new n),Array.isArray(r)||(r=[r]);var a=!1;o.set(),l.set();for(var i=0;i<r.length;i++)s(e,r[i].points,l)&&(!a||l.z<o.z)&&(o.set(l.x,l.y,l.z,i),a=!0);return a?o:null}},function(g,b){g.exports=function(t,h){var n=t.x1,s=t.y1,l=t.x2,e=t.y2,r=h.x,o=h.y,a=h.right,i=h.bottom,u=0;if(r<=n&&n<=a&&o<=s&&s<=i||r<=l&&l<=a&&o<=e&&e<=i)return!0;if(n<r&&r<=l){if(o<(u=s+(e-s)*(r-n)/(l-n))&&u<=i)return!0}else if(a<n&&l<=a&&o<=(u=s+(e-s)*(a-n)/(l-n))&&u<=i)return!0;if(s<o&&o<=e){if(r<=(u=n+(l-n)*(o-s)/(e-s))&&u<=a)return!0}else if(i<s&&e<=i&&r<=(u=n+(l-n)*(i-s)/(e-s))&&u<=a)return!0;return!1}},function(g,b,t){var h=t(96),n=t(57),s=t(235),l=t(490);g.exports=function(e,r){if(r.left>e.right||r.right<e.left||r.top>e.bottom||r.bottom<e.top)return!1;var o=r.getLineA(),a=r.getLineB(),i=r.getLineC();if(n(e,o.x1,o.y1)||n(e,o.x2,o.y2)||n(e,a.x1,a.y1)||n(e,a.x2,a.y2)||n(e,i.x1,i.y1)||n(e,i.x2,i.y2))return!0;var u=e.getLineA(),c=e.getLineB(),d=e.getLineC(),f=e.getLineD();if(h(o,u)||h(o,c)||h(o,d)||h(o,f)||h(a,u)||h(a,c)||h(a,d)||h(a,f)||h(i,u)||h(i,c)||h(i,d)||h(i,f))return!0;var p=l(e);return 0<s(r,p,!0).length}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=[]),h.push({x:t.x,y:t.y}),h.push({x:t.right,y:t.y}),h.push({x:t.right,y:t.bottom}),h.push({x:t.x,y:t.bottom}),h}},function(g,b,t){var h=t(233),n=t(115);g.exports=function(s,l){return!(s.left>l.right||s.right<l.left||s.top>l.bottom||s.bottom<l.top||!n(s,l.x,l.y)&&!h(s.getLineA(),l)&&!h(s.getLineB(),l)&&!h(s.getLineC(),l))}},function(g,b,t){var h=t(4),n=t(493),s=t(96);g.exports=function(l,e,r){if(void 0===r&&(r=[]),n(l,e))for(var o=l.getLineA(),a=l.getLineB(),i=l.getLineC(),u=[new h,new h,new h],c=[s(o,e,u[0]),s(a,e,u[1]),s(i,e,u[2])],d=0;d<3;d++)c[d]&&r.push(u[d]);return r}},function(g,b,t){var h=t(96);g.exports=function(n,s){return!!(n.contains(s.x1,s.y1)||n.contains(s.x2,s.y2)||h(n.getLineA(),s)||h(n.getLineB(),s)||h(n.getLineC(),s))}},function(g,b,t){var h=t(235),n=t(495),s=t(96);g.exports=function(l,e){if(l.left>e.right||l.right<e.left||l.top>e.bottom||l.bottom<e.top)return!1;var r=l.getLineA(),o=l.getLineB(),a=l.getLineC(),i=e.getLineA(),u=e.getLineB(),c=e.getLineC();if(s(r,i)||s(r,u)||s(r,c)||s(o,i)||s(o,u)||s(o,c)||s(a,i)||s(a,u)||s(a,c))return!0;var d=n(l);return 0<h(e,d,!0).length||(d=n(e),0<h(l,d,!0).length)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=[]),h.push({x:t.x1,y:t.y1}),h.push({x:t.x2,y:t.y2}),h.push({x:t.x3,y:t.y3}),h}},function(g,b){g.exports=function(t,h,n){void 0===n&&(n=1);var s=h.x1,l=h.y1,e=h.x2,r=h.y2,o=t.x,a=t.y,i=(e-s)*(e-s)+(r-l)*(r-l);if(0==i)return!1;var u=((o-s)*(e-s)+(a-l)*(r-l))/i;return u<0?Math.sqrt((s-o)*(s-o)+(l-a)*(l-a))<=n:0<=u&&u<=1?Math.abs(((l-a)*(e-s)-(s-o)*(r-l))/i)*Math.sqrt(i)<=n:Math.sqrt((e-o)*(e-o)+(r-a)*(r-a))<=n}},function(g,b,t){var h=t(14),n=t(68),s=t(97);g.exports=function(l){var e=s(l)-h.TAU;return n(e,-Math.PI,Math.PI)}},function(g,b){var t=!0,h="untitled",n="",s="";function l(e){return 0===e.models.length&&e.models.push({faces:[],name:h,textureCoords:[],vertexNormals:[],vertices:[]}),n="",e.models[e.models.length-1]}g.exports=function(e,r){void 0===r&&(r=!0),t=r;var o={materials:{},materialLibraries:[],models:[]};s=n="";for(var a,i,c,d,f,p,v,m,T,y,x,w,E,S,A,_,C,M,P,L,D,F,R,O,N,k=e.split("\n"),I=0;I<k.length;I++){var B=(O=k[I],-1<(N=O.indexOf("#"))?O.substring(0,N):O).replace(/\s\s+/g," ").trim().split(" ");switch(B[0].toLowerCase()){case"o":R=2<=(F=B).length?F[1]:h,o.models.push({faces:[],name:R,textureCoords:[],vertexNormals:[],vertices:[]}),n="";break;case"g":2===(D=B).length&&(n=D[1]);break;case"v":_=o,M=2<=(C=(A=B).length)?parseFloat(A[1]):0,P=3<=C?parseFloat(A[2]):0,L=4<=C?parseFloat(A[3]):0,l(_).vertices.push({x:M,y:P,z:L});break;case"vt":y=o,S=E=w=void 0,w=2<=(x=(T=B).length)?parseFloat(T[1]):0,E=3<=x?parseFloat(T[2]):0,S=4<=x?parseFloat(T[3]):0,isNaN(w)&&(w=0),isNaN(E)&&(E=0),isNaN(S)&&(S=0),t&&(E=1-E),l(y).textureCoords.push({u:w,v:E,w:S});break;case"vn":d=o,p=2<=(f=(c=B).length)?parseFloat(c[1]):0,v=3<=f?parseFloat(c[2]):0,m=4<=f?parseFloat(c[3]):0,l(d).vertexNormals.push({x:p,y:v,z:m});break;case"f":!function(Y,U){var G=Y.length-1;if(!(G<3)){for(var W={group:n,material:s,vertices:[]},z=0;z<G;z++){var V,H,j,q=Y[z+1].split("/"),Q=q.length;Q<1||3<Q||(H=V=j=0,j=parseInt(q[0],10),1<Q&&""!==q[1]&&(V=parseInt(q[1],10)),2<Q&&(H=parseInt(q[2],10)),0!==j&&(j<0&&(j=l(U).vertices.length+1+j),--V,--j,--H,W.vertices.push({textureCoordsIndex:V,vertexIndex:j,vertexNormalIndex:H})))}l(U).faces.push(W)}}(B,o);break;case"mtllib":2<=(i=B).length&&o.materialLibraries.push(i[1]);break;case"usemtl":2<=(a=B).length&&(s=a[1])}}return o}},function(g,b,t){var h=t(103);g.exports=function(n){for(var s={},l=n.split("\n"),e="",r=0;r<l.length;r++){var o=l[r].trim();if(0!==o.indexOf("#")&&""!==o){var a=o.replace(/\s\s+/g," ").trim().split(" ");switch(a[0].toLowerCase()){case"newmtl":e=a[1];break;case"kd":var i=Math.floor(255*a[1]),u=2<=a.length?Math.floor(255*a[2]):i,c=3<=a.length?Math.floor(255*a[3]):i;s[e]=h(i,u,c)}}}return s}},function(g,b){g.exports=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},function(g,b){g.exports=function(t){return t.x*t.x+t.y*t.y}},function(g,b,t){var h=t(10);h.Area=t(1267),h.Ceil=t(1268),h.CeilAll=t(1269),h.CenterOn=t(190),h.Clone=t(1270),h.Contains=t(57),h.ContainsPoint=t(1271),h.ContainsRect=t(503),h.CopyFrom=t(1272),h.Decompose=t(490),h.Equals=t(1273),h.FitInside=t(1274),h.FitOutside=t(1275),h.Floor=t(1276),h.FloorAll=t(1277),h.FromPoints=t(199),h.FromXY=t(1278),h.GetAspectRatio=t(237),h.GetCenter=t(1279),h.GetPoint=t(171),h.GetPoints=t(306),h.GetSize=t(1280),h.Inflate=t(1281),h.Intersection=t(1282),h.MarchingAnts=t(316),h.MergePoints=t(1283),h.MergeRect=t(1284),h.MergeXY=t(1285),h.Offset=t(1286),h.OffsetPoint=t(1287),h.Overlaps=t(1288),h.Perimeter=t(130),h.PerimeterPoint=t(1289),h.Random=t(174),h.RandomOutside=t(1290),h.SameDimensions=t(1291),h.Scale=t(1292),h.Union=t(441),g.exports=h},function(g,b){g.exports=function(t,h){return!(h.width*h.height>t.width*t.height)&&h.x>t.x&&h.x<t.right&&h.right>t.x&&h.right<t.right&&h.y>t.y&&h.y<t.bottom&&h.bottom>t.y&&h.bottom<t.bottom}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=(n.x1+n.x2+n.x3)/3,s.y=(n.y1+n.y2+n.y3)/3,s}},function(g,b){g.exports=function(t,h,n){return t.x1+=h,t.y1+=n,t.x2+=h,t.y2+=n,t.x3+=h,t.y3+=n,t}},function(g,b,t){var h=t(4);function n(s,l,e,r){var o=s-e,a=l-r;return Math.sqrt(o*o+a*a)}g.exports=function(s,l){void 0===l&&(l=new h);var e=s.x1,r=s.y1,o=s.x2,a=s.y2,i=s.x3,u=s.y3,c=n(i,u,o,a),d=n(e,r,i,u),f=n(o,a,e,r),p=c+d+f;return l.x=(e*c+o*d+i*f)/p,l.y=(r*c+a*d+u*f)/p,l}},function(g,b){g.exports=function(t,h){return function(n,s,l,e){var r=t.getPixelAlpha(s,l,e.texture.key,e.frame.name);return r&&h<=r}}},function(g,b){g.exports=function(t,h,n){return{gameObject:t,enabled:!0,alwaysEnabled:!1,draggable:!1,dropZone:!1,cursor:!1,target:null,camera:null,hitArea:h,hitAreaCallback:n,hitAreaDebug:null,customHitArea:!1,localX:0,localY:0,dragState:0,dragStartX:0,dragStartY:0,dragStartXGlobal:0,dragStartYGlobal:0,dragX:0,dragY:0}}},function(g,b,t){var h=new(t(0))({initialize:function(n,s){this.pad=n,this.events=n.events,this.index=s,this.value=0,this.threshold=.1},update:function(n){this.value=n},getValue:function(){return Math.abs(this.value)<this.threshold?0:this.value},destroy:function(){this.pad=null,this.events=null}});g.exports=h},function(g,b,t){var h=t(0),n=t(239),s=new h({initialize:function(l,e){this.pad=l,this.events=l.manager,this.index=e,this.value=0,this.threshold=1,this.pressed=!1},update:function(l){this.value=l;var e=this.pad,r=this.index;l>=this.threshold?this.pressed||(this.pressed=!0,this.events.emit(n.BUTTON_DOWN,e,this,l),this.pad.emit(n.GAMEPAD_BUTTON_DOWN,r,l,this)):this.pressed&&(this.pressed=!1,this.events.emit(n.BUTTON_UP,e,this,l),this.pad.emit(n.GAMEPAD_BUTTON_UP,r,l,this))},destroy:function(){this.pad=null,this.events=null}});g.exports=s},function(g,b,t){var h=t(509),n=t(510),s=t(0),l=t(9),e=t(3),r=new s({Extends:l,initialize:function(o,a){l.call(this),this.manager=o,this.pad=a,this.id=a.id,this.index=a.index;for(var i=[],u=0;u<a.buttons.length;u++)i.push(new n(this,u));this.buttons=i;var c=[];for(u=0;u<a.axes.length;u++)c.push(new h(this,u));this.axes=c,this.vibration=a.vibrationActuator;var d={value:0,pressed:!1};this._LCLeft=i[14]?i[14]:d,this._LCRight=i[15]?i[15]:d,this._LCTop=i[12]?i[12]:d,this._LCBottom=i[13]?i[13]:d,this._RCLeft=i[2]?i[2]:d,this._RCRight=i[1]?i[1]:d,this._RCTop=i[3]?i[3]:d,this._RCBottom=i[0]?i[0]:d,this._FBLeftTop=i[4]?i[4]:d,this._FBLeftBottom=i[6]?i[6]:d,this._FBRightTop=i[5]?i[5]:d,this._FBRightBottom=i[7]?i[7]:d;var f={value:0};this._HAxisLeft=c[0]?c[0]:f,this._VAxisLeft=c[1]?c[1]:f,this._HAxisRight=c[2]?c[2]:f,this._VAxisRight=c[3]?c[3]:f,this.leftStick=new e,this.rightStick=new e,this._created=performance.now()},getAxisTotal:function(){return this.axes.length},getAxisValue:function(o){return this.axes[o].getValue()},setAxisThreshold:function(o){for(var a=0;a<this.axes.length;a++)this.axes[a].threshold=o},getButtonTotal:function(){return this.buttons.length},getButtonValue:function(o){return this.buttons[o].value},isButtonDown:function(o){return this.buttons[o].pressed},update:function(o){if(!(o.timestamp<this._created)){for(var a=this.buttons,i=o.buttons,f=a.length,u=0;u<f;u++)a[u].update(i[u].value);var c=this.axes,d=o.axes;for(f=c.length,u=0;u<f;u++)c[u].update(d[u]);2<=f&&(this.leftStick.set(c[0].getValue(),c[1].getValue()),4<=f&&this.rightStick.set(c[2].getValue(),c[3].getValue()))}},destroy:function(){var o;for(this.removeAllListeners(),this.manager=null,this.pad=null,o=0;o<this.buttons.length;o++)this.buttons[o].destroy();for(o=0;o<this.axes.length;o++)this.axes[o].destroy();this.buttons=[],this.axes=[]},connected:{get:function(){return this.pad.connected}},timestamp:{get:function(){return this.pad.timestamp}},left:{get:function(){return this._LCLeft.pressed}},right:{get:function(){return this._LCRight.pressed}},up:{get:function(){return this._LCTop.pressed}},down:{get:function(){return this._LCBottom.pressed}},A:{get:function(){return this._RCBottom.pressed}},Y:{get:function(){return this._RCTop.pressed}},X:{get:function(){return this._RCLeft.pressed}},B:{get:function(){return this._RCRight.pressed}},L1:{get:function(){return this._FBLeftTop.value}},L2:{get:function(){return this._FBLeftBottom.value}},R1:{get:function(){return this._FBRightTop.value}},R2:{get:function(){return this._FBRightBottom.value}}});g.exports=r},function(g,b,t){var h=t(0),n=t(9),s=t(154),l=new h({Extends:n,initialize:function(e,r){n.call(this),this.plugin=e,this.keyCode=r,this.originalEvent=void 0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.location=0,this.timeDown=0,this.duration=0,this.timeUp=0,this.emitOnRepeat=!1,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1},setEmitOnRepeat:function(e){return this.emitOnRepeat=e,this},onDown:function(e){this.originalEvent=e,this.enabled&&(this.altKey=e.altKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.location=e.location,this.repeats++,this.isDown?this.emitOnRepeat&&this.emit(s.DOWN,this,e):(this.isDown=!0,this.isUp=!1,this.timeDown=e.timeStamp,this.duration=0,this._justDown=!0,this._justUp=!1,this.emit(s.DOWN,this,e)))},onUp:function(e){this.originalEvent=e,this.enabled&&(this.isDown=!1,this.isUp=!0,this.timeUp=e.timeStamp,this.duration=this.timeUp-this.timeDown,this.repeats=0,this._justDown=!1,this._justUp=!0,this._tick=-1,this.emit(s.UP,this,e))},reset:function(){return this.preventDefault=!0,this.enabled=!0,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.metaKey=!1,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this._justDown=!1,this._justUp=!1,this._tick=-1,this},getDuration:function(){return this.isDown?this.plugin.game.loop.time-this.timeDown:0},destroy:function(){this.removeAllListeners(),this.originalEvent=null,this.plugin=null}});g.exports=l},function(g,b,t){var h=t(0),n=t(154),s=t(2),l=t(514),e=t(516),r=new h({initialize:function(o,a,i){if(void 0===i&&(i={}),a.length<2)return!1;this.manager=o,this.enabled=!0,this.keyCodes=[];for(var u=0;u<a.length;u++){var c=a[u];"string"==typeof c?this.keyCodes.push(c.toUpperCase().charCodeAt(0)):"number"==typeof c?this.keyCodes.push(c):c.hasOwnProperty("keyCode")&&this.keyCodes.push(c.keyCode)}this.current=this.keyCodes[0],this.index=0,this.size=this.keyCodes.length,this.timeLastMatched=0,this.matched=!1,this.timeMatched=0,this.resetOnWrongKey=s(i,"resetOnWrongKey",!0),this.maxKeyDelay=s(i,"maxKeyDelay",0),this.resetOnMatch=s(i,"resetOnMatch",!1),this.deleteOnMatch=s(i,"deleteOnMatch",!1);var d=this;this.onKeyDown=function(f){!d.matched&&d.enabled&&l(f,d)&&(d.manager.emit(n.COMBO_MATCH,d,f),d.resetOnMatch?e(d):d.deleteOnMatch&&d.destroy())},this.manager.on(n.ANY_KEY_DOWN,this.onKeyDown)},progress:{get:function(){return this.index/this.size}},destroy:function(){this.enabled=!1,this.keyCodes=[],this.manager.off(n.ANY_KEY_DOWN,this.onKeyDown),this.manager=null}});g.exports=r},function(g,b,t){var h=t(515);g.exports=function(n,s){if(s.matched)return!0;var e=!1,r=!1;return n.keyCode===s.current&&(0<s.index&&0<s.maxKeyDelay?n.timeStamp<=s.timeLastMatched+s.maxKeyDelay&&(r=!0,e=h(n,s)):(r=!0,e=h(n,s))),!r&&s.resetOnWrongKey&&(s.index=0,s.current=s.keyCodes[0]),e&&(s.timeLastMatched=n.timeStamp,s.matched=!0,s.timeMatched=n.timeStamp),e}},function(g,b){g.exports=function(t,h){return h.timeLastMatched=t.timeStamp,h.index++,h.index===h.size||(h.current=h.keyCodes[h.index],!1)}},function(g,b){g.exports=function(t){return t.current=t.keyCodes[0],t.index=0,t.timeLastMatched=0,t.matched=!1,t.timeMatched=0,t}},function(g,b,t){var h=t(240);g.exports=function(n,s){var l=h(s,n.xhrSettings),e=new XMLHttpRequest;if(e.open("GET",n.src,l.async,l.user,l.password),e.responseType=n.xhrSettings.responseType,e.timeout=l.timeout,l.headers)for(var r in l.headers)e.setRequestHeader(r,l.headers[r]);return l.header&&l.headerValue&&e.setRequestHeader(l.header,l.headerValue),l.requestedWith&&e.setRequestHeader("X-Requested-With",l.requestedWith),l.overrideMimeType&&e.overrideMimeType(l.overrideMimeType),l.withCredentials&&(e.withCredentials=!0),e.onload=n.onLoad.bind(n,e),e.onerror=n.onError.bind(n,e),e.onprogress=n.onProgress.bind(n),e.send(),e}},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(519),o=t(7),a=new h({Extends:s,initialize:function(i,u,c,d,f){var p;o(u)&&(u=e(p=u,"key"),d=e(p,"xhrSettings"),f=e(p,"context",f)),s.call(this,i,{type:"audio",cache:i.cacheManager.audio,extension:c.type,responseType:"arraybuffer",key:u,url:c.url,xhrSettings:d,config:{context:f}})},onProcess:function(){this.state=n.FILE_PROCESSING;var i=this;this.config.context.decodeAudioData(this.xhrLoader.response,function(u){i.data=u,i.onProcessComplete()},function(u){console.error("Error decoding audio: "+i.key+" - ",u?u.message:null),i.onProcessError()}),this.config.context=null}});a.create=function(i,u,c,d,f){var p=i.systems.game,v=p.config.audio,m=p.device.audio;o(u)&&(c=e(u,"url",[]),d=e(u,"config",{}));var T=a.getAudioURL(p,c);return T?m.webAudio&&!v.disableWebAudio?new a(i,u,T,f,p.sound.context):new r(i,u,T,d):null},a.getAudioURL=function(i,u){Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++){var d=e(u[c],"url",u[c]);if(0===d.indexOf("blob:")||0===d.indexOf("data:"))return{url:d,type:""};var f=d.match(/\.([a-zA-Z0-9]+)($|\?)/);if(f=e(u[c],"type",f?f[1]:"").toLowerCase(),i.device.audio[f])return{url:d,type:f}}return null},l.register("audio",function(i,u,c,d){var f,p=this.systems.game,m=p.device.audio;if(p.config.audio.noAudio||!m.webAudio&&!m.audioData)return this;if(Array.isArray(i))for(var T=0;T<i.length;T++)(f=a.create(this,i[T]))&&this.addFile(f);else(f=a.create(this,i,u,c,d))&&this.addFile(f);return this}),g.exports=a},function(g,b,t){var h=t(0),n=t(95),s=t(23),l=t(2),e=t(155),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c){var d;r(i)&&(i=l(d=i,"key"),c=l(d,"config",c)),s.call(this,a,{type:"audio",cache:a.cacheManager.audio,extension:u.type,key:i,url:u.url,config:c}),this.locked="ontouchstart"in window,this.loaded=!1,this.filesLoaded=0,this.filesTotal=0},onLoad:function(){this.loaded||(this.loaded=!0,this.loader.nextFile(this,!0))},onError:function(){for(var a=0;a<this.data.length;a++){var i=this.data[a];i.oncanplaythrough=null,i.onerror=null}this.loader.nextFile(this,!1)},onProgress:function(a){var i=a.target;i.oncanplaythrough=null,i.onerror=null,this.filesLoaded++,this.percentComplete=Math.min(this.filesLoaded/this.filesTotal,1),this.loader.emit(n.FILE_PROGRESS,this,this.percentComplete),this.filesLoaded===this.filesTotal&&this.onLoad()},load:function(){this.data=[];var a=this.config&&this.config.instances||1;this.filesTotal=a,this.filesLoaded=0;for(var i=this.percentComplete=0;i<a;i++){var u=new Audio;u.dataset||(u.dataset={}),u.dataset.name=this.key+("0"+i).slice(-2),u.dataset.used="false",this.locked?u.dataset.locked="true":(u.dataset.locked="false",u.preload="auto",u.oncanplaythrough=this.onProgress.bind(this),u.onerror=this.onError.bind(this)),this.data.push(u)}for(i=0;i<this.data.length;i++)(u=this.data[i]).src=e(this,this.loader.baseURL),this.locked||u.load();this.locked&&setTimeout(this.onLoad.bind(this))}});g.exports=o},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c){var d,f="js";r(i)&&(i=e(d=i,"key"),u=e(d,"url"),c=e(d,"xhrSettings"),f=e(d,"extension",f)),s.call(this,a,{type:"script",cache:!1,extension:f,responseType:"text",key:i,url:u,xhrSettings:c})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("script",function(a,i,u){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.addFile(new o(this,a[c]));else this.addFile(new o(this,a,i,u));return this}),g.exports=o},function(g,b,t){var h=t(522),n=t(157),s=t(0),l=t(62),e=t(524),r=t(525),o=new s({initialize:function(a){this.world=a,this.scene=a.scene,this.sys=a.scene.sys},collider:function(a,i,u,c,d){return this.world.addCollider(a,i,u,c,d)},overlap:function(a,i,u,c,d){return this.world.addOverlap(a,i,u,c,d)},existing:function(a,i){return this.world.enableBody(a,i?l.STATIC_BODY:l.DYNAMIC_BODY),a},staticImage:function(a,i,u,c){var d=new h(this.scene,a,i,u,c);return this.sys.displayList.add(d),this.world.enableBody(d,l.STATIC_BODY),d},image:function(a,i,u,c){var d=new h(this.scene,a,i,u,c);return this.sys.displayList.add(d),this.world.enableBody(d,l.DYNAMIC_BODY),d},staticSprite:function(a,i,u,c){var d=new n(this.scene,a,i,u,c);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,l.STATIC_BODY),d},sprite:function(a,i,u,c){var d=new n(this.scene,a,i,u,c);return this.sys.displayList.add(d),this.sys.updateList.add(d),this.world.enableBody(d,l.DYNAMIC_BODY),d},staticGroup:function(a,i){return this.sys.updateList.add(new r(this.world,this.world.scene,a,i))},group:function(a,i){return this.sys.updateList.add(new e(this.world,this.world.scene,a,i))},destroy:function(){this.world=null,this.scene=null,this.sys=null}});g.exports=o},function(g,b,t){var h=t(0),n=t(243),s=t(125),l=new h({Extends:s,Mixins:[n.Acceleration,n.Angular,n.Bounce,n.Debug,n.Drag,n.Enable,n.Friction,n.Gravity,n.Immovable,n.Mass,n.Pushable,n.Size,n.Velocity],initialize:function(e,r,o,a,i){s.call(this,e,r,o,a,i),this.body=null}});g.exports=l},function(g,b,t){var h=t(244),n=t(65),s=t(231),l=t(151);g.exports=function(e,r,o,a,i,u){var c=h(e,r-a,o-a,2*a,2*a,i,u);if(0===c.length)return c;for(var d=new n(r,o,a),f=new n,p=[],v=0;v<c.length;v++){var m=c[v];m.isCircle?(f.setTo(m.center.x,m.center.y,m.halfWidth),s(d,f)&&p.push(m)):l(d,m)&&p.push(m)}return p}},function(g,b,t){var h=t(157),n=t(0),s=t(62),l=t(2),e=t(113),r=t(7),o=new n({Extends:e,initialize:function(a,i,u,c){var d;u||c?r(u)?(c=u,u=null,c.internalCreateCallback=this.createCallbackHandler,c.internalRemoveCallback=this.removeCallbackHandler):Array.isArray(u)&&r(u[0])?(c=u[0],d=this,u.forEach(function(f){f.internalCreateCallback=d.createCallbackHandler,f.internalRemoveCallback=d.removeCallbackHandler}),u=null):c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler},this.world=a,c.classType=l(c,"classType",h),this.physicsType=s.DYNAMIC_BODY,this.defaults={setCollideWorldBounds:l(c,"collideWorldBounds",!1),setBoundsRectangle:l(c,"customBoundsRectangle",null),setAccelerationX:l(c,"accelerationX",0),setAccelerationY:l(c,"accelerationY",0),setAllowDrag:l(c,"allowDrag",!0),setAllowGravity:l(c,"allowGravity",!0),setAllowRotation:l(c,"allowRotation",!0),setBounceX:l(c,"bounceX",0),setBounceY:l(c,"bounceY",0),setDragX:l(c,"dragX",0),setDragY:l(c,"dragY",0),setEnable:l(c,"enable",!0),setGravityX:l(c,"gravityX",0),setGravityY:l(c,"gravityY",0),setFrictionX:l(c,"frictionX",0),setFrictionY:l(c,"frictionY",0),setMaxVelocityX:l(c,"maxVelocityX",1e4),setMaxVelocityY:l(c,"maxVelocityY",1e4),setVelocityX:l(c,"velocityX",0),setVelocityY:l(c,"velocityY",0),setAngularVelocity:l(c,"angularVelocity",0),setAngularAcceleration:l(c,"angularAcceleration",0),setAngularDrag:l(c,"angularDrag",0),setMass:l(c,"mass",1),setImmovable:l(c,"immovable",!1)},e.call(this,i,u,c),this.type="PhysicsGroup"},createCallbackHandler:function(a){a.body||this.world.enableBody(a,s.DYNAMIC_BODY);var i=a.body;for(var u in this.defaults)i[u](this.defaults[u])},removeCallbackHandler:function(a){a.body&&this.world.disableBody(a)},setVelocity:function(a,i,u){void 0===u&&(u=0);for(var c=this.getChildren(),d=0;d<c.length;d++)c[d].body.velocity.set(a+d*u,i+d*u);return this},setVelocityX:function(a,i){void 0===i&&(i=0);for(var u=this.getChildren(),c=0;c<u.length;c++)u[c].body.velocity.x=a+c*i;return this},setVelocityY:function(a,i){void 0===i&&(i=0);for(var u=this.getChildren(),c=0;c<u.length;c++)u[c].body.velocity.y=a+c*i;return this}});g.exports=o},function(g,b,t){var h=t(157),n=t(0),s=t(62),l=t(2),e=t(113),r=t(7),o=new n({Extends:e,initialize:function(a,i,u,c){u||c?r(u)?(c=u,u=null,c.internalCreateCallback=this.createCallbackHandler,c.internalRemoveCallback=this.removeCallbackHandler,c.createMultipleCallback=this.createMultipleCallbackHandler,c.classType=l(c,"classType",h)):Array.isArray(u)&&r(u[0])?(c=u,u=null,c.forEach(function(d){d.internalCreateCallback=this.createCallbackHandler,d.internalRemoveCallback=this.removeCallbackHandler,d.createMultipleCallback=this.createMultipleCallbackHandler,d.classType=l(d,"classType",h)})):c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler}:c={internalCreateCallback:this.createCallbackHandler,internalRemoveCallback:this.removeCallbackHandler,createMultipleCallback:this.createMultipleCallbackHandler,classType:h},this.world=a,this.physicsType=s.STATIC_BODY,e.call(this,i,u,c),this.type="StaticPhysicsGroup"},createCallbackHandler:function(a){a.body||this.world.enableBody(a,s.STATIC_BODY)},removeCallbackHandler:function(a){a.body&&this.world.disableBody(a)},createMultipleCallbackHandler:function(){this.refresh()},refresh:function(){for(var a=this.children.entries,i=0;i<a.length;i++)a[i].body.reset();return this}});g.exports=o},function(g,b,t){var h=t(350),n=t(527),s=t(18),l=t(0),e=t(528),r=t(62),o=t(50),a=t(9),i=t(245),u=t(124),c=t(354),d=t(355),f=t(246),p=t(247),v=t(529),m=t(6),T=t(14),y=t(211),x=t(530),w=t(10),E=t(531),S=t(532),A=t(537),_=t(538),C=t(149),M=t(539),P=t(248),L=t(25),D=t(3),F=t(68),X=new l({Extends:a,initialize:function(R,O){a.call(this),this.scene=R,this.bodies=new C,this.staticBodies=new C,this.pendingDestroy=new C,this.colliders=new y,this.gravity=new D(m(O,"gravity.x",0),m(O,"gravity.y",0)),this.bounds=new w(m(O,"x",0),m(O,"y",0),m(O,"width",R.sys.scale.width),m(O,"height",R.sys.scale.height)),this.checkCollision={up:m(O,"checkCollision.up",!0),down:m(O,"checkCollision.down",!0),left:m(O,"checkCollision.left",!0),right:m(O,"checkCollision.right",!0)},this.fps=m(O,"fps",60),this.fixedStep=m(O,"fixedStep",!0),this._elapsed=0,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this.stepsLastFrame=0,this.timeScale=m(O,"timeScale",1),this.OVERLAP_BIAS=m(O,"overlapBias",4),this.TILE_BIAS=m(O,"tileBias",16),this.forceX=m(O,"forceX",!1),this.isPaused=m(O,"isPaused",!1),this._total=0,this.drawDebug=m(O,"debug",!1),this.defaults={debugShowBody:m(O,"debugShowBody",!0),debugShowStaticBody:m(O,"debugShowStaticBody",!0),debugShowVelocity:m(O,"debugShowVelocity",!0),bodyDebugColor:m(O,"debugBodyColor",16711935),staticBodyDebugColor:m(O,"debugStaticBodyColor",255),velocityDebugColor:m(O,"debugVelocityColor",65280)},this.maxEntries=m(O,"maxEntries",16),this.useTree=m(O,"useTree",!0),this.tree=new E(this.maxEntries),this.staticTree=new E(this.maxEntries),this.treeMinMax={minX:0,minY:0,maxX:0,maxY:0},this._tempMatrix=new L,this._tempMatrix2=new L,this.drawDebug&&this.createDebugGraphic()},enable:function(R,O){void 0===O&&(O=r.DYNAMIC_BODY),Array.isArray(R)||(R=[R]);for(var N=0;N<R.length;N++){var k=R[N];if(k.isParent)for(var I=k.getChildren(),B=0;B<I.length;B++){var Y=I[B];Y.isParent?this.enable(Y,O):this.enableBody(Y,O)}else this.enableBody(k,O)}},enableBody:function(R,O){return void 0===O&&(O=r.DYNAMIC_BODY),R.body||(O===r.DYNAMIC_BODY?R.body=new n(this,R):O===r.STATIC_BODY&&(R.body=new M(this,R))),this.add(R.body),R},add:function(R){return R.physicsType===r.DYNAMIC_BODY?this.bodies.set(R):R.physicsType===r.STATIC_BODY&&(this.staticBodies.set(R),this.staticTree.insert(R)),R.enable=!0,R},disable:function(R){Array.isArray(R)||(R=[R]);for(var O=0;O<R.length;O++){var N=R[O];if(N.isParent)for(var k=N.getChildren(),I=0;I<k.length;I++){var B=k[I];B.isParent?this.disable(B):this.disableBody(B.body)}else this.disableBody(N.body)}},disableBody:function(R){this.remove(R),R.enable=!1},remove:function(R){R.physicsType===r.DYNAMIC_BODY?(this.tree.remove(R),this.bodies.delete(R)):R.physicsType===r.STATIC_BODY&&(this.staticBodies.delete(R),this.staticTree.remove(R))},createDebugGraphic:function(){var R=this.scene.sys.add.graphics({x:0,y:0});return R.setDepth(Number.MAX_VALUE),this.debugGraphic=R,this.drawDebug=!0,R},setBounds:function(R,O,N,k,I,B,Y,U){return this.bounds.setTo(R,O,N,k),void 0!==I&&this.setBoundsCollision(I,B,Y,U),this},setBoundsCollision:function(R,O,N,k){return void 0===R&&(R=!0),void 0===O&&(O=!0),void 0===N&&(N=!0),void 0===k&&(k=!0),this.checkCollision.left=R,this.checkCollision.right=O,this.checkCollision.up=N,this.checkCollision.down=k,this},pause:function(){return this.isPaused=!0,this.emit(i.PAUSE),this},resume:function(){return this.isPaused=!1,this.emit(i.RESUME),this},addCollider:function(R,O,N,k,I){void 0===N&&(N=null),void 0===k&&(k=null),void 0===I&&(I=N);var B=new e(this,!1,R,O,N,k,I);return this.colliders.add(B),B},addOverlap:function(R,O,N,k,I){void 0===N&&(N=null),void 0===k&&(k=null),void 0===I&&(I=N);var B=new e(this,!0,R,O,N,k,I);return this.colliders.add(B),B},removeCollider:function(R){return this.colliders.remove(R),this},setFPS:function(R){return this.fps=R,this._frameTime=1/this.fps,this._frameTimeMS=1e3*this._frameTime,this},update:function(R,O){if(!this.isPaused&&0!==this.bodies.size){var N,k=this._frameTime,I=this._frameTimeMS*this.timeScale;this._elapsed+=O;var B=this.bodies.entries,Y=this._elapsed>=I;for(this.fixedStep||(k=.001*O,Y=!0,this._elapsed=0),G=0;G<B.length;G++)(N=B[G]).enable&&N.preUpdate(Y,k);if(Y){this._elapsed-=I,this.stepsLastFrame=1,this.useTree&&(this.tree.clear(),this.tree.load(B));for(var U=this.colliders.update(),G=0;G<U.length;G++){var W=U[G];W.active&&W.update()}this.emit(i.WORLD_STEP,k)}for(;this._elapsed>=I;)this._elapsed-=I,this.step(k)}},step:function(R){for(var O,N=this.bodies.entries,k=N.length,I=0;I<k;I++)(O=N[I]).enable&&O.update(R);this.useTree&&(this.tree.clear(),this.tree.load(N));var B=this.colliders.update();for(I=0;I<B.length;I++){var Y=B[I];Y.active&&Y.update()}this.emit(i.WORLD_STEP,R),this.stepsLastFrame++},postUpdate:function(){var R,O=(Y=this.bodies.entries).length,N=this.bodies,k=this.staticBodies;if(this.stepsLastFrame)for(W=this.stepsLastFrame=0;W<O;W++)(R=Y[W]).enable&&R.postUpdate();if(this.drawDebug){var I=this.debugGraphic;for(I.clear(),W=0;W<O;W++)(R=Y[W]).willDrawDebug()&&R.drawDebug(I);for(O=(Y=k.entries).length,W=0;W<O;W++)(R=Y[W]).willDrawDebug()&&R.drawDebug(I)}var B=this.pendingDestroy;if(0<B.size){for(var Y,U=this.tree,G=this.staticTree,W=(O=(Y=B.entries).length,0);W<O;W++)(R=Y[W]).physicsType===r.DYNAMIC_BODY?(U.remove(R),N.delete(R)):R.physicsType===r.STATIC_BODY&&(G.remove(R),k.delete(R)),R.world=void 0,R.gameObject=void 0;B.clear()}},updateMotion:function(R,O){R.allowRotation&&this.computeAngularVelocity(R,O),this.computeVelocity(R,O)},computeAngularVelocity:function(R,O){var N=R.angularVelocity,k=R.angularAcceleration,I=R.angularDrag,B=R.maxAngular;k?N+=k*O:R.allowDrag&&I&&(c(N-(I*=O),0,.1)?N-=I:d(N+I,0,.1)?N+=I:N=0);var Y=(N=s(N,-B,B))-R.angularVelocity;R.angularVelocity+=Y,R.rotation+=R.angularVelocity*O},computeVelocity:function(R,O){var N=R.velocity.x,k=R.acceleration.x,I=R.drag.x,B=R.maxVelocity.x,Y=R.velocity.y,U=R.acceleration.y,G=R.drag.y,W=R.maxVelocity.y,z=R.speed,V=R.maxSpeed,H=R.allowDrag,j=R.useDamping;R.allowGravity&&(N+=(this.gravity.x+R.gravity.x)*O,Y+=(this.gravity.y+R.gravity.y)*O),k?N+=k*O:H&&I&&(j?(N*=I=Math.pow(I,O),z=Math.sqrt(N*N+Y*Y),u(z,0,.001)&&(N=0)):c(N-(I*=O),0,.01)?N-=I:d(N+I,0,.01)?N+=I:N=0),U?Y+=U*O:H&&G&&(j?(Y*=G=Math.pow(G,O),z=Math.sqrt(N*N+Y*Y),u(z,0,.001)&&(Y=0)):c(Y-(G*=O),0,.01)?Y-=G:d(Y+G,0,.01)?Y+=G:Y=0),N=s(N,-B,B),Y=s(Y,-W,W),R.velocity.set(N,Y),-1<V&&V<z&&(R.velocity.normalize().scale(V),z=V),R.speed=z},separate:function(R,O,N,k,I,B){if(!B&&!R.enable||!O.enable||R.checkCollision.none||O.checkCollision.none||!this.intersects(R,O)||N&&!1===N.call(k,R.gameObject,O.gameObject))return!1;if(R.isCircle&&O.isCircle)return this.separateCircle(R,O,I);if(R.isCircle!==O.isCircle){var Y=R.isCircle?O:R,H=(R.isCircle?R:O).center;if((H.y<Y.y||H.y>Y.bottom)&&(H.x<Y.x||H.x>Y.right))return this.separateCircle(R,O,I)}var j=!1,q=!1;I?(j=A(R,O,I,this.OVERLAP_BIAS),q=_(R,O,I,this.OVERLAP_BIAS)):this.forceX||Math.abs(this.gravity.y+R.gravity.y)<Math.abs(this.gravity.x+R.gravity.x)?(j=A(R,O,I,this.OVERLAP_BIAS),this.intersects(R,O)&&(q=_(R,O,I,this.OVERLAP_BIAS))):(q=_(R,O,I,this.OVERLAP_BIAS),this.intersects(R,O)&&(j=A(R,O,I,this.OVERLAP_BIAS)));var Q=j||q;return Q&&(I?(R.onOverlap||O.onOverlap)&&this.emit(i.OVERLAP,R.gameObject,O.gameObject,R,O):(R.onCollide||O.onCollide)&&this.emit(i.COLLIDE,R.gameObject,O.gameObject,R,O)),Q},separateCircle:function(R,O,N,k){f(R,O,!1,k),p(R,O,!1,k);var I,B,Y=0;if(R.isCircle!==O.isCircle?((B={x:R.isCircle?R.center.x:O.center.x,y:R.isCircle?R.center.y:O.center.y,radius:R.isCircle?R.halfWidth:O.halfWidth}).y<(I={x:O.isCircle?R.position.x:O.position.x,y:O.isCircle?R.position.y:O.position.y,right:O.isCircle?R.right:O.right,bottom:O.isCircle?R.bottom:O.bottom}).y?B.x<I.x?Y=o(B.x,B.y,I.x,I.y)-B.radius:I.right<B.x&&(Y=o(B.x,B.y,I.right,I.y)-B.radius):I.bottom<B.y&&(B.x<I.x?Y=o(B.x,B.y,I.x,I.bottom)-B.radius:I.right<B.x&&(Y=o(B.x,B.y,I.right,I.bottom)-B.radius)),Y*=-1):Y=R.halfWidth+O.halfWidth-o(R.center.x,R.center.y,O.center.x,O.center.y),R.overlapR=Y,O.overlapR=Y,N||0===Y||R.immovable&&O.immovable||R.customSeparateX||O.customSeparateX)return 0!==Y&&(R.onOverlap||O.onOverlap)&&this.emit(i.OVERLAP,R.gameObject,O.gameObject,R,O),0!==Y;var G=R.center.y-O.center.y,W=Math.sqrt(Math.pow(R.center.x-O.center.x,2)+Math.pow(G,2)),z=(O.center.x-R.center.x)/W||0,V=(O.center.y-R.center.y)/W||0,H=2*(R.velocity.x*z+R.velocity.y*V-O.velocity.x*z-O.velocity.y*V)/(R.mass+O.mass);(R.immovable||O.immovable)&&(H*=2),R.immovable||(R.velocity.x=R.velocity.x-H/R.mass*z,R.velocity.y=R.velocity.y-H/R.mass*V),O.immovable||(O.velocity.x=O.velocity.x+H/O.mass*z,O.velocity.y=O.velocity.y+H/O.mass*V),R.immovable||O.immovable||(Y/=2);var j=h(R.center,O.center),q=(Y+T.EPSILON)*Math.cos(j),Q=(Y+T.EPSILON)*Math.sin(j);return R.immovable||(R.x-=q,R.y-=Q,R.updateCenter()),O.immovable||(O.x+=q,O.y+=Q,O.updateCenter()),R.velocity.x*=R.bounce.x,R.velocity.y*=R.bounce.y,O.velocity.x*=O.bounce.x,O.velocity.y*=O.bounce.y,(R.onCollide||O.onCollide)&&this.emit(i.COLLIDE,R.gameObject,O.gameObject,R,O),!0},intersects:function(R,O){return R!==O&&(R.isCircle||O.isCircle?R.isCircle?O.isCircle?o(R.center.x,R.center.y,O.center.x,O.center.y)<=R.halfWidth+O.halfWidth:this.circleBodyIntersects(R,O):this.circleBodyIntersects(O,R):!(R.right<=O.position.x||R.bottom<=O.position.y||R.position.x>=O.right||R.position.y>=O.bottom))},circleBodyIntersects:function(R,O){var N=s(R.center.x,O.left,O.right),k=s(R.center.y,O.top,O.bottom);return(R.center.x-N)*(R.center.x-N)+(R.center.y-k)*(R.center.y-k)<=R.halfWidth*R.halfWidth},overlap:function(R,O,N,k,I){return void 0===N&&(N=null),void 0===k&&(k=null),void 0===I&&(I=N),this.collideObjects(R,O,N,k,I,!0)},collide:function(R,O,N,k,I){return void 0===N&&(N=null),void 0===k&&(k=null),void 0===I&&(I=N),this.collideObjects(R,O,N,k,I,!1)},collideObjects:function(R,O,N,k,I,B){var Y;R.isParent&&void 0===R.physicsType&&(R=R.children.entries),O&&O.isParent&&void 0===O.physicsType&&(O=O.children.entries);var U=Array.isArray(R),G=Array.isArray(O);if(this._total=0,U||G)if(!U&&G)for(Y=0;Y<O.length;Y++)this.collideHandler(R,O[Y],N,k,I,B);else if(U&&!G)if(O)for(Y=0;Y<R.length;Y++)this.collideHandler(R[Y],O,N,k,I,B);else for(Y=0;Y<R.length;Y++)for(var W=R[Y],z=Y+1;z<R.length;z++)Y!==z&&this.collideHandler(W,R[z],N,k,I,B);else for(Y=0;Y<R.length;Y++)for(z=0;z<O.length;z++)this.collideHandler(R[Y],O[z],N,k,I,B);else this.collideHandler(R,O,N,k,I,B);return 0<this._total},collideHandler:function(R,O,N,k,I,B){if(void 0===O&&R.isParent)return this.collideGroupVsGroup(R,R,N,k,I,B);if(!R||!O)return!1;if(R.body){if(O.body)return this.collideSpriteVsSprite(R,O,N,k,I,B);if(O.isParent)return this.collideSpriteVsGroup(R,O,N,k,I,B);if(O.isTilemap)return this.collideSpriteVsTilemapLayer(R,O,N,k,I,B)}else if(R.isParent){if(O.body)return this.collideSpriteVsGroup(O,R,N,k,I,B);if(O.isParent)return this.collideGroupVsGroup(R,O,N,k,I,B);if(O.isTilemap)return this.collideGroupVsTilemapLayer(R,O,N,k,I,B)}else if(R.isTilemap){if(O.body)return this.collideSpriteVsTilemapLayer(O,R,N,k,I,B);if(O.isParent)return this.collideGroupVsTilemapLayer(O,R,N,k,I,B)}},collideSpriteVsSprite:function(R,O,N,k,I,B){return!(!R.body||!O.body||(this.separate(R.body,O.body,k,I,B)&&(N&&N.call(I,R,O),this._total++),0))},collideSpriteVsGroup:function(R,O,N,k,I,B){var Y,U=R.body;if(0!==O.length&&U&&U.enable&&!U.checkCollision.none)if(this.useTree||O.physicsType===r.STATIC_BODY){var G=this.treeMinMax;G.minX=U.left,G.minY=U.top,G.maxX=U.right,G.maxY=U.bottom;for(var W=O.physicsType===r.DYNAMIC_BODY?this.tree.search(G):this.staticTree.search(G),z=W.length,V=0;V<z;V++)U!==(Y=W[V])&&Y.enable&&!Y.checkCollision.none&&O.contains(Y.gameObject)&&this.separate(U,Y,k,I,B,!0)&&(N&&N.call(I,U.gameObject,Y.gameObject),this._total++)}else{var H=O.getChildren(),j=O.children.entries.indexOf(R);for(z=H.length,V=0;V<z;V++)(Y=H[V].body)&&V!==j&&Y.enable&&this.separate(U,Y,k,I,B)&&(N&&N.call(I,U.gameObject,Y.gameObject),this._total++)}},collideGroupVsTilemapLayer:function(R,O,N,k,I,B){var Y=R.getChildren();if(0===Y.length)return!1;for(var U=!1,G=0;G<Y.length;G++)Y[G].body&&this.collideSpriteVsTilemapLayer(Y[G],O,N,k,I,B)&&(U=!0);return U},collideTiles:function(R,O,N,k,I){return!(!R.body.enable||0===O.length)&&this.collideSpriteVsTilesHandler(R,O,N,k,I,!1,!1)},overlapTiles:function(R,O,N,k,I){return!(!R.body.enable||0===O.length)&&this.collideSpriteVsTilesHandler(R,O,N,k,I,!0,!1)},collideSpriteVsTilemapLayer:function(R,O,N,k,I,B){var Y=R.body;if(!Y.enable||Y.checkCollision.none)return!1;var U,G=Y.position.x,z=Y.width,V=Y.height,H=O.layer;H.tileWidth>H.baseTileWidth&&(G-=U=(H.tileWidth-H.baseTileWidth)*O.scaleX,z+=U),H.tileHeight>H.baseTileHeight&&(V+=(H.tileHeight-H.baseTileHeight)*O.scaleY);var j=v(G,Y.position.y,z,V,null,O.scene.cameras.main,O.layer);return 0!==j.length&&this.collideSpriteVsTilesHandler(R,j,N,k,I,B,!0)},collideSpriteVsTilesHandler:function(R,O,N,k,I,B,Y){for(var U,G,W=R.body,z={left:0,right:0,top:0,bottom:0},V=!1,H=0;H<O.length;H++){var j=(G=(U=O[H]).tilemapLayer).tileToWorldXY(U.x,U.y);z.left=j.x,z.top=j.y,U.baseHeight!==U.height&&(z.top-=(U.height-U.baseHeight)*G.scaleY),z.right=z.left+U.width*G.scaleX,z.bottom=z.top+U.height*G.scaleY,P(z,W)&&(!k||k.call(I,R,U))&&x(U,R)&&(B||S(H,W,U,z,G,this.TILE_BIAS,Y))&&(this._total++,V=!0,N&&N.call(I,R,U),B&&W.onOverlap?this.emit(i.TILE_OVERLAP,R,U,W):W.onCollide&&this.emit(i.TILE_COLLIDE,R,U,W))}return V},collideGroupVsGroup:function(R,O,N,k,I,B){if(0!==R.length&&0!==O.length)for(var Y=R.getChildren(),U=0;U<Y.length;U++)this.collideSpriteVsGroup(Y[U],O,N,k,I,B)},wrap:function(R,O){R.body?this.wrapObject(R,O):R.getChildren?this.wrapArray(R.getChildren(),O):Array.isArray(R)?this.wrapArray(R,O):this.wrapObject(R,O)},wrapArray:function(R,O){for(var N=0;N<R.length;N++)this.wrapObject(R[N],O)},wrapObject:function(R,O){void 0===O&&(O=0),R.x=F(R.x,this.bounds.left-O,this.bounds.right+O),R.y=F(R.y,this.bounds.top-O,this.bounds.bottom+O)},shutdown:function(){this.tree.clear(),this.staticTree.clear(),this.bodies.clear(),this.staticBodies.clear(),this.colliders.destroy(),this.removeAllListeners()},destroy:function(){this.shutdown(),this.scene=null}});g.exports=X},function(g,b,t){var h=t(0),n=t(62),s=t(245),l=t(196),e=t(10),r=t(57),o=t(3),a=new h({initialize:function(i,u){var c=u.displayWidth?u.displayWidth:64,d=u.displayHeight?u.displayHeight:64;this.world=i,this.gameObject=u,this.transform={x:u.x,y:u.y,rotation:u.angle,scaleX:u.scaleX,scaleY:u.scaleY,displayOriginX:u.displayOriginX,displayOriginY:u.displayOriginY},this.debugShowBody=i.defaults.debugShowBody,this.debugShowVelocity=i.defaults.debugShowVelocity,this.debugBodyColor=i.defaults.bodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new o,this.position=new o(u.x-u.scaleX*u.displayOriginX,u.y-u.scaleY*u.displayOriginY),this.prev=this.position.clone(),this.prevFrame=this.position.clone(),this.allowRotation=!0,this.rotation=u.angle,this.preRotation=u.angle,this.width=c,this.height=d,this.sourceWidth=c,this.sourceHeight=d,u.frame&&(this.sourceWidth=u.frame.realWidth,this.sourceHeight=u.frame.realHeight),this.halfWidth=Math.abs(c/2),this.halfHeight=Math.abs(d/2),this.center=new o(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=new o,this.newVelocity=new o,this.deltaMax=new o,this.acceleration=new o,this.allowDrag=!0,this.drag=new o,this.allowGravity=!0,this.gravity=new o,this.bounce=new o,this.worldBounce=null,this.customBoundsRectangle=i.bounds,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.maxVelocity=new o(1e4,1e4),this.maxSpeed=-1,this.friction=new o(1,0),this.useDamping=!1,this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=n.FACING_NONE,this.immovable=!1,this.pushable=!0,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.syncBounds=!1,this.physicsType=n.DYNAMIC_BODY,this._sx=u.scaleX,this._sy=u.scaleY,this._dx=0,this._dy=0,this._tx=0,this._ty=0,this._bounds=new e},updateBounds:function(){var i,u=this.gameObject,c=this.transform;u.parentContainer?(i=u.getWorldTransformMatrix(this.world._tempMatrix,this.world._tempMatrix2),c.x=i.tx,c.y=i.ty,c.rotation=l(i.rotation),c.scaleX=i.scaleX,c.scaleY=i.scaleY):(c.x=u.x,c.y=u.y,c.rotation=u.angle,c.scaleX=u.scaleX,c.scaleY=u.scaleY),c.displayOriginX=u.displayOriginX,c.displayOriginY=u.displayOriginY;var d,f,p,v=!1;this.syncBounds?(d=u.getBounds(this._bounds),this.width=d.width,this.height=d.height,v=!0):(f=Math.abs(c.scaleX),p=Math.abs(c.scaleY),this._sx===f&&this._sy===p||(this.width=this.sourceWidth*f,this.height=this.sourceHeight*p,this._sx=f,this._sy=p,v=!0)),v&&(this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter())},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},updateFromGameObject:function(){this.updateBounds();var i=this.transform;this.position.x=i.x+i.scaleX*(this.offset.x-i.displayOriginX),this.position.y=i.y+i.scaleY*(this.offset.y-i.displayOriginY),this.updateCenter()},resetFlags:function(i){void 0===i&&(i=!1);var u=this.wasTouching,c=this.touching,d=this.blocked;i?(u.none=!0,u.up=!1,u.down=!1,u.left=!1,u.right=!1):(u.none=c.none,u.up=c.up,u.down=c.down,u.left=c.left,u.right=c.right),c.none=!0,c.up=!1,c.down=!1,c.left=!1,c.right=!1,d.none=!0,d.up=!1,d.down=!1,d.left=!1,d.right=!1,this.overlapR=0,this.overlapX=0,this.overlapY=0,this.embedded=!1},preUpdate:function(i,u){i&&this.resetFlags(),this.updateFromGameObject(),this.rotation=this.transform.rotation,this.preRotation=this.rotation,this.moves&&(this.prev.x=this.position.x,this.prev.y=this.position.y,this.prevFrame.x=this.position.x,this.prevFrame.y=this.position.y),i&&this.update(u)},update:function(i){var u,c;this.prev.x=this.position.x,this.prev.y=this.position.y,this.moves&&(this.world.updateMotion(this,i),this.newVelocity.set((u=this.velocity.x)*i,(c=this.velocity.y)*i),this.position.add(this.newVelocity),this.updateCenter(),this.angle=Math.atan2(c,u),this.speed=Math.sqrt(u*u+c*c),this.collideWorldBounds&&this.checkWorldBounds()&&this.onWorldBounds&&this.world.emit(s.WORLD_BOUNDS,this,this.blocked.up,this.blocked.down,this.blocked.left,this.blocked.right)),this._dx=this.position.x-this.prev.x,this._dy=this.position.y-this.prev.y},postUpdate:function(){var i,u,c=this.position.x-this.prevFrame.x,d=this.position.y-this.prevFrame.y;this.moves&&(0!==(i=this.deltaMax.x)&&0!==c&&(c<0&&c<-i?c=-i:0<c&&i<c&&(c=i)),0!==(u=this.deltaMax.y)&&0!==d&&(d<0&&d<-u?d=-u:0<d&&u<d&&(d=u)),this.gameObject.x+=c,this.gameObject.y+=d),c<0?this.facing=n.FACING_LEFT:0<c&&(this.facing=n.FACING_RIGHT),d<0?this.facing=n.FACING_UP:0<d&&(this.facing=n.FACING_DOWN),this.allowRotation&&(this.gameObject.angle+=this.deltaZ()),this._tx=c,this._ty=d},setBoundsRectangle:function(i){return this.customBoundsRectangle=i||this.world.bounds,this},checkWorldBounds:function(){var i=this.position,u=this.customBoundsRectangle,c=this.world.checkCollision,d=this.worldBounce?-this.worldBounce.x:-this.bounce.x,f=this.worldBounce?-this.worldBounce.y:-this.bounce.y,p=!1;return i.x<u.x&&c.left?(i.x=u.x,this.velocity.x*=d,p=this.blocked.left=!0):this.right>u.right&&c.right&&(i.x=u.right-this.width,this.velocity.x*=d,p=this.blocked.right=!0),i.y<u.y&&c.up?(i.y=u.y,this.velocity.y*=f,p=this.blocked.up=!0):this.bottom>u.bottom&&c.down&&(i.y=u.bottom-this.height,this.velocity.y*=f,p=this.blocked.down=!0),p&&(this.blocked.none=!1,this.updateCenter()),p},setOffset:function(i,u){return void 0===u&&(u=i),this.offset.set(i,u),this},setSize:function(i,u,c){void 0===c&&(c=!0);var p=this.gameObject;return!i&&p.frame&&(i=p.frame.realWidth),!u&&p.frame&&(u=p.frame.realHeight),this.sourceWidth=i,this.sourceHeight=u,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.updateCenter(),c&&p.getCenter&&this.offset.set((p.width-i)/2,(p.height-u)/2),this.isCircle=!1,this.radius=0,this},setCircle:function(i,u,c){return void 0===u&&(u=this.offset.x),void 0===c&&(c=this.offset.y),0<i?(this.isCircle=!0,this.radius=i,this.sourceWidth=2*i,this.sourceHeight=2*i,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(u,c),this.updateCenter()):this.isCircle=!1,this},reset:function(i,u){this.stop();var c=this.gameObject;c.setPosition(i,u),c.getTopLeft?c.getTopLeft(this.position):this.position.set(i,u),this.prev.copy(this.position),this.prevFrame.copy(this.position),this.rotation=c.angle,this.preRotation=c.angle,this.updateBounds(),this.updateCenter(),this.resetFlags(!0)},stop:function(){return this.velocity.set(0),this.acceleration.set(0),this.speed=0,this.angularVelocity=0,this.angularAcceleration=0,this},getBounds:function(i){return i.x=this.x,i.y=this.y,i.right=this.right,i.bottom=this.bottom,i},hitTest:function(i,u){return this.isCircle?0<this.radius&&i>=this.left&&i<=this.right&&u>=this.top&&u<=this.bottom&&(this.center.x-i)*(this.center.x-i)+(this.center.y-u)*(this.center.y-u)<=this.radius*this.radius:r(this,i,u)},onFloor:function(){return this.blocked.down},onCeiling:function(){return this.blocked.up},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return 0<this._dx?this._dx:-this._dx},deltaAbsY:function(){return 0<this._dy?this._dy:-this._dy},deltaX:function(){return this._dx},deltaY:function(){return this._dy},deltaXFinal:function(){return this._tx},deltaYFinal:function(){return this._ty},deltaZ:function(){return this.rotation-this.preRotation},destroy:function(){this.enable=!1,this.world&&this.world.pendingDestroy.set(this)},drawDebug:function(i){var u=this.position,c=u.x+this.halfWidth,d=u.y+this.halfHeight;this.debugShowBody&&(i.lineStyle(i.defaultStrokeWidth,this.debugBodyColor),this.isCircle?i.strokeCircle(c,d,this.width/2):(this.checkCollision.up&&i.lineBetween(u.x,u.y,u.x+this.width,u.y),this.checkCollision.right&&i.lineBetween(u.x+this.width,u.y,u.x+this.width,u.y+this.height),this.checkCollision.down&&i.lineBetween(u.x,u.y+this.height,u.x+this.width,u.y+this.height),this.checkCollision.left&&i.lineBetween(u.x,u.y,u.x,u.y+this.height))),this.debugShowVelocity&&(i.lineStyle(i.defaultStrokeWidth,this.world.defaults.velocityDebugColor,1),i.lineBetween(c,d,c+this.velocity.x/2,d+this.velocity.y/2))},willDrawDebug:function(){return this.debugShowBody||this.debugShowVelocity},setCollideWorldBounds:function(i,u,c,d){void 0===i&&(i=!0),this.collideWorldBounds=i;var f=void 0!==u,p=void 0!==c;return(f||p)&&(this.worldBounce||(this.worldBounce=new o),f&&(this.worldBounce.x=u),p&&(this.worldBounce.y=c)),void 0!==d&&(this.onWorldBounds=d),this},setVelocity:function(i,u){return this.velocity.set(i,u),i=this.velocity.x,u=this.velocity.y,this.speed=Math.sqrt(i*i+u*u),this},setVelocityX:function(i){this.velocity.x=i;var u=this.velocity.y;return this.speed=Math.sqrt(i*i+u*u),this},setVelocityY:function(i){this.velocity.y=i;var u=this.velocity.x;return this.speed=Math.sqrt(u*u+i*i),this},setMaxVelocity:function(i,u){return this.maxVelocity.set(i,u),this},setMaxVelocityX:function(i){return this.maxVelocity.x=i,this},setMaxVelocityY:function(i){return this.maxVelocity.y=i,this},setMaxSpeed:function(i){return this.maxSpeed=i,this},setBounce:function(i,u){return this.bounce.set(i,u),this},setBounceX:function(i){return this.bounce.x=i,this},setBounceY:function(i){return this.bounce.y=i,this},setAcceleration:function(i,u){return this.acceleration.set(i,u),this},setAccelerationX:function(i){return this.acceleration.x=i,this},setAccelerationY:function(i){return this.acceleration.y=i,this},setAllowDrag:function(i){return void 0===i&&(i=!0),this.allowDrag=i,this},setAllowGravity:function(i){return void 0===i&&(i=!0),this.allowGravity=i,this},setAllowRotation:function(i){return void 0===i&&(i=!0),this.allowRotation=i,this},setDrag:function(i,u){return this.drag.set(i,u),this},setDamping:function(i){return this.useDamping=i,this},setDragX:function(i){return this.drag.x=i,this},setDragY:function(i){return this.drag.y=i,this},setGravity:function(i,u){return this.gravity.set(i,u),this},setGravityX:function(i){return this.gravity.x=i,this},setGravityY:function(i){return this.gravity.y=i,this},setFriction:function(i,u){return this.friction.set(i,u),this},setFrictionX:function(i){return this.friction.x=i,this},setFrictionY:function(i){return this.friction.y=i,this},setAngularVelocity:function(i){return this.angularVelocity=i,this},setAngularAcceleration:function(i){return this.angularAcceleration=i,this},setAngularDrag:function(i){return this.angularDrag=i,this},setMass:function(i){return this.mass=i,this},setImmovable:function(i){return void 0===i&&(i=!0),this.immovable=i,this},setEnable:function(i){return void 0===i&&(i=!0),this.enable=i,this},processX:function(i,u,c,d){this.x+=i,this.updateCenter(),null!==u&&(this.velocity.x=u);var f=this.blocked;c&&(f.left=!0),d&&(f.right=!0)},processY:function(i,u,c,d){this.y+=i,this.updateCenter(),null!==u&&(this.velocity.y=u);var f=this.blocked;c&&(f.up=!0),d&&(f.down=!0)},x:{get:function(){return this.position.x},set:function(i){this.position.x=i}},y:{get:function(){return this.position.y},set:function(i){this.position.y=i}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});g.exports=a},function(g,b,t){var h=new(t(0))({initialize:function(n,s,l,e,r,o,a){this.world=n,this.name="",this.active=!0,this.overlapOnly=s,this.object1=l,this.object2=e,this.collideCallback=r,this.processCallback=o,this.callbackContext=a},setName:function(n){return this.name=n,this},update:function(){this.world.collideObjects(this.object1,this.object2,this.collideCallback,this.processCallback,this.callbackContext,this.overlapOnly)},destroy:function(){this.world.removeCollider(this),this.active=!1,this.world=null,this.object1=null,this.object2=null,this.collideCallback=null,this.processCallback=null,this.callbackContext=null}});g.exports=h},function(g,b,t){var h=t(26),n=t(3),s=new n,l=new n;g.exports=function(e,r,o,a,i,u,c){var d=c.tilemapLayer.tilemap._convert.WorldToTileXY;d(e,r,!0,s,u,c);var f=s.x,p=s.y;d(e+o,r+a,!1,l,u,c);var v=Math.ceil(l.x),m=Math.ceil(l.y);return h(f,p,v-f,m-p,i,c)}},function(g,b){g.exports=function(t,h){return t.collisionCallback?!t.collisionCallback.call(t.collisionCallbackContext,h,t):!t.layer.callbacks[t.index]||!t.layer.callbacks[t.index].callback.call(t.layer.callbacks[t.index].callbackContext,h,t)}},function(g,b,t){var h=t(436);function n(p){if(!(this instanceof n))return new n(p);this._maxEntries=Math.max(4,p||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}function s(p,v){l(p,0,p.children.length,v,p)}function l(p,v,m,T,y){(y=y||d(null)).minX=1/0,y.minY=1/0,y.maxX=-1/0,y.maxY=-1/0;for(var x,w=v;w<m;w++)x=p.children[w],e(y,p.leaf?T(x):x);return y}function e(p,v){return p.minX=Math.min(p.minX,v.minX),p.minY=Math.min(p.minY,v.minY),p.maxX=Math.max(p.maxX,v.maxX),p.maxY=Math.max(p.maxY,v.maxY),p}function r(p,v){return p.minX-v.minX}function o(p,v){return p.minY-v.minY}function a(p){return(p.maxX-p.minX)*(p.maxY-p.minY)}function i(p){return p.maxX-p.minX+(p.maxY-p.minY)}function u(p,v){return p.minX<=v.minX&&p.minY<=v.minY&&v.maxX<=p.maxX&&v.maxY<=p.maxY}function c(p,v){return v.minX<=p.maxX&&v.minY<=p.maxY&&v.maxX>=p.minX&&v.maxY>=p.minY}function d(p){return{children:p,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function f(p,v,m,T,y){for(var x,w=[v,m];w.length;)(m=w.pop())-(v=w.pop())<=T||(x=v+Math.ceil((m-v)/T/2)*T,h(p,x,v,m,y),w.push(v,x,x,m))}n.prototype={all:function(){return this._all(this.data,[])},search:function(p){var v=this.data,m=[],T=this.toBBox;if(!c(p,v))return m;for(var y,x,w,E,S=[];v;){for(y=0,x=v.children.length;y<x;y++)w=v.children[y],c(p,E=v.leaf?T(w):w)&&(v.leaf?m.push(w):u(p,E)?this._all(w,m):S.push(w));v=S.pop()}return m},collides:function(p){var v=this.data,m=this.toBBox;if(!c(p,v))return!1;for(var T,y,x,w,E=[];v;){for(T=0,y=v.children.length;T<y;T++)if(x=v.children[T],c(p,w=v.leaf?m(x):x)){if(v.leaf||u(p,w))return!0;E.push(x)}v=E.pop()}return!1},load:function(p){if(!p||!p.length)return this;if(p.length<this._minEntries){for(var v=0,m=p.length;v<m;v++)this.insert(p[v]);return this}var T,y=this._build(p.slice(),0,p.length-1,0);return this.data.children.length?this.data.height===y.height?this._splitRoot(this.data,y):(this.data.height<y.height&&(T=this.data,this.data=y,y=T),this._insert(y,this.data.height-y.height-1,!0)):this.data=y,this},insert:function(p){return p&&this._insert(p,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(p,v){if(!p)return this;for(var m,T,y,x,w=this.data,E=this.toBBox(p),S=[],A=[];w||S.length;){if(w||(w=S.pop(),T=S[S.length-1],m=A.pop(),x=!0),w.leaf&&-1!==(y=function(_,C,M){if(!M)return C.indexOf(_);for(var P=0;P<C.length;P++)if(M(_,C[P]))return P;return-1}(p,w.children,v)))return w.children.splice(y,1),S.push(w),this._condense(S),this;x||w.leaf||!u(w,E)?T?(m++,w=T.children[m],x=!1):w=null:(S.push(w),A.push(m),m=0,w=(T=w).children[0])}return this},toBBox:function(p){return{minX:p.left,minY:p.top,maxX:p.right,maxY:p.bottom}},compareMinX:function(p,v){return p.left-v.left},compareMinY:function(p,v){return p.top-v.top},toJSON:function(){return this.data},fromJSON:function(p){return this.data=p,this},_all:function(p,v){for(var m=[];p;)p.leaf?v.push.apply(v,p.children):m.push.apply(m,p.children),p=m.pop();return v},_build:function(p,v,m,T){var y,x=m-v+1,w=this._maxEntries;if(x<=w)return s(y=d(p.slice(v,m+1)),this.toBBox),y;T||(T=Math.ceil(Math.log(x)/Math.log(w)),w=Math.ceil(x/Math.pow(w,T-1))),(y=d([])).leaf=!1,y.height=T;var E,S,A,_,C=Math.ceil(x/w),M=C*Math.ceil(Math.sqrt(w));for(f(p,v,m,M,this.compareMinX),E=v;E<=m;E+=M)for(f(p,E,A=Math.min(E+M-1,m),C,this.compareMinY),S=E;S<=A;S+=C)_=Math.min(S+C-1,A),y.children.push(this._build(p,S,_,T-1));return s(y,this.toBBox),y},_chooseSubtree:function(p,v,m,T){for(var y,x,w,E,S,A,_,C,M,P;T.push(v),!v.leaf&&T.length-1!==m;){for(_=C=1/0,y=0,x=v.children.length;y<x;y++)S=a(w=v.children[y]),M=p,P=w,(A=(Math.max(P.maxX,M.maxX)-Math.min(P.minX,M.minX))*(Math.max(P.maxY,M.maxY)-Math.min(P.minY,M.minY))-S)<C?(C=A,_=S<_?S:_,E=w):A===C&&S<_&&(_=S,E=w);v=E||v.children[0]}return v},_insert:function(p,v,m){var y=m?p:(0,this.toBBox)(p),x=[],w=this._chooseSubtree(y,this.data,v,x);for(w.children.push(p),e(w,y);0<=v&&x[v].children.length>this._maxEntries;)this._split(x,v),v--;this._adjustParentBBoxes(y,x,v)},_split:function(p,v){var m=p[v],T=m.children.length,y=this._minEntries;this._chooseSplitAxis(m,y,T);var x=this._chooseSplitIndex(m,y,T),w=d(m.children.splice(x,m.children.length-x));w.height=m.height,w.leaf=m.leaf,s(m,this.toBBox),s(w,this.toBBox),v?p[v-1].children.push(w):this._splitRoot(m,w)},_splitRoot:function(p,v){this.data=d([p,v]),this.data.height=p.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(p,v,m){for(var T,y,x,w,E,S,A,_,C,M,P,L,D=E=1/0,F=v;F<=m-v;F++)A=T=l(p,0,F,this.toBBox),_=y=l(p,F,m,this.toBBox),C=Math.max(A.minX,_.minX),M=Math.max(A.minY,_.minY),P=Math.min(A.maxX,_.maxX),L=Math.min(A.maxY,_.maxY),x=Math.max(0,P-C)*Math.max(0,L-M),w=a(T)+a(y),x<D?(D=x,S=F,E=w<E?w:E):x===D&&w<E&&(E=w,S=F);return S},_chooseSplitAxis:function(p,v,m){var T=p.leaf?this.compareMinX:r,y=p.leaf?this.compareMinY:o;this._allDistMargin(p,v,m,T)<this._allDistMargin(p,v,m,y)&&p.children.sort(T)},_allDistMargin:function(p,v,m,T){p.children.sort(T);for(var y,x=this.toBBox,w=l(p,0,v,x),E=l(p,m-v,m,x),S=i(w)+i(E),A=v;A<m-v;A++)y=p.children[A],e(w,p.leaf?x(y):y),S+=i(w);for(A=m-v-1;v<=A;A--)y=p.children[A],e(E,p.leaf?x(y):y),S+=i(E);return S},_adjustParentBBoxes:function(p,v,m){for(var T=m;0<=T;T--)e(v[T],p)},_condense:function(p){for(var v,m=p.length-1;0<=m;m--)0===p[m].children.length?0<m?(v=p[m-1].children).splice(v.indexOf(p[m]),1):this.clear():s(p[m],this.toBBox)}},g.exports=n},function(g,b,t){var h=t(533),n=t(535),s=t(248);g.exports=function(l,e,r,o,a,i,u){var c=o.left,d=o.top,f=o.right,p=o.bottom,v=r.faceLeft||r.faceRight,m=r.faceTop||r.faceBottom;if(u||(m=v=!0),!v&&!m)return!1;var T=0,y=0,x=0,w=1;if(e.deltaAbsX()>e.deltaAbsY()?x=-1:e.deltaAbsX()<e.deltaAbsY()&&(w=-1),0!==e.deltaX()&&0!==e.deltaY()&&v&&m&&(x=Math.min(Math.abs(e.position.x-f),Math.abs(e.right-c)),w=Math.min(Math.abs(e.position.y-p),Math.abs(e.bottom-d))),x<w){if(v&&0!==(T=h(e,r,c,f,i,u))&&!s(o,e))return!0;m&&(y=n(e,r,d,p,i,u))}else{if(m&&0!==(y=n(e,r,d,p,i,u))&&!s(o,e))return!0;v&&(T=h(e,r,c,f,i,u))}return 0!==T||0!==y}},function(g,b,t){var h=t(534);g.exports=function(n,s,l,e,r,o){var a=0,i=s.faceLeft,u=s.faceRight,c=s.collideLeft,d=s.collideRight;return o||(d=c=u=i=!0),n.deltaX()<0&&d&&n.checkCollision.left?u&&n.x<e&&(a=n.x-e)<-r&&(a=0):0<n.deltaX()&&c&&n.checkCollision.right&&i&&n.right>l&&r<(a=n.right-l)&&(a=0),0!==a&&(n.customSeparateX?n.overlapX=a:h(n,a)),a}},function(g,b){g.exports=function(t,h){h<0?(t.blocked.none=!1,t.blocked.left=!0):0<h&&(t.blocked.none=!1,t.blocked.right=!0),t.position.x-=h,t.velocity.x=0===t.bounce.x?0:-t.velocity.x*t.bounce.x}},function(g,b,t){var h=t(536);g.exports=function(n,s,l,e,r,o){var a=0,i=s.faceTop,u=s.faceBottom,c=s.collideUp,d=s.collideDown;return o||(d=c=u=i=!0),n.deltaY()<0&&d&&n.checkCollision.up?u&&n.y<e&&(a=n.y-e)<-r&&(a=0):0<n.deltaY()&&c&&n.checkCollision.down&&i&&n.bottom>l&&r<(a=n.bottom-l)&&(a=0),0!==a&&(n.customSeparateY?n.overlapY=a:h(n,a)),a}},function(g,b){g.exports=function(t,h){h<0?(t.blocked.none=!1,t.blocked.up=!0):0<h&&(t.blocked.none=!1,t.blocked.down=!0),t.position.y-=h,t.velocity.y=0===t.bounce.y?0:-t.velocity.y*t.bounce.y}},function(g,b,t){var h=t(246),n=t(1389);g.exports=function(s,l,e,r){var o=h(s,l,e,r),a=s.immovable,i=l.immovable;if(e||0===o||a&&i||s.customSeparateX||l.customSeparateX)return 0!==o||s.embedded&&l.embedded;var u=n.Set(s,l,o);return a||i?(a?n.RunImmovableBody1(u):i&&n.RunImmovableBody2(u),!0):0<u||n.Check()}},function(g,b,t){var h=t(247),n=t(1390);g.exports=function(s,l,e,r){var o=h(s,l,e,r),a=s.immovable,i=l.immovable;if(e||0===o||a&&i||s.customSeparateY||l.customSeparateY)return 0!==o||s.embedded&&l.embedded;var u=n.Set(s,l,o);return a||i?(a?n.RunImmovableBody1(u):i&&n.RunImmovableBody2(u),!0):0<u||n.Check()}},function(g,b,t){var h=t(66),n=t(0),s=t(62),l=t(57),e=t(3),r=new n({initialize:function(o,a){var i=a.displayWidth?a.displayWidth:64,u=a.displayHeight?a.displayHeight:64;this.world=o,this.gameObject=a,this.debugShowBody=o.defaults.debugShowStaticBody,this.debugBodyColor=o.defaults.staticBodyDebugColor,this.enable=!0,this.isCircle=!1,this.radius=0,this.offset=new e,this.position=new e(a.x-i*a.originX,a.y-u*a.originY),this.width=i,this.height=u,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center=new e(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.velocity=e.ZERO,this.allowGravity=!1,this.gravity=e.ZERO,this.bounce=e.ZERO,this.onWorldBounds=!1,this.onCollide=!1,this.onOverlap=!1,this.mass=1,this.immovable=!0,this.pushable=!1,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.overlapR=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={none:!0,up:!1,down:!1,left:!1,right:!1},this.physicsType=s.STATIC_BODY,this._dx=0,this._dy=0},setGameObject:function(o,a){return o&&o!==this.gameObject&&(this.gameObject.body=null,(o.body=this).gameObject=o),a&&this.updateFromGameObject(),this},updateFromGameObject:function(){this.world.staticTree.remove(this);var o=this.gameObject;return o.getTopLeft(this.position),this.width=o.displayWidth,this.height=o.displayHeight,this.halfWidth=Math.abs(this.width/2),this.halfHeight=Math.abs(this.height/2),this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.world.staticTree.insert(this),this},setOffset:function(o,a){return void 0===a&&(a=o),this.world.staticTree.remove(this),this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(o,a),this.position.x+=this.offset.x,this.position.y+=this.offset.y,this.updateCenter(),this.world.staticTree.insert(this),this},setSize:function(o,a,i){void 0===i&&(i=!0);var u,c,d=this.gameObject;return!o&&d.frame&&(o=d.frame.realWidth),!a&&d.frame&&(a=d.frame.realHeight),this.world.staticTree.remove(this),this.width=o,this.height=a,this.halfWidth=Math.floor(o/2),this.halfHeight=Math.floor(a/2),i&&d.getCenter&&(u=d.displayWidth/2,c=d.displayHeight/2,this.position.x-=this.offset.x,this.position.y-=this.offset.y,this.offset.set(u-this.halfWidth,c-this.halfHeight),this.position.x+=this.offset.x,this.position.y+=this.offset.y),this.updateCenter(),this.isCircle=!1,this.radius=0,this.world.staticTree.insert(this),this},setCircle:function(o,a,i){return void 0===a&&(a=this.offset.x),void 0===i&&(i=this.offset.y),0<o?(this.world.staticTree.remove(this),this.isCircle=!0,this.radius=o,this.width=2*o,this.height=2*o,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.set(a,i),this.updateCenter(),this.world.staticTree.insert(this)):this.isCircle=!1,this},updateCenter:function(){this.center.set(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(o,a){var i=this.gameObject;void 0===o&&(o=i.x),void 0===a&&(a=i.y),this.world.staticTree.remove(this),i.setPosition(o,a),i.getTopLeft(this.position),this.updateCenter(),this.world.staticTree.insert(this)},stop:function(){return this},getBounds:function(o){return o.x=this.x,o.y=this.y,o.right=this.right,o.bottom=this.bottom,o},hitTest:function(o,a){return(this.isCircle?h:l)(this,o,a)},postUpdate:function(){},deltaAbsX:function(){return 0},deltaAbsY:function(){return 0},deltaX:function(){return 0},deltaY:function(){return 0},deltaZ:function(){return 0},destroy:function(){this.enable=!1,this.world.pendingDestroy.set(this)},drawDebug:function(o){var a=this.position,i=a.x+this.halfWidth,u=a.y+this.halfHeight;this.debugShowBody&&(o.lineStyle(o.defaultStrokeWidth,this.debugBodyColor,1),this.isCircle?o.strokeCircle(i,u,this.width/2):o.strokeRect(a.x,a.y,this.width,this.height))},willDrawDebug:function(){return this.debugShowBody},setMass:function(o){return o<=0&&(o=.1),this.mass=o,this},x:{get:function(){return this.position.x},set:function(o){this.world.staticTree.remove(this),this.position.x=o,this.world.staticTree.insert(this)}},y:{get:function(){return this.position.y},set:function(o){this.world.staticTree.remove(this),this.position.y=o,this.world.staticTree.insert(this)}},left:{get:function(){return this.position.x}},right:{get:function(){return this.position.x+this.width}},top:{get:function(){return this.position.y}},bottom:{get:function(){return this.position.y+this.height}}});g.exports=r},function(g,b,t){var h=new(t(0))({initialize:function(n){this.pluginManager=n,this.game=n.game},init:function(){},start:function(){},stop:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});g.exports=h},function(g,b,t){var h=new(t(3));g.exports=function(n,s,l,e){var r=l.tilemapLayer,o=r.cullPaddingX,a=r.cullPaddingY,i=r.tilemap.tileToWorldXY(n,s,h,e,r);return i.x>e.worldView.x+r.scaleX*l.tileWidth*(-o-.5)&&i.x<e.worldView.right+r.scaleX*l.tileWidth*(o-.5)&&i.y>e.worldView.y+r.scaleY*l.tileHeight*(-a-1)&&i.y<e.worldView.bottom+r.scaleY*l.tileHeight*(a-.5)}},function(g,b,t){var h=t(26);g.exports=function(n,s,l,e,r,o,a){for(var i=h(l,e,r,o,null,a),u=0;u<i.length;u++)i[u]&&i[u].index===n&&(i[u].index=s)}},function(g,b,t){var h=t(10),n=t(139),s=t(76),l=new h;g.exports=function(e,r){var o=e.tilemapLayer.tilemap,a=e.tilemapLayer,i=Math.floor(o.tileWidth*a.scaleX),u=Math.floor(o.tileHeight*a.scaleY),c=s(r.worldView.x-a.x,i,0,!0)-a.cullPaddingX,d=n(r.worldView.right-a.x,i,0,!0)+a.cullPaddingX,f=s(r.worldView.y-a.y,u,0,!0)-a.cullPaddingY,p=n(r.worldView.bottom-a.y,u,0,!0)+a.cullPaddingY;return l.setTo(c,f,d-c,p-f)}},function(g,b,t){var h=t(543),n=t(159);g.exports=function(s,l,e,r){void 0===e&&(e=[]),void 0===r&&(r=0),e.length=0;var o=s.tilemapLayer,a=h(s,l);return!o.skipCull&&1===o.scrollFactorX&&1===o.scrollFactorY||(a.left=0,a.right=s.width,a.top=0,a.bottom=s.height),n(s,a,r,e),e}},function(g,b,t){var h=t(546),n=t(159);g.exports=function(s,l,e,r){void 0===e&&(e=[]),void 0===r&&(r=0),e.length=0;var o,a=s.tilemapLayer;return a.skipCull||1!==a.scrollFactorX||1!==a.scrollFactorY||(o=h(s,l),n(s,o,r,e)),e}},function(g,b,t){var h=t(139),n=t(76);g.exports=function(s,l){var e=s.tilemapLayer.tilemap,r=s.tilemapLayer,o=Math.floor(e.tileWidth*r.scaleX),a=Math.floor(e.tileHeight*r.scaleY),i=s.hexSideLength,u=(a-i)/2+i;return{left:n(l.worldView.x-r.x,o,0,!0)-r.cullPaddingX,right:h(l.worldView.right-r.x,o,0,!0)+r.cullPaddingX,top:n(l.worldView.y-r.y,u,0,!0)-r.cullPaddingY,bottom:h(l.worldView.bottom-r.y,u,0,!0)+r.cullPaddingY}}},function(g,b,t){var h=t(541);g.exports=function(n,s,l,e){void 0===l&&(l=[]),void 0===e&&(e=0),l.length=0;var r,o,a,i=n.tilemapLayer,u=n.data,c=n.width,d=n.height,f=c,p=d;if(!i.skipCull)if(0===e){for(o=0;o<p;o++)for(r=0;u[o]&&r<f;r++)if(h(r,o,n,s)){if(!(a=u[o][r])||-1===a.index||!a.visible||0===a.alpha)continue;l.push(a)}}else if(1===e){for(o=0;o<p;o++)for(r=f;u[o]&&0<=r;r--)if(h(r,o,n,s)){if(!(a=u[o][r])||-1===a.index||!a.visible||0===a.alpha)continue;l.push(a)}}else if(2===e){for(o=p;0<=o;o--)for(r=0;u[o]&&r<f;r++)if(h(r,o,n,s)){if(!(a=u[o][r])||-1===a.index||!a.visible||0===a.alpha)continue;l.push(a)}}else if(3===e)for(o=p;0<=o;o--)for(r=f;u[o]&&0<=r;r--)if(h(r,o,n,s)){if(!(a=u[o][r])||-1===a.index||!a.visible||0===a.alpha)continue;l.push(a)}return i.tilesDrawn=l.length,i.tilesTotal=c*d,l}},function(g,b,t){var h=t(549),n=t(159);g.exports=function(s,l,e,r){void 0===e&&(e=[]),void 0===r&&(r=0),e.length=0;var o,a=s.tilemapLayer;return a.skipCull||1!==a.scrollFactorX||1!==a.scrollFactorY||(o=h(s,l),n(s,o,r,e)),e}},function(g,b,t){var h=t(139),n=t(76);g.exports=function(s,l){var e=s.tilemapLayer.tilemap,r=s.tilemapLayer,o=Math.floor(e.tileWidth*r.scaleX),a=Math.floor(e.tileHeight*r.scaleY);return{left:n(l.worldView.x-r.x,o,0,!0)-r.cullPaddingX,right:h(l.worldView.right-r.x,o,0,!0)+r.cullPaddingX,top:n(l.worldView.y-r.y,a/2,0,!0)-r.cullPaddingY,bottom:h(l.worldView.bottom-r.y,a/2,0,!0)+r.cullPaddingY}}},function(g,b,t){var h=t(3);g.exports=function(n,s,l,e,r){l=l||new h;var o=r.baseTileWidth,a=r.baseTileHeight,i=r.tilemapLayer,u=0,c=0;i&&(u=i.x+(e=e||i.scene.cameras.main).scrollX*(1-i.scrollFactorX),o*=i.scaleX,c=i.y+e.scrollY*(1-i.scrollFactorY),a*=i.scaleY);var d=r.hexSideLength;return l.set(u+n*o+s%2*(o/2),c+s*((a-d)/2+d))}},function(g,b,t){var h=t(3);g.exports=function(n,s,l,e,r){l=l||new h;var o=r.baseTileWidth,a=r.baseTileHeight,i=r.tilemapLayer,u=0,c=0;return i&&(u=i.x+(e=e||i.scene.cameras.main).scrollX*(1-i.scrollFactorX),o*=i.scaleX,c=i.y+e.scrollY*(1-i.scrollFactorY),a*=i.scaleY),l.set(u+o/2*(n-s),c+(n+s)*(a/2))}},function(g,b,t){var h=t(3);g.exports=function(n,s,l,e,r){l=l||new h;var o=r.baseTileWidth,a=r.baseTileHeight,i=r.tilemapLayer,u=0,c=0;return i&&(u=i.x+(e=e||i.scene.cameras.main).scrollX*(1-i.scrollFactorX),o*=i.scaleX,c=i.y+e.scrollY*(1-i.scrollFactorY),a*=i.scaleY),l.set(u+n*o+s%2*(o/2),c+s*(a/2))}},function(g,b,t){var h=t(253),n=t(254),s=t(3);g.exports=function(l,e,r,o,a){return(r=r||new s(0,0)).x=h(l,o,a),r.y=n(e,o,a),r}},function(g,b){g.exports=function(t,h,n){var s=n.baseTileHeight,l=n.tilemapLayer,e=0;l&&(void 0===h&&(h=l.scene.cameras.main),e=l.y+h.scrollY*(1-l.scrollFactorY),s*=l.scaleY);var r=l.tilemap.hexSideLength;return e+t*((s-r)/2+r)}},function(g,b){g.exports=function(t,h,n){var s=n.baseTileHeight,l=n.tilemapLayer,e=0;return l&&(void 0===h&&(h=l.scene.cameras.main),e=l.y+h.scrollY*(1-l.scrollFactorY),s*=l.scaleY),e+t*(s/2)}},function(g,b,t){var h=t(3);g.exports=function(n,s,l,e,r,o){e=e||new h;var a=o.baseTileWidth,i=o.baseTileHeight,u=o.tilemapLayer;u&&(s-=u.y+(r=r||u.scene.cameras.main).scrollY*(1-u.scrollFactorY),i*=u.scaleY,n-=u.x+r.scrollX*(1-u.scrollFactorX),a*=u.scaleX);var c=o.hexSideLength,d=(i-c)/2+c,f=l?Math.floor(s/d):s/d,p=l?Math.floor((n-f%2*.5*a)/a):(n-f%2*.5*a)/a;return e.set(p,f)}},function(g,b,t){var h=t(3);g.exports=function(n,s,l,e,r,o){e=e||new h;var a=o.baseTileWidth,i=o.baseTileHeight,u=o.tilemapLayer;u&&(s-=u.y+(r=r||u.scene.cameras.main).scrollY*(1-u.scrollFactorY),i*=u.scaleY,n-=u.x+r.scrollX*(1-u.scrollFactorX),a*=u.scaleX);var c=l?Math.floor((n/(a/2)+s/(i/2))/2):(n/(a/2)+s/(i/2))/2,d=l?Math.floor((s/(i/2)-n/(a/2))/2):(s/(i/2)-n/(a/2))/2;return e.set(c,d)}},function(g,b,t){var h=t(3);g.exports=function(n,s,l,e,r,o){e=e||new h;var a=o.baseTileWidth,i=o.baseTileHeight,u=o.tilemapLayer;u&&(s-=u.y+(r=r||u.scene.cameras.main).scrollY*(1-u.scrollFactorY),i*=u.scaleY,n-=u.x+r.scrollX*(1-u.scrollFactorX),a*=u.scaleX);var c=l?Math.floor(s/(i/2)):s/(i/2),d=l?Math.floor((n+c%2*.5*a)/a):(n+c%2*.5*a)/a;return e.set(d,c)}},function(g,b,t){var h=t(255),n=t(256),s=t(3);g.exports=function(l,e,r,o,a,i){return void 0===r&&(r=!0),(o=o||new s(0,0)).x=h(l,r,a,i),o.y=n(e,r,a,i),o}},function(g,b){g.exports=function(t,h,n,s){var l=s.baseTileHeight,e=s.tilemapLayer;e&&(t-=e.y+(n=n||e.scene.cameras.main).scrollY*(1-e.scrollFactorY),l*=e.scaleY);var r=s.hexSideLength,o=(l-r)/2+r;return h?Math.floor(t/o):t/o}},function(g,b){g.exports=function(t,h,n,s){var l=s.baseTileHeight,e=s.tilemapLayer;return e&&(t-=e.y+(n=n||e.scene.cameras.main).scrollY*(1-e.scrollFactorY),l*=e.scaleY),h?Math.floor(t/(l/2)):t/(l/2)}},function(g,b,t){var h=t(119);g.exports=function(n,s,l){if(h(n,s,l)){var e=l.data[s][n];return null!==e&&-1<e.index}return!1}},function(g,b,t){var h=t(85),n=t(119),s=t(252);g.exports=function(l,e,r,o,a){if(void 0===r&&(r=!0),void 0===o&&(o=!0),!n(l,e,a))return null;var i=a.data[e][l];return i?(a.data[e][l]=r?null:new h(a,-1,l,e,a.tileWidth,a.tileHeight),o&&i&&i.collides&&s(l,e,a),i):null}},function(g,b,t){var h=t(40),n=t(259),s=t(565),l=t(566),e=t(577);g.exports=function(r,o,a,i,u,c){var d;switch(o){case h.ARRAY_2D:d=n(r,a,i,u,c);break;case h.CSV:d=s(r,a,i,u,c);break;case h.TILED_JSON:d=l(r,a,c);break;case h.WELTMEISTER:d=e(r,a,c);break;default:console.warn("Unrecognized tilemap data format: "+o),d=null}return d}},function(g,b,t){var h=t(40),n=t(259);g.exports=function(s,l,e,r,o){var a=l.trim().split("\n").map(function(u){return u.split(",")}),i=n(s,a,e,r,o);return i.format=h.CSV,i}},function(g,b,t){var h=t(567),n=t(568),s=t(29),l=t(40),e=t(258),r=t(121),o=t(569),a=t(570),i=t(573),u=t(575);g.exports=function(c,d,f){var p=new r({width:d.width,height:d.height,name:c,tileWidth:d.tilewidth,tileHeight:d.tileheight,orientation:e(d.orientation),format:l.TILED_JSON,version:d.version,properties:d.properties,renderOrder:d.renderorder,infinite:d.infinite});p.orientation===s.HEXAGONAL&&(p.hexSideLength=d.hexsidelength),p.layers=i(d,f),p.images=o(d);var v=u(d);return p.tilesets=v.tilesets,p.imageCollections=v.imageCollections,p.objects=a(d),p.tiles=n(p),h(p),p}},function(g,b,t){var h=t(17);g.exports=function(n){for(var s,l,r,o,a=0;a<n.layers.length;a++){s=n.layers[a];for(var i=0;i<s.data.length;i++){o=s.data[i];for(var u=0;u<o.length;u++)null===(l=o[u])||l.index<0||(l.width=(r=n.tilesets[n.tiles[l.index][2]]).tileWidth,l.height=r.tileHeight,r.tileProperties&&r.tileProperties[l.index-r.firstgid]&&(l.properties=h(l.properties,r.tileProperties[l.index-r.firstgid])))}}}},function(g,b,t){var h=t(122);g.exports=function(n){for(var s=[],l=0;l<n.imageCollections.length;l++)for(var e=n.imageCollections[l],r=e.images,o=0;o<r.length;o++){var a,i=r[o];(a=new h(i.image,i.gid,e.imageWidth,e.imageHeight,0,0)).updateTileData(e.imageWidth,e.imageHeight),n.tilesets.push(a)}for(l=0;l<n.tilesets.length;l++)for(var u=(a=n.tilesets[l]).tileMargin,c=a.tileMargin,d=0,f=0,p=0,v=a.firstgid;v<a.firstgid+a.total&&(s[v]=[u,c,l],u+=a.tileWidth+a.tileSpacing,++d!==a.total)&&(++f!==a.columns||(u=a.tileMargin,c+=a.tileHeight+a.tileSpacing,f=0,++p!==a.rows));v++);return s}},function(g,b,t){var h=t(2),n=t(161);g.exports=function(s){for(var l=[],e=[],r=n(s);r.i<r.layers.length||0<e.length;)if(r.i>=r.layers.length){if(e.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}r=e.pop()}else{var o,a,i,u=r.layers[r.i];r.i++,"imagelayer"===u.type?(o=h(u,"offsetx",0)+h(u,"startx",0),a=h(u,"offsety",0)+h(u,"starty",0),l.push({name:r.name+u.name,image:u.image,x:r.x+o+u.x,y:r.y+a+u.y,alpha:r.opacity*u.opacity,visible:r.visible&&u.visible,properties:h(u,"properties",{})})):"group"===u.type&&(i=n(s,u,r),e.push(r),r=i)}return l}},function(g,b,t){var h=t(2),n=t(260),s=t(572),l=t(161);g.exports=function(e){for(var r=[],o=[],a=l(e);a.i<a.layers.length||0<o.length;)if(a.i>=a.layers.length){if(o.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}a=o.pop()}else{var i,u=a.layers[a.i];if(a.i++,u.opacity*=a.opacity,u.visible=a.visible&&u.visible,"objectgroup"===u.type){u.name=a.name+u.name;for(var c=a.x+h(u,"startx",0)+h(u,"offsetx",0),d=a.y+h(u,"starty",0)+h(u,"offsety",0),f=[],p=0;p<u.objects.length;p++){var v=n(u.objects[p],c,d);f.push(v)}var m=new s(u);m.objects=f,r.push(m)}else"group"===u.type&&(i=l(e,u,a),o.push(a),a=i)}return r}},function(g,b,t){var h=t(126);g.exports=function(n,s){for(var l={},e=0;e<s.length;e++){var r=s[e];h(n,r)&&(l[r]=n[r])}return l}},function(g,b,t){var h=t(0),n=t(2),s=new h({initialize:function(l){void 0===l&&(l={}),this.name=n(l,"name","object layer"),this.opacity=n(l,"opacity",1),this.properties=n(l,"properties",{}),this.propertyTypes=n(l,"propertytypes",{}),this.type=n(l,"type","objectgroup"),this.visible=n(l,"visible",!0),this.objects=n(l,"objects",[])}});g.exports=s},function(g,b,t){var h=t(574),n=t(29),s=t(161),l=t(258),e=t(2),r=t(120),o=t(261),a=t(85);g.exports=function(i,u){for(var c=e(i,"infinite",!1),d=[],f=[],p=s(i);p.i<p.layers.length||0<f.length;)if(p.i>=p.layers.length){if(f.length<1){console.warn("TilemapParser.parseTiledJSON - Invalid layer group hierarchy");break}p=f.pop()}else{var v,m=p.layers[p.i];if(p.i++,"tilelayer"===m.type)if(m.compression)console.warn("TilemapParser.parseTiledJSON - Layer compression is unsupported, skipping layer '"+m.name+"'");else{if(m.encoding&&"base64"===m.encoding){if(m.chunks)for(var T=0;T<m.chunks.length;T++)m.chunks[T].data=h(m.chunks[T].data);m.data&&(m.data=h(m.data)),delete m.encoding}var y,x,w=[],E=0;if(c){var S,A=e(m,"startx",0)+m.x,_=e(m,"starty",0)+m.y;(S=new r({name:p.name+m.name,x:p.x+e(m,"offsetx",0)+A*i.tilewidth,y:p.y+e(m,"offsety",0)+_*i.tileheight,width:m.width,height:m.height,tileWidth:i.tilewidth,tileHeight:i.tileheight,alpha:p.opacity*m.opacity,visible:p.visible&&m.visible,properties:e(m,"properties",[]),orientation:l(i.orientation)})).orientation===n.HEXAGONAL&&(S.hexSideLength=i.hexsidelength);for(var C=0;C<m.height;C++){w.push([null]);for(var M=0;M<m.width;M++)w[C][M]=null}for(C=0,Y=m.chunks.length;C<Y;C++)for(var P=m.chunks[C],L=P.x-A,D=P.y-_,F=0,X=0,R=P.data.length;X<R;X++){var O,N=E+L,k=F+D;0<(O=o(P.data[X])).gid?((y=new a(S,O.gid,N,k,i.tilewidth,i.tileheight)).rotation=O.rotation,y.flipX=O.flipped,w[k][N]=y):(x=u?null:new a(S,-1,N,k,i.tilewidth,i.tileheight),w[k][N]=x),++E===P.width&&(F++,E=0)}}else{(S=new r({name:p.name+m.name,x:p.x+e(m,"offsetx",0)+m.x,y:p.y+e(m,"offsety",0)+m.y,width:m.width,height:m.height,tileWidth:i.tilewidth,tileHeight:i.tileheight,alpha:p.opacity*m.opacity,visible:p.visible&&m.visible,properties:e(m,"properties",[]),orientation:l(i.orientation)})).orientation===n.HEXAGONAL&&(S.hexSideLength=i.hexsidelength);for(var I=[],B=0,Y=m.data.length;B<Y;B++)0<(O=o(m.data[B])).gid?((y=new a(S,O.gid,E,w.length,i.tilewidth,i.tileheight)).rotation=O.rotation,y.flipX=O.flipped,I.push(y)):(x=u?null:new a(S,-1,E,w.length,i.tilewidth,i.tileheight),I.push(x)),++E===m.width&&(w.push(I),E=0,I=[])}S.data=w,d.push(S)}else"group"===m.type&&(v=s(i,m,p),f.push(p),p=v)}return d}},function(g,b){g.exports=function(t){for(var h=window.atob(t),n=h.length,s=new Array(n/4),l=0;l<n;l+=4)s[l/4]=(h.charCodeAt(l)|h.charCodeAt(l+1)<<8|h.charCodeAt(l+2)<<16|h.charCodeAt(l+3)<<24)>>>0;return s}},function(g,b,t){var h=t(122),n=t(576),s=t(260),l=t(1453);g.exports=function(e){for(var r,o=[],a=[],i=null,u=0;u<e.tilesets.length;u++){var c=e.tilesets[u];if(c.source)console.warn("External tilesets unsupported. Use Embed Tileset and re-export");else if(c.image){var d=new h(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing);if(1<e.version){var f=void 0,p=void 0;if(Array.isArray(c.tiles)){f=f||{},p=p||{};for(var v=0;v<c.tiles.length;v++){var m,T,y=c.tiles[v];y.properties&&(m={},y.properties.forEach(function(M){m[M.name]=M.value}),p[y.id]=m),y.objectgroup&&((f[y.id]||(f[y.id]={})).objectgroup=y.objectgroup,y.objectgroup.objects&&(T=y.objectgroup.objects.map(function(M){return s(M)}),f[y.id].objectgroup.objects=T)),y.animation&&((f[y.id]||(f[y.id]={})).animation=y.animation),y.type&&((f[y.id]||(f[y.id]={})).type=y.type)}}Array.isArray(c.wangsets)&&(p=p||{},l(c.wangsets,f=f||{})),f&&(d.tileData=f,d.tileProperties=p)}else if(c.tileproperties&&(d.tileProperties=c.tileproperties),c.tiles)for(r in d.tileData=c.tiles,d.tileData){var x,w=d.tileData[r].objectgroup;w&&w.objects&&(x=w.objects.map(function(M){return s(M)}),d.tileData[r].objectgroup.objects=x)}d.updateTileData(c.imagewidth,c.imageheight),o.push(d)}else{var E=new n(c.name,c.firstgid,c.tilewidth,c.tileheight,c.margin,c.spacing,c.properties),S=0;for(v=0;v<c.tiles.length;v++){var A=(y=c.tiles[v]).image,_=parseInt(y.id,10);E.addImage(c.firstgid+_,A),S=Math.max(_,S)}E.maxId=S,a.push(E)}i&&(i.lastgid=c.firstgid-1),i=c}return{tilesets:o,imageCollections:a}}},function(g,b,t){var h=new(t(0))({initialize:function(n,s,l,e,r,o,a){(void 0===l||l<=0)&&(l=32),(void 0===e||e<=0)&&(e=32),void 0===r&&(r=0),void 0===o&&(o=0),this.name=n,this.firstgid=0|s,this.imageWidth=0|l,this.imageHeight=0|e,this.imageMargin=0|r,this.imageSpacing=0|o,this.properties=a||{},this.images=[],this.total=0},containsImageIndex:function(n){return n>=this.firstgid&&n<this.firstgid+this.total},addImage:function(n,s){return this.images.push({gid:n,image:s}),this.total++,this}});g.exports=h},function(g,b,t){var h=t(40),n=t(121),s=t(578),l=t(579);g.exports=function(e,r,o){if(0===r.layer.length)return console.warn("No layers found in the Weltmeister map: "+e),null;for(var a=0,i=0,u=0;u<r.layer.length;u++)r.layer[u].width>a&&(a=r.layer[u].width),r.layer[u].height>i&&(i=r.layer[u].height);var c=new n({width:a,height:i,name:e,tileWidth:r.layer[0].tilesize,tileHeight:r.layer[0].tilesize,format:h.WELTMEISTER});return c.layers=s(r,o),c.tilesets=l(r),c}},function(g,b,t){var h=t(120),n=t(85);g.exports=function(s,l){for(var e=[],r=0;r<s.layer.length;r++){for(var o=s.layer[r],a=new h({name:o.name,width:o.width,height:o.height,tileWidth:o.tilesize,tileHeight:o.tilesize,visible:1===o.visible}),i=[],u=[],c=0;c<o.data.length;c++){for(var d=0;d<o.data[c].length;d++){var f=o.data[c][d]-1,p=-1<f?new n(a,f,d,c,o.tilesize,o.tilesize):l?null:new n(a,-1,d,c,o.tilesize,o.tilesize);i.push(p)}u.push(i),i=[]}a.data=u,e.push(a)}return e}},function(g,b,t){var h=t(122);g.exports=function(n){for(var s=[],l=[],e=0;e<n.layer.length;e++){var r=n.layer[e],o=r.tilesetName;""!==o&&-1===l.indexOf(o)&&(l.push(o),s.push(new h(o,0,r.tilesize,r.tilesize,0,0)))}return s}},function(g,b,t){var h=t(0),n=t(36),s=t(40),l=t(2),e=t(120),r=t(29),o=t(362),a=t(74),i=t(73),u=t(85),c=t(251),d=t(581),f=t(122),p=new h({initialize:function(v,m){this.scene=v,this.tileWidth=m.tileWidth,this.tileHeight=m.tileHeight,this.width=m.width,this.height=m.height,this.orientation=m.orientation,this.renderOrder=m.renderOrder,this.format=m.format,this.version=m.version,this.properties=m.properties,this.widthInPixels=m.widthInPixels,this.heightInPixels=m.heightInPixels,this.imageCollections=m.imageCollections,this.images=m.images,this.layers=m.layers,this.tilesets=m.tilesets,this.objects=m.objects,this.currentLayerIndex=0,this.hexSideLength=m.hexSideLength;var T=this.orientation;this._convert={WorldToTileXY:c.GetWorldToTileXYFunction(T),WorldToTileX:c.GetWorldToTileXFunction(T),WorldToTileY:c.GetWorldToTileYFunction(T),TileToWorldXY:c.GetTileToWorldXYFunction(T),TileToWorldX:c.GetTileToWorldXFunction(T),TileToWorldY:c.GetTileToWorldYFunction(T)}},createBlankDynamicLayer:function(v,m,T,y,x,w,E,S){return console.warn("createBlankDynamicLayer is deprecated. Use createBlankLayer"),this.createBlankLayer(v,m,T,y,x,w,E,S)},createDynamicLayer:function(v,m,T,y){return console.warn("createDynamicLayer is deprecated. Use createLayer"),this.createLayer(v,m,T,y)},createStaticLayer:function(v,m,T,y){return console.warn("createStaticLayer is deprecated. Use createLayer"),this.createLayer(v,m,T,y)},setRenderOrder:function(v){var m=["right-down","left-down","right-up","left-up"];return"number"==typeof v&&(v=m[v]),-1<m.indexOf(v)&&(this.renderOrder=v),this},addTilesetImage:function(v,m,T,y,x,w,E){if(void 0===v)return null;if(null==m&&(m=v),!this.scene.sys.textures.exists(m))return console.warn("Invalid Tileset Image: "+m),null;var S=this.scene.sys.textures.get(m),A=this.getTilesetIndex(v);if(null===A&&this.format===s.TILED_JSON)return console.warn("No data found for Tileset: "+v),null;var _=this.tilesets[A];return _?(_.setTileSize(T,y),_.setSpacing(x,w),_.setImage(S)):(void 0===T&&(T=this.tileWidth),void 0===y&&(y=this.tileHeight),void 0===x&&(x=0),void 0===w&&(w=0),void 0===E&&(E=0),(_=new f(v,E,T,y,x,w)).setImage(S),this.tilesets.push(_)),_},copy:function(v,m,T,y,x,w,E,S){return null!==(S=this.getLayer(S))?(c.Copy(v,m,T,y,x,w,E,S),this):null},createBlankLayer:function(v,m,T,y,x,w,E,S){if(void 0===T&&(T=0),void 0===y&&(y=0),void 0===x&&(x=this.width),void 0===w&&(w=this.height),void 0===E&&(E=this.tileWidth),void 0===S&&(S=this.tileHeight),null!==this.getLayerIndex(v))return console.warn("Invalid Tilemap Layer ID: "+v),null;for(var A,_=new e({name:v,tileWidth:E,tileHeight:S,width:x,height:w,orientation:this.orientation}),C=0;C<w;C++){A=[];for(var M=0;M<x;M++)A.push(new u(_,-1,M,C,E,S,this.tileWidth,this.tileHeight));_.data.push(A)}this.layers.push(_),this.currentLayerIndex=this.layers.length-1;var P=new d(this.scene,this,this.currentLayerIndex,m,T,y);return P.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(P),P},createLayer:function(v,m,T,y){var x=this.getLayerIndex(v);if(null===x)return console.warn("Invalid Tilemap Layer ID: "+v),"string"==typeof v&&console.warn("Valid tilelayer names:\n\t"+this.getTileLayerNames().join(",\n\t")),null;var w=this.layers[x];if(w.tilemapLayer)return console.warn("Tilemap Layer ID already exists:"+v),null;this.currentLayerIndex=x,void 0===T&&(T=w.x),void 0===y&&(y=w.y);var E=new d(this.scene,this,x,m,T,y);return E.setRenderOrder(this.renderOrder),this.scene.sys.displayList.add(E),E},createFromObjects:function(v,m){var T=[],y=this.getObjectLayer(v);if(!y)return console.warn("createFromObjects: Invalid objectLayerName given: "+v),T;Array.isArray(m)||(m=[m]);for(var x=y.objects,w=0;w<m.length;w++){for(var E,S=m[w],A=l(S,"id",null),_=l(S,"gid",null),C=l(S,"name",null),M=[],P=0;P<x.length;P++)E=x[P],(null===A&&null===_&&null===C||null!==A&&E.id===A||null!==_&&E.gid===_||null!==C&&E.name===C)&&M.push(E);for(var L=l(S,"classType",i),D=l(S,"scene",this.scene),F=l(S,"container",null),X=l(S,"key",null),R=l(S,"frame",null),O=0;O<M.length;O++){E=M[O];var N=new L(D);N.setName(E.name),N.setPosition(E.x,E.y),N.setTexture(X,R),E.width&&(N.displayWidth=E.width),E.height&&(N.displayHeight=E.height);var k,I={x:N.originX*E.width,y:(N.originY-1)*E.height};if(E.rotation&&(k=n(E.rotation),o(I,k),N.rotation=k),N.x+=I.x,N.y+=I.y,void 0===E.flippedHorizontal&&void 0===E.flippedVertical||N.setFlip(E.flippedHorizontal,E.flippedVertical),E.visible||(N.visible=!1),Array.isArray(E.properties))E.properties.forEach(function(Y){var U=Y.name;void 0!==N[U]?N[U]=Y.value:N.setData(U,Y.value)});else for(var B in E.properties)void 0!==N[B]?N[B]=E.properties[B]:N.setData(B,E.properties[B]);F?F.add(N):D.add.existing(N),T.push(N)}}return T},createFromTiles:function(v,m,T,y,x,w){return null===(w=this.getLayer(w))?null:c.CreateFromTiles(v,m,T,y,x,w)},fill:function(v,m,T,y,x,w,E){return void 0===w&&(w=!0),null===(E=this.getLayer(E))?null:(c.Fill(v,m,T,y,x,w,E),this)},filterObjects:function(v,m,T){if("string"==typeof v){var y=v;if(!(v=this.getObjectLayer(v)))return console.warn("No object layer found with the name: "+y),null}return v.objects.filter(m,T)},filterTiles:function(v,m,T,y,x,w,E,S){return null===(S=this.getLayer(S))?null:c.FilterTiles(v,m,T,y,x,w,E,S)},findByIndex:function(v,m,T,y){return null===(y=this.getLayer(y))?null:c.FindByIndex(v,m,T,y)},findObject:function(v,m,T){if("string"==typeof v){var y=v;if(!(v=this.getObjectLayer(v)))return console.warn("No object layer found with the name: "+y),null}return v.objects.find(m,T)||null},findTile:function(v,m,T,y,x,w,E,S){return null===(S=this.getLayer(S))?null:c.FindTile(v,m,T,y,x,w,E,S)},forEachTile:function(v,m,T,y,x,w,E,S){return null===(S=this.getLayer(S))?null:(c.ForEachTile(v,m,T,y,x,w,E,S),this)},getImageIndex:function(v){return this.getIndex(this.images,v)},getImageLayerNames:function(){return this.images&&Array.isArray(this.images)?this.images.map(function(v){return v.name}):[]},getIndex:function(v,m){for(var T=0;T<v.length;T++)if(v[T].name===m)return T;return null},getLayer:function(v){var m=this.getLayerIndex(v);return null!==m?this.layers[m]:null},getObjectLayer:function(v){var m=this.getIndex(this.objects,v);return null!==m?this.objects[m]:null},getObjectLayerNames:function(){return this.objects&&Array.isArray(this.objects)?this.objects.map(function(v){return v.name}):[]},getLayerIndex:function(v){return void 0===v?this.currentLayerIndex:"string"==typeof v?this.getLayerIndexByName(v):"number"==typeof v&&v<this.layers.length?v:v instanceof d?v.layerIndex:null},getLayerIndexByName:function(v){return this.getIndex(this.layers,v)},getTileAt:function(v,m,T,y){return null===(y=this.getLayer(y))?null:c.GetTileAt(v,m,T,y)},getTileAtWorldXY:function(v,m,T,y,x){return null===(x=this.getLayer(x))?null:c.GetTileAtWorldXY(v,m,T,y,x)},getTileLayerNames:function(){return this.layers&&Array.isArray(this.layers)?this.layers.map(function(v){return v.name}):[]},getTilesWithin:function(v,m,T,y,x,w){return null===(w=this.getLayer(w))?null:c.GetTilesWithin(v,m,T,y,x,w)},getTilesWithinShape:function(v,m,T,y){return null===(y=this.getLayer(y))?null:c.GetTilesWithinShape(v,m,T,y)},getTilesWithinWorldXY:function(v,m,T,y,x,w,E){return null===(E=this.getLayer(E))?null:c.GetTilesWithinWorldXY(v,m,T,y,x,w,E)},getTileset:function(v){var m=this.getIndex(this.tilesets,v);return null!==m?this.tilesets[m]:null},getTilesetIndex:function(v){return this.getIndex(this.tilesets,v)},hasTileAt:function(v,m,T){return null===(T=this.getLayer(T))?null:c.HasTileAt(v,m,T)},hasTileAtWorldXY:function(v,m,T,y){return null===(y=this.getLayer(y))?null:c.HasTileAtWorldXY(v,m,T,y)},layer:{get:function(){return this.layers[this.currentLayerIndex]},set:function(v){this.setLayer(v)}},putTileAt:function(v,m,T,y,x){return void 0===y&&(y=!0),null===(x=this.getLayer(x))?null:c.PutTileAt(v,m,T,y,x)},putTileAtWorldXY:function(v,m,T,y,x,w){return void 0===y&&(y=!0),null===(w=this.getLayer(w))?null:c.PutTileAtWorldXY(v,m,T,y,x,w)},putTilesAt:function(v,m,T,y,x){return void 0===y&&(y=!0),null===(x=this.getLayer(x))?null:(c.PutTilesAt(v,m,T,y,x),this)},randomize:function(v,m,T,y,x,w){return null===(w=this.getLayer(w))?null:(c.Randomize(v,m,T,y,x,w),this)},calculateFacesAt:function(v,m,T){return null===(T=this.getLayer(T))?null:(c.CalculateFacesAt(v,m,T),this)},calculateFacesWithin:function(v,m,T,y,x){return null===(x=this.getLayer(x))?null:(c.CalculateFacesWithin(v,m,T,y,x),this)},removeLayer:function(v){var m=this.getLayerIndex(v);if(null===m)return null;a(this.layers,m);for(var T=m;T<this.layers.length;T++)this.layers[T].tilemapLayer&&this.layers[T].tilemapLayer.layerIndex--;return this.currentLayerIndex===m&&(this.currentLayerIndex=0),this},destroyLayer:function(v){var m=this.getLayerIndex(v);return null!==m?((v=this.layers[m]).destroy(),a(this.layers,m),this.currentLayerIndex===m&&(this.currentLayerIndex=0),this):null},removeAllLayers:function(){for(var v=this.layers,m=0;m<v.length;m++)v[m].tilemapLayer&&v[m].tilemapLayer.destroy(!1);return v.length=0,this.currentLayerIndex=0,this},removeTile:function(v,m,T){void 0===m&&(m=-1),void 0===T&&(T=!0);var y=[];Array.isArray(v)||(v=[v]);for(var x=0;x<v.length;x++){var w=v[x];y.push(this.removeTileAt(w.x,w.y,!0,T,w.tilemapLayer)),-1<m&&this.putTileAt(m,w.x,w.y,T,w.tilemapLayer)}return y},removeTileAt:function(v,m,T,y,x){return void 0===T&&(T=!0),void 0===y&&(y=!0),null===(x=this.getLayer(x))?null:c.RemoveTileAt(v,m,T,y,x)},removeTileAtWorldXY:function(v,m,T,y,x,w){return void 0===T&&(T=!0),void 0===y&&(y=!0),null===(w=this.getLayer(w))?null:c.RemoveTileAtWorldXY(v,m,T,y,x,w)},renderDebug:function(v,m,T){return null===(T=this.getLayer(T))?null:(this.orientation===r.ORTHOGONAL&&c.RenderDebug(v,m,T),this)},renderDebugFull:function(v,m){for(var T=this.layers,y=0;y<T.length;y++)c.RenderDebug(v,m,T[y]);return this},replaceByIndex:function(v,m,T,y,x,w,E){return null===(E=this.getLayer(E))?null:(c.ReplaceByIndex(v,m,T,y,x,w,E),this)},setCollision:function(v,m,T,y,x){return void 0===m&&(m=!0),void 0===T&&(T=!0),void 0===x&&(x=!0),null===(y=this.getLayer(y))?null:(c.SetCollision(v,m,T,y,x),this)},setCollisionBetween:function(v,m,T,y,x){return void 0===T&&(T=!0),void 0===y&&(y=!0),null===(x=this.getLayer(x))?null:(c.SetCollisionBetween(v,m,T,y,x),this)},setCollisionByProperty:function(v,m,T,y){return void 0===m&&(m=!0),void 0===T&&(T=!0),null===(y=this.getLayer(y))?null:(c.SetCollisionByProperty(v,m,T,y),this)},setCollisionByExclusion:function(v,m,T,y){return void 0===m&&(m=!0),void 0===T&&(T=!0),null===(y=this.getLayer(y))?null:(c.SetCollisionByExclusion(v,m,T,y),this)},setCollisionFromCollisionGroup:function(v,m,T){return void 0===v&&(v=!0),void 0===m&&(m=!0),null===(T=this.getLayer(T))?null:(c.SetCollisionFromCollisionGroup(v,m,T),this)},setTileIndexCallback:function(v,m,T,y){return null===(y=this.getLayer(y))?null:(c.SetTileIndexCallback(v,m,T,y),this)},setTileLocationCallback:function(v,m,T,y,x,w,E){return null===(E=this.getLayer(E))?null:(c.SetTileLocationCallback(v,m,T,y,x,w,E),this)},setLayer:function(v){var m=this.getLayerIndex(v);return null!==m&&(this.currentLayerIndex=m),this},setBaseTileSize:function(v,m){this.tileWidth=v,this.tileHeight=m,this.widthInPixels=this.width*v,this.heightInPixels=this.height*m;for(var T=0;T<this.layers.length;T++){this.layers[T].baseTileWidth=v,this.layers[T].baseTileHeight=m;for(var y=this.layers[T].data,x=this.layers[T].width,w=this.layers[T].height,E=0;E<w;E++)for(var S=0;S<x;S++){var A=y[E][S];null!==A&&A.setSize(void 0,void 0,v,m)}}return this},setLayerTileSize:function(v,m,T){if(null===(T=this.getLayer(T)))return this;T.tileWidth=v,T.tileHeight=m;for(var y=T.data,x=T.width,w=T.height,E=0;E<w;E++)for(var S=0;S<x;S++){var A=y[E][S];null!==A&&A.setSize(v,m)}return this},shuffle:function(v,m,T,y,x){return null===(x=this.getLayer(x))?null:(c.Shuffle(v,m,T,y,x),this)},swapByIndex:function(v,m,T,y,x,w,E){return null===(E=this.getLayer(E))?null:(c.SwapByIndex(v,m,T,y,x,w,E),this)},tileToWorldX:function(v,m,T){return null===(T=this.getLayer(T))?null:this._convert.TileToWorldX(v,m,T)},tileToWorldY:function(v,m,T){return null===(T=this.getLayer(T))?null:this._convert.TileToWorldY(v,m,T)},tileToWorldXY:function(v,m,T,y,x){return null===(x=this.getLayer(x))?null:this._convert.TileToWorldXY(v,m,T,y,x)},weightedRandomize:function(v,m,T,y,x,w){return null===(w=this.getLayer(w))?null:(c.WeightedRandomize(m,T,y,x,v,w),this)},worldToTileX:function(v,m,T,y){return null===(y=this.getLayer(y))?null:this._convert.WorldToTileX(v,m,T,y)},worldToTileY:function(v,m,T,y){return null===(y=this.getLayer(y))?null:this._convert.WorldToTileY(v,m,T,y)},worldToTileXY:function(v,m,T,y,x,w){return null===(w=this.getLayer(w))?null:this._convert.WorldToTileXY(v,m,T,y,x,w)},destroy:function(){this.removeAllLayers(),this.tilesets.length=0,this.objects.length=0,this.scene=null}});g.exports=p},function(g,b,t){var h=t(0),n=t(11),s=t(15),l=t(251),e=t(1456),r=new h({Extends:s,Mixins:[n.Alpha,n.BlendMode,n.ComputedSize,n.Depth,n.Flip,n.GetBounds,n.Origin,n.Pipeline,n.Transform,n.Visible,n.ScrollFactor,e],initialize:function(o,a,i,u,c,d){s.call(this,o,"TilemapLayer"),this.isTilemap=!0,this.tilemap=a,this.layerIndex=i,this.layer=a.layers[i],(this.layer.tilemapLayer=this).tileset=[],this.tilesDrawn=0,this.tilesTotal=this.layer.width*this.layer.height,this.culledTiles=[],this.skipCull=!1,this.cullPaddingX=1,this.cullPaddingY=1,this.cullCallback=l.GetCullTilesFunction(this.layer.orientation),this._renderOrder=0,this.gidMap=[],this.setTilesets(u),this.setAlpha(this.layer.alpha),this.setPosition(c,d),this.setOrigin(),this.setSize(a.tileWidth*this.layer.width,a.tileHeight*this.layer.height),this.initPipeline()},setTilesets:function(o){var a=[],i=[],u=this.tilemap;Array.isArray(o)||(o=[o]);for(var c=0;c<o.length;c++){var d=o[c];if("string"==typeof d&&(d=u.getTileset(d)),d){i.push(d);for(var f=d.firstgid,p=0;p<d.total;p++)a[f+p]=d}}this.gidMap=a,this.tileset=i},setRenderOrder:function(o){return"string"==typeof o&&(o=["right-down","left-down","right-up","left-up"].indexOf(o)),0<=o&&o<4&&(this._renderOrder=o),this},calculateFacesAt:function(o,a){return l.CalculateFacesAt(o,a,this.layer),this},calculateFacesWithin:function(o,a,i,u){return l.CalculateFacesWithin(o,a,i,u,this.layer),this},createFromTiles:function(o,a,i,u,c){return l.CreateFromTiles(o,a,i,u,c,this.layer)},cull:function(o){return this.cullCallback(this.layer,o,this.culledTiles,this._renderOrder)},copy:function(o,a,i,u,c,d,f){return l.Copy(o,a,i,u,c,d,f,this.layer),this},fill:function(o,a,i,u,c,d){return l.Fill(o,a,i,u,c,d,this.layer),this},filterTiles:function(o,a,i,u,c,d,f){return l.FilterTiles(o,a,i,u,c,d,f,this.layer)},findByIndex:function(o,a,i){return l.FindByIndex(o,a,i,this.layer)},findTile:function(o,a,i,u,c,d,f){return l.FindTile(o,a,i,u,c,d,f,this.layer)},forEachTile:function(o,a,i,u,c,d,f){return l.ForEachTile(o,a,i,u,c,d,f,this.layer),this},getTileAt:function(o,a,i){return l.GetTileAt(o,a,i,this.layer)},getTileAtWorldXY:function(o,a,i,u){return l.GetTileAtWorldXY(o,a,i,u,this.layer)},getTilesWithin:function(o,a,i,u,c){return l.GetTilesWithin(o,a,i,u,c,this.layer)},getTilesWithinShape:function(o,a,i){return l.GetTilesWithinShape(o,a,i,this.layer)},getTilesWithinWorldXY:function(o,a,i,u,c,d){return l.GetTilesWithinWorldXY(o,a,i,u,c,d,this.layer)},hasTileAt:function(o,a){return l.HasTileAt(o,a,this.layer)},hasTileAtWorldXY:function(o,a,i){return l.HasTileAtWorldXY(o,a,i,this.layer)},putTileAt:function(o,a,i,u){return l.PutTileAt(o,a,i,u,this.layer)},putTileAtWorldXY:function(o,a,i,u,c){return l.PutTileAtWorldXY(o,a,i,u,c,this.layer)},putTilesAt:function(o,a,i,u){return l.PutTilesAt(o,a,i,u,this.layer),this},randomize:function(o,a,i,u,c){return l.Randomize(o,a,i,u,c,this.layer),this},removeTileAt:function(o,a,i,u){return l.RemoveTileAt(o,a,i,u,this.layer)},removeTileAtWorldXY:function(o,a,i,u,c){return l.RemoveTileAtWorldXY(o,a,i,u,c,this.layer)},renderDebug:function(o,a){return l.RenderDebug(o,a,this.layer),this},replaceByIndex:function(o,a,i,u,c,d){return l.ReplaceByIndex(o,a,i,u,c,d,this.layer),this},setSkipCull:function(o){return void 0===o&&(o=!0),this.skipCull=o,this},setCullPadding:function(o,a){return void 0===o&&(o=1),void 0===a&&(a=1),this.cullPaddingX=o,this.cullPaddingY=a,this},setCollision:function(o,a,i,u){return l.SetCollision(o,a,i,this.layer,u),this},setCollisionBetween:function(o,a,i,u){return l.SetCollisionBetween(o,a,i,u,this.layer),this},setCollisionByProperty:function(o,a,i){return l.SetCollisionByProperty(o,a,i,this.layer),this},setCollisionByExclusion:function(o,a,i){return l.SetCollisionByExclusion(o,a,i,this.layer),this},setCollisionFromCollisionGroup:function(o,a){return l.SetCollisionFromCollisionGroup(o,a,this.layer),this},setTileIndexCallback:function(o,a,i){return l.SetTileIndexCallback(o,a,i,this.layer),this},setTileLocationCallback:function(o,a,i,u,c,d){return l.SetTileLocationCallback(o,a,i,u,c,d,this.layer),this},shuffle:function(o,a,i,u){return l.Shuffle(o,a,i,u,this.layer),this},swapByIndex:function(o,a,i,u,c,d){return l.SwapByIndex(o,a,i,u,c,d,this.layer),this},tileToWorldX:function(o,a){return this.tilemap.tileToWorldX(o,a,this)},tileToWorldY:function(o,a){return this.tilemap.tileToWorldY(o,a,this)},tileToWorldXY:function(o,a,i,u){return this.tilemap.tileToWorldXY(o,a,i,u,this)},weightedRandomize:function(o,a,i,u,c){return l.WeightedRandomize(a,i,u,c,o,this.layer),this},worldToTileX:function(o,a,i){return this.tilemap.worldToTileX(o,a,i,this)},worldToTileY:function(o,a,i){return this.tilemap.worldToTileY(o,a,i,this)},worldToTileXY:function(o,a,i,u,c){return this.tilemap.worldToTileXY(o,a,i,u,c,this)},destroy:function(o){void 0===o&&(o=!0),this.tilemap&&(this.layer.tilemapLayer===this&&(this.layer.tilemapLayer=void 0),o&&this.tilemap.removeLayer(this),this.tilemap=void 0,this.layer=void 0,this.culledTiles.length=0,this.cullCallback=null,this.gidMap=[],this.tileset=[],s.prototype.destroy.call(this))}});g.exports=r},function(g,b,t){var h=t(0),n=t(2),s=new h({initialize:function(l){this.delay=0,this.repeat=0,this.repeatCount=0,this.loop=!1,this.timeScale=1,this.startAt=0,this.elapsed=0,this.paused=!1,this.hasDispatched=!1,this.reset(l)},reset:function(l){return this.delay=n(l,"delay",0),this.repeat=n(l,"repeat",0),this.loop=n(l,"loop",!1),this.callback=n(l,"callback",void 0),this.callbackScope=n(l,"callbackScope",this.callback),this.args=n(l,"args",[]),this.timeScale=n(l,"timeScale",1),this.startAt=n(l,"startAt",0),this.paused=n(l,"paused",!1),this.elapsed=this.startAt,this.hasDispatched=!1,this.repeatCount=-1===this.repeat||this.loop?999999999999:this.repeat,this},getProgress:function(){return this.elapsed/this.delay},getOverallProgress:function(){return 0<this.repeat?(this.elapsed+this.delay*(this.repeat-this.repeatCount))/(this.delay+this.delay*this.repeat):this.getProgress()},getRepeatCount:function(){return this.repeatCount},getElapsed:function(){return this.elapsed},getElapsedSeconds:function(){return.001*this.elapsed},getRemaining:function(){return this.delay-this.elapsed},getRemainingSeconds:function(){return.001*this.getRemaining()},getOverallRemaining:function(){return this.delay*(1+this.repeatCount)-this.elapsed},getOverallRemainingSeconds:function(){return.001*this.getOverallRemaining()},remove:function(l){void 0===l&&(l=!1),this.elapsed=this.delay,this.hasDispatched=!l,this.repeatCount=0},destroy:function(){this.callback=void 0,this.callbackScope=void 0,this.args=[]}});g.exports=s},function(g,b,t){var h=t(1465);g.exports=function(n){var s,l=[];if(n.hasOwnProperty("props"))for(s in n.props)"_"!==s.substr(0,1)&&l.push({key:s,value:n.props[s]});else for(s in n)-1===h.indexOf(s)&&"_"!==s.substr(0,1)&&l.push({key:s,value:n[s]});return l}},function(g,b,t){var h=t(6);g.exports=function(n){var s=h(n,"tweens",null);return null===s?[]:("function"==typeof s&&(s=s.call()),Array.isArray(s)||(s=[s]),s)}},function(g,b,t){var h=t(265),n=t(13),s=t(99),l=t(80),e=t(162),r=t(6),o=t(264),a=t(266),i=t(268);g.exports=function(u,c,d){void 0===d&&(d=h);var f=r(c,"from",0),p=r(c,"to",1),v=[{value:f}],m=e(c,"delay",d.delay),T=e(c,"duration",d.duration),y=r(c,"easeParams",d.easeParams),x=l(r(c,"ease",d.ease),y),w=e(c,"hold",d.hold),E=e(c,"repeat",d.repeat),S=e(c,"repeatDelay",d.repeatDelay),A=s(c,"yoyo",d.yoyo),_=[],C=o("value",p),M=i(v[0],0,"value",C.getEnd,C.getStart,C.getActive,x,m,T,A,w,E,S,!1,!1);M.start=f,M.current=f,M.to=p,_.push(M);var P=new a(u,_,v);P.offset=n(c,"offset",null),P.completeDelay=n(c,"completeDelay",0),P.loop=Math.round(n(c,"loop",0)),P.loopDelay=Math.round(n(c,"loopDelay",0)),P.paused=s(c,"paused",!1),P.useFrames=s(c,"useFrames",!1);for(var L=r(c,"callbackScope",P),D=[P,null],F=a.TYPES,X=0;X<F.length;X++){var R,O,N=F[X],k=r(c,N,!1);k&&(R=r(c,N+"Scope",L),O=r(c,N+"Params",[]),P.setCallback(N,k,D.concat(O),R))}return P}},function(g,b,t){var h=t(80),n=t(6),s=t(14);g.exports=function(l,e){void 0===e&&(e={});var r=n(e,"start",0),o=n(e,"ease",null),a=n(e,"grid",null),i=n(e,"from",0),u="first"===i,c="center"===i,d="last"===i,f="number"==typeof i,p=Array.isArray(l),v=parseFloat(p?l[0]:l),m=p?parseFloat(l[1]):0,T=Math.max(v,m);if(p&&(r+=v),a){var y,x,w=a[0],E=a[1],S=0,A=0,_=[];d?(S=w-1,A=E-1):f?(S=i%w,A=Math.floor(i/w)):c&&(S=(w-1)/2,A=(E-1)/2);for(var C=s.MIN_SAFE_INTEGER,M=0;M<E;M++){_[M]=[];for(var P=0;P<w;P++){y=S-P,x=A-M;var L=Math.sqrt(y*y+x*x);C<L&&(C=L),_[M][P]=L}}}var D=o?h(o):null;return a?function(F,X,R,O){var N,k=0,I=O%w,B=Math.floor(O/w);return 0<=I&&I<w&&0<=B&&B<E&&(k=_[B][I]),(p?(N=m-v,D?k/C*N*D(k/C):k/C*N):D?k*v*D(k/C):k*v)+r}:function(F,X,R,O,N){var k,I;return N--,u?k=O:c?k=Math.abs(N/2-O):d?k=N-O:f&&(k=Math.abs(i-O)),(p?(I=c?(m-v)/N*(2*k):(m-v)/N*k,D?I*D(k/N):I):D?N*T*D(k/N):k*v)+r}}},function(g,b,t){var h=t(77),n=t(265),s=t(13),l=t(99),e=t(80),r=t(162),o=t(263),a=t(584),i=t(6),u=t(588),c=t(163);g.exports=function(d,f){var p=new u(d);p.completeDelay=s(f,"completeDelay",0),p.loop=Math.round(s(f,"loop",0)),p.loopDelay=Math.round(s(f,"loopDelay",0)),p.paused=l(f,"paused",!1),p.useFrames=l(f,"useFrames",!1);var v,m,T=i(f,"callbackScope",p),y=[p],x=i(f,"onStart",!1);x&&(v=i(f,"onStartScope",T),m=i(f,"onStartParams",[]),p.setCallback("onStart",x,y.concat(m),v));var w,E,S=i(f,"onUpdate",!1);S&&(w=i(f,"onUpdateScope",T),E=i(f,"onUpdateParams",[]),p.setCallback("onUpdate",S,y.concat(E),w));var A,_,C=i(f,"onLoop",!1);C&&(A=i(f,"onLoopScope",T),_=i(f,"onLoopParams",[]),p.setCallback("onLoop",C,y.concat(_),A));var M,P,L=i(f,"onYoyo",!1);L&&(M=i(f,"onYoyoScope",T),P=i(f,"onYoyoParams",[]),p.setCallback("onYoyo",L,y.concat(null,P),M));var D,F,X=i(f,"onComplete",!1);X&&(D=i(f,"onCompleteScope",T),F=i(f,"onCompleteParams",[]),p.setCallback("onComplete",X,y.concat(F),D));var R=a(f);if(0===R.length)return p.paused=!0,p;var O=h(n);O.targets=o(f);var N=s(f,"totalDuration",0);O.duration=0<N?Math.floor(N/R.length):r(f,"duration",O.duration),O.delay=r(f,"delay",O.delay),O.easeParams=i(f,"easeParams",O.easeParams),O.ease=e(i(f,"ease",O.ease),O.easeParams),O.hold=r(f,"hold",O.hold),O.repeat=r(f,"repeat",O.repeat),O.repeatDelay=r(f,"repeatDelay",O.repeatDelay),O.yoyo=l(f,"yoyo",O.yoyo),O.flipX=l(f,"flipX",O.flipX),O.flipY=l(f,"flipY",O.flipY);for(var k=0;k<R.length;k++)p.queue(c(p,R[k],O));return p}},function(g,b,t){var h=t(0),n=t(9),s=t(267),l=t(163),e=t(100),r=new h({Extends:n,initialize:function(o){n.call(this),this.manager=o,this.isTimeline=!0,this.data=[],this.totalData=0,this.useFrames=!1,this.timeScale=1,this.loop=0,this.loopDelay=0,this.loopCounter=0,this.completeDelay=0,this.countdown=0,this.state=e.PENDING_ADD,this._pausedState=e.PENDING_ADD,this.paused=!1,this.elapsed=0,this.totalElapsed=0,this.duration=0,this.progress=0,this.totalDuration=0,this.totalProgress=0,this.callbacks={onComplete:null,onLoop:null,onStart:null,onUpdate:null,onYoyo:null}},dispatchTimelineEvent:function(o,a){this.emit(o,this),a&&a.func.apply(a.scope,a.params)},setTimeScale:function(o){return this.timeScale=o,this},getTimeScale:function(){return this.timeScale},isPlaying:function(){return this.state===e.ACTIVE},add:function(o){return this.queue(l(this,o))},queue:function(o){return this.isPlaying()||(o.parent=this,o.parentIsTimeline=!0,this.data.push(o),this.totalData=this.data.length),this},hasOffset:function(o){return null!==o.offset},isOffsetAbsolute:function(o){return"number"==typeof o},isOffsetRelative:function(o){if("string"==typeof o){var a=o[0];if("-"===a||"+"===a)return!0}return!1},getRelativeOffset:function(o,a){var i=o[0],u=parseFloat(o.substr(2)),c=a;switch(i){case"+":c+=u;break;case"-":c-=u}return Math.max(0,c)},calcDuration:function(){for(var o=0,a=0,i=0,u=0;u<this.totalData;u++){var c=this.data[u];c.init(),this.hasOffset(c)?this.isOffsetAbsolute(c.offset)?(c.calculatedOffset=c.offset,0===c.offset&&(i=0)):this.isOffsetRelative(c.offset)&&(c.calculatedOffset=this.getRelativeOffset(c.offset,o)):c.calculatedOffset=i,o=c.totalDuration+c.calculatedOffset,a+=c.totalDuration,i+=c.totalDuration}this.duration=a,this.loopCounter=-1===this.loop?999999999999:this.loop,this.totalDuration=0<this.loopCounter?this.duration+this.completeDelay+(this.duration+this.loopDelay)*this.loopCounter:this.duration+this.completeDelay},init:function(){return this.calcDuration(),this.progress=0,this.totalProgress=0,!this.paused||(this.state=e.PAUSED,!1)},resetTweens:function(o){for(var a=0;a<this.totalData;a++)this.data[a].play(o)},setCallback:function(o,a,i,u){return-1!==r.TYPES.indexOf(o)&&(this.callbacks[o]={func:a,scope:u,params:i}),this},makeActive:function(o){return this.manager.makeActive(o)},play:function(){if(this.state!==e.ACTIVE){if(this.paused)return this.paused=!1,void this.manager.makeActive(this);this.resetTweens(!1),this.state=e.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_START,this.callbacks.onStart)}},nextState:function(){0<this.loopCounter?(this.elapsed=0,this.progress=0,this.loopCounter--,this.resetTweens(!0),0<this.loopDelay?(this.countdown=this.loopDelay,this.state=e.LOOP_DELAY):(this.state=e.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop))):0<this.completeDelay?(this.state=e.COMPLETE_DELAY,this.countdown=this.completeDelay):(this.state=e.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))},update:function(o,a){if(this.state!==e.PAUSED){switch(this.useFrames&&(a=+this.manager.timeScale),this.elapsed+=a*=this.timeScale,this.progress=Math.min(this.elapsed/this.duration,1),this.totalElapsed+=a,this.totalProgress=Math.min(this.totalElapsed/this.totalDuration,1),this.state){case e.ACTIVE:for(var i=this.totalData,u=0;u<this.totalData;u++)this.data[u].update(o,a)&&i--;this.dispatchTimelineEvent(s.TIMELINE_UPDATE,this.callbacks.onUpdate),0===i&&this.nextState();break;case e.LOOP_DELAY:this.countdown-=a,this.countdown<=0&&(this.state=e.ACTIVE,this.dispatchTimelineEvent(s.TIMELINE_LOOP,this.callbacks.onLoop));break;case e.COMPLETE_DELAY:this.countdown-=a,this.countdown<=0&&(this.state=e.PENDING_REMOVE,this.dispatchTimelineEvent(s.TIMELINE_COMPLETE,this.callbacks.onComplete))}return this.state===e.PENDING_REMOVE}},stop:function(){this.state=e.PENDING_REMOVE},pause:function(){if(this.state!==e.PAUSED)return this.paused=!0,this._pausedState=this.state,this.state=e.PAUSED,this.emit(s.TIMELINE_PAUSE,this),this},resume:function(){return this.state===e.PAUSED&&(this.paused=!1,this.state=this._pausedState,this.emit(s.TIMELINE_RESUME,this)),this},hasTarget:function(o){for(var a=0;a<this.data.length;a++)if(this.data[a].hasTarget(o))return!0;return!1},destroy:function(){for(var o=0;o<this.data.length;o++)this.data[o].stop()}});r.TYPES=["onStart","onUpdate","onLoop","onComplete","onYoyo"],g.exports=r},function(g,b,t){var h=t(86),n=t(41),s=t(32),l=t(2),e=t(64);g.exports={parseBody:function(o,a,i,u){void 0===u&&(u={});for(var c=l(i,"fixtures",[]),d=[],f=0;f<c.length;f++)for(var p=this.parseFixture(c[f]),v=0;v<p.length;v++)d.push(p[v]);var m=s.clone(i,!0);s.extend(m,u,!0),delete m.fixtures,delete m.type;var T=n.create(m);return n.setParts(T,d),n.setPosition(T,{x:o,y:a}),T},parseFixture:function(o){var a,i,u,c,d=s.extend({},!1,o);return delete d.circle,delete d.vertices,o.circle?(a=l(o.circle,"x"),i=l(o.circle,"y"),u=l(o.circle,"radius"),c=[h.circle(a,i,u,d)]):o.vertices&&(c=this.parseVertices(o.vertices,d)),c},parseVertices:function(o,a){void 0===a&&(a={});for(var i=[],u=0;u<o.length;u++)e.clockwiseSort(o[u]),i.push(n.create(s.extend({position:e.centre(o[u]),vertices:o[u]},a)));return h.flagCoincidentParts(i)}}},function(g,b,t){var h=t(86),n=t(41);g.exports={parseBody:function(l,e,r,o){var a;void 0===o&&(o={});var i=r.vertices;if(1===i.length)o.vertices=i[0],a=n.create(o),h.flagCoincidentParts(a.parts);else{for(var u=[],c=0;c<i.length;c++){var d=n.create({vertices:i[c]});u.push(d)}h.flagCoincidentParts(u),o.parts=u,a=n.create(o)}return a.label=r.label,n.setPosition(a,{x:l,y:e}),a}}},function(g,b,t){var h={};g.exports=h;var n=t(118),s=t(128),l=t(32),e=t(41),r=t(86);h.stack=function(o,a,i,u,c,d,f){for(var p,v=n.create({label:"Stack"}),m=o,T=a,y=0,x=0;x<u;x++){for(var w=0,E=0;E<i;E++){var S,_=f(m,T,E,x,p,y);_?(w<(S=_.bounds.max.y-_.bounds.min.y)&&(w=S),e.translate(_,{x:.5*(_.bounds.max.x-_.bounds.min.x),y:.5*S}),m=_.bounds.max.x+c,n.addBody(v,_),p=_,y+=1):m+=c}T+=w+d,m=o}return v},h.chain=function(o,a,i,u,c,d){for(var f=o.bodies,p=1;p<f.length;p++){var v=f[p-1],m=f[p],E=l.extend({bodyA:v,pointA:{x:(v.bounds.max.x-v.bounds.min.x)*a,y:(v.bounds.max.y-v.bounds.min.y)*i},bodyB:m,pointB:{x:(m.bounds.max.x-m.bounds.min.x)*u,y:(m.bounds.max.y-m.bounds.min.y)*c}},d);n.addConstraint(o,s.create(E))}return o.label+=" Chain",o},h.mesh=function(o,a,i,u,c){for(var d,p,m=o.bodies,T=0;T<i;T++){for(d=1;d<a;d++)n.addConstraint(o,s.create(l.extend({bodyA:m[d-1+T*a],bodyB:p=m[d+T*a]},c)));if(0<T)for(d=0;d<a;d++)n.addConstraint(o,s.create(l.extend({bodyA:m[d+(T-1)*a],bodyB:p=m[d+T*a]},c))),u&&0<d&&n.addConstraint(o,s.create(l.extend({bodyA:m[d-1+(T-1)*a],bodyB:p},c))),u&&d<a-1&&n.addConstraint(o,s.create(l.extend({bodyA:m[d+1+(T-1)*a],bodyB:p},c)))}return o.label+=" Mesh",o},h.pyramid=function(o,a,i,u,c,d,f){return h.stack(o,a,i,u,c,d,function(p,v,m,T,y,x){var w=Math.min(u,Math.ceil(i/2)),E=y?y.bounds.max.x-y.bounds.min.x:0;if(!(w<T||m<(T=w-T)||i-1-T<m))return 1===x&&e.translate(y,{x:(m+(i%2==1?1:-1))*E,y:0}),f(o+(y?m*E:0)+m*c,v,m,T,y,x)})},h.newtonsCradle=function(o,a,i,u,c){for(var d=n.create({label:"Newtons Cradle"}),f=0;f<i;f++){var p=r.circle(o+f*(1.9*u),a+c,u,{inertia:1/0,restitution:1,friction:0,frictionAir:1e-4,slop:1}),v=s.create({pointA:{x:o+f*(1.9*u),y:a},bodyB:p});n.addBody(d,p),n.addConstraint(d,v)}return d},h.car=function(o,a,i,u,c){var d=e.nextGroup(!0),f=.5*-i+20,p=.5*i-20,v=n.create({label:"Car"}),m=r.rectangle(o,a,i,u,{collisionFilter:{group:d},chamfer:{radius:.5*u},density:2e-4}),T=r.circle(o+f,a+0,c,{collisionFilter:{group:d},friction:.8}),y=r.circle(o+p,a+0,c,{collisionFilter:{group:d},friction:.8}),x=s.create({bodyB:m,pointB:{x:f,y:0},bodyA:T,stiffness:1,length:0}),w=s.create({bodyB:m,pointB:{x:p,y:0},bodyA:y,stiffness:1,length:0});return n.addBody(v,m),n.addBody(v,T),n.addBody(v,y),n.addConstraint(v,x),n.addConstraint(v,w),v},h.softBody=function(o,a,i,u,c,d,f,p,v,m){v=l.extend({inertia:1/0},v),m=l.extend({stiffness:.2,render:{type:"line",anchors:!1}},m);var T=h.stack(o,a,i,u,c,d,function(y,x){return r.circle(y,x,p,v)});return h.mesh(T,i,u,f,m),T.label="Soft Body",T}},function(g,b,t){var h={};g.exports=h,t(84);var n=t(32);h.pathToVertices=function(s,l){typeof window>"u"||"SVGPathSeg"in window||n.warn("Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.");var e,r,o,a,i,u,c,d,f,p,v,m=[],T=0,y=0,x=0;function w(S,A,_){var C,M=_%2==1&&1<_;f&&S==f.x&&A==f.y||(v=f&&M?(p=f.x,f.y):p=0,C={x:p+S,y:v+A},!M&&f||(f=C),m.push(C),y=p+S,x=v+A)}function E(S){var A=S.pathSegTypeAsLetter.toUpperCase();if("Z"!==A){switch(A){case"M":case"L":case"T":case"C":case"S":case"Q":y=S.x,x=S.y;break;case"H":y=S.x;break;case"V":x=S.y}w(y,x,S.pathSegType)}}for(l=l||15,h._svgPathToAbsolute(s),o=s.getTotalLength(),u=[],e=0;e<s.pathSegList.numberOfItems;e+=1)u.push(s.pathSegList.getItem(e));for(c=u.concat();T<o;){if((i=u[s.getPathSegAtLength(T)])!=d){for(;c.length&&c[0]!=i;)E(c.shift());d=i}switch(i.pathSegTypeAsLetter.toUpperCase()){case"C":case"T":case"S":case"Q":case"A":w((a=s.getPointAtLength(T)).x,a.y,0)}T+=l}for(e=0,r=c.length;e<r;++e)E(c[e]);return m},h._svgPathToAbsolute=function(s){for(var l,e,r,o,a,i,u=s.pathSegList,c=0,d=0,f=u.numberOfItems,p=0;p<f;++p){var v=u.getItem(p),m=v.pathSegTypeAsLetter;if(/[MLHVCSQTA]/.test(m))"x"in v&&(c=v.x),"y"in v&&(d=v.y);else switch("x1"in v&&(r=c+v.x1),"x2"in v&&(a=c+v.x2),"y1"in v&&(o=d+v.y1),"y2"in v&&(i=d+v.y2),"x"in v&&(c+=v.x),"y"in v&&(d+=v.y),m){case"m":u.replaceItem(s.createSVGPathSegMovetoAbs(c,d),p);break;case"l":u.replaceItem(s.createSVGPathSegLinetoAbs(c,d),p);break;case"h":u.replaceItem(s.createSVGPathSegLinetoHorizontalAbs(c),p);break;case"v":u.replaceItem(s.createSVGPathSegLinetoVerticalAbs(d),p);break;case"c":u.replaceItem(s.createSVGPathSegCurvetoCubicAbs(c,d,r,o,a,i),p);break;case"s":u.replaceItem(s.createSVGPathSegCurvetoCubicSmoothAbs(c,d,a,i),p);break;case"q":u.replaceItem(s.createSVGPathSegCurvetoQuadraticAbs(c,d,r,o),p);break;case"t":u.replaceItem(s.createSVGPathSegCurvetoQuadraticSmoothAbs(c,d),p);break;case"a":u.replaceItem(s.createSVGPathSegArcAbs(c,d,v.r1,v.r2,v.angle,v.largeArcFlag,v.sweepFlag),p);break;case"z":case"Z":c=l,d=e}"M"!=m&&"m"!=m||(l=c,e=d)}}},function(g,b,t){var h=t(86),n=t(41),s=t(0),l=t(249),e=t(9),r=t(2),o=t(126),a=t(64),i=new s({Extends:e,Mixins:[l.Bounce,l.Collision,l.Friction,l.Gravity,l.Mass,l.Sensor,l.Sleep,l.Static],initialize:function(u,c,d){e.call(this),this.tile=c,this.world=u,c.physics.matterBody&&c.physics.matterBody.destroy(),c.physics.matterBody=this;var f,p=r(d,"body",null),v=r(d,"addToWorld",!0);p?this.setBody(p,v):(f=c.getCollisionGroup(),0<r(f,"objects",[]).length?this.setFromTileCollision(d):this.setFromTileRectangle(d))},setFromTileRectangle:function(u){void 0===u&&(u={}),o(u,"isStatic")||(u.isStatic=!0),o(u,"addToWorld")||(u.addToWorld=!0);var c=this.tile.getBounds(),p=h.rectangle(c.x+c.width/2,c.y+c.height/2,c.width,c.height,u);return this.setBody(p,u.addToWorld),this},setFromTileCollision:function(u){void 0===u&&(u={}),o(u,"isStatic")||(u.isStatic=!0),o(u,"addToWorld")||(u.addToWorld=!0);for(var c=this.tile.tilemapLayer.scaleX,d=this.tile.tilemapLayer.scaleY,f=this.tile.getLeft(),p=this.tile.getTop(),v=this.tile.getCollisionGroup(),m=r(v,"objects",[]),T=[],y=0;y<m.length;y++){var x,w,E,S=m[y],A=f+S.x*c,_=p+S.y*d,C=S.width*c,M=S.height*d,P=null;S.rectangle?P=h.rectangle(A+C/2,_+M/2,C,M,u):S.ellipse?P=h.circle(A+C/2,_+M/2,C/2,u):(S.polygon||S.polyline)&&(x=(S.polygon?S.polygon:S.polyline).map(function(L){return{x:L.x*c,y:L.y*d}}),w=a.create(x),A+=(E=a.centre(w)).x,P=h.fromVertices(A,_+=E.y,w,u)),P&&T.push(P)}return 1===T.length?this.setBody(T[0],u.addToWorld):1<T.length&&(u.parts=T,this.setBody(n.create(u),u.addToWorld)),this},setBody:function(u,c){return void 0===c&&(c=!0),this.body&&this.removeBody(),this.body=u,this.body.gameObject=this,c&&this.world.add(this.body),this},removeBody:function(){return this.body&&(this.world.remove(this.body),this.body.gameObject=void 0,this.body=void 0),this},destroy:function(){this.removeBody(),this.tile.physics.matterBody=void 0,this.removeAllListeners()}});g.exports=i},function(g,b,t){var h=t(1399);h.Body=t(41),h.Composite=t(118),h.World=t(596),h.Detector=t(273),h.Grid=t(597),h.Pairs=t(598),h.Pair=t(250),h.Query=t(1400),h.Resolver=t(599),h.SAT=t(274),h.Constraint=t(128),h.Common=t(32),h.Engine=t(1401),h.Events=t(166),h.Sleeping=t(165),h.Plugin=t(595),h.Bodies=t(86),h.Composites=t(591),h.Axes=t(271),h.Bounds=t(84),h.Svg=t(592),h.Vector=t(83),h.Vertices=t(64),h.World.add=h.Composite.add,h.World.remove=h.Composite.remove,h.World.addComposite=h.Composite.addComposite,h.World.addBody=h.Composite.addBody,h.World.addConstraint=h.Composite.addConstraint,h.World.clear=h.Composite.clear,g.exports=h},function(g,b,t){var h={};g.exports=h;var n=t(32);h._registry={},h.register=function(s){var l,e,r;return h.isPlugin(s)||n.warn("Plugin.register:",h.toString(s),"does not implement all required fields."),s.name in h._registry?(l=h._registry[s.name],e=h.versionParse(s.version).number,(r=h.versionParse(l.version).number)<e?(n.warn("Plugin.register:",h.toString(l),"was upgraded to",h.toString(s)),h._registry[s.name]=s):e<r?n.warn("Plugin.register:",h.toString(l),"can not be downgraded to",h.toString(s)):s!==l&&n.warn("Plugin.register:",h.toString(s),"is already registered to different plugin object")):h._registry[s.name]=s,s},h.resolve=function(s){return h._registry[h.dependencyParse(s).name]},h.toString=function(s){return"string"==typeof s?s:(s.name||"anonymous")+"@"+(s.version||s.range||"0.0.0")},h.isPlugin=function(s){return s&&s.name&&s.version&&s.install},h.isUsed=function(s,l){return-1<s.used.indexOf(l)},h.isFor=function(s,l){var e=s.for&&h.dependencyParse(s.for);return!s.for||l.name===e.name&&h.versionSatisfies(l.version,e.range)},h.use=function(s,l){if(s.uses=(s.uses||[]).concat(l||[]),0!==s.uses.length){for(var e,r=h.dependencies(s),o=n.topologicalSort(r),a=[],i=0;i<o.length;i+=1)o[i]!==s.name&&((e=h.resolve(o[i]))?h.isUsed(s,e.name)||(h.isFor(e,s)||(n.warn("Plugin.use:",h.toString(e),"is for",e.for,"but installed on",h.toString(s)+"."),e._warned=!0),e.install?e.install(s):(n.warn("Plugin.use:",h.toString(e),"does not specify an install function."),e._warned=!0),e._warned?(a.push("\u{1f536} "+h.toString(e)),delete e._warned):a.push("\u2705 "+h.toString(e)),s.used.push(e.name)):a.push("\u274c "+o[i]));0<a.length&&!e.silent&&n.info(a.join("  "))}else n.warn("Plugin.use:",h.toString(s),"does not specify any dependencies to install.")},h.dependencies=function(s,l){var e=h.dependencyParse(s),r=e.name;if(!(r in(l=l||{}))){s=h.resolve(s)||s,l[r]=n.map(s.uses||[],function(a){h.isPlugin(a)&&h.register(a);var i=h.dependencyParse(a),u=h.resolve(a);return u&&!h.versionSatisfies(u.version,i.range)?(n.warn("Plugin.dependencies:",h.toString(u),"does not satisfy",h.toString(i),"used by",h.toString(e)+"."),u._warned=!0,s._warned=!0):u||(n.warn("Plugin.dependencies:",h.toString(a),"used by",h.toString(e),"could not be resolved."),s._warned=!0),i.name});for(var o=0;o<l[r].length;o+=1)h.dependencies(l[r][o],l);return l}},h.dependencyParse=function(s){return n.isString(s)?(/^[\w-]+(@(\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?))?$/.test(s)||n.warn("Plugin.dependencyParse:",s,"is not a valid dependency string."),{name:s.split("@")[0],range:s.split("@")[1]||"*"}):{name:s.name,range:s.range||s.version}},h.versionParse=function(s){/^\*|[\^~]?\d+\.\d+\.\d+(-[0-9A-Za-z-]+)?$/.test(s)||n.warn("Plugin.versionParse:",s,"is not a valid version or range.");var l=s.split("-");s=l[0];var e=isNaN(Number(s[0])),r=e?s.substr(1):s,o=n.map(r.split("."),function(a){return Number(a)});return{isRange:e,version:r,range:s,operator:e?s[0]:"",parts:o,prerelease:l[1],number:1e8*o[0]+1e4*o[1]+o[2]}},h.versionSatisfies=function(s,l){var e=h.versionParse(l=l||"*"),r=e.parts,o=h.versionParse(s),a=o.parts;if(e.isRange){if("*"===e.operator||"*"===s)return!0;if("~"===e.operator)return a[0]===r[0]&&a[1]===r[1]&&a[2]>=r[2];if("^"===e.operator)return 0<r[0]?a[0]===r[0]&&o.number>=e.number:0<r[1]?a[1]===r[1]&&a[2]>=r[2]:a[2]===r[2]}return s===l||"*"===s}},function(g,b,t){var h={};g.exports=h;var n=t(118),s=(t(128),t(32));h.create=function(l){var e=n.create();return s.extend(e,{label:"World",gravity:{x:0,y:1,scale:.001},bounds:{min:{x:-1/0,y:-1/0},max:{x:1/0,y:1/0}}},l)}},function(g,b,t){var h={};g.exports=h;var n=t(250),s=t(273),l=t(32);h.create=function(e){return l.extend({controller:h,detector:s.collisions,buckets:{},pairs:{},pairsList:[],bucketWidth:48,bucketHeight:48},e)},h.update=function(e,r,o,a){for(var i,u,c,d=o.world,f=e.buckets,p=!1,v=o.metrics,m=v.broadphaseTests=0;m<r.length;m++){var T=r[m];if((!T.isSleeping||a)&&!(T.bounds.max.x<d.bounds.min.x||T.bounds.min.x>d.bounds.max.x||T.bounds.max.y<d.bounds.min.y||T.bounds.min.y>d.bounds.max.y)){var y=h._getRegion(e,T);if(!T.region||y.id!==T.region.id||a){v.broadphaseTests+=1,T.region&&!a||(T.region=y);for(var x=h._regionUnion(y,T.region),w=x.startCol;w<=x.endCol;w++)for(i=x.startRow;i<=x.endRow;i++){u=f[c=h._getBucketId(w,i)];var E=w>=y.startCol&&w<=y.endCol&&i>=y.startRow&&i<=y.endRow,S=w>=T.region.startCol&&w<=T.region.endCol&&i>=T.region.startRow&&i<=T.region.endRow;!E&&S&&S&&u&&h._bucketRemoveBody(e,u,T),(T.region===y||E&&!S||a)&&(u=u||h._createBucket(f,c),h._bucketAddBody(e,u,T))}T.region=y,p=!0}}}p&&(e.pairsList=h._createActivePairsList(e))},h.clear=function(e){e.buckets={},e.pairs={},e.pairsList=[]},h._regionUnion=function(e,r){var o=Math.min(e.startCol,r.startCol),a=Math.max(e.endCol,r.endCol),i=Math.min(e.startRow,r.startRow),u=Math.max(e.endRow,r.endRow);return h._createRegion(o,a,i,u)},h._getRegion=function(e,r){var o=r.bounds,a=Math.floor(o.min.x/e.bucketWidth),i=Math.floor(o.max.x/e.bucketWidth),u=Math.floor(o.min.y/e.bucketHeight),c=Math.floor(o.max.y/e.bucketHeight);return h._createRegion(a,i,u,c)},h._createRegion=function(e,r,o,a){return{id:e+","+r+","+o+","+a,startCol:e,endCol:r,startRow:o,endRow:a}},h._getBucketId=function(e,r){return"C"+e+"R"+r},h._createBucket=function(e,r){return e[r]=[]},h._bucketAddBody=function(e,r,o){for(var a=0;a<r.length;a++){var i,u,c=r[a];o.id===c.id||o.isStatic&&c.isStatic||(i=n.id(o,c),(u=e.pairs[i])?u[2]+=1:e.pairs[i]=[o,c,1])}r.push(o)},h._bucketRemoveBody=function(e,r,o){r.splice(r.indexOf(o),1);for(var a=0;a<r.length;a++){var u=n.id(o,r[a]),c=e.pairs[u];c&&--c[2]}},h._createActivePairsList=function(e){for(var r,o=[],a=l.keys(e.pairs),i=0;i<a.length;i++)0<(r=e.pairs[a[i]])[2]?o.push(r):delete e.pairs[a[i]];return o}},function(g,b,t){var h={};g.exports=h;var n=t(250),s=t(32);h._pairMaxIdleLife=1e3,h.create=function(l){return s.extend({table:{},list:[],collisionStart:[],collisionActive:[],collisionEnd:[]},l)},h.update=function(l,e,r){var o,a,i,u,c=l.list,d=l.table,f=l.collisionStart,p=l.collisionEnd,v=l.collisionActive;for(f.length=0,p.length=0,u=v.length=0;u<c.length;u++)c[u].confirmedActive=!1;for(u=0;u<e.length;u++)(o=e[u]).collided&&((i=d[a=n.id(o.bodyA,o.bodyB)])?(i.isActive?v.push(i):f.push(i),n.update(i,o,r),i.confirmedActive=!0):(i=n.create(o,r),d[a]=i,f.push(i),c.push(i)));for(u=0;u<c.length;u++)(i=c[u]).isActive&&!i.confirmedActive&&(n.setActive(i,!1,r),p.push(i))},h.removeOld=function(l,e){for(var r,o,a,i=l.list,u=l.table,c=[],d=0;d<i.length;d++)(o=(r=i[d]).collision).bodyA.isSleeping||o.bodyB.isSleeping?r.timeUpdated=e:e-r.timeUpdated>h._pairMaxIdleLife&&c.push(d);for(d=0;d<c.length;d++)delete u[(r=i[a=c[d]-d]).id],i.splice(a,1)},h.clear=function(l){return l.table={},l.list.length=0,l.collisionStart.length=0,l.collisionActive.length=0,l.collisionEnd.length=0,l}},function(g,b,t){var h={};g.exports=h;var n=t(64),s=t(83),l=t(32),e=t(84);h._restingThresh=4,h._restingThreshTangent=6,h._positionDampen=.9,h._positionWarming=.8,h._frictionNormalMultiplier=5,h.preSolvePosition=function(r){for(var o,a,i=0;i<r.length;i++)(o=r[i]).isActive&&(o.collision.parentA.totalContacts+=a=o.activeContacts.length,o.collision.parentB.totalContacts+=a)},h.solvePosition=function(r,o,a){for(var i,u,c,d,f,p,v,m,T,y,x,w,A,_=a*h._positionDampen,C=0;C<o.length;C++){var M=o[C];M.previousPositionImpulse.x=M.positionImpulse.x,M.previousPositionImpulse.y=M.positionImpulse.y}for(C=0;C<r.length;C++)(c=r[C]).isActive&&!c.isSensor&&(f=(d=c.collision).parentA,m=(i=(v=d.normal).x)*((x=(p=d.parentB).previousPositionImpulse).x-(y=f.previousPositionImpulse).x+(T=d.penetration).x)+(u=v.y)*(x.y-y.y+T.y),A=((c.separation=m)-c.slop)*_,(f.isStatic||p.isStatic)&&(A*=2),f.isStatic||f.isSleeping||(f.positionImpulse.x+=i*(w=A/f.totalContacts),f.positionImpulse.y+=u*w),p.isStatic||p.isSleeping||(p.positionImpulse.x-=i*(w=A/p.totalContacts),p.positionImpulse.y-=u*w))},h.postSolvePosition=function(r){for(var o=0;o<r.length;o++){var a=r[o];if((a.totalContacts=0)!==a.positionImpulse.x||0!==a.positionImpulse.y){for(var i=0;i<a.parts.length;i++){var u=a.parts[i];n.translate(u.vertices,a.positionImpulse),e.update(u.bounds,u.vertices,a.velocity),u.position.x+=a.positionImpulse.x,u.position.y+=a.positionImpulse.y}a.positionPrev.x+=a.positionImpulse.x,a.positionPrev.y+=a.positionImpulse.y,s.dot(a.positionImpulse,a.velocity)<0?(a.positionImpulse.x=0,a.positionImpulse.y=0):(a.positionImpulse.x*=h._positionWarming,a.positionImpulse.y*=h._positionWarming)}}},h.preSolveVelocity=function(r){for(var o,a,i,u,c,d,f,p,v,m,T,y,x,w=s._temp[0],E=s._temp[1],S=0;S<r.length;S++)if((a=r[S]).isActive&&!a.isSensor)for(i=a.activeContacts,c=(u=a.collision).parentA,d=u.parentB,f=u.normal,p=u.tangent,o=0;o<i.length;o++)m=(v=i[o]).vertex,y=v.tangentImpulse,0===(T=v.normalImpulse)&&0===y||(w.x=f.x*T+p.x*y,w.y=f.y*T+p.y*y,c.isStatic||c.isSleeping||(x=s.sub(m,c.position,E),c.positionPrev.x+=w.x*c.inverseMass,c.positionPrev.y+=w.y*c.inverseMass,c.anglePrev+=s.cross(x,w)*c.inverseInertia),d.isStatic||d.isSleeping||(x=s.sub(m,d.position,E),d.positionPrev.x-=w.x*d.inverseMass,d.positionPrev.y-=w.y*d.inverseMass,d.anglePrev-=s.cross(x,w)*d.inverseInertia))},h.solveVelocity=function(r,o){for(var a=o*o,i=s._temp[0],u=s._temp[1],c=s._temp[2],d=s._temp[3],f=s._temp[4],p=s._temp[5],v=0;v<r.length;v++){var m=r[v];if(m.isActive&&!m.isSensor){var T=m.collision,y=T.parentA,x=T.parentB,w=T.normal,E=T.tangent,S=m.activeContacts,A=1/S.length;y.velocity.x=y.position.x-y.positionPrev.x,y.velocity.y=y.position.y-y.positionPrev.y,x.velocity.x=x.position.x-x.positionPrev.x,x.velocity.y=x.position.y-x.positionPrev.y,y.angularVelocity=y.angle-y.anglePrev,x.angularVelocity=x.angle-x.anglePrev;for(var _=0;_<S.length;_++){var C=S[_],M=C.vertex,P=s.sub(M,y.position,u),L=s.sub(M,x.position,c),D=s.add(y.velocity,s.mult(s.perp(P),y.angularVelocity),d),F=s.add(x.velocity,s.mult(s.perp(L),x.angularVelocity),f),X=s.sub(D,F,p),R=s.dot(w,X),O=s.dot(E,X),N=Math.abs(O),k=l.sign(O),I=(1+m.restitution)*R,B=l.clamp(m.separation+R,0,1)*h._frictionNormalMultiplier,Y=O,U=1/0;N>m.friction*m.frictionStatic*B*a&&(Y=l.clamp(m.friction*k*a,-(U=N),U));var G,W,z=s.cross(P,w),V=s.cross(L,w),H=A/(y.inverseMass+x.inverseMass+y.inverseInertia*z*z+x.inverseInertia*V*V);I*=H,Y*=H,R<0&&R*R>h._restingThresh*a?C.normalImpulse=0:(G=C.normalImpulse,C.normalImpulse=Math.min(C.normalImpulse+I,0),I=C.normalImpulse-G),O*O>h._restingThreshTangent*a?C.tangentImpulse=0:(W=C.tangentImpulse,C.tangentImpulse=l.clamp(C.tangentImpulse+Y,-U,U),Y=C.tangentImpulse-W),i.x=w.x*I+E.x*Y,i.y=w.y*I+E.y*Y,y.isStatic||y.isSleeping||(y.positionPrev.x+=i.x*y.inverseMass,y.positionPrev.y+=i.y*y.inverseMass,y.anglePrev+=s.cross(P,i)*y.inverseInertia),x.isStatic||x.isSleeping||(x.positionPrev.x-=i.x*x.inverseMass,x.positionPrev.y-=i.y*x.inverseMass,x.anglePrev-=s.cross(L,i)*x.inverseInertia)}}}}},function(g,b){var t=function(){return this}();try{t=t||new Function("return this")()}catch{"object"==typeof window&&(t=window)}g.exports=t},function(g,b,t){var h=t(276);g.exports=function(n,s,l,e){for(var r=n[0],o=1;o<n.length;o++){var a=n[o];h(a,r,s,l,e),r=a}return n}},function(g,b,t){var h=t(46);g.exports=function(n,s,l,e,r){return h(n,"angle",s,l,e,r)}},function(g,b){g.exports=function(t,h,n){for(var s=0;s<t.length;s++)h.call(n,t[s]);return t}},function(g,b){g.exports=function(t,h,n){void 0===n&&(n=0);for(var s=n;s<t.length;s++){var l=t[s],e=!0;for(var r in h)l[r]!==h[r]&&(e=!1);if(e)return l}return null}},function(g,b){g.exports=function(t,h,n){void 0===n&&(n=0);for(var s=n;s<t.length;s++){var l=t[s],e=!0;for(var r in h)l[r]!==h[r]&&(e=!1);if(e)return l}return null}},function(g,b,t){var h=t(289),n=t(123),s=t(2),l=t(1),e=new(t(129))({sys:{queueDepthSort:l,events:{once:l}}},0,0,1,1);g.exports=function(r,o){void 0===o&&(o={});var a=o.hasOwnProperty("width"),i=o.hasOwnProperty("height"),u=s(o,"width",-1),c=s(o,"height",-1),d=s(o,"cellWidth",1),f=s(o,"cellHeight",d),p=s(o,"position",n.TOP_LEFT),v=s(o,"x",0),m=s(o,"y",0),T=0,y=0,x=u*d,w=c*f;e.setPosition(v,m),e.setSize(d,f);for(var E=0;E<r.length;E++)if(h(r[E],e,p),a&&-1===u)e.x+=d;else if(i&&-1===c)e.y+=f;else if(i&&!a){if(y+=f,e.y+=f,y===w&&(y=0,T+=d,e.y=m,e.x+=d,T===x))break}else if(T+=d,e.x+=d,T===x&&(T=0,y+=f,e.x=v,e.y+=f,y===w))break;return r}},function(g,b,t){var h=t(18);g.exports={_alpha:1,_alphaTL:1,_alphaTR:1,_alphaBL:1,_alphaBR:1,clearAlpha:function(){return this.setAlpha(1)},setAlpha:function(s,l,e,r){return void 0===s&&(s=1),void 0===l?this.alpha=s:(this._alphaTL=h(s,0,1),this._alphaTR=h(l,0,1),this._alphaBL=h(e,0,1),this._alphaBR=h(r,0,1)),this},alpha:{get:function(){return this._alpha},set:function(s){var l=h(s,0,1);this._alpha=l,this._alphaTL=l,this._alphaTR=l,this._alphaBL=l,0===(this._alphaBR=l)?this.renderFlags&=-3:this.renderFlags|=2}},alphaTopLeft:{get:function(){return this._alphaTL},set:function(s){var l=h(s,0,1);0!==(this._alphaTL=l)&&(this.renderFlags|=2)}},alphaTopRight:{get:function(){return this._alphaTR},set:function(s){var l=h(s,0,1);0!==(this._alphaTR=l)&&(this.renderFlags|=2)}},alphaBottomLeft:{get:function(){return this._alphaBL},set:function(s){var l=h(s,0,1);0!==(this._alphaBL=l)&&(this.renderFlags|=2)}},alphaBottomRight:{get:function(){return this._alphaBR},set:function(s){var l=h(s,0,1);0!==(this._alphaBR=l)&&(this.renderFlags|=2)}}}},function(g,b){g.exports={width:0,height:0,displayWidth:{get:function(){return this.scaleX*this.width},set:function(t){this.scaleX=t/this.width}},displayHeight:{get:function(){return this.scaleY*this.height},set:function(t){this.scaleY=t/this.height}},setSize:function(t,h){return this.width=t,this.height=h,this},setDisplaySize:function(t,h){return this.displayWidth=t,this.displayHeight=h,this}}},function(g,b){g.exports={texture:null,frame:null,isCropped:!1,setCrop:function(h,n,s,l){return void 0===h?this.isCropped=!1:this.frame&&("number"==typeof h?this.frame.setCropUVs(this._crop,h,n,s,l,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY),this.isCropped=!0),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(g,b){g.exports={flipX:!1,flipY:!1,toggleFlipX:function(){return this.flipX=!this.flipX,this},toggleFlipY:function(){return this.flipY=!this.flipY,this},setFlipX:function(t){return this.flipX=t,this},setFlipY:function(t){return this.flipY=t,this},setFlip:function(t,h){return this.flipX=t,this.flipY=h,this},resetFlip:function(){return this.flipX=!1,this.flipY=!1,this}}},function(g,b,t){var h=t(10),n=t(308),s=t(3);g.exports={prepareBoundsOutput:function(e,r){return void 0===r&&(r=!1),0!==this.rotation&&n(e,this.x,this.y,this.rotation),r&&this.parentContainer&&this.parentContainer.getBoundsTransformMatrix().transformPoint(e.x,e.y,e),e},getCenter:function(e){return void 0===e&&(e=new s),e.x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,e},getTopLeft:function(e,r){return(e=e||new s).x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,r)},getTopCenter:function(e,r){return(e=e||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,r)},getTopRight:function(e,r){return(e=e||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY,this.prepareBoundsOutput(e,r)},getLeftCenter:function(e,r){return(e=e||new s).x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,r)},getRightCenter:function(e,r){return(e=e||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight/2,this.prepareBoundsOutput(e,r)},getBottomLeft:function(e,r){return(e=e||new s).x=this.x-this.displayWidth*this.originX,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,r)},getBottomCenter:function(e,r){return(e=e||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth/2,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,r)},getBottomRight:function(e,r){return(e=e||new s).x=this.x-this.displayWidth*this.originX+this.displayWidth,e.y=this.y-this.displayHeight*this.originY+this.displayHeight,this.prepareBoundsOutput(e,r)},getBounds:function(e){var r,o,a,i,u,c,d,f,p;return void 0===e&&(e=new h),this.parentContainer?(p=this.parentContainer.getBoundsTransformMatrix(),this.getTopLeft(e),p.transformPoint(e.x,e.y,e),r=e.x,o=e.y,this.getTopRight(e),p.transformPoint(e.x,e.y,e),a=e.x,i=e.y,this.getBottomLeft(e),p.transformPoint(e.x,e.y,e),u=e.x,c=e.y,this.getBottomRight(e),p.transformPoint(e.x,e.y,e)):(this.getTopLeft(e),r=e.x,o=e.y,this.getTopRight(e),a=e.x,i=e.y,this.getBottomLeft(e),u=e.x,c=e.y,this.getBottomRight(e)),d=e.x,f=e.y,e.x=Math.min(r,a,u,d),e.y=Math.min(o,i,c,f),e.width=Math.max(r,a,u,d)-e.x,e.height=Math.max(o,i,c,f)-e.y,e}}},function(g,b){g.exports="blur"},function(g,b){g.exports="boot"},function(g,b){g.exports="contextlost"},function(g,b){g.exports="contextrestored"},function(g,b){g.exports="destroy"},function(g,b){g.exports="focus"},function(g,b){g.exports="hidden"},function(g,b){g.exports="pause"},function(g,b){g.exports="postrender"},function(g,b){g.exports="poststep"},function(g,b){g.exports="prerender"},function(g,b){g.exports="prestep"},function(g,b){g.exports="ready"},function(g,b){g.exports="resume"},function(g,b){g.exports="step"},function(g,b){g.exports="visible"},function(g,b){g.exports="postrender"},function(g,b){g.exports="prerender"},function(g,b){g.exports="render"},function(g,b){g.exports="resize"},function(g,b){g.exports={_originComponent:!0,originX:.5,originY:.5,_displayOriginX:0,_displayOriginY:0,displayOriginX:{get:function(){return this._displayOriginX},set:function(h){this._displayOriginX=h,this.originX=h/this.width}},displayOriginY:{get:function(){return this._displayOriginY},set:function(h){this._displayOriginY=h,this.originY=h/this.height}},setOrigin:function(h,n){return void 0===h&&(h=.5),void 0===n&&(n=h),this.originX=h,this.originY=n,this.updateDisplayOrigin()},setOriginFromFrame:function(){return this.frame&&this.frame.customPivot?(this.originX=this.frame.pivotX,this.originY=this.frame.pivotY,this.updateDisplayOrigin()):this.setOrigin()},setDisplayOrigin:function(h,n){return void 0===h&&(h=0),void 0===n&&(n=h),this.displayOriginX=h,this.displayOriginY=n,this},updateDisplayOrigin:function(){return this._displayOriginX=this.originX*this.width,this._displayOriginY=this.originY*this.height,this}}},function(g,b,t){var h=t(36),n=t(99),s=t(6),l=t(100),e=t(3);g.exports={path:null,rotateToPath:!1,pathRotationOffset:0,pathOffset:null,pathVector:null,pathDelta:null,pathTween:null,pathConfig:null,_prevDirection:l.PLAYING_FORWARD,setPath:function(o,a){void 0===a&&(a=this.pathConfig);var i=this.pathTween;return i&&i.isPlaying()&&i.stop(),this.path=o,a&&this.startFollow(a),this},setRotateToPath:function(o,a){return void 0===a&&(a=0),this.rotateToPath=o,this.pathRotationOffset=a,this},isFollowing:function(){var o=this.pathTween;return o&&o.isPlaying()},startFollow:function(o,a){void 0===o&&(o={}),void 0===a&&(a=0);var i=this.pathTween;i&&i.isPlaying()&&i.stop(),"number"==typeof o&&(o={duration:o}),o.from=s(o,"from",0),o.to=s(o,"to",1);var u=n(o,"positionOnPath",!1);this.rotateToPath=n(o,"rotateToPath",!1),this.pathRotationOffset=s(o,"rotationOffset",0);var c,d=s(o,"startAt",a);return d&&(o.onStart=function(f){var p=f.data[0];p.progress=d,p.elapsed=p.duration*d;var v=p.ease(p.progress);p.current=p.start+(p.end-p.start)*v,p.target[p.key]=p.current}),this.pathOffset||(this.pathOffset=new e(this.x,this.y)),this.pathVector||(this.pathVector=new e),this.pathDelta||(this.pathDelta=new e),this.pathDelta.reset(),this.pathTween=this.scene.sys.tweens.addCounter(o),this.path.getStartPoint(this.pathOffset),u&&(this.x=this.pathOffset.x,this.y=this.pathOffset.y),this.pathOffset.x=this.x-this.pathOffset.x,this.pathOffset.y=this.y-this.pathOffset.y,this._prevDirection=l.PLAYING_FORWARD,this.rotateToPath&&(c=this.path.getPoint(.1),this.rotation=Math.atan2(c.y-this.y,c.x-this.x)+h(this.pathRotationOffset)),this.pathConfig=o,this},pauseFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.pause(),this},resumeFollow:function(){var o=this.pathTween;return o&&o.isPaused()&&o.resume(),this},stopFollow:function(){var o=this.pathTween;return o&&o.isPlaying()&&o.stop(),this},pathUpdate:function(){var o=this.pathTween;if(o){var a=o.data[0],i=this.pathDelta,u=this.pathVector;if(i.copy(u).negate(),a.state===l.COMPLETE)return this.path.getPoint(1,u),i.add(u),u.add(this.pathOffset),void this.setPosition(u.x,u.y);if(a.state!==l.PLAYING_FORWARD&&a.state!==l.PLAYING_BACKWARD)return;this.path.getPoint(o.getValue(),u),i.add(u),u.add(this.pathOffset);var c=this.x,d=this.y;this.setPosition(u.x,u.y);var f=this.x-c,p=this.y-d;if(0==f&&0==p)return;if(a.state!==this._prevDirection)return void(this._prevDirection=a.state);this.rotateToPath&&(this.rotation=Math.atan2(p,f)+h(this.pathRotationOffset))}}}},function(g,b){g.exports={_sizeComponent:!0,width:0,height:0,displayWidth:{get:function(){return Math.abs(this.scaleX*this.frame.realWidth)},set:function(h){this.scaleX=h/this.frame.realWidth}},displayHeight:{get:function(){return Math.abs(this.scaleY*this.frame.realHeight)},set:function(h){this.scaleY=h/this.frame.realHeight}},setSizeToFrame:function(h){return void 0===h&&(h=this.frame),this.width=h.realWidth,this.height=h.realHeight,this},setSize:function(h,n){return this.width=h,this.height=n,this},setDisplaySize:function(h,n){return this.displayWidth=h,this.displayHeight=n,this}}},function(g,b){g.exports={texture:null,frame:null,isCropped:!1,setTexture:function(h,n){return this.texture=this.scene.sys.textures.get(h),this.setFrame(n)},setFrame:function(h,n,s){return void 0===n&&(n=!0),void 0===s&&(s=!0),this.frame=this.texture.get(h),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this}}},function(g,b){g.exports={texture:null,frame:null,isCropped:!1,setCrop:function(h,n,s,l){return void 0===h?this.isCropped=!1:this.frame&&("number"==typeof h?this.frame.setCropUVs(this._crop,h,n,s,l,this.flipX,this.flipY):this.frame.setCropUVs(this._crop,h.x,h.y,h.width,h.height,this.flipX,this.flipY),this.isCropped=!0),this},setTexture:function(h,n){return this.texture=this.scene.sys.textures.get(h),this.setFrame(n)},setFrame:function(h,n,s){return void 0===n&&(n=!0),void 0===s&&(s=!0),this.frame=this.texture.get(h),this.frame.cutWidth&&this.frame.cutHeight?this.renderFlags|=8:this.renderFlags&=-9,this._sizeComponent&&n&&this.setSizeToFrame(),this._originComponent&&s&&(this.frame.customPivot?this.setOrigin(this.frame.pivotX,this.frame.pivotY):this.updateDisplayOrigin()),this.isCropped&&this.frame.updateCropUVs(this._crop,this.flipX,this.flipY),this},resetCropObject:function(){return{u0:0,v0:0,u1:0,v1:0,width:0,height:0,x:0,y:0,flipX:!1,flipY:!1,cx:0,cy:0,cw:0,ch:0}}}},function(g,b){g.exports={tintTopLeft:16777215,tintTopRight:16777215,tintBottomLeft:16777215,tintBottomRight:16777215,tintFill:!1,clearTint:function(){return this.setTint(16777215),this},setTint:function(h,n,s,l){return void 0===h&&(h=16777215),void 0===n&&(l=s=n=h),this.tintTopLeft=h,this.tintTopRight=n,this.tintBottomLeft=s,this.tintBottomRight=l,this.tintFill=!1,this},setTintFill:function(h,n,s,l){return this.setTint(h,n,s,l),this.tintFill=!0,this},tint:{set:function(h){this.setTint(h,h,h,h)}},isTinted:{get:function(){var h=16777215;return this.tintFill||this.tintTopLeft!==h||this.tintTopRight!==h||this.tintBottomLeft!==h||this.tintBottomRight!==h}}}},function(g,b){g.exports="changedata"},function(g,b){g.exports="changedata-"},function(g,b){g.exports="destroy"},function(g,b){g.exports="removedata"},function(g,b){g.exports="setdata"},function(g,b){g.exports="addedtoscene"},function(g,b){g.exports="destroy"},function(g,b){g.exports="removedfromscene"},function(g,b){g.exports="complete"},function(g,b){g.exports="created"},function(g,b){g.exports="error"},function(g,b){g.exports="loop"},function(g,b){g.exports="play"},function(g,b){g.exports="seeked"},function(g,b){g.exports="seeking"},function(g,b){g.exports="stop"},function(g,b){g.exports="timeout"},function(g,b){g.exports="unlocked"},function(g,b){g.exports="addedtoscene"},function(g,b){g.exports="boot"},function(g,b){g.exports="create"},function(g,b){g.exports="destroy"},function(g,b){g.exports="pause"},function(g,b){g.exports="postupdate"},function(g,b){g.exports="prerender"},function(g,b){g.exports="preupdate"},function(g,b){g.exports="ready"},function(g,b){g.exports="removedfromscene"},function(g,b){g.exports="render"},function(g,b){g.exports="resume"},function(g,b){g.exports="shutdown"},function(g,b){g.exports="sleep"},function(g,b){g.exports="start"},function(g,b){g.exports="transitioncomplete"},function(g,b){g.exports="transitioninit"},function(g,b){g.exports="transitionout"},function(g,b){g.exports="transitionstart"},function(g,b){g.exports="transitionwake"},function(g,b){g.exports="update"},function(g,b){g.exports="wake"},function(g,b,t){var h=t(46);g.exports=function(n,s,l,e,r){return h(n,"alpha",s,l,e,r)}},function(g,b,t){var h=t(46);g.exports=function(n,s,l,e,r){return h(n,"x",s,l,e,r)}},function(g,b,t){var h=t(46);g.exports=function(n,s,l,e,r,o,a){return null==l&&(l=s),h(n,"x",s,e,o,a),h(n,"y",l,r,o,a)}},function(g,b,t){var h=t(46);g.exports=function(n,s,l,e,r){return h(n,"y",s,l,e,r)}},function(g,b){g.exports=function(t,h,n,s){void 0===n&&(n=0),void 0===s&&(s=6.28);for(var l=n,e=(s-n)/t.length,r=0;r<t.length;r++)t[r].x=h.x+h.radius*Math.cos(l),t[r].y=h.y+h.radius*Math.sin(l),l+=e;return t}},function(g,b){g.exports=function(t,h,n,s){void 0===n&&(n=0),void 0===s&&(s=6.28);for(var l=n,e=(s-n)/t.length,r=h.width/2,o=h.height/2,a=0;a<t.length;a++)t[a].x=h.x+r*Math.cos(l),t[a].y=h.y+o*Math.sin(l),l+=e;return t}},function(g,b,t){var h=t(172);g.exports=function(n,s){for(var l=h(s,n.length),e=0;e<n.length;e++){var r=n[e],o=l[e];r.x=o.x,r.y=o.y}return n}},function(g,b,t){var h=t(316),n=t(178),s=t(179);g.exports=function(l,e,r){void 0===r&&(r=0);var o=h(e,!1,l.length);0<r?n(o,r):r<0&&s(o,Math.abs(r));for(var a=0;a<l.length;a++)l[a].x=o[a].x,l[a].y=o[a].y;return l}},function(g,b,t){var h=t(317);g.exports=function(n,s,l){var e=h({x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2},l),r=h({x1:s.x2,y1:s.y2,x2:s.x3,y2:s.y3},l),o=h({x1:s.x3,y1:s.y3,x2:s.x1,y2:s.y1},l);e.pop(),r.pop(),o.pop();for(var a=(e=e.concat(r,o)).length/n.length,i=0,u=0;u<n.length;u++){var c=n[u],d=e[Math.floor(i)];c.x=d.x,c.y=d.y,i+=a}return n}},function(g,b){g.exports=function(t,h,n){for(var s=0;s<t.length;s++){var l=t[s];l.anims&&l.anims.play(h,n)}return t}},function(g,b,t){var h=t(170);g.exports=function(n,s){for(var l=0;l<n.length;l++)h(s,n[l]);return n}},function(g,b,t){var h=t(180);g.exports=function(n,s){for(var l=0;l<n.length;l++)h(s,n[l]);return n}},function(g,b,t){var h=t(173);g.exports=function(n,s){for(var l=0;l<n.length;l++)h(s,n[l]);return n}},function(g,b,t){var h=t(174);g.exports=function(n,s){for(var l=0;l<n.length;l++)h(s,n[l]);return n}},function(g,b,t){var h=t(181);g.exports=function(n,s){for(var l=0;l<n.length;l++)h(s,n[l]);return n}},function(g,b,t){var h=t(46);g.exports=function(n,s,l,e,r){return h(n,"rotation",s,l,e,r)}},function(g,b,t){var h=t(182),n=t(50);g.exports=function(s,l,e){for(var r=l.x,o=l.y,a=0;a<s.length;a++){var i=s[a];h(i,r,o,e,Math.max(1,n(i.x,i.y,r,o)))}return s}},function(g,b,t){var h=t(182);g.exports=function(n,s,l,e){var r=s.x,o=s.y;if(0===e)return n;for(var a=0;a<n.length;a++)h(n[a],r,o,l,e);return n}},function(g,b,t){var h=t(46);g.exports=function(n,s,l,e,r){return h(n,"scaleX",s,l,e,r)}},function(g,b,t){var h=t(46);g.exports=function(n,s,l,e,r,o,a){return null==l&&(l=s),h(n,"scaleX",s,e,o,a),h(n,"scaleY",l,r,o,a)}},function(g,b,t){var h=t(46);g.exports=function(n,s,l,e,r){return h(n,"scaleY",s,l,e,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r){return h(n,"alpha",s,l,e,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e){return h(n,"blendMode",s,0,l,e)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r){return h(n,"depth",s,l,e,r)}},function(g,b){g.exports=function(t,h,n){for(var s=0;s<t.length;s++)t[s].setInteractive(h,n);return t}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r,o,a){return null==l&&(l=s),h(n,"originX",s,e,o,a),h(n,"originY",l,r,o,a),n.forEach(function(i){i.updateDisplayOrigin()}),n}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r){return h(n,"rotation",s,l,e,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r,o,a){return null==l&&(l=s),h(n,"scaleX",s,e,o,a),h(n,"scaleY",l,r,o,a)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r){return h(n,"scaleX",s,l,e,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r){return h(n,"scaleY",s,l,e,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r,o,a){return null==l&&(l=s),h(n,"scrollFactorX",s,e,o,a),h(n,"scrollFactorY",l,r,o,a)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r){return h(n,"scrollFactorX",s,l,e,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r){return h(n,"scrollFactorY",s,l,e,r)}},function(g,b){g.exports=function(t,h,n,s,l){for(var e=0;e<t.length;e++)t[e].setTint(h,n,s,l);return t}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e){return h(n,"visible",s,0,l,e)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r){return h(n,"x",s,l,e,r)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r,o,a){return null==l&&(l=s),h(n,"x",s,e,o,a),h(n,"y",l,r,o,a)}},function(g,b,t){var h=t(27);g.exports=function(n,s,l,e,r){return h(n,"y",s,l,e,r)}},function(g,b,t){var h=t(3);g.exports=function(n,s,l,e,r){var o,a,i;if(void 0===e&&(e=0),void 0===r&&(r=new h),1<n.length)if(0===e){for(var u=n.length-1,c=n[u].x,d=n[u].y,f=u-1;0<=f;f--)o=(i=n[f]).x,a=i.y,i.x=c,i.y=d,c=o,d=a;n[u].x=s,n[u].y=l}else{for(c=n[0].x,d=n[0].y,f=1;f<n.length;f++)o=(i=n[f]).x,a=i.y,i.x=c,i.y=d,c=o,d=a;n[0].x=s,n[0].y=l}else c=n[0].x,d=n[0].y,n[0].x=s,n[0].y=l;return r.x=c,r.y=d,r}},function(g,b,t){var h=t(131);g.exports=function(n){return h(n)}},function(g,b,t){var h=t(183);g.exports=function(n,s,l,e,r){void 0===r&&(r=!1);var o,a=Math.abs(e-l)/n.length;if(r)for(o=0;o<n.length;o++)n[o][s]+=h(o*a,l,e);else for(o=0;o<n.length;o++)n[o][s]=h(o*a,l,e);return n}},function(g,b,t){var h=t(184);g.exports=function(n,s,l,e,r){void 0===r&&(r=!1);var o,a=Math.abs(e-l)/n.length;if(r)for(o=0;o<n.length;o++)n[o][s]+=h(o*a,l,e);else for(o=0;o<n.length;o++)n[o][s]=h(o*a,l,e);return n}},function(g,b){g.exports=function(t,h,n,s,l){void 0===l&&(l=!1);var e,r=Math.abs(s-n)/t.length;if(l)for(e=0;e<t.length;e++)t[e][h]+=e*r+n;else for(e=0;e<t.length;e++)t[e][h]=e*r+n;return t}},function(g,b){g.exports=function(t){for(var h=0;h<t.length;h++)t[h].visible=!t[h].visible;return t}},function(g,b,t){var h=t(68);g.exports=function(n,s,l){void 0===l&&(l=0);for(var e=0;e<n.length;e++){var r=n[e];r.x=h(r.x,s.left-l,s.right+l),r.y=h(r.y,s.top-l,s.bottom+l)}return n}},function(g,b,t){g.exports={Animation:t(185),AnimationFrame:t(319),AnimationManager:t(321),AnimationState:t(164),Events:t(132)}},function(g,b){g.exports="add"},function(g,b){g.exports="animationcomplete"},function(g,b){g.exports="animationcomplete-"},function(g,b){g.exports="animationrepeat"},function(g,b){g.exports="animationrestart"},function(g,b){g.exports="animationstart"},function(g,b){g.exports="animationstop"},function(g,b){g.exports="animationupdate"},function(g,b){g.exports="pauseall"},function(g,b){g.exports="remove"},function(g,b){g.exports="resumeall"},function(g,b,t){g.exports={BaseCache:t(323),CacheManager:t(325),Events:t(324)}},function(g,b){g.exports="add"},function(g,b){g.exports="remove"},function(g,b,t){g.exports={Controls:t(739),Scene2D:t(742)}},function(g,b,t){g.exports={FixedKeyControl:t(740),SmoothedKeyControl:t(741)}},function(g,b,t){var h=t(0),n=t(6),s=new h({initialize:function(l){this.camera=n(l,"camera",null),this.left=n(l,"left",null),this.right=n(l,"right",null),this.up=n(l,"up",null),this.down=n(l,"down",null),this.zoomIn=n(l,"zoomIn",null),this.zoomOut=n(l,"zoomOut",null),this.zoomSpeed=n(l,"zoomSpeed",.01),this.minZoom=n(l,"minZoom",.001),this.maxZoom=n(l,"maxZoom",1e3),this.speedX=0,this.speedY=0;var e=n(l,"speed",null);"number"==typeof e?(this.speedX=e,this.speedY=e):(this.speedX=n(l,"speed.x",0),this.speedY=n(l,"speed.y",0)),this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){var e;this.active&&(void 0===l&&(l=1),e=this.camera,this.up&&this.up.isDown?e.scrollY-=this.speedY*l|0:this.down&&this.down.isDown&&(e.scrollY+=this.speedY*l|0),this.left&&this.left.isDown?e.scrollX-=this.speedX*l|0:this.right&&this.right.isDown&&(e.scrollX+=this.speedX*l|0),this.zoomIn&&this.zoomIn.isDown?(e.zoom-=this.zoomSpeed,e.zoom<this.minZoom&&(e.zoom=this.minZoom)):this.zoomOut&&this.zoomOut.isDown&&(e.zoom+=this.zoomSpeed,e.zoom>this.maxZoom&&(e.zoom=this.maxZoom)))},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});g.exports=s},function(g,b,t){var h=t(0),n=t(6),s=new h({initialize:function(l){this.camera=n(l,"camera",null),this.left=n(l,"left",null),this.right=n(l,"right",null),this.up=n(l,"up",null),this.down=n(l,"down",null),this.zoomIn=n(l,"zoomIn",null),this.zoomOut=n(l,"zoomOut",null),this.zoomSpeed=n(l,"zoomSpeed",.01),this.minZoom=n(l,"minZoom",.001),this.maxZoom=n(l,"maxZoom",1e3),this.accelX=0,this.accelY=0;var e=n(l,"acceleration",null);"number"==typeof e?(this.accelX=e,this.accelY=e):(this.accelX=n(l,"acceleration.x",0),this.accelY=n(l,"acceleration.y",0)),this.dragX=0,this.dragY=0;var r=n(l,"drag",null);"number"==typeof r?(this.dragX=r,this.dragY=r):(this.dragX=n(l,"drag.x",0),this.dragY=n(l,"drag.y",0)),this.maxSpeedX=0,this.maxSpeedY=0;var o=n(l,"maxSpeed",null);"number"==typeof o?(this.maxSpeedX=o,this.maxSpeedY=o):(this.maxSpeedX=n(l,"maxSpeed.x",0),this.maxSpeedY=n(l,"maxSpeed.y",0)),this._speedX=0,this._speedY=0,this._zoom=0,this.active=null!==this.camera},start:function(){return this.active=null!==this.camera,this},stop:function(){return this.active=!1,this},setCamera:function(l){return this.camera=l,this},update:function(l){var e;this.active&&(void 0===l&&(l=1),e=this.camera,0<this._speedX?(this._speedX-=this.dragX*l,this._speedX<0&&(this._speedX=0)):this._speedX<0&&(this._speedX+=this.dragX*l,0<this._speedX&&(this._speedX=0)),0<this._speedY?(this._speedY-=this.dragY*l,this._speedY<0&&(this._speedY=0)):this._speedY<0&&(this._speedY+=this.dragY*l,0<this._speedY&&(this._speedY=0)),this.up&&this.up.isDown?(this._speedY+=this.accelY,this._speedY>this.maxSpeedY&&(this._speedY=this.maxSpeedY)):this.down&&this.down.isDown&&(this._speedY-=this.accelY,this._speedY<-this.maxSpeedY&&(this._speedY=-this.maxSpeedY)),this.left&&this.left.isDown?(this._speedX+=this.accelX,this._speedX>this.maxSpeedX&&(this._speedX=this.maxSpeedX)):this.right&&this.right.isDown&&(this._speedX-=this.accelX,this._speedX<-this.maxSpeedX&&(this._speedX=-this.maxSpeedX)),this._zoom=this.zoomIn&&this.zoomIn.isDown?-this.zoomSpeed:this.zoomOut&&this.zoomOut.isDown?this.zoomSpeed:0,0!==this._speedX&&(e.scrollX-=this._speedX*l|0),0!==this._speedY&&(e.scrollY-=this._speedY*l|0),0!==this._zoom&&(e.zoom+=this._zoom,e.zoom<this.minZoom?e.zoom=this.minZoom:e.zoom>this.maxZoom&&(e.zoom=this.maxZoom)))},destroy:function(){this.camera=null,this.left=null,this.right=null,this.up=null,this.down=null,this.zoomIn=null,this.zoomOut=null}});g.exports=s},function(g,b,t){g.exports={Camera:t(326),BaseCamera:t(133),CameraManager:t(799),Effects:t(333),Events:t(37)}},function(g,b){g.exports="cameradestroy"},function(g,b){g.exports="camerafadeincomplete"},function(g,b){g.exports="camerafadeinstart"},function(g,b){g.exports="camerafadeoutcomplete"},function(g,b){g.exports="camerafadeoutstart"},function(g,b){g.exports="cameraflashcomplete"},function(g,b){g.exports="cameraflashstart"},function(g,b){g.exports="followupdate"},function(g,b){g.exports="camerapancomplete"},function(g,b){g.exports="camerapanstart"},function(g,b){g.exports="postrender"},function(g,b){g.exports="prerender"},function(g,b){g.exports="camerarotatecomplete"},function(g,b){g.exports="camerarotatestart"},function(g,b){g.exports="camerashakecomplete"},function(g,b){g.exports="camerashakestart"},function(g,b){g.exports="camerazoomcomplete"},function(g,b){g.exports="camerazoomstart"},function(g,b,t){var h=t(18),n=t(0),s=t(37),l=new n({initialize:function(e){this.camera=e,this.isRunning=!1,this.isComplete=!1,this.direction=!0,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0},start:function(e,r,o,a,i,u,c,d){return void 0===e&&(e=!0),void 0===r&&(r=1e3),void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=!1),void 0===c&&(c=null),void 0===d&&(d=this.camera.scene),!u&&this.isRunning||(this.isRunning=!0,this.isComplete=!1,this.duration=r,this.direction=e,this.progress=0,this.red=o,this.green=a,this.blue=i,this.alpha=e?Number.MIN_VALUE:1,this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d,this.camera.emit(e?s.FADE_OUT_START:s.FADE_IN_START,this.camera,this,r,o,a,i)),this.camera},update:function(e,r){this.isRunning&&(this._elapsed+=r,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=this.direction?this.progress:1-this.progress:(this.alpha=this.direction?1:0,this.effectComplete()))},postRenderCanvas:function(e){if(!this.isRunning&&!this.isComplete)return!1;var r=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(e,r){if(!this.isRunning&&!this.isComplete)return!1;var o=this.camera;return e.drawFillRect(o.x,o.y,o.width,o.height,r(this.blue/255,this.green/255,this.red/255,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.isComplete=!0,this.camera.emit(this.direction?s.FADE_OUT_COMPLETE:s.FADE_IN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this.isComplete=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});g.exports=l},function(g,b,t){var h=t(18),n=t(0),s=t(37),l=new n({initialize:function(e){this.camera=e,this.isRunning=!1,this.duration=0,this.red=0,this.green=0,this.blue=0,this.alpha=0,this.progress=0,this._elapsed=0},start:function(e,r,o,a,i,u,c){return void 0===e&&(e=250),void 0===r&&(r=255),void 0===o&&(o=255),void 0===a&&(a=255),void 0===i&&(i=!1),void 0===u&&(u=null),void 0===c&&(c=this.camera.scene),!i&&this.isRunning||(this.isRunning=!0,this.duration=e,this.progress=0,this.red=r,this.green=o,this.blue=a,this.alpha=1,this._elapsed=0,this._onUpdate=u,this._onUpdateScope=c,this.camera.emit(s.FLASH_START,this.camera,this,e,r,o,a)),this.camera},update:function(e,r){this.isRunning&&(this._elapsed+=r,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?this.alpha=1-this.progress:this.effectComplete())},postRenderCanvas:function(e){if(!this.isRunning)return!1;var r=this.camera;return e.fillStyle="rgba("+this.red+","+this.green+","+this.blue+","+this.alpha+")",e.fillRect(r.x,r.y,r.width,r.height),!0},postRenderWebGL:function(e,r){if(!this.isRunning)return!1;var o=this.camera;return e.drawFillRect(o.x,o.y,o.width,o.height,r(this.blue/255,this.green/255,this.red/255,1),this.alpha),!0},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.FLASH_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});g.exports=l},function(g,b,t){var h=t(18),n=t(0),s=t(134),l=t(37),e=t(3),r=new n({initialize:function(o){this.camera=o,this.isRunning=!1,this.duration=0,this.source=new e,this.current=new e,this.destination=new e,this.progress=0,this._elapsed=0},start:function(o,a,i,u,c,d,f){void 0===i&&(i=1e3),void 0===u&&(u=s.Linear),void 0===c&&(c=!1),void 0===d&&(d=null),void 0===f&&(f=this.camera.scene);var p=this.camera;return!c&&this.isRunning||(this.isRunning=!0,this.duration=i,this.progress=0,this.source.set(p.scrollX,p.scrollY),this.destination.set(o,a),p.getScroll(o,a,this.current),"string"==typeof u&&s.hasOwnProperty(u)?this.ease=s[u]:"function"==typeof u&&(this.ease=u),this._elapsed=0,this._onUpdate=d,this._onUpdateScope=f,this.camera.emit(l.PAN_START,this.camera,this,i,o,a)),p},update:function(o,a){var i,u,c,d,f;this.isRunning&&(this._elapsed+=a,i=h(this._elapsed/this.duration,0,1),this.progress=i,u=this.camera,this._elapsed<this.duration?(c=this.ease(i),u.getScroll(this.destination.x,this.destination.y,this.current),u.setScroll(d=this.source.x+(this.current.x-this.source.x)*c,f=this.source.y+(this.current.y-this.source.y)*c),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,i,d,f)):(u.centerOn(this.destination.x,this.destination.y),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,u,i,u.scrollX,u.scrollY),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.PAN_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});g.exports=r},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1.70158),t*t*((h+1)*t-h)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1.70158),--t*t*((h+1)*t+h)+1}},function(g,b){g.exports=function(t,h){void 0===h&&(h=1.70158);var n=1.525*h;return(t*=2)<1?t*t*((1+n)*t-n)*.5:.5*((t-=2)*t*((1+n)*t+n)+2)}},function(g,b){g.exports=function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)}},function(g,b){g.exports=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},function(g,b){g.exports=function(t){var h=!1;return t<.5?(t=1-2*t,h=!0):t=2*t-1,t<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,h?.5*(1-t):.5*t+.5}},function(g,b){g.exports=function(t){return 1-Math.sqrt(1-t*t)}},function(g,b){g.exports=function(t){return Math.sqrt(1- --t*t)}},function(g,b){g.exports=function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},function(g,b){g.exports=function(t){return t*t*t}},function(g,b){g.exports=function(t){return--t*t*t+1}},function(g,b){g.exports=function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},function(g,b){g.exports=function(t,h,n){if(void 0===h&&(h=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var s=n/4;return h<1?h=1:s=n*Math.asin(1/h)/(2*Math.PI),-h*Math.pow(2,10*--t)*Math.sin((t-s)*(2*Math.PI)/n)}},function(g,b){g.exports=function(t,h,n){if(void 0===h&&(h=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var s=n/4;return h<1?h=1:s=n*Math.asin(1/h)/(2*Math.PI),h*Math.pow(2,-10*t)*Math.sin((t-s)*(2*Math.PI)/n)+1}},function(g,b){g.exports=function(t,h,n){if(void 0===h&&(h=.1),void 0===n&&(n=.1),0===t)return 0;if(1===t)return 1;var s=n/4;return h<1?h=1:s=n*Math.asin(1/h)/(2*Math.PI),(t*=2)<1?h*Math.pow(2,10*--t)*Math.sin((t-s)*(2*Math.PI)/n)*-.5:h*Math.pow(2,-10*--t)*Math.sin((t-s)*(2*Math.PI)/n)*.5+1}},function(g,b){g.exports=function(t){return Math.pow(2,10*(t-1))-.001}},function(g,b){g.exports=function(t){return 1-Math.pow(2,-10*t)}},function(g,b){g.exports=function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}},function(g,b){g.exports=function(t){return t}},function(g,b){g.exports=function(t){return t*t}},function(g,b){g.exports=function(t){return t*(2-t)}},function(g,b){g.exports=function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},function(g,b){g.exports=function(t){return t*t*t*t}},function(g,b){g.exports=function(t){return 1- --t*t*t*t}},function(g,b){g.exports=function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},function(g,b){g.exports=function(t){return t*t*t*t*t}},function(g,b){g.exports=function(t){return--t*t*t*t*t+1}},function(g,b){g.exports=function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},function(g,b){g.exports=function(t){return 0===t?0:1===t?1:1-Math.cos(t*Math.PI/2)}},function(g,b){g.exports=function(t){return 0===t?0:1===t?1:Math.sin(t*Math.PI/2)}},function(g,b){g.exports=function(t){return 0===t?0:1===t?1:.5*(1-Math.cos(Math.PI*t))}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1),t<=0?0:1<=t?1:1/h*(1+(h*t|0))}},function(g,b,t){var h=t(18),n=t(0),s=t(37),l=t(3),e=new n({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.intensity=new l,this.progress=0,this._elapsed=0,this._offsetX=0,this._offsetY=0},start:function(r,o,a,i,u){return void 0===r&&(r=100),void 0===o&&(o=.05),void 0===a&&(a=!1),void 0===i&&(i=null),void 0===u&&(u=this.camera.scene),!a&&this.isRunning||(this.isRunning=!0,this.duration=r,this.progress=0,"number"==typeof o?this.intensity.set(o):this.intensity.set(o.x,o.y),this._elapsed=0,this._offsetX=0,this._offsetY=0,this._onUpdate=i,this._onUpdateScope=u,this.camera.emit(s.SHAKE_START,this.camera,this,r,o)),this.camera},preRender:function(){this.isRunning&&this.camera.matrix.translate(this._offsetX,this._offsetY)},update:function(r,o){var a,i,u,c;this.isRunning&&(this._elapsed+=o,this.progress=h(this._elapsed/this.duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress),this._elapsed<this.duration?(a=this.intensity,i=this.camera.width,u=this.camera.height,c=this.camera.zoom,this._offsetX=(Math.random()*a.x*i*2-a.x*i)*c,this._offsetY=(Math.random()*a.y*u*2-a.y*u)*c,this.camera.roundPixels&&(this._offsetX=Math.round(this._offsetX),this._offsetY=Math.round(this._offsetY))):this.effectComplete())},effectComplete:function(){this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.SHAKE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._offsetX=0,this._offsetY=0,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.intensity=null}});g.exports=e},function(g,b,t){var h=t(18),n=t(0),s=t(37),l=t(134),e=new n({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=0,this.current=0,this.destination=0,this.progress=0,this._elapsed=0,this.clockwise=!0,this.shortestPath=!1},start:function(r,o,a,i,u,c,d){void 0===a&&(a=1e3),void 0===i&&(i=l.Linear),void 0===u&&(u=!1),void 0===c&&(c=null),void 0===d&&(d=this.camera.scene),void 0===o&&(o=!1),this.shortestPath=o;var f=r;r<0?(f=-1*r,this.clockwise=!1):this.clockwise=!0;var p=360*Math.PI/180;f-=Math.floor(f/p)*p;var v,m,T=this.camera;return!u&&this.isRunning||(this.isRunning=!0,this.duration=a,this.progress=0,this.source=T.rotation,this.destination=f,"string"==typeof i&&l.hasOwnProperty(i)?this.ease=l[i]:"function"==typeof i&&(this.ease=i),this._elapsed=0,this._onUpdate=c,this._onUpdateScope=d,this.shortestPath&&((v=this.destination>this.source?Math.abs(this.destination-this.source):Math.abs(this.destination+p)-this.source)<(m=this.source>this.destination?Math.abs(this.source-this.destination):Math.abs(this.source+p)-this.destination)?this.clockwise=!0:m<v&&(this.clockwise=!1)),this.camera.emit(s.ROTATE_START,this.camera,this,a,f)),T},update:function(r,o){var a,i,u,c,d,f,p,v;this.isRunning&&(this._elapsed+=o,a=h(this._elapsed/this.duration,0,1),this.progress=a,i=this.camera,this._elapsed<this.duration?(u=this.ease(a),this.current=i.rotation,d=360*Math.PI/180,f=this.destination,p=this.current,!1===this.clockwise&&(f=this.current,p=this.destination),c=p<=f?Math.abs(f-p):Math.abs(f+d)-p,i.rotation=v=this.clockwise?i.rotation+c*u:i.rotation-c*u,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,a,v)):(i.rotation=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,i,a,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(s.ROTATE_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null,this.source=null,this.destination=null}});g.exports=e},function(g,b,t){var h=t(18),n=t(0),s=t(134),l=t(37),e=new n({initialize:function(r){this.camera=r,this.isRunning=!1,this.duration=0,this.source=1,this.destination=1,this.progress=0,this._elapsed=0},start:function(r,o,a,i,u,c){void 0===o&&(o=1e3),void 0===a&&(a=s.Linear),void 0===i&&(i=!1),void 0===u&&(u=null),void 0===c&&(c=this.camera.scene);var d=this.camera;return!i&&this.isRunning||(this.isRunning=!0,this.duration=o,this.progress=0,this.source=d.zoom,this.destination=r,"string"==typeof a&&s.hasOwnProperty(a)?this.ease=s[a]:"function"==typeof a&&(this.ease=a),this._elapsed=0,this._onUpdate=u,this._onUpdateScope=c,this.camera.emit(l.ZOOM_START,this.camera,this,o,r)),d},update:function(r,o){this.isRunning&&(this._elapsed+=o,this.progress=h(this._elapsed/this.duration,0,1),this._elapsed<this.duration?(this.camera.zoom=this.source+(this.destination-this.source)*this.ease(this.progress),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.camera.zoom)):(this.camera.zoom=this.destination,this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.camera,this.progress,this.destination),this.effectComplete()))},effectComplete:function(){this._onUpdate=null,this._onUpdateScope=null,this.isRunning=!1,this.camera.emit(l.ZOOM_COMPLETE,this.camera,this)},reset:function(){this.isRunning=!1,this._onUpdate=null,this._onUpdateScope=null},destroy:function(){this.reset(),this.camera=null}});g.exports=e},function(g,b,t){var h=t(326),n=t(0),s=t(2),l=t(24),e=t(57),r=t(104),o=t(20),a=new n({initialize:function(i){this.scene=i,this.systems=i.sys,this.roundPixels=i.sys.game.config.roundPixels,this.cameras=[],i.sys.events.once(o.BOOT,this.boot,this),i.sys.events.on(o.START,this.start,this)},boot:function(){var i=this.systems;i.settings.cameras?this.fromJSON(i.settings.cameras):this.add(),this.main=this.cameras[0],this.default=new h(0,0,i.scale.width,i.scale.height).setScene(this.scene),i.game.scale.on(r.RESIZE,this.onResize,this),this.systems.events.once(o.DESTROY,this.destroy,this)},start:function(){var i;this.main||((i=this.systems).settings.cameras?this.fromJSON(i.settings.cameras):this.add(),this.main=this.cameras[0]);var u=this.systems.events;u.on(o.UPDATE,this.update,this),u.once(o.SHUTDOWN,this.shutdown,this)},add:function(i,u,c,d,f,p){void 0===i&&(i=0),void 0===u&&(u=0),void 0===c&&(c=this.scene.sys.scale.width),void 0===d&&(d=this.scene.sys.scale.height),void 0===f&&(f=!1),void 0===p&&(p="");var v=new h(i,u,c,d);return v.setName(p),v.setScene(this.scene),v.setRoundPixels(this.roundPixels),v.id=this.getNextID(),this.cameras.push(v),f&&(this.main=v),v},addExisting:function(i,u){return void 0===u&&(u=!1),-1===this.cameras.indexOf(i)?(i.id=this.getNextID(),i.setRoundPixels(this.roundPixels),this.cameras.push(i),u&&(this.main=i),i):null},getNextID:function(){for(var i=this.cameras,u=1,c=0;c<32;c++){for(var d=!1,f=0;f<i.length;f++){var p=i[f];p&&p.id===u&&(d=!0)}if(!d)return u;u<<=1}return 0},getTotal:function(i){void 0===i&&(i=!1);for(var u=0,c=this.cameras,d=0;d<c.length;d++)(!i||i&&c[d].visible)&&u++;return u},fromJSON:function(i){Array.isArray(i)||(i=[i]);for(var u=this.scene.sys.scale.width,c=this.scene.sys.scale.height,d=0;d<i.length;d++){var f=i[d],p=s(f,"x",0),v=s(f,"y",0),m=s(f,"width",u),T=s(f,"height",c),y=this.add(p,v,m,T);y.name=s(f,"name",""),y.zoom=s(f,"zoom",1),y.rotation=s(f,"rotation",0),y.scrollX=s(f,"scrollX",0),y.scrollY=s(f,"scrollY",0),y.roundPixels=s(f,"roundPixels",!1),y.visible=s(f,"visible",!0);var x=s(f,"backgroundColor",!1);x&&y.setBackgroundColor(x);var w,E,S,A,_=s(f,"bounds",null);_&&(w=s(_,"x",0),E=s(_,"y",0),S=s(_,"width",u),A=s(_,"height",c),y.setBounds(w,E,S,A))}return this},getCamera:function(i){for(var u=this.cameras,c=0;c<u.length;c++)if(u[c].name===i)return u[c];return null},getCamerasBelowPointer:function(i){for(var u=this.cameras,c=i.x,d=i.y,f=[],p=0;p<u.length;p++){var v=u[p];v.visible&&v.inputEnabled&&e(v,c,d)&&f.unshift(v)}return f},remove:function(i,u){void 0===u&&(u=!0),Array.isArray(i)||(i=[i]);for(var c=0,d=this.cameras,f=0;f<i.length;f++){var p=d.indexOf(i[f]);-1!==p&&(u?d[p].destroy():d[p].renderList=[],d.splice(p,1),c++)}return!this.main&&d[0]&&(this.main=d[0]),c},render:function(i,u){for(var c=this.scene,d=this.cameras,f=0;f<this.cameras.length;f++){var p,v=d[f];v.visible&&0<v.alpha&&(v.preRender(),p=this.getVisibleChildren(u.getChildren(),v),i.render(c,p,v))}},getVisibleChildren:function(i,u){for(var c=[],d=0;d<i.length;d++){var f=i[d];f.willRender(u)&&c.push(f)}return c},resetAll:function(){for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();return this.cameras=[],this.main=this.add(),this.main},update:function(i,u){for(var c=0;c<this.cameras.length;c++)this.cameras[c].update(i,u)},onResize:function(i,u,c,d,f){for(var p=0;p<this.cameras.length;p++){var v=this.cameras[p];0===v._x&&0===v._y&&v._width===d&&v._height===f&&v.setSize(u.width,u.height)}},resize:function(i,u){for(var c=0;c<this.cameras.length;c++)this.cameras[c].setSize(i,u)},shutdown:function(){this.main=void 0;for(var i=0;i<this.cameras.length;i++)this.cameras[i].destroy();this.cameras=[];var u=this.systems.events;u.off(o.UPDATE,this.update,this),u.off(o.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.default.destroy(),this.scene.sys.events.off(o.START,this.start,this),this.scene=null,this.systems=null}});l.register("CameraManager",a,"cameras"),g.exports=a},function(g,b){g.exports="enterfullscreen"},function(g,b){g.exports="fullscreenfailed"},function(g,b){g.exports="fullscreenunsupported"},function(g,b){g.exports="leavefullscreen"},function(g,b){g.exports="orientationchange"},function(g,b){g.exports="resize"},function(g,b,t){g.exports={Config:t(346),CreateRenderer:t(366),DebugHeader:t(384),Events:t(22),TimeStep:t(385),VisibilityHandler:t(387)}},function(g,b){var t,h,n=g.exports={};function s(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function e(p){if(t===setTimeout)return setTimeout(p,0);if((t===s||!t)&&setTimeout)return t=setTimeout,setTimeout(p,0);try{return t(p,0)}catch{try{return t.call(null,p,0)}catch{return t.call(this,p,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:s}catch{t=s}try{h="function"==typeof clearTimeout?clearTimeout:l}catch{h=l}}();var r,o=[],a=!1,i=-1;function u(){a&&r&&(a=!1,r.length?o=r.concat(o):i=-1,o.length&&c())}function c(){if(!a){var p=e(u);a=!0;for(var v=o.length;v;){for(r=o,o=[];++i<v;)r&&r[i].run();i=-1,v=o.length}r=null,a=!1,function(m){if(h===clearTimeout)return clearTimeout(m);if((h===l||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(m);try{h(m)}catch{try{return h.call(null,m)}catch{return h.call(this,m)}}}(p)}}function d(p,v){this.fun=p,this.array=v}function f(){}n.nextTick=function(p){var v=new Array(arguments.length-1);if(1<arguments.length)for(var m=1;m<arguments.length;m++)v[m-1]=arguments[m];o.push(new d(p,v)),1!==o.length||a||e(c)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=f,n.addListener=f,n.once=f,n.off=f,n.removeListener=f,n.removeAllListeners=f,n.emit=f,n.prependListener=f,n.prependOnceListener=f,n.listeners=function(p){return[]},n.binding=function(p){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(p){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(g,b,t){var h=t(136),n={gamepads:!1,mspointer:!1,touch:!1,wheelEvent:null};g.exports=("function"==typeof importScripts||(("ontouchstart"in document.documentElement||navigator.maxTouchPoints&&1<=navigator.maxTouchPoints)&&(n.touch=!0),(navigator.msPointerEnabled||navigator.pointerEnabled)&&(n.mspointer=!0),navigator.getGamepads&&(n.gamepads=!0),"onwheel"in window||h.ie&&"WheelEvent"in window?n.wheelEvent="wheel":"onmousewheel"in window?n.wheelEvent="mousewheel":h.firefox&&"MouseScrollEvent"in window&&(n.wheelEvent="DOMMouseScroll")),n)},function(g,b,t){var h=t(136),n={audioData:!1,dolby:!1,m4a:!1,mp3:!1,ogg:!1,opus:!1,wav:!1,webAudio:!1,webm:!1};g.exports=function(){if("function"==typeof importScripts)return n;n.audioData=!!window.Audio,n.webAudio=!(!window.AudioContext&&!window.webkitAudioContext);var s,l,e=document.createElement("audio"),r=!!e.canPlayType;try{r&&(e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(n.ogg=!0),(e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")||e.canPlayType("audio/opus;").replace(/^no$/,""))&&(n.opus=!0),e.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(n.mp3=!0),e.canPlayType("audio/wav").replace(/^no$/,"")&&(n.wav=!0),(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;").replace(/^no$/,""))&&(n.m4a=!0),e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(n.webm=!0),""!==e.canPlayType('audio/mp4;codecs="ec-3"')&&(h.edge?n.dolby=!0:h.safari&&9<=h.safariVersion&&/Mac OS X (\d+)_(\d+)/.test(navigator.userAgent)&&(s=parseInt(RegExp.$1,10),l=parseInt(RegExp.$2,10),(10===s&&11<=l||10<s)&&(n.dolby=!0))))}catch{}return n}()},function(g,b){var t={h264:!1,hls:!1,mp4:!1,ogg:!1,vp9:!1,webm:!1};g.exports=function(){if("function"==typeof importScripts)return t;var h=document.createElement("video"),n=!!h.canPlayType;try{n&&(h.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,"")&&(t.ogg=!0),h.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.h264=!0,t.mp4=!0),h.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")&&(t.webm=!0),h.canPlayType('video/webm; codecs="vp9"').replace(/^no$/,"")&&(t.vp9=!0),h.canPlayType('application/x-mpegURL; codecs="avc1.42E01E"').replace(/^no$/,"")&&(t.hls=!0))}catch{}return t}()},function(g,b){var t={available:!1,cancel:"",keyboard:!1,request:""};g.exports=function(){if("function"==typeof importScripts)return t;for(var h="Fullscreen",n="FullScreen",s=["request"+h,"request"+n,"webkitRequest"+h,"webkitRequest"+n,"msRequest"+h,"msRequest"+n,"mozRequest"+n,"mozRequest"+h],l=0;l<s.length;l++)if(document.documentElement[s[l]]){t.available=!0,t.request=s[l];break}var e=["cancel"+n,"exit"+h,"webkitCancel"+n,"webkitExit"+h,"msCancel"+n,"msExit"+h,"mozCancel"+n,"mozExit"+h];if(t.available)for(l=0;l<e.length;l++)if(document[e[l]]){t.cancel=e[l];break}return window.Element&&Element.ALLOW_KEYBOARD_INPUT&&!/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)&&(t.keyboard=!0),Object.defineProperty(t,"active",{get:function(){return!!(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement)}}),t}()},function(g,b,t){g.exports={Between:t(349),BetweenPoints:t(350),BetweenPointsY:t(813),BetweenY:t(814),CounterClockwise:t(815),Normalize:t(351),Random:t(816),RandomDegrees:t(817),Reverse:t(818),RotateTo:t(819),ShortestBetween:t(820),Wrap:t(269),WrapDegrees:t(270)}},function(g,b){g.exports=function(t,h){return Math.atan2(h.x-t.x,h.y-t.y)}},function(g,b){g.exports=function(t,h,n,s){return Math.atan2(n-t,s-h)}},function(g,b,t){var h=t(14);g.exports=function(n){return n>Math.PI&&(n-=h.PI2),Math.abs(((n+h.TAU)%h.PI2-h.PI2)%h.PI2)}},function(g,b,t){var h=t(137);g.exports=function(){return h(-Math.PI,Math.PI)}},function(g,b,t){var h=t(137);g.exports=function(){return h(-180,180)}},function(g,b,t){var h=t(351);g.exports=function(n){return h(n+Math.PI)}},function(g,b,t){var h=t(14);g.exports=function(n,s,l){return void 0===l&&(l=.05),n===s||(Math.abs(s-n)<=l||Math.abs(s-n)>=h.PI2-l?n=s:(Math.abs(s-n)>Math.PI&&(s<n?s+=h.PI2:s-=h.PI2),n<s?n+=l:s<n&&(n-=l))),n}},function(g,b){g.exports=function(t,h){var n=h-t;return 0==n?0:n-360*Math.floor((n+180)/360)}},function(g,b,t){g.exports={Between:t(50),BetweenPoints:t(352),BetweenPointsSquared:t(822),Chebyshev:t(823),Power:t(824),Snake:t(825),Squared:t(353)}},function(g,b){g.exports=function(t,h){var n=t.x-h.x,s=t.y-h.y;return n*n+s*s}},function(g,b){g.exports=function(t,h,n,s){return Math.max(Math.abs(t-n),Math.abs(h-s))}},function(g,b){g.exports=function(t,h,n,s,l){return void 0===l&&(l=2),Math.sqrt(Math.pow(n-t,l)+Math.pow(s-h,l))}},function(g,b){g.exports=function(t,h,n,s){return Math.abs(t-n)+Math.abs(h-s)}},function(g,b,t){g.exports={Back:t(334),Bounce:t(335),Circular:t(336),Cubic:t(337),Elastic:t(338),Expo:t(339),Linear:t(340),Quadratic:t(341),Quartic:t(342),Quintic:t(343),Sine:t(344),Stepped:t(345)}},function(g,b,t){g.exports={Ceil:t(828),Equal:t(124),Floor:t(829),GreaterThan:t(354),LessThan:t(355)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1e-4),Math.ceil(t-h)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1e-4),Math.floor(t+h)}},function(g,b,t){g.exports={Bezier:t(831),CatmullRom:t(832),CubicBezier:t(358),Linear:t(833),QuadraticBezier:t(359),SmoothStep:t(360),SmootherStep:t(834)}},function(g,b,t){var h=t(356);g.exports=function(n,s){for(var l=0,e=n.length-1,r=0;r<=e;r++)l+=Math.pow(1-s,e-r)*Math.pow(s,r)*n[r]*h(e,r);return l}},function(g,b,t){var h=t(194);g.exports=function(n,s){var l=n.length-1,e=l*s,r=Math.floor(e);return n[0]===n[l]?(s<0&&(r=Math.floor(e=l*(1+s))),h(e-r,n[(r-1+l)%l],n[r],n[(r+1)%l],n[(r+2)%l])):s<0?n[0]-(h(-e,n[0],n[0],n[1],n[1])-n[0]):1<s?n[l]-(h(e-l,n[l],n[l],n[l-1],n[l-1])-n[l]):h(e-r,n[r?r-1:0],n[r],n[l<r+1?l:r+1],n[l<r+2?l:r+2])}},function(g,b,t){var h=t(135);g.exports=function(n,s){var l=n.length-1,e=l*s,r=Math.floor(e);return s<0?h(n[0],n[1],e):1<s?h(n[l],n[l-1],l-e):h(n[r],n[l<r+1?l:r+1],e-r)}},function(g,b,t){var h=t(183);g.exports=function(n,s,l){return s+(l-s)*h(n,0,1)}},function(g,b,t){g.exports={GetNext:t(361),IsSize:t(138),IsValue:t(836)}},function(g,b){g.exports=function(t){return 0<t&&0==(t&t-1)}},function(g,b,t){g.exports={Ceil:t(139),Floor:t(76),To:t(838)}},function(g,b){g.exports=function(t,h,n,s){return void 0===n&&(n=0),0===h?t:(t-=n,t=h*Math.round(t/h),s?(n+t)/h:n+t)}},function(g,b,t){var h=new(t(0))({initialize:function(n){void 0===n&&(n=[(Date.now()*Math.random()).toString()]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.n=0,this.signs=[-1,1],n&&this.init(n)},rnd:function(){var n=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|n,this.s0=this.s1,this.s1=this.s2,this.s2=n-this.c,this.s2},hash:function(n){var s,l=this.n;n=n.toString();for(var e=0;e<n.length;e++)s=.02519603282416938*(l+=n.charCodeAt(e)),s-=l=s>>>0,l=(s*=l)>>>0,l+=4294967296*(s-=l);return 2.3283064365386963e-10*((this.n=l)>>>0)},init:function(n){"string"==typeof n?this.state(n):this.sow(n)},sow:function(n){if(this.n=4022871197,this.s0=this.hash(" "),this.s1=this.hash(" "),this.s2=this.hash(" "),this.c=1,n)for(var s=0;s<n.length&&null!=n[s];s++){var l=n[s];this.s0-=this.hash(l),this.s0+=~~(this.s0<0),this.s1-=this.hash(l),this.s1+=~~(this.s1<0),this.s2-=this.hash(l),this.s2+=~~(this.s2<0)}},integer:function(){return 4294967296*this.rnd()},frac:function(){return this.rnd()+11102230246251565e-32*(2097152*this.rnd()|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(n,s){return Math.floor(this.realInRange(0,s-n+1)+n)},between:function(n,s){return Math.floor(this.realInRange(0,s-n+1)+n)},realInRange:function(n,s){return this.frac()*(s-n)+n},normal:function(){return 1-2*this.frac()},uuid:function(){var n="",s="";for(s=n="";n++<36;s+=~n%5|3*n&4?(15^n?8^this.frac()*(20^n?16:4):4).toString(16):"-");return s},pick:function(n){return n[this.integerInRange(0,n.length-1)]},sign:function(){return this.pick(this.signs)},weightedPick:function(n){return n[~~(Math.pow(this.frac(),2)*(n.length-1)+.5)]},timestamp:function(n,s){return this.realInRange(n||9466848e5,s||1577862e6)},angle:function(){return this.integerInRange(-180,180)},rotation:function(){return this.realInRange(-3.1415926,3.1415926)},state:function(n){return"string"==typeof n&&n.match(/^!rnd/)&&(n=n.split(","),this.c=parseFloat(n[1]),this.s0=parseFloat(n[2]),this.s1=parseFloat(n[3]),this.s2=parseFloat(n[4])),["!rnd",this.c,this.s0,this.s1,this.s2].join(",")},shuffle:function(n){for(var s=n.length-1;0<s;s--){var l=Math.floor(this.frac()*(s+1)),e=n[l];n[l]=n[s],n[s]=e}return n}});g.exports=h},function(g,b){g.exports=function(t){for(var h=0,n=0;n<t.length;n++)h+=+t[n];return h/t.length}},function(g,b){g.exports=function(t,h,n){void 0===h&&(h=0),void 0===n&&(n=10);var s=Math.pow(n,-h);return Math.ceil(t*s)/s}},function(g,b){g.exports=function(t,h){return Math.abs(t-h)}},function(g,b,t){var h=t(18),n=t(0),s=t(69),l=t(1),e=new s,r=new n({initialize:function o(a,i,u,c){void 0===a&&(a=0),void 0===i&&(i=0),void 0===u&&(u=0),void 0===c&&(c=o.DefaultOrder),this._x=a,this._y=i,this._z=u,this._order=c,this.onChangeCallback=l},x:{get:function(){return this._x},set:function(o){this._x=o,this.onChangeCallback(this)}},y:{get:function(){return this._y},set:function(o){this._y=o,this.onChangeCallback(this)}},z:{get:function(){return this._z},set:function(o){this._z=o,this.onChangeCallback(this)}},order:{get:function(){return this._order},set:function(o){this._order=o,this.onChangeCallback(this)}},set:function(o,a,i,u){return void 0===u&&(u=this._order),this._x=o,this._y=a,this._z=i,this._order=u,this.onChangeCallback(this),this},copy:function(o){return this.set(o.x,o.y,o.z,o.order)},setFromQuaternion:function(o,a,i){return void 0===a&&(a=this._order),void 0===i&&(i=!1),e.fromQuat(o),this.setFromRotationMatrix(e,a,i)},setFromRotationMatrix:function(o,a,i){void 0===a&&(a=this._order),void 0===i&&(i=!1);var u=o.val,c=u[0],d=u[4],f=u[8],p=u[1],v=u[5],m=u[9],T=u[2],y=u[6],x=u[10],w=0,E=0,S=0,A=.99999;switch(a){case"XYZ":E=Math.asin(h(f,-1,1)),Math.abs(f)<A?(w=Math.atan2(-m,x),S=Math.atan2(-d,c)):w=Math.atan2(y,v);break;case"YXZ":w=Math.asin(-h(m,-1,1)),Math.abs(m)<A?(E=Math.atan2(f,x),S=Math.atan2(p,v)):E=Math.atan2(-T,c);break;case"ZXY":w=Math.asin(h(y,-1,1)),S=Math.abs(y)<A?(E=Math.atan2(-T,x),Math.atan2(-d,v)):Math.atan2(p,c);break;case"ZYX":E=Math.asin(-h(T,-1,1)),S=Math.abs(T)<A?(w=Math.atan2(y,x),Math.atan2(p,c)):Math.atan2(-d,v);break;case"YZX":S=Math.asin(h(p,-1,1)),E=Math.abs(p)<A?(w=Math.atan2(-m,v),Math.atan2(-T,c)):Math.atan2(f,x);break;case"XZY":S=Math.asin(-h(d,-1,1)),Math.abs(d)<A?(w=Math.atan2(y,v),E=Math.atan2(f,c)):w=Math.atan2(-m,x)}return this._x=w,this._y=E,this._z=S,this._order=a,i&&this.onChangeCallback(this),this}});r.RotationOrders=["XYZ","YXZ","ZXY","ZYX","YZX","XZY"],r.DefaultOrder="XYZ",g.exports=r},function(g,b){g.exports=function(t,h,n){void 0===h&&(h=0),void 0===n&&(n=10);var s=Math.pow(n,-h);return Math.floor(t*s)/s}},function(g,b){g.exports=function(t,h){return t/h/1e3}},function(g,b){g.exports=function(t){return t==parseFloat(t)?!(t%2):void 0}},function(g,b){g.exports=function(t){return t===parseFloat(t)?!(t%2):void 0}},function(g,b){g.exports=function(t,h,n){return Math.min(t+h,n)}},function(g,b){g.exports=function(t){var h=t.length;if(0===h)return 0;t.sort(function(s,l){return s-l});var n=Math.floor(h/2);return h%2==0?(t[n]+t[n-1])/2:t[n]}},function(g,b){g.exports=function(t,h,n){return Math.max(t-h,n)}},function(g,b){g.exports=function(t,h,n,s){void 0===n&&(n=h+1);var l=(t-h)/(n-h);return 1<l?void 0!==s?(l=(s-t)/(s-n))<0&&(l=0):l=1:l<0&&(l=0),l}},function(g,b){g.exports=function(t,h){void 0===h&&(h=1);var n=2*Math.random()*Math.PI;return t.x=Math.cos(n)*h,t.y=Math.sin(n)*h,t}},function(g,b){g.exports=function(t,h){void 0===h&&(h=1);var n=2*Math.random()*Math.PI,s=2*Math.random()-1,l=Math.sqrt(1-s*s)*h;return t.x=Math.cos(n)*l,t.y=Math.sin(n)*l,t.z=s*h,t}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=1),t.x=(2*Math.random()-1)*h,t.y=(2*Math.random()-1)*h,t.z=(2*Math.random()-1)*h,t.w=(2*Math.random()-1)*h,t}},function(g,b){g.exports=function(t,h,n,s,l){return t.x=h+l*Math.cos(s),t.y=n+l*Math.sin(s),t}},function(g,b){g.exports=function(t,h,n){void 0===h&&(h=0),void 0===n&&(n=10);var s=Math.pow(n,-h);return Math.round(t*s)/s}},function(g,b){g.exports=function(t,h,n,s){void 0===h&&(h=1),void 0===n&&(n=1),void 0===s&&(s=1),s*=Math.PI/t;for(var l=[],e=[],r=0;r<t;r++)h+=(n-=h*s)*s,l[r]=n,e[r]=h;return{sin:e,cos:l,length:t}}},function(g,b,t){var h=t(3);g.exports=function(n,s,l,e){void 0===e&&(e=new h);var r=0,o=0;return 0<n&&n<=s*l&&(r=s-1<n?n-(o=Math.floor(n/s))*s:n),e.set(r,o)}},function(g,b){g.exports=function(t,h,n){return Math.abs(t-h)<=n}},function(g,b,t){var h=t(39),n=t(69),s=t(365),l=new n,e=new s,r=new h;g.exports=function(o,a,i){return e.setAxisAngle(a,i),l.fromRotationTranslation(e,r.set(0,0,0)),o.transformMat4(l)}},function(g,b){g.exports="addtexture"},function(g,b){g.exports="onerror"},function(g,b){g.exports="onload"},function(g,b){g.exports="ready"},function(g,b){g.exports="removetexture"},function(g,b){g.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uMaskSampler;","uniform bool uInvertMaskAlpha;","","void main ()","{","    vec2 uv = gl_FragCoord.xy / uResolution;","    vec4 mainColor = texture2D(uMainSampler, uv);","    vec4 maskColor = texture2D(uMaskSampler, uv);","    float alpha = mainColor.a;","","    if (!uInvertMaskAlpha)","    {","        alpha *= (maskColor.a);","    }","    else","    {","        alpha *= (1.0 - maskColor.a);","    }","","    gl_FragColor = vec4(mainColor.rgb * alpha, alpha);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_BITMAP_MASK_VS","","precision mediump float;","","attribute vec2 inPosition;","","void main ()","{","    gl_Position = vec4(inPosition, 0.0, 1.0);","}",""].join("\n")},function(g,b){g.exports="pipelineafterflush"},function(g,b){g.exports="pipelinebeforeflush"},function(g,b){g.exports="pipelinebind"},function(g,b){g.exports="pipelineboot"},function(g,b){g.exports="pipelinedestroy"},function(g,b){g.exports="pipelinerebind"},function(g,b){g.exports="pipelineresize"},function(g,b){g.exports=["#define SHADER_NAME PHASER_GRAPHICS_FS","","precision mediump float;","","varying vec4 outColor;","","void main ()","{","    gl_FragColor = vec4(outColor.bgr * outColor.a, outColor.a);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_GRAPHICS_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec4 inColor;","","varying vec4 outColor;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outColor = inColor;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_LIGHT_FS","","precision mediump float;","","struct Light","{","    vec2 position;","    vec3 color;","    float intensity;","    float radius;","};","","const int kMaxLights = %LIGHT_COUNT%;","","uniform vec4 uCamera; /* x, y, rotation, zoom */","uniform vec2 uResolution;","uniform sampler2D uMainSampler;","uniform sampler2D uNormSampler;","uniform vec3 uAmbientLightColor;","uniform Light uLights[kMaxLights];","uniform mat3 uInverseRotationMatrix;","","varying vec2 outTexCoord;","varying vec4 outTint;","","void main()","{","    vec3 finalColor = vec3(0.0, 0.0, 0.0);","    vec4 color = texture2D(uMainSampler, outTexCoord) * vec4(outTint.bgr * outTint.a, outTint.a);","    vec3 normalMap = texture2D(uNormSampler, outTexCoord).rgb;","    vec3 normal = normalize(uInverseRotationMatrix * vec3(normalMap * 2.0 - 1.0));","    vec2 res = vec2(min(uResolution.x, uResolution.y)) * uCamera.w;","","    for (int index = 0; index < kMaxLights; ++index)","    {","        Light light = uLights[index];","        vec3 lightDir = vec3((light.position.xy / res) - (gl_FragCoord.xy / res), 0.1);","        vec3 lightNormal = normalize(lightDir);","        float distToSurf = length(lightDir) * uCamera.w;","        float diffuseFactor = max(dot(normal, lightNormal), 0.0);","        float radius = (light.radius / res.x * uCamera.w) * uCamera.w;","        float attenuation = clamp(1.0 - distToSurf * distToSurf / (radius * radius), 0.0, 1.0);","        vec3 diffuse = light.color * diffuseFactor;","        finalColor += (attenuation * diffuse) * light.intensity;","    }","","    vec4 colorOutput = vec4(uAmbientLightColor + finalColor, 1.0);","","    gl_FragColor = color * vec4(colorOutput.rgb * colorOutput.a, colorOutput.a);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_MULTI_FS","","precision mediump float;","","uniform sampler2D uMainSampler[%count%];","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture;","","    %forloop%","","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_MULTI_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTexId;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTexId = inTexId;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_POINTLIGHT_FS","","precision mediump float;","","uniform vec2 uResolution;","uniform float uCameraZoom;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    vec2 center = (lightPosition.xy + 1.0) * (uResolution.xy * 0.5);","","    float distToSurf = length(center - gl_FragCoord.xy);","","    float radius = 1.0 - distToSurf / (lightRadius * uCameraZoom);","","    float intensity = smoothstep(0.0, 1.0, radius * lightAttenuation);","","    vec4 color = vec4(intensity, intensity, intensity, 0.0) * lightColor;","","    gl_FragColor = vec4(color.rgb * lightColor.a, color.a);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_POINTLIGHT_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inLightPosition;","attribute vec4 inLightColor;","attribute float inLightRadius;","attribute float inLightAttenuation;","","varying vec4 lightPosition;","varying vec4 lightColor;","varying float lightRadius;","varying float lightAttenuation;","","void main ()","{","    lightColor = inLightColor;","    lightRadius = inLightRadius;","    lightAttenuation = inLightAttenuation;","    lightPosition = uProjectionMatrix * vec4(inLightPosition, 1.0, 1.0);","","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_SINGLE_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    vec4 texture = texture2D(uMainSampler, outTexCoord);","    vec4 texel = vec4(outTint.bgr * outTint.a, outTint.a);","","    //  Multiply texture tint","    vec4 color = texture * texel;","","    if (outTintEffect == 1.0)","    {","        //  Solid color + texture alpha","        color.rgb = mix(texture.rgb, outTint.bgr * outTint.a, texture.a);","    }","    else if (outTintEffect == 2.0)","    {","        //  Solid color, no texture","        color = texel;","    }","","    gl_FragColor = color;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_SINGLE_VS","","precision mediump float;","","uniform mat4 uProjectionMatrix;","","attribute vec2 inPosition;","attribute vec2 inTexCoord;","attribute float inTexId;","attribute float inTintEffect;","attribute vec4 inTint;","","varying vec2 outTexCoord;","varying float outTintEffect;","varying vec4 outTint;","","void main ()","{","    gl_Position = uProjectionMatrix * vec4(inPosition, 1.0, 1.0);","","    outTexCoord = inTexCoord;","    outTint = inTint;","    outTintEffect = inTintEffect;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_ADD_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = frame1 + frame2 * uStrength;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_COLORMATRIX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uColorMatrix[20];","uniform float uAlpha;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 c = texture2D(uMainSampler, outTexCoord);","","    if (uAlpha == 0.0)","    {","        gl_FragColor = c;","","        return;","    }","","    if (c.a > 0.0)","    {","        c.rgb /= c.a;","    }","","    vec4 result;","","    result.r = (uColorMatrix[0] * c.r) + (uColorMatrix[1] * c.g) + (uColorMatrix[2] * c.b) + (uColorMatrix[3] * c.a) + uColorMatrix[4];","    result.g = (uColorMatrix[5] * c.r) + (uColorMatrix[6] * c.g) + (uColorMatrix[7] * c.b) + (uColorMatrix[8] * c.a) + uColorMatrix[9];","    result.b = (uColorMatrix[10] * c.r) + (uColorMatrix[11] * c.g) + (uColorMatrix[12] * c.b) + (uColorMatrix[13] * c.a) + uColorMatrix[14];","    result.a = (uColorMatrix[15] * c.r) + (uColorMatrix[16] * c.g) + (uColorMatrix[17] * c.b) + (uColorMatrix[18] * c.a) + uColorMatrix[19];","","    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);","","    rgb *= result.a;","","    gl_FragColor = vec4(rgb, result.a);","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_COPY_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","uniform float uBrightness;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord) * uBrightness;","}",""].join("\n")},function(g,b){g.exports=["#define SHADER_NAME PHASER_LINEAR_BLEND_FS","","precision mediump float;","","uniform sampler2D uMainSampler1;","uniform sampler2D uMainSampler2;","uniform float uStrength;","","varying vec2 outTexCoord;","","void main ()","{","    vec4 frame1 = texture2D(uMainSampler1, outTexCoord);","    vec4 frame2 = texture2D(uMainSampler2, outTexCoord);","","    gl_FragColor = mix(frame1, frame2 * uStrength, 0.5);","}",""].join("\n")},function(g,b,t){g.exports={GenerateTexture:t(388),Palettes:t(889)}},function(g,b,t){g.exports={ARNE16:t(389),C64:t(890),CGA:t(891),JMP:t(892),MSX:t(893)}},function(g,b){g.exports={0:"#000",1:"#fff",2:"#8b4131",3:"#7bbdc5",4:"#8b41ac",5:"#6aac41",6:"#3931a4",7:"#d5de73",8:"#945a20",9:"#5a4100",A:"#bd736a",B:"#525252",C:"#838383",D:"#acee8b",E:"#7b73de",F:"#acacac"}},function(g,b){g.exports={0:"#000",1:"#2234d1",2:"#0c7e45",3:"#44aacc",4:"#8a3622",5:"#5c2e78",6:"#aa5c3d",7:"#b5b5b5",8:"#5e606e",9:"#4c81fb",A:"#6cd947",B:"#7be2f9",C:"#eb8a60",D:"#e23d69",E:"#ffd93f",F:"#fff"}},function(g,b){g.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#f5f4eb"}},function(g,b){g.exports={0:"#000",1:"#191028",2:"#46af45",3:"#a1d685",4:"#453e78",5:"#7664fe",6:"#833129",7:"#9ec2e8",8:"#dc534b",9:"#e18d79",A:"#d6b97b",B:"#e9d8a1",C:"#216c4b",D:"#d365c8",E:"#afaab9",F:"#fff"}},function(g,b,t){g.exports={Path:t(895),MoveTo:t(393),CubicBezier:t(390),Curve:t(94),Ellipse:t(391),Line:t(392),QuadraticBezier:t(394),Spline:t(395)}},function(g,b,t){var h=t(0),n=t(390),s=t(391),l=t(5),e=t(392),r=t(393),o=t(394),a=t(10),i=t(395),u=t(3),c=t(14),d=new h({initialize:function(f,p){void 0===f&&(f=0),void 0===p&&(p=0),this.name="",this.curves=[],this.cacheLengths=[],this.autoClose=!1,this.startPoint=new u,this._tmpVec2A=new u,this._tmpVec2B=new u,"object"==typeof f?this.fromJSON(f):this.startPoint.set(f,p)},add:function(f){return this.curves.push(f),this},circleTo:function(f,p,v){return void 0===p&&(p=!1),this.ellipseTo(f,f,0,360,p,v)},closePath:function(){var f=this.curves[0].getPoint(0),p=this.curves[this.curves.length-1].getPoint(1);return f.equals(p)||this.curves.push(new e(p,f)),this},cubicBezierTo:function(f,p,v,m,T,y){var x,w,E=this.getEndPoint(),S=f instanceof u?(x=f,w=p,v):(x=new u(v,m),w=new u(T,y),new u(f,p));return this.add(new n(E,x,w,S))},quadraticBezierTo:function(f,p,v,m){var T,y=this.getEndPoint(),x=f instanceof u?(T=f,p):(T=new u(v,m),new u(f,p));return this.add(new o(y,T,x))},draw:function(f,p){for(var v=0;v<this.curves.length;v++){var m=this.curves[v];m.active&&m.draw(f,p)}return f},ellipseTo:function(f,p,v,m,T,y){var x=new s(0,0,f,p,v,m,T,y),w=this.getEndPoint(this._tmpVec2A),E=x.getStartPoint(this._tmpVec2B);return w.subtract(E),x.x=w.x,x.y=w.y,this.add(x)},fromJSON:function(f){this.curves=[],this.cacheLengths=[],this.startPoint.set(f.x,f.y),this.autoClose=f.autoClose;for(var p=0;p<f.curves.length;p++){var v=f.curves[p];switch(v.type){case"LineCurve":this.add(e.fromJSON(v));break;case"EllipseCurve":this.add(s.fromJSON(v));break;case"SplineCurve":this.add(i.fromJSON(v));break;case"CubicBezierCurve":this.add(n.fromJSON(v));break;case"QuadraticBezierCurve":this.add(o.fromJSON(v))}}return this},getBounds:function(f,p){void 0===f&&(f=new a),void 0===p&&(p=16),f.x=Number.MAX_VALUE,f.y=Number.MAX_VALUE;for(var v=new a,m=c.MIN_SAFE_INTEGER,T=c.MIN_SAFE_INTEGER,y=0;y<this.curves.length;y++){var x=this.curves[y];x.active&&(x.getBounds(v,p),f.x=Math.min(f.x,v.x),f.y=Math.min(f.y,v.y),m=Math.max(m,v.right),T=Math.max(T,v.bottom))}return f.right=m,f.bottom=T,f},getCurveLengths:function(){if(this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var f=[],p=0,v=0;v<this.curves.length;v++)p+=this.curves[v].getLength(),f.push(p);return this.cacheLengths=f},getEndPoint:function(f){return void 0===f&&(f=new u),0<this.curves.length?this.curves[this.curves.length-1].getPoint(1,f):f.copy(this.startPoint),f},getLength:function(){var f=this.getCurveLengths();return f[f.length-1]},getPoint:function(f,p){void 0===p&&(p=new u);for(var v=f*this.getLength(),m=this.getCurveLengths(),T=0;T<m.length;){if(m[T]>=v){var y=m[T]-v,x=this.curves[T],w=x.getLength();return x.getPointAt(0===w?0:1-y/w,p)}T++}return null},getPoints:function(f){void 0===f&&(f=12);for(var p,v=[],m=0;m<this.curves.length;m++){var T=this.curves[m];if(T.active)for(var y=T.getResolution(f),x=T.getPoints(y),w=0;w<x.length;w++){var E=x[w];p&&p.equals(E)||(v.push(E),p=E)}}return this.autoClose&&1<v.length&&!v[v.length-1].equals(v[0])&&v.push(v[0]),v},getRandomPoint:function(f){return void 0===f&&(f=new u),this.getPoint(Math.random(),f)},getSpacedPoints:function(f){void 0===f&&(f=40);for(var p=[],v=0;v<=f;v++)p.push(this.getPoint(v/f));return this.autoClose&&p.push(p[0]),p},getStartPoint:function(f){return void 0===f&&(f=new u),f.copy(this.startPoint)},getTangent:function(f,p){void 0===p&&(p=new u);for(var v=f*this.getLength(),m=this.getCurveLengths(),T=0;T<m.length;){if(m[T]>=v){var y=m[T]-v,x=this.curves[T],w=x.getLength();return x.getTangentAt(0===w?0:1-y/w,p)}T++}return null},lineTo:function(f,p){f instanceof u?this._tmpVec2B.copy(f):this._tmpVec2B.set(f,p);var v=this.getEndPoint(this._tmpVec2A);return this.add(new e([v.x,v.y,this._tmpVec2B.x,this._tmpVec2B.y]))},splineTo:function(f){return f.unshift(this.getEndPoint()),this.add(new i(f))},moveTo:function(f,p){return this.add(f instanceof u?new r(f.x,f.y):new r(f,p))},toJSON:function(){for(var f=[],p=0;p<this.curves.length;p++)f.push(this.curves[p].toJSON());return{type:"Path",x:this.startPoint.x,y:this.startPoint.y,autoClose:this.autoClose,curves:f}},updateArcLengths:function(){this.cacheLengths=[],this.getCurveLengths()},destroy:function(){this.curves.length=0,this.cacheLengths.length=0,this.startPoint=void 0}});l.register("path",function(f,p){return new d(f,p)}),g.exports=d},function(g,b,t){g.exports={DataManager:t(101),DataManagerPlugin:t(897),Events:t(315)}},function(g,b,t){var h=t(0),n=t(101),s=t(24),l=t(20),e=new h({Extends:n,initialize:function(r){n.call(this,r,r.sys.events),this.scene=r,this.systems=r.sys,r.sys.events.once(l.BOOT,this.boot,this),r.sys.events.on(l.START,this.start,this)},boot:function(){this.events=this.systems.events,this.events.once(l.DESTROY,this.destroy,this)},start:function(){this.events.once(l.SHUTDOWN,this.shutdown,this)},shutdown:function(){this.systems.events.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){n.prototype.destroy.call(this),this.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});s.register("DataManagerPlugin",e,"data"),g.exports=e},function(g,b,t){g.exports={Align:t(899),BaseShader:t(396),Bounds:t(902),Canvas:t(906),Color:t(397),ColorMatrix:t(198),Masks:t(916),RGB:t(200)}},function(g,b,t){var h=t(123),n=t(17)(!1,n={In:t(900),To:t(901)},h);g.exports=n},function(g,b,t){g.exports={BottomCenter:t(290),BottomLeft:t(291),BottomRight:t(292),Center:t(293),LeftCenter:t(295),QuickSet:t(289),RightCenter:t(296),TopCenter:t(297),TopLeft:t(298),TopRight:t(299)}},function(g,b,t){g.exports={BottomCenter:t(277),BottomLeft:t(278),BottomRight:t(279),LeftBottom:t(280),LeftCenter:t(281),LeftTop:t(282),QuickSet:t(276),RightBottom:t(283),RightCenter:t(284),RightTop:t(285),TopCenter:t(286),TopLeft:t(287),TopRight:t(288)}},function(g,b,t){g.exports={CenterOn:t(294),GetBottom:t(42),GetBounds:t(903),GetCenterX:t(87),GetCenterY:t(89),GetLeft:t(43),GetOffsetX:t(904),GetOffsetY:t(905),GetRight:t(44),GetTop:t(45),SetBottom:t(55),SetCenterX:t(88),SetCenterY:t(90),SetLeft:t(53),SetRight:t(54),SetTop:t(52)}},function(g,b,t){var h=t(42),n=t(43),s=t(44),l=t(45);g.exports=function(e,r){void 0===r&&(r={});var o=n(e),a=l(e);return r.x=o,r.y=a,r.width=s(e)-o,r.height=h(e)-a,r}},function(g,b){g.exports=function(t){return t.width*t.originX}},function(g,b){g.exports=function(t){return t.height*t.originY}},function(g,b,t){g.exports={CanvasInterpolation:t(367),CanvasPool:t(31),Smoothing:t(192),TouchAction:t(907),UserSelect:t(908)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h="none"),t.style.msTouchAction=h,t.style["ms-touch-action"]=h,t.style["touch-action"]=h,t}},function(g,b){g.exports=function(t,h){return void 0===h&&(h="none"),["-webkit-","-khtml-","-moz-","-ms-",""].forEach(function(n){t.style[n+"user-select"]=h}),t.style["-webkit-touch-callout"]=h,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t}},function(g,b,t){var h=t(103);g.exports=function(n){void 0===n&&(n=1024);var s=[],l=255,e=0,r=0;for(u=0;u<=255;u++)s.push({r:l,g:u,b:r,color:h(l,u,r)});for(u=e=255;0<=u;u--)s.push({r:u,g:e,b:r,color:h(u,e,r)});for(u=l=0;u<=255;u++,e--)s.push({r:l,g:e,b:u,color:h(l,e,u)});for(r=255,u=e=0;u<=255;u++,r--,l++)s.push({r:l,g:e,b:r,color:h(l,e,r)});if(1024===n)return s;for(var o=[],a=0,i=1024/n,u=0;u<n;u++)o.push(s[Math.floor(a)]),a+=i;return o}},function(g,b){g.exports=function(t){var h={r:t>>16&255,g:t>>8&255,b:255&t,a:255};return 16777215<t&&(h.a=t>>>24),h}},function(g,b,t){var h=t(38),n=t(399);g.exports=function(s,l,e){var r,o,a=e,i=e,u=e;return 0!==l&&(a=n(o=2*e-(r=e<.5?e*(1+l):e+l-e*l),r,s+1/3),i=n(o,r,s),u=n(o,r,s-1/3)),(new h).setGLTo(a,i,u,1)}},function(g,b,t){var h=t(188);g.exports=function(n,s){void 0===n&&(n=1),void 0===s&&(s=1);for(var l=[],e=0;e<=359;e++)l.push(h(e/359,n,s));return l}},function(g,b,t){function h(s,l,e,r,o,a,i,u){void 0===i&&(i=100),void 0===u&&(u=0);var c=u/i;return{r:n(s,r,c),g:n(l,o,c),b:n(e,a,c)}}var n=t(135);g.exports={RGBWithRGB:h,ColorWithRGB:function(s,l,e,r,o,a){return void 0===o&&(o=100),void 0===a&&(a=0),h(s.r,s.g,s.b,l,e,r,o,a)},ColorWithColor:function(s,l,e,r){return void 0===e&&(e=100),void 0===r&&(r=0),h(s.r,s.g,s.b,l.r,l.g,l.b,e,r)}}},function(g,b,t){var h=t(195),n=t(38);g.exports=function(s,l){return void 0===s&&(s=0),void 0===l&&(l=255),new n(h(s,l),h(s,l),h(s,l))}},function(g,b,t){var h=t(398);g.exports=function(n,s,l,e,r){return void 0===e&&(e=255),void 0===r&&(r="#"),"#"===r?"#"+((1<<24)+(n<<16)+(s<<8)+l).toString(16).slice(1,7):"0x"+h(e)+h(n)+h(s)+h(l)}},function(g,b,t){g.exports={BitmapMask:t(310),GeometryMask:t(311)}},function(g,b,t){var h={AddToDOM:t(142),DOMContentLoaded:t(400),GetInnerHeight:t(401),GetScreenOrientation:t(402),GetTarget:t(407),ParseXML:t(408),RemoveFromDOM:t(202),RequestAnimationFrame:t(386)};g.exports=h},function(g,b,t){g.exports={EventEmitter:t(919)}},function(g,b,t){var h=t(0),n=t(9),s=t(24),l=new h({Extends:n,initialize:function(){n.call(this)},shutdown:function(){this.removeAllListeners()},destroy:function(){this.removeAllListeners()}});s.register("EventEmitter",l,"events"),g.exports=l},function(g,b,t){var h=t(142),n=t(321),s=t(325),l=t(31),e=t(0),r=t(346),o=t(921),a=t(366),i=t(101),u=t(384),c=t(347),d=t(400),f=t(9),p=t(22),v=t(409),m=t(24),T=t(414),y=t(415),x=t(417),w=t(106),E=t(422),S=t(385),A=t(387),_=t(426),C=new e({initialize:function(M){this.config=new r(M),this.renderer=null,this.domContainer=null,this.canvas=null,this.context=null,this.isBooted=!1,this.isRunning=!1,this.events=new f,this.anims=new n(this),this.textures=new E(this),this.cache=new s(this),this.registry=new i(this),this.input=new v(this,this.config),this.scene=new x(this,this.config.sceneConfig),this.device=c,this.scale=new y(this,this.config),this.sound=null,this.sound=_.create(this),this.loop=new S(this,this.config.fps),this.plugins=new T(this,this.config),this.pendingDestroy=!1,this.removeCanvas=!1,this.noReturn=!1,this.hasFocus=!1,d(this.boot.bind(this))},boot:function(){m.hasCore("EventEmitter")?(this.isBooted=!0,this.config.preBoot(this),this.scale.preBoot(),a(this),o(this),u(this),h(this.canvas,this.config.parent),this.textures.once(w.READY,this.texturesReady,this),this.events.emit(p.BOOT)):console.warn("Aborting. Core Plugins missing.")},texturesReady:function(){this.events.emit(p.READY),this.start()},start:function(){this.isRunning=!0,this.config.postBoot(this),this.loop.start(this.renderer?this.step.bind(this):this.headlessStep.bind(this)),A(this);var M=this.events;M.on(p.HIDDEN,this.onHidden,this),M.on(p.VISIBLE,this.onVisible,this),M.on(p.BLUR,this.onBlur,this),M.on(p.FOCUS,this.onFocus,this)},step:function(M,P){if(this.pendingDestroy)return this.runDestroy();var L=this.events;L.emit(p.PRE_STEP,M,P),L.emit(p.STEP,M,P),this.scene.update(M,P),L.emit(p.POST_STEP,M,P);var D=this.renderer;D.preRender(),L.emit(p.PRE_RENDER,D,M,P),this.scene.render(D),D.postRender(),L.emit(p.POST_RENDER,D,M,P)},headlessStep:function(M,P){if(this.pendingDestroy)return this.runDestroy();var L=this.events;L.emit(p.PRE_STEP,M,P),L.emit(p.STEP,M,P),this.scene.update(M,P),L.emit(p.POST_STEP,M,P),L.emit(p.PRE_RENDER),L.emit(p.POST_RENDER)},onHidden:function(){this.loop.pause(),this.events.emit(p.PAUSE)},onVisible:function(){this.loop.resume(),this.events.emit(p.RESUME)},onBlur:function(){this.hasFocus=!1,this.loop.blur()},onFocus:function(){this.hasFocus=!0,this.loop.focus()},getFrame:function(){return this.loop.frame},getTime:function(){return this.loop.now},destroy:function(M,P){void 0===P&&(P=!1),this.pendingDestroy=!0,this.removeCanvas=M,this.noReturn=P},runDestroy:function(){this.scene.destroy(),this.events.emit(p.DESTROY),this.events.removeAllListeners(),this.renderer&&this.renderer.destroy(),this.removeCanvas&&this.canvas&&(l.remove(this.canvas),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)),this.domContainer&&this.domContainer.parentNode.removeChild(this.domContainer),this.loop.destroy(),this.pendingDestroy=!1}});g.exports=C},function(g,b,t){var h=t(142);g.exports=function(n){var s,l=n.config;l.parent&&l.domCreateContainer&&((s=document.createElement("div")).style.cssText=["display: block;","width: "+n.scale.width+"px;","height: "+n.scale.height+"px;","padding: 0; margin: 0;","position: absolute;","overflow: hidden;","pointer-events: "+l.domPointerEvents+";","transform: scale(1);","transform-origin: left top;"].join(" "),n.domContainer=s,h(s,l.parent))}},function(g,b){g.exports="boot"},function(g,b){g.exports="destroy"},function(g,b){g.exports="dragend"},function(g,b){g.exports="dragenter"},function(g,b){g.exports="drag"},function(g,b){g.exports="dragleave"},function(g,b){g.exports="dragover"},function(g,b){g.exports="dragstart"},function(g,b){g.exports="drop"},function(g,b){g.exports="gameout"},function(g,b){g.exports="gameover"},function(g,b){g.exports="gameobjectdown"},function(g,b){g.exports="dragend"},function(g,b){g.exports="dragenter"},function(g,b){g.exports="drag"},function(g,b){g.exports="dragleave"},function(g,b){g.exports="dragover"},function(g,b){g.exports="dragstart"},function(g,b){g.exports="drop"},function(g,b){g.exports="gameobjectmove"},function(g,b){g.exports="gameobjectout"},function(g,b){g.exports="gameobjectover"},function(g,b){g.exports="pointerdown"},function(g,b){g.exports="pointermove"},function(g,b){g.exports="pointerout"},function(g,b){g.exports="pointerover"},function(g,b){g.exports="pointerup"},function(g,b){g.exports="wheel"},function(g,b){g.exports="gameobjectup"},function(g,b){g.exports="gameobjectwheel"},function(g,b){g.exports="boot"},function(g,b){g.exports="process"},function(g,b){g.exports="update"},function(g,b){g.exports="pointerdown"},function(g,b){g.exports="pointerdownoutside"},function(g,b){g.exports="pointermove"},function(g,b){g.exports="pointerout"},function(g,b){g.exports="pointerover"},function(g,b){g.exports="pointerup"},function(g,b){g.exports="pointerupoutside"},function(g,b){g.exports="wheel"},function(g,b){g.exports="pointerlockchange"},function(g,b){g.exports="preupdate"},function(g,b){g.exports="shutdown"},function(g,b){g.exports="start"},function(g,b){g.exports="update"},function(g,b){g.exports="addfile"},function(g,b){g.exports="complete"},function(g,b){g.exports="filecomplete"},function(g,b){g.exports="filecomplete-"},function(g,b){g.exports="loaderror"},function(g,b){g.exports="load"},function(g,b){g.exports="fileprogress"},function(g,b){g.exports="postprocess"},function(g,b){g.exports="progress"},function(g,b){g.exports="start"},function(g,b,t){g.exports={game:"game",renderer:"renderer",anims:"anims",cache:"cache",plugins:"plugins",registry:"registry",scale:"scale",sound:"sound",textures:"textures",events:"events",cameras:"cameras",add:"add",make:"make",scenePlugin:"scene",displayList:"children",lights:"lights",data:"data",input:"input",load:"load",time:"time",tweens:"tweens",arcadePhysics:"physics",impactPhysics:"impact",matterPhysics:"matter"}},function(g,b){g.exports=function(t,h,n){if(n.getElementsByTagName("TextureAtlas")){var s=t.source[h];t.add("__BASE",h,0,0,s.width,s.height);for(var l=n.getElementsByTagName("SubTexture"),e=0;e<l.length;e++){var r,o,a,i,u=l[e].attributes,c=u.name.value,d=parseInt(u.x.value,10),f=parseInt(u.y.value,10),p=parseInt(u.width.value,10),v=parseInt(u.height.value,10),m=t.add(c,h,d,f,p,v);u.frameX&&(r=Math.abs(parseInt(u.frameX.value,10)),o=Math.abs(parseInt(u.frameY.value,10)),a=parseInt(u.frameWidth.value,10),i=parseInt(u.frameHeight.value,10),m.setTrim(p,v,r,o,a,i))}return t}console.warn("Invalid Texture Atlas XML given")}},function(g,b){g.exports=function(t,h){var n=t.source[h];return t.add("__BASE",h,0,0,n.width,n.height),t}},function(g,b){g.exports=function(t,h){var n=t.source[h];return t.add("__BASE",h,0,0,n.width,n.height),t}},function(g,b,t){var h=t(77);g.exports=function(n,s,l){if(l.frames||l.textures){var e=n.source[s];n.add("__BASE",s,0,0,e.width,e.height);for(var r=Array.isArray(l.textures)?l.textures[s].frames:l.frames,o=0;o<r.length;o++){var a=r[o],i=n.add(a.filename,s,a.frame.x,a.frame.y,a.frame.w,a.frame.h);a.trimmed&&i.setTrim(a.sourceSize.w,a.sourceSize.h,a.spriteSourceSize.x,a.spriteSourceSize.y,a.spriteSourceSize.w,a.spriteSourceSize.h),a.rotated&&(i.rotated=!0,i.updateUVsInverted());var u=a.anchor||a.pivot;u&&(i.customPivot=!0,i.pivotX=u.x,i.pivotY=u.y),i.customData=h(a)}for(var c in l)"frames"!==c&&(n.customData[c]=Array.isArray(l[c])?l[c].slice(0):l[c]);return n}console.warn("Invalid Texture Atlas JSON Array")}},function(g,b,t){var h=t(77);g.exports=function(n,s,l){if(l.frames){var e=n.source[s];n.add("__BASE",s,0,0,e.width,e.height);var r,o,a,i=l.frames;for(var u in i)i.hasOwnProperty(u)&&(o=n.add(u,s,(r=i[u]).frame.x,r.frame.y,r.frame.w,r.frame.h),r.trimmed&&o.setTrim(r.sourceSize.w,r.sourceSize.h,r.spriteSourceSize.x,r.spriteSourceSize.y,r.spriteSourceSize.w,r.spriteSourceSize.h),r.rotated&&(o.rotated=!0,o.updateUVsInverted()),(a=r.anchor||r.pivot)&&(o.customPivot=!0,o.pivotX=a.x,o.pivotY=a.y),o.customData=h(r));for(var c in l)"frames"!==c&&(n.customData[c]=Array.isArray(l[c])?l[c].slice(0):l[c]);return n}console.warn("Invalid Texture Atlas JSON Hash given, missing 'frames' Object")}},function(g,b,t){var h=t(2);g.exports=function(n,s,l,e,r,o,a){var i=h(a,"frameWidth",null),u=h(a,"frameHeight",i);if(null===i)throw new Error("TextureManager.SpriteSheet: Invalid frameWidth given.");var c=n.source[s];n.add("__BASE",s,0,0,c.width,c.height);var d=h(a,"startFrame",0),f=h(a,"endFrame",-1),p=h(a,"margin",0),v=h(a,"spacing",0),m=Math.floor((r-p+v)/(i+v))*Math.floor((o-p+v)/(u+v));0===m&&console.warn("SpriteSheet frame dimensions will result in zero frames for texture:",n.key),(m<d||d<-m)&&(d=0),d<0&&(d=m+d),-1!==f&&(m=d+(f+1));for(var T=p,y=p,x=0,w=0,E=0;E<m;E++){w=x=0;var S=T+i,A=y+u;r<S&&(x=S-r),o<A&&(w=A-o),n.add(E,s,l+T,e+y,i-x,u-w),r<(T+=i+v)+i&&(T=p,y+=u+v)}return n}},function(g,b,t){var h=t(2);g.exports=function(n,s,l){var e=h(l,"frameWidth",null),r=h(l,"frameHeight",e);if(!e)throw new Error("TextureManager.SpriteSheetFromAtlas: Invalid frameWidth given.");var o=n.source[0];n.add("__BASE",0,0,0,o.width,o.height);var a=h(l,"startFrame",0),i=h(l,"endFrame",-1),u=h(l,"margin",0),c=h(l,"spacing",0),d=s.cutX,f=s.cutY,p=s.cutWidth,v=s.cutHeight,m=s.realWidth,T=s.realHeight,y=Math.floor((m-u+c)/(e+c)),x=Math.floor((T-u+c)/(r+c)),w=y*x,E=s.x,S=e-E,A=e-(m-p-E),_=s.y,C=r-_,M=r-(T-v-_);(w<a||a<-w)&&(a=0),a<0&&(a=w+a),-1!==i&&(w=a+(i+1));for(var P=u,L=u,D=0,F=s.sourceIndex,X=0;X<x;X++){for(var R=0===X,O=X===x-1,N=0;N<y;N++){var k,I,B,Y,U,G,W=0===N,z=N===y-1,V=n.add(D,F,d+P,f+L,e,r);(W||R||z||O)&&(k=W?E:0,I=R?_:0,Y=B=0,W&&(B+=e-S),z&&(B+=e-A),R&&(Y+=r-C),O&&(Y+=r-M),G=r-Y,V.cutWidth=U=e-B,V.cutHeight=G,V.setTrim(e,r,k,I,U,G)),P+=c,P+=W?S:z?A:e,D++}P=u,L+=c,L+=R?C:O?M:r}return n}},function(g,b){function t(n,s,l,e){n.add(l,s,e.x,h-e.y-e.height,e.width,e.height)}var h=0;g.exports=function(n,s,l){var e=n.source[s];n.add("__BASE",s,0,0,e.width,e.height),h=e.height;for(var r=l.split("\n"),o=/^[ ]*(- )*(\w+)+[: ]+(.*)/,a="",i="",u={x:0,y:0,width:0,height:0},c=0;c<r.length;c++){var d=r[c].match(o);if(d){var p=d[2],v=d[3];if("- "===d[1]&&(i!==a&&(t(n,s,i,u),a=i),u={x:0,y:0,width:0,height:0}),"name"!==p)switch(p){case"x":case"y":case"width":case"height":u[p]=parseInt(v,10)}else i=v}}return i!==a&&t(n,s,i,u),n}},function(g,b){g.exports="complete"},function(g,b){g.exports="decoded"},function(g,b){g.exports="decodedall"},function(g,b){g.exports="destroy"},function(g,b){g.exports="detune"},function(g,b){g.exports="detune"},function(g,b){g.exports="mute"},function(g,b){g.exports="rate"},function(g,b){g.exports="volume"},function(g,b){g.exports="loop"},function(g,b){g.exports="looped"},function(g,b){g.exports="mute"},function(g,b){g.exports="pan"},function(g,b){g.exports="pauseall"},function(g,b){g.exports="pause"},function(g,b){g.exports="play"},function(g,b){g.exports="rate"},function(g,b){g.exports="resumeall"},function(g,b){g.exports="resume"},function(g,b){g.exports="seek"},function(g,b){g.exports="stopall"},function(g,b){g.exports="stop"},function(g,b){g.exports="unlocked"},function(g,b){g.exports="volume"},function(g,b,t){var h={Events:t(75),DisplayList:t(1012),GameObjectCreator:t(16),GameObjectFactory:t(5),UpdateList:t(1040),Components:t(11),GetCalcMatrix:t(19),BuildGameObject:t(28),BuildGameObjectAnimation:t(439),GameObject:t(15),BitmapText:t(148),Blitter:t(213),Bob:t(440),Container:t(214),DOMElement:t(442),DynamicBitmapText:t(215),Extern:t(444),Graphics:t(216),Group:t(113),Image:t(125),Layer:t(219),Particles:t(1074),PathFollower:t(457),RenderTexture:t(221),RetroFont:t(1082),Rope:t(223),Sprite:t(73),Text:t(224),GetTextSize:t(458),MeasureText:t(460),TextStyle:t(459),TileSprite:t(225),Zone:t(129),Video:t(226),Shape:t(34),Arc:t(461),Curve:t(462),Ellipse:t(463),Grid:t(464),IsoBox:t(465),IsoTriangle:t(466),Line:t(467),Polygon:t(468),Rectangle:t(473),Star:t(474),Triangle:t(475),Factories:{Blitter:t(1130),Container:t(1131),DOMElement:t(1132),DynamicBitmapText:t(1133),Extern:t(1134),Graphics:t(1135),Group:t(1136),Image:t(1137),Layer:t(1138),Particles:t(1139),PathFollower:t(1140),RenderTexture:t(1141),Rope:t(1142),Sprite:t(1143),StaticBitmapText:t(1144),Text:t(1145),TileSprite:t(1146),Zone:t(1147),Video:t(1148),Arc:t(1149),Curve:t(1150),Ellipse:t(1151),Grid:t(1152),IsoBox:t(1153),IsoTriangle:t(1154),Line:t(1155),Polygon:t(1156),Rectangle:t(1157),Star:t(1158),Triangle:t(1159)},Creators:{Blitter:t(1160),Container:t(1161),DynamicBitmapText:t(1162),Graphics:t(1163),Group:t(1164),Image:t(1165),Layer:t(1166),Particles:t(1167),RenderTexture:t(1168),Rope:t(1169),Sprite:t(1170),StaticBitmapText:t(1171),Text:t(1172),TileSprite:t(1173),Zone:t(1174),Video:t(1175)}};h.Shader=t(229),h.Mesh=t(230),h.PointLight=t(150),h.Factories.Shader=t(1184),h.Factories.Mesh=t(1185),h.Factories.PointLight=t(1186),h.Creators.Shader=t(1187),h.Creators.Mesh=t(1188),h.Creators.PointLight=t(1189),h.Light=t(481),h.LightsManager=t(482),h.LightsPlugin=t(1190),g.exports=h},function(g,b,t){var h=t(0),n=t(110),s=t(24),l=t(75),e=t(20),r=t(79),o=new h({Extends:n,initialize:function(a){n.call(this,a),this.sortChildrenFlag=!1,this.scene=a,this.systems=a.sys,this.events=a.sys.events,this.addCallback=this.addChildCallback,this.removeCallback=this.removeChildCallback,this.events.once(e.BOOT,this.boot,this),this.events.on(e.START,this.start,this)},boot:function(){this.events.once(e.DESTROY,this.destroy,this)},addChildCallback:function(a){a.displayList&&a.displayList!==this&&a.removeFromDisplayList(),a.displayList||(this.queueDepthSort(),a.displayList=this,a.emit(l.ADDED_TO_SCENE,a,this.scene),this.events.emit(e.ADDED_TO_SCENE,a,this.scene))},removeChildCallback:function(a){this.queueDepthSort(),a.displayList=null,a.emit(l.REMOVED_FROM_SCENE,a,this.scene),this.events.emit(e.REMOVED_FROM_SCENE,a,this.scene)},start:function(){this.events.once(e.SHUTDOWN,this.shutdown,this)},queueDepthSort:function(){this.sortChildrenFlag=!0},depthSort:function(){this.sortChildrenFlag&&(r(this.list,this.sortByDepth),this.sortChildrenFlag=!1)},sortByDepth:function(a,i){return a._depth-i._depth},getChildren:function(){return this.list},shutdown:function(){for(var a=this.list,i=a.length;i--;)a[i].destroy(!0);a.length=0,this.events.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.events.off(e.START,this.start,this),this.scene=null,this.systems=null,this.events=null}});s.register("DisplayList",o,"displayList"),g.exports=o},function(g,b,t){g.exports={CheckMatrix:t(209),MatrixToString:t(1014),ReverseColumns:t(1015),ReverseRows:t(1016),Rotate180:t(1017),RotateLeft:t(1018),RotateMatrix:t(147),RotateRight:t(1019),Translate:t(1020),TransposeMatrix:t(435)}},function(g,b,t){var h=t(186),n=t(209);g.exports=function(s){var l="";if(!n(s))return l;for(var e=0;e<s.length;e++){for(var r=0;r<s[e].length;r++){var o=s[e][r].toString();l+="undefined"!==o?h(o,2):"?",r<s[e].length-1&&(l+=" |")}if(e<s.length-1){l+="\n";for(var a=0;a<s[e].length;a++)l+="---",a<s[e].length-1&&(l+="+");l+="\n"}}return l}},function(g,b){g.exports=function(t){return t.reverse()}},function(g,b){g.exports=function(t){for(var h=0;h<t.length;h++)t[h].reverse();return t}},function(g,b,t){var h=t(147);g.exports=function(n){return h(n,180)}},function(g,b,t){var h=t(147);g.exports=function(n){return h(n,90)}},function(g,b,t){var h=t(147);g.exports=function(n){return h(n,-90)}},function(g,b,t){var h=t(178),n=t(179);g.exports=function(s,l,e){if(void 0===l&&(l=0),void 0===e&&(e=0),0!==e&&(e<0?h(s,Math.abs(e)):n(s,e)),0!==l)for(var r=0;r<s.length;r++){var o=s[r];l<0?h(o,Math.abs(l)):n(o,l)}return s}},function(g,b){g.exports=function(t,h,n,s,l){if(void 0===l&&(l=t),0<n){var e=n-t.length;if(e<=0)return null}if(!Array.isArray(h))return-1===t.indexOf(h)?(t.push(h),s&&s.call(l,h),h):null;for(var r=h.length-1;0<=r;)-1!==t.indexOf(h[r])&&h.splice(r,1),r--;if(0===(r=h.length))return null;0<n&&e<r&&(h.splice(e),r=e);for(var o=0;o<r;o++){var a=h[o];t.push(a),s&&s.call(l,a)}return h}},function(g,b){g.exports=function(t,h,n,s,l,e){if(void 0===n&&(n=0),void 0===e&&(e=t),0<s){var r=s-t.length;if(r<=0)return null}if(!Array.isArray(h))return-1===t.indexOf(h)?(t.splice(n,0,h),l&&l.call(e,h),h):null;for(var o=h.length-1;0<=o;)-1!==t.indexOf(h[o])&&h.pop(),o--;if(0===(o=h.length))return null;0<s&&r<o&&(h.splice(r),o=r);for(var a=o-1;0<=a;a--){var i=h[a];t.splice(n,0,i),l&&l.call(e,i)}return h}},function(g,b){g.exports=function(t,h){var n=t.indexOf(h);return-1!==n&&n<t.length&&(t.splice(n,1),t.push(h)),h}},function(g,b,t){var h=t(78);g.exports=function(n,s,l,e,r){void 0===e&&(e=0),void 0===r&&(r=n.length);var o=0;if(h(n,e,r))for(var a=e;a<r;a++)n[a][s]===l&&o++;return o}},function(g,b){g.exports=function(t,h,n){for(var s=[null],l=3;l<arguments.length;l++)s.push(arguments[l]);for(l=0;l<t.length;l++)s[0]=t[l],h.apply(n,s);return t}},function(g,b,t){var h=t(78);g.exports=function(n,s,l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=n.length),h(n,e,r)){for(var o=[null],a=5;a<arguments.length;a++)o.push(arguments[a]);for(a=e;a<r;a++)o[0]=n[a],s.apply(l,o)}return n}},function(g,b){g.exports=function(t,h){var n,s,l=t.indexOf(h);return 0<l&&(s=t.indexOf(n=t[l-1]),t[l]=n,t[s]=h),t}},function(g,b){g.exports=function(t,h,n){var s=t.indexOf(h);if(-1===s||n<0||n>=t.length)throw new Error("Supplied index out of bounds");return s!==n&&(t.splice(s,1),t.splice(n,0,h)),h}},function(g,b){g.exports=function(t,h){var n,s,l=t.indexOf(h);return-1!==l&&l<t.length-1&&(s=t.indexOf(n=t[l+1]),t[l]=n,t[s]=h),t}},function(g,b){g.exports=function(t,h,n){if(h===n)return t;var s=t.indexOf(h),l=t.indexOf(n);if(s<0||l<0)throw new Error("Supplied items must be elements of the same array");return l<s||(t.splice(s,1),l===t.length-1?t.push(h):t.splice(l,0,h)),t}},function(g,b){g.exports=function(t,h,n){if(h===n)return t;var s=t.indexOf(h),l=t.indexOf(n);if(s<0||l<0)throw new Error("Supplied items must be elements of the same array");return s<l||(t.splice(s,1),0===l?t.unshift(h):t.splice(l,0,h)),t}},function(g,b,t){var h=t(363);g.exports=function(n,s,l){void 0===n&&(n=0),void 0===s&&(s=null),void 0===l&&(l=1),null===s&&(s=n,n=0);for(var e=[],r=Math.max(h((s-n)/(l||1)),0),o=0;o<r;o++)e.push(n),n+=l;return e}},function(g,b,t){var h=t(74);g.exports=function(n,s,l,e){if(void 0===e&&(e=n),s<0||s>n.length-1)throw new Error("Index out of bounds");var r=h(n,s);return l&&l.call(e,r),r}},function(g,b,t){var h=t(78);g.exports=function(n,s,l,e,r){if(void 0===s&&(s=0),void 0===l&&(l=n.length),void 0===r&&(r=n),h(n,s,l)){var a=n.splice(s,l-s);if(e)for(var i=0;i<a.length;i++)e.call(r,a[i]);return a}return[]}},function(g,b,t){var h=t(74);g.exports=function(n,s,l){void 0===s&&(s=0),void 0===l&&(l=n.length);var e=s+Math.floor(Math.random()*l);return h(n,e)}},function(g,b){g.exports=function(t,h,n){var s=t.indexOf(h),l=t.indexOf(n);return-1!==s&&-1===l&&(t[s]=n,!0)}},function(g,b){g.exports=function(t,h){var n=t.indexOf(h);return-1!==n&&0<n&&(t.splice(n,1),t.unshift(h)),h}},function(g,b,t){var h=t(78);g.exports=function(n,s,l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=n.length),h(n,e,r))for(var o=e;o<r;o++){var a=n[o];a.hasOwnProperty(s)&&(a[s]=l)}return n}},function(g,b){g.exports=function(t,h,n){if(h===n)return t;var s=t.indexOf(h),l=t.indexOf(n);if(s<0||l<0)throw new Error("Supplied items must be elements of the same array");return t[s]=n,t[l]=h,t}},function(g,b,t){var h=t(0),n=t(211),s=t(24),l=t(20),e=new h({Extends:n,initialize:function(r){n.call(this),this.checkQueue=!0,this.scene=r,this.systems=r.sys,r.sys.events.once(l.BOOT,this.boot,this),r.sys.events.on(l.START,this.start,this)},boot:function(){this.systems.events.once(l.DESTROY,this.destroy,this)},start:function(){var r=this.systems.events;r.on(l.PRE_UPDATE,this.update,this),r.on(l.UPDATE,this.sceneUpdate,this),r.once(l.SHUTDOWN,this.shutdown,this)},sceneUpdate:function(r,o){for(var a=this._active,i=a.length,u=0;u<i;u++){var c=a[u];c.active&&c.preUpdate.call(c,r,o)}},shutdown:function(){for(var r=this._active.length;r--;)this._active[r].destroy(!0);for(r=this._pending.length;r--;)this._pending[r].destroy(!0);for(r=this._destroy.length;r--;)this._destroy[r].destroy(!0);this._toProcess=0,this._pending=[],this._active=[],this._destroy=[],this.removeAllListeners();var o=this.systems.events;o.off(l.PRE_UPDATE,this.update,this),o.off(l.UPDATE,this.sceneUpdate,this),o.off(l.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.systems.events.off(l.START,this.start,this),this.scene=null,this.systems=null}});s.register("UpdateList",e,"updateList"),g.exports=e},function(g,b){g.exports="add"},function(g,b){g.exports="remove"},function(g,b){g.exports=function(t,h,n,s){if(void 0===n&&(n=!1),void 0===s)return{local:{x:0,y:0,width:0,height:0},global:{x:0,y:0,width:0,height:0},lines:{shortest:0,longest:0,lengths:null,height:0},wrappedText:"",words:[],characters:[],scaleX:0,scaleY:0};var l,e,r,a=t.text,i=a.length,u=t.maxWidth,c=t.wordWrapCharCode,d=Number.MAX_VALUE,f=Number.MAX_VALUE,p=0,v=0,m=t.fontData.chars,T=t.fontData.lineHeight,y=t.letterSpacing,x=0,w=0,E=0,S=null,A=t._align,_=0,C=t.fontSize/t.fontData.size,M=C*t.scaleX,P=C*t.scaleY,L=null,D=0,F=[],X=Number.MAX_VALUE,R=0,O=0,N=0,k=[],I=[],B=null;if(0<u){for(G=0;G<i;G++)10!==(E=a.charCodeAt(G))?(S=m[E])&&(null!==L&&(l=S.kerning[D]),E===c?null!==B&&(k.push({word:B.word,i:B.i,x:B.x*M,y:B.y*P,w:B.w*M,h:B.h*P,cr:!1}),B=null):(null===B&&(B={word:"",i:G,x,y:w,w:0,h:T,cr:!1}),B.word=B.word.concat(a[G]),B.w+=S.xOffset+S.xAdvance+(void 0!==l?l:0)),x+=S.xAdvance+y,L=S,D=E):(null!==B&&(k.push({word:B.word,i:B.i,x:B.x*M,y:B.y*P,w:B.w*M,h:B.h*P,cr:!0}),B=null),x=0,w+=T,L=null);null!==B&&k.push({word:B.word,i:B.i,x:B.x*M,y:B.y*P,w:B.w*M,h:B.h*P,cr:!1}),L=null;for(var Y=D=w=x=0,U=[],G=0;G<k.length;G++){var W,z=k[G],V=z.x;W&&(Y=V-(V-(W.x+W.w)+W.w),W=null),u<V-Y||u<z.x+z.w-Y?(U.push(z.i-1),W=z.cr?(U.push(z.i+z.word.length),Y=0,null):z):z.cr&&(U.push(z.i+z.word.length),Y=0,W=null)}for(G=U.length-1;0<=G;G--)a=(e=a).substr(0,r=U[G])+"\n"+e.substr(r+1);i=(s.wrappedText=a).length,k=[],B=null}var j,q,Q,Z,J=0;for(G=0;G<i;G++)10!==(E=a.charCodeAt(G))?(S=m[E])&&(_=x,null!==L&&(_+=void 0!==(j=S.kerning[D])?j:0),_<d&&(d=_),w<f&&(f=w),p<(q=_+S.xAdvance)&&(p=q),v<(Q=w+T)&&(v=Q),Z=S.xOffset+S.xAdvance+(void 0!==j?j:0),E===c?null!==B&&(k.push({word:B.word,i:B.i,x:B.x*M,y:B.y*P,w:B.w*M,h:B.h*P}),B=null):(null===B&&(B={word:"",i:J,x,y:w,w:0,h:T}),B.word=B.word.concat(a[G]),B.w+=Z),I.push({i:J,char:a[G],code:E,x:(S.xOffset+x)*C,y:(S.yOffset+w)*C,w:S.width*C,h:S.height*C,t:w*C,r:q*C,b:T*C,line:O,glyph:S}),x+=S.xAdvance+y,L=S,D=E,N=q*C,J++):(null!==B&&(k.push({word:B.word,i:B.i,x:B.x*M,y:B.y*P,w:B.w*M,h:B.h*P}),B=null),x=0,w+=T,L=null,R<(F[O]=N)&&(R=N),N<X&&(X=N),O++,N=0);if(null!==B&&k.push({word:B.word,i:B.i,x:B.x*M,y:B.y*P,w:B.w*M,h:B.h*P}),R<(F[O]=N)&&(R=N),N<X&&(X=N),0<A)for(var K=0;K<I.length;K++){var tt,et,st=I[K];1===A?(st.x+=tt=(R-F[st.line])/2,st.r+=tt):2===A&&(st.x+=et=R-F[st.line],st.r+=et)}var it=s.local,$=s.global,at=s.lines;return it.x=d*C,it.y=f*C,it.width=p*C,it.height=v*C,$.x=t.x-t._displayOriginX+d*M,$.y=t.y-t._displayOriginY+f*P,$.width=p*M,$.height=v*P,at.shortest=X,at.longest=R,at.lengths=F,h&&(it.x=Math.ceil(it.x),it.y=Math.ceil(it.y),it.width=Math.ceil(it.width),it.height=Math.ceil(it.height),$.x=Math.ceil($.x),$.y=Math.ceil($.y),$.width=Math.ceil($.width),$.height=Math.ceil($.height),at.shortest=Math.ceil(X),at.longest=Math.ceil(R)),n&&(t._displayOriginX=t.originX*it.width,t._displayOriginY=t.originY*it.height,$.x=t.x-t._displayOriginX*t.scaleX,$.y=t.y-t._displayOriginY*t.scaleY,h&&($.x=Math.ceil($.x),$.y=Math.ceil($.y))),s.words=k,s.characters=I,s.lines.height=T,s.scale=C,s.scaleX=t.scaleX,s.scaleY=t.scaleY,s}},function(g,b,t){var h=t(212);g.exports=function(n,s,l,e,r,o,a){var i=n.sys.textures.get(l),u=i.get(e),c=n.sys.cache.xml.get(r);if(u&&c){var d=h(c,u,o,a,i);return n.sys.cache.bitmapFont.add(s,{data:d,texture:l,frame:e,fromAtlas:!0}),!0}return!1}},function(g,b,t){var h=t(1),n=t(1);h=t(1046),n=t(1048),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(1047),n=t(19),s=t(12);g.exports=function(l,e,r,o){if(0!==e._text.length){r.addToRenderList(e);var a,i=l.pipelines.set(e.pipeline,e),u=n(e,r,o).calc,c=r.roundPixels,d=r.alpha,f=e.charColors,p=e.tintFill,v=s.getTintAppendFloatAlpha,m=v(e.tintTopLeft,d*e._alphaTL),T=v(e.tintTopRight,d*e._alphaTR),y=v(e.tintBottomLeft,d*e._alphaBL),x=v(e.tintBottomRight,d*e._alphaBR),w=e.frame.glTexture,E=i.setGameObject(e),S=e.getTextBounds(!1).characters,A=e.dropShadowX,_=e.dropShadowY,C=0!==A||0!==_;if(l.pipelines.preBatch(e),C)for(var M=e.dropShadowColor,P=e.dropShadowAlpha,L=v(M,d*P*e._alphaTL),D=v(M,d*P*e._alphaTR),F=v(M,d*P*e._alphaBL),X=v(M,d*P*e._alphaBR),R=0;R<S.length;R++)U=(a=S[R]).glyph,32!==a.code&&0!==U.width&&0!==U.height&&h(i,e,a,U,A,_,u,c,L,D,F,X,1,w,E);for(R=0;R<S.length;R++){var O,N,k,I,B,Y,U=(a=S[R]).glyph;32!==a.code&&0!==U.width&&0!==U.height&&(f[a.i]?(N=(O=f[a.i]).tintEffect,k=v(O.tintTL,d*e._alphaTL),I=v(O.tintTR,d*e._alphaTR),B=v(O.tintBL,d*e._alphaBL),Y=v(O.tintBR,d*e._alphaBR),h(i,e,a,U,0,0,u,c,k,I,B,Y,N,w,E)):h(i,e,a,U,0,0,u,c,m,T,y,x,p,w,E))}l.pipelines.postBatch(e)}}},function(g,b){g.exports=function(t,h,n,s,l,e,r,o,a,i,u,c,d,f,p){var v=n.x-h.displayOriginX+l,m=n.y-h.displayOriginY+e,T=v+n.w,y=m+n.h,x=r.getXRound(v,m,o),w=r.getYRound(v,m,o),E=r.getXRound(v,y,o),S=r.getYRound(v,y,o),A=r.getXRound(T,y,o),_=r.getYRound(T,y,o),C=r.getXRound(T,m,o),M=r.getYRound(T,m,o);t.batchQuad(h,x,w,E,S,A,_,C,M,s.u0,s.v0,s.u1,s.v1,a,i,u,c,d,f,p)}},function(g,b,t){var h=t(30);g.exports=function(n,s,l,e){var r=s._text,o=r.length,a=n.currentContext;if(0!==o&&h(n,a,s,l,e)){l.addToRenderList(s);var i,u=s.fromAtlas?s.frame:s.texture.frames.__BASE,c=s.fontData.chars,d=s.fontData.lineHeight,f=s._letterSpacing,p=0,v=0,m=null,T=0,y=0,x=0,w=0,E=0,S=0,A=null,_=0,C=u.source.image,M=u.cutX,P=u.cutY,L=s._fontSize/s.fontData.size,D=s._align,F=0,X=0,R=s.getTextBounds(!1);0<s.maxWidth&&(o=(r=R.wrappedText).length);var O=s._bounds.lines;1===D?X=(O.longest-O.lengths[0])/2:2===D&&(X=O.longest-O.lengths[0]),a.translate(-s.displayOriginX,-s.displayOriginY);for(var N,k=l.roundPixels,I=0;I<o;I++)10!==(i=r.charCodeAt(I))?(m=c[i])&&(T=M+m.x,y=P+m.y,w=m.height,E=m.xOffset+p,S=m.yOffset+v,null!==A&&(E+=void 0!==(N=m.kerning[_])?N:0),E*=L,S*=L,E+=X,p+=m.xAdvance+f,A=m,_=i,0!==(x=m.width)&&0!==w&&32!==i&&(k&&(E=Math.round(E),S=Math.round(S)),a.save(),a.translate(E,S),a.scale(L,L),a.drawImage(C,T,y,x,w,0,0,x,w),a.restore())):(F++,1===D?X=(O.longest-O.lengths[F])/2:2===D&&(X=O.longest-O.lengths[F]),p=0,v+=d,A=null);a.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1050),n=t(1051),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(25),n=t(12),s=new h;g.exports=function(l,e,r,o){var a=e.getRenderList();if(0!==a.length){var i=r.alpha*e.alpha;if(0!=i){r.addToRenderList(e);var u=l.pipelines.set(this.pipeline,e),c=r.scrollX*e.scrollFactorX,d=r.scrollY*e.scrollFactorY,f=s.copyFrom(r.matrix);o&&(f.multiplyWithOffset(o,-c,-d),d=c=0);var p=e.x-c,v=e.y-d,m=-1,T=r.roundPixels;l.pipelines.preBatch(e);for(var y=0;y<a.length;y++){var x,w,E,S,A,_,C,M,P,L,D,F,X=a[y],R=X.frame,O=X.alpha*i;0!=O&&(x=R.width,w=R.height,E=p+X.x+R.x,S=v+X.y+R.y,X.flipX&&(x*=-1,E+=R.width),X.flipY&&(w*=-1,S+=R.height),A=E+x,_=S+w,C=f.getX(E,S),M=f.getY(E,S),P=f.getX(A,_),L=f.getY(A,_),D=n.getTintAppendFloatAlpha(X.tint,O),R.sourceIndex!==m&&(F=u.setGameObject(e,R),m=R.sourceIndex),T&&(C=Math.round(C),M=Math.round(M),P=Math.round(P),L=Math.round(L)),u.batchQuad(e,C,M,C,L,P,L,P,M,R.u0,R.v0,R.u1,R.v1,D,D,D,D,!1,R.glTexture,F)&&(m=-1))}l.pipelines.postBatch(e)}}}},function(g,b){g.exports=function(t,h,n,s){var l=h.getRenderList();if(0!==l.length){var e=t.currentContext,r=n.alpha*h.alpha;if(0!=r){n.addToRenderList(h),e.globalCompositeOperation=t.blendModes[h.blendMode],e.imageSmoothingEnabled=!(!t.antialias||h.frame.source.scaleMode);var o=h.x-n.scrollX*h.scrollFactorX,a=h.y-n.scrollY*h.scrollFactorY;e.save(),s&&s.copyToContext(e);for(var i=n.roundPixels,u=0;u<l.length;u++){var c=l[u],d=c.flipX||c.flipY,f=c.frame,p=f.canvasData,v=f.x,m=f.y,T=1,y=1,x=c.alpha*r;0!=x&&(e.globalAlpha=x,d?(c.flipX&&(T=-1,v-=p.width),c.flipY&&(y=-1,m-=p.height),e.save(),e.translate(c.x+o,c.y+a),e.scale(T,y),e.drawImage(f.source.image,p.x,p.y,p.width,p.height,v,m,p.width,p.height),e.restore()):(i&&(v=Math.round(v),m=Math.round(m)),e.drawImage(f.source.image,p.x,p.y,p.width,p.height,v+c.x+o,m+c.y+a,p.width,p.height)))}e.restore()}}}},function(g,b,t){var h=t(1),n=t(1);h=t(1053),n=t(1054),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=function(t,h,n,s){n.addToRenderList(h);var l=h.list,e=l.length;if(0!==e){var r=h.localTransform;s?(r.loadIdentity(),r.multiply(s),r.translate(h.x,h.y),r.rotate(h.rotation),r.scale(h.scaleX,h.scaleY)):r.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY),t.pipelines.preBatch(h);var o=-1!==h.blendMode;o||t.setBlendMode(0);for(var a=h.alpha,i=h.scrollFactorX,u=h.scrollFactorY,c=0;c<e;c++){var d,f,p,v,m,T,y,x,w=l[c];w.willRender(n)&&(v=void 0!==w.alphaTopLeft?(d=w.alphaTopLeft,f=w.alphaTopRight,p=w.alphaBottomLeft,w.alphaBottomRight):p=f=d=w.alpha,m=w.scrollFactorX,T=w.scrollFactorY,o||w.blendMode===t.currentBlendMode||t.setBlendMode(w.blendMode),(y=w.mask)&&y.preRenderWebGL(t,w,n),(x=w.type)!==t.currentType&&(t.newType=!0,t.currentType=x),t.nextTypeMatch=c<e-1&&l[c+1].type===t.currentType,w.setScrollFactor(m*i,T*u),w.setAlpha(d*a,f*a,p*a,v*a),w.renderWebGL(t,w,n,r),w.setAlpha(d,f,p,v),w.setScrollFactor(m,T),y&&y.postRenderWebGL(t,n),t.newType=!1)}t.pipelines.postBatch(h)}}},function(g,b){g.exports=function(t,h,n,s){n.addToRenderList(h);var l=h.list;if(0!==l.length){var e=h.localTransform;s?(e.loadIdentity(),e.multiply(s),e.translate(h.x,h.y),e.rotate(h.rotation),e.scale(h.scaleX,h.scaleY)):e.applyITRS(h.x,h.y,h.rotation,h.scaleX,h.scaleY);var r=-1!==h.blendMode;r||t.setBlendMode(0);var o=h._alpha,a=h.scrollFactorX,i=h.scrollFactorY;h.mask&&h.mask.preRenderCanvas(t,null,n);for(var u=0;u<l.length;u++){var c,d,f,p=l[u];p.willRender(n)&&(c=p.alpha,d=p.scrollFactorX,f=p.scrollFactorY,r||p.blendMode===t.currentBlendMode||t.setBlendMode(p.blendMode),p.setScrollFactor(d*a,f*i),p.setAlpha(c*o),p.renderCanvas(t,p,n,e),p.setAlpha(c),p.setScrollFactor(d,f))}h.mask&&h.mask.postRenderCanvas(t)}}},function(g,b,t){var h=t(1),n=t(1);h=t(443),n=t(443),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=["normal","multiply","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]},function(g,b,t){var h=t(1),n=t(1);h=t(1058),n=t(1059),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(25),s=t(12),l=new n;g.exports=function(e,r,o,a){var i=r.text,u=i.length;if(0!==u){o.addToRenderList(r);var c=e.pipelines.set(r.pipeline,r),d=h(r,o,a),f=d.sprite,p=d.calc,v=l,m=0<r.cropWidth||0<r.cropHeight;m&&(c.flush(),e.pushScissor(p.tx,p.ty,r.cropWidth*p.scaleX,r.cropHeight*p.scaleY));var T,y,x,w,E=r.frame.glTexture,S=r.tintFill,A=s.getTintAppendFloatAlpha(r.tintTopLeft,o.alpha*r._alphaTL),_=s.getTintAppendFloatAlpha(r.tintTopRight,o.alpha*r._alphaTR),C=s.getTintAppendFloatAlpha(r.tintBottomLeft,o.alpha*r._alphaBL),M=s.getTintAppendFloatAlpha(r.tintBottomRight,o.alpha*r._alphaBR),P=c.setGameObject(r),L=0,D=0,F=0,X=r.letterSpacing,R=r.scrollX,O=r.scrollY,N=r.fontData,k=N.chars,I=N.lineHeight,B=r.fontSize/N.size,Y=0,U=r._align,G=0,W=0,z=r.getTextBounds(!1);0<r.maxWidth&&(u=(i=z.wrappedText).length);var V=r._bounds.lines;1===U?W=(V.longest-V.lengths[0])/2:2===U&&(W=V.longest-V.lengths[0]);var H=o.roundPixels,j=r.displayCallback,q=r.callbackData;e.pipelines.preBatch(r);for(var Q,Z,J,K,tt,et,st,it,$,at,nt,ht,ot,lt,rt,dt,ut,ft=0;ft<u;ft++)10!==(T=i.charCodeAt(ft))?(ut=k[T])&&(x=ut.height,J=ut.xOffset+L-R,K=ut.yOffset+D-O,null!==w&&(J+=void 0!==(Q=ut.kerning[F])?Q:0),L+=ut.xAdvance+X,w=ut,F=T,0!==(y=ut.width)&&0!==x&&32!==T&&(B=r.fontSize/r.fontData.size,Y=0,j&&(q.color=0,q.tint.topLeft=A,q.tint.topRight=_,q.tint.bottomLeft=C,q.tint.bottomRight=M,q.index=ft,q.charCode=T,q.x=J,q.y=K,q.scale=B,q.rotation=Y,q.data=ut.data,J=(Z=j(q)).x,K=Z.y,B=Z.scale,Y=Z.rotation,M=Z.color?(A=Z.color,_=Z.color,C=Z.color,Z.color):(A=Z.tint.topLeft,_=Z.tint.topRight,C=Z.tint.bottomLeft,Z.tint.bottomRight),A=s.getTintAppendFloatAlpha(A,o.alpha*r._alphaTL),_=s.getTintAppendFloatAlpha(_,o.alpha*r._alphaTR),C=s.getTintAppendFloatAlpha(C,o.alpha*r._alphaBL),M=s.getTintAppendFloatAlpha(M,o.alpha*r._alphaBR)),J*=B,K*=B,J-=r.displayOriginX,v.applyITRS(J+=W,K-=r.displayOriginY,Y,B,B),p.multiply(v,f),tt=ut.u0,et=ut.v0,st=ut.u1,it=ut.v1,$=f.e,at=f.f,nt=x*f.c+f.e,ht=x*f.d+f.f,ot=y*f.a+x*f.c+f.e,lt=y*f.b+x*f.d+f.f,rt=y*f.a+f.e,dt=y*f.b+f.f,H&&($=Math.round($),at=Math.round(at),nt=Math.round(nt),ht=Math.round(ht),ot=Math.round(ot),lt=Math.round(lt),rt=Math.round(rt),dt=Math.round(dt)),c.batchQuad(r,$,at,nt,ht,ot,lt,rt,dt,tt,et,st,it,A,_,C,M,S,E,P))):(G++,1===U?W=(V.longest-V.lengths[G])/2:2===U&&(W=V.longest-V.lengths[G]),L=0,D+=I,w=null);m&&(c.flush(),e.popScissor()),e.pipelines.postBatch(r)}}},function(g,b,t){var h=t(30);g.exports=function(n,s,l,e){var r=s._text,o=r.length,a=n.currentContext;if(0!==o&&h(n,a,s,l,e)){l.addToRenderList(s);var i,u=s.fromAtlas?s.frame:s.texture.frames.__BASE,c=s.displayCallback,d=s.callbackData,f=s.fontData.chars,p=s.fontData.lineHeight,v=s._letterSpacing,m=0,T=0,y=null,x=0,w=0,E=0,S=0,A=0,_=0,C=null,M=0,P=s.frame.source.image,L=u.cutX,D=u.cutY,F=0,X=0,R=s._fontSize/s.fontData.size,O=s._align,N=0,k=0;s.getTextBounds(!1);var I=s._bounds.lines;1===O?k=(I.longest-I.lengths[0])/2:2===O&&(k=I.longest-I.lengths[0]),a.translate(-s.displayOriginX,-s.displayOriginY);var B=l.roundPixels;0<s.cropWidth&&0<s.cropHeight&&(a.beginPath(),a.rect(0,0,s.cropWidth,s.cropHeight),a.clip());for(var Y,U,G=0;G<o;G++)X=R,F=0,10!==(i=r.charCodeAt(G))?(y=f[i])&&(x=L+y.x,w=D+y.y,E=y.width,S=y.height,A=y.xOffset+m-s.scrollX,_=y.yOffset+T-s.scrollY,null!==C&&(A+=void 0!==(Y=y.kerning[M])?Y:0),c&&(d.index=G,d.charCode=i,d.x=A,d.y=_,d.scale=X,d.rotation=F,d.data=y.data,A=(U=c(d)).x,_=U.y,X=U.scale,F=U.rotation),A*=X,_*=X,A+=k,m+=y.xAdvance+v,C=y,M=i,0!==E&&0!==S&&32!==i&&(B&&(A=Math.round(A),_=Math.round(_)),a.save(),a.translate(A,_),a.rotate(F),a.scale(X,X),a.drawImage(P,x,w,E,S,0,0,E,S),a.restore())):(N++,1===O?k=(I.longest-I.lengths[N])/2:2===O&&(k=I.longest-I.lengths[N]),m=0,T+=p,C=null);a.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1061),n=t(1062),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19);g.exports=function(n,s,l,e){n.pipelines.clear();var r=h(s,l,e).calc;s.render.call(s,n,l,r),n.pipelines.rebind()}},function(g,b){},function(g,b,t){var h=t(1),n=t(1);h=t(1064),t(448),n=t(448),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){function h(i,u,c){this.x=i,this.y=u,this.width=c}function n(i,u,c){this.points=[],this.pointsLength=1,this.points[0]=new h(i,u,c)}var s=t(217),l=t(19),e=t(25),r=t(12),o=[],a=new e;g.exports=function(i,u,c,d){if(0!==u.commandBuffer.length){c.addToRenderList(u);var f=i.pipelines.set(u.pipeline,u);i.pipelines.preBatch(u);for(var p=l(u,c,d).calc,v=a.loadIdentity(),m=u.commandBuffer,T=c.alpha*u.alpha,y=1,x=f.fillTint,w=f.strokeTint,E=0,S=0,A=0,_=2*Math.PI,C=[],M=0,P=!0,L=null,D=r.getTintAppendFloatAlpha,F=0;F<m.length;F++)switch(m[F]){case s.BEGIN_PATH:C.length=0,P=!(L=null);break;case s.CLOSE_PATH:P=!1,L&&L.points.length&&L.points.push(L.points[0]);break;case s.FILL_PATH:for(M=0;M<C.length;M++)f.batchFillPath(C[M].points,v,p);break;case s.STROKE_PATH:for(M=0;M<C.length;M++)f.batchStrokePath(C[M].points,y,P,v,p);break;case s.LINE_STYLE:y=m[++F];var X=D(m[++F],m[++F]*T);w.TL=X,w.TR=X,w.BL=X,w.BR=X;break;case s.FILL_STYLE:var R=D(m[++F],m[++F]*T);x.TL=R,x.TR=R,x.BL=R,x.BR=R;break;case s.GRADIENT_FILL_STYLE:var O=m[++F]*T,N=m[++F]*T,k=m[++F]*T,I=m[++F]*T;x.TL=D(m[++F],O),x.TR=D(m[++F],N),x.BL=D(m[++F],k),x.BR=D(m[++F],I);break;case s.GRADIENT_LINE_STYLE:y=m[++F];var B=m[++F]*T;w.TL=D(m[++F],B),w.TR=D(m[++F],B),w.BL=D(m[++F],B),w.BR=D(m[++F],B);break;case s.ARC:var Y=0,U=m[++F],G=m[++F],W=m[++F],z=m[++F],V=m[++F],H=m[++F],j=m[++F];for(V-=z,H?V<-_?V=-_:0<V&&(V=V%_-_):_<V?V=_:V<0&&(V=_+V%_),null===L&&(L=new n(U+Math.cos(z)*W,G+Math.sin(z)*W,y),C.push(L),Y+=.01);Y<1+j;)A=V*Y+z,E=U+Math.cos(A)*W,S=G+Math.sin(A)*W,L.points.push(new h(E,S,y)),Y+=.01;A=V+z,E=U+Math.cos(A)*W,S=G+Math.sin(A)*W,L.points.push(new h(E,S,y));break;case s.FILL_RECT:f.batchFillRect(m[++F],m[++F],m[++F],m[++F],v,p);break;case s.FILL_TRIANGLE:f.batchFillTriangle(m[++F],m[++F],m[++F],m[++F],m[++F],m[++F],v,p);break;case s.STROKE_TRIANGLE:f.batchStrokeTriangle(m[++F],m[++F],m[++F],m[++F],m[++F],m[++F],y,v,p);break;case s.LINE_TO:null!==L?L.points.push(new h(m[++F],m[++F],y)):(L=new n(m[++F],m[++F],y),C.push(L));break;case s.MOVE_TO:L=new n(m[++F],m[++F],y),C.push(L);break;case s.SAVE:o.push(v.copyToArray());break;case s.RESTORE:v.copyFromArray(o.pop());break;case s.TRANSLATE:U=m[++F],G=m[++F],v.translate(U,G);break;case s.SCALE:U=m[++F],G=m[++F],v.scale(U,G);break;case s.ROTATE:v.rotate(m[++F])}i.pipelines.postBatch(u)}}},function(g,b,t){var h=t(1),n=t(1);h=t(1066),n=t(1067),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=function(t,h,n,s){n.addToRenderList(h),h.pipeline.batchSprite(h,n,s)}},function(g,b){g.exports=function(t,h,n,s){n.addToRenderList(h),t.batchSprite(h,h.frame,n,s)}},function(g,b,t){var h=t(1),n=t(1);h=t(1069),n=t(1070),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=function(t,h,n,s){n.addToRenderList(h),this.pipeline.batchSprite(h,n,s)}},function(g,b){g.exports=function(t,h,n,s){n.addToRenderList(h),t.batchSprite(h,h.frame,n,s)}},function(g,b,t){var h=t(1),n=t(1);h=t(1072),n=t(1073),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=function(t,h,n){var s=h.list,l=s.length;if(0!==l){h.depthSort(),t.pipelines.preBatch(h);var e=-1!==h.blendMode;e||t.setBlendMode(0);for(var r=h.alpha,o=0;o<l;o++){var a,i,u,c,d,f,p=s[o];p.willRender(n)&&(c=void 0!==p.alphaTopLeft?(a=p.alphaTopLeft,i=p.alphaTopRight,u=p.alphaBottomLeft,p.alphaBottomRight):u=i=a=p.alpha,e||p.blendMode===t.currentBlendMode||t.setBlendMode(p.blendMode),(d=p.mask)&&d.preRenderWebGL(t,p,n),(f=p.type)!==t.currentType&&(t.newType=!0,t.currentType=f),t.nextTypeMatch=o<l-1&&s[o+1].type===t.currentType,p.setAlpha(a*r,i*r,u*r,c*r),p.renderWebGL(t,p,n),p.setAlpha(a,i,u,c),d&&d.postRenderWebGL(t,n),t.newType=!1)}t.pipelines.postBatch(h)}}},function(g,b){g.exports=function(t,h,n){var s=h.list;if(0!==s.length){h.depthSort();var l=-1!==h.blendMode;l||t.setBlendMode(0);var e=h._alpha;h.mask&&h.mask.preRenderCanvas(t,null,n);for(var r=0;r<s.length;r++){var o,a=s[r];a.willRender(n)&&(o=a.alpha,l||a.blendMode===t.currentBlendMode||t.setBlendMode(a.blendMode),a.setAlpha(o*e),a.renderCanvas(t,a,n),a.setAlpha(o))}h.mask&&h.mask.postRenderCanvas(t)}}},function(g,b,t){g.exports={EmitterOp:t(449),GravityWell:t(450),Particle:t(451),ParticleEmitter:t(452),ParticleEmitterManager:t(220),Zones:t(1078)}},function(g,b,t){var h=t(1),n=t(1);h=t(1076),n=t(1077),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(25),n=t(12),s=new h,l=new h,e=new h,r=new h;g.exports=function(o,a,i,u){var c=a.emitters.list,d=c.length;if(0!==d){var f=o.pipelines.set(a.pipeline),p=s,v=l,m=e,T=r;u?(T.loadIdentity(),T.multiply(u),T.translate(a.x,a.y),T.rotate(a.rotation),T.scale(a.scaleX,a.scaleY)):T.applyITRS(a.x,a.y,a.rotation,a.scaleX,a.scaleY);var y=i.roundPixels,x=a.defaultFrame.glTexture,w=n.getTintAppendFloatAlpha,E=f.setGameObject(a,a.defaultFrame);o.pipelines.preBatch(a);for(var S=0;S<d;S++){var A=c[S],_=A.alive,C=_.length;if(A.visible&&0!==C){i.addToRenderList(A);var M=A.scrollFactorX,P=A.scrollFactorY;o.setBlendMode(A.blendMode),A.mask&&(A.mask.preRenderWebGL(o,A,i),o.pipelines.set(a.pipeline));for(var L=0;L<C;L++){var D,F,X,R,O,N,k,I,B,Y,U,G,W,z,V=_[L],H=V.alpha*i.alpha;H<=0||(m.applyITRS(V.x,V.y,V.rotation,V.scaleX,V.scaleY),p.copyFrom(i.matrix),p.multiplyWithOffset(T,-i.scrollX*M,-i.scrollY*P),m.e=V.x,m.f=V.y,p.multiply(m,v),R=(F=-(D=V.frame).halfWidth)+D.width,O=(X=-D.halfHeight)+D.height,N=v.getXRound(F,X,y),k=v.getYRound(F,X,y),I=v.getXRound(F,O,y),B=v.getYRound(F,O,y),Y=v.getXRound(R,O,y),U=v.getYRound(R,O,y),G=v.getXRound(R,X,y),W=v.getYRound(R,X,y),z=w(V.tint,H),f.batchQuad(A,N,k,I,B,Y,U,G,W,D.u0,D.v0,D.u1,D.v1,z,z,z,z,0,x,E))}A.mask&&A.mask.postRenderWebGL(o,i)}}o.pipelines.postBatch(a)}}},function(g,b,t){var h=t(25),n=new h,s=new h,l=new h,e=new h;g.exports=function(r,o,a,i){var u=o.emitters.list,c=u.length;if(0!==c){var d=n.copyFrom(a.matrix),f=s,p=l,v=e;i?(v.loadIdentity(),v.multiply(i),v.translate(o.x,o.y),v.rotate(o.rotation),v.scale(o.scaleX,o.scaleY)):v.applyITRS(o.x,o.y,o.rotation,o.scaleX,o.scaleY);for(var m=r.currentContext,T=a.roundPixels,y=0;y<c;y++){var x=u[y],w=x.alive,E=w.length;if(x.visible&&0!==E){a.addToRenderList(x);var S=x.scrollFactorX,A=x.scrollFactorY;m.save(),m.globalCompositeOperation=r.blendModes[x.blendMode];for(var _=0;_<E;_++){var C,M,P,L,D=w[_],F=D.alpha*a.alpha;F<=0||(p.applyITRS(D.x,D.y,D.rotation,D.scaleX,D.scaleY),d.copyFrom(a.matrix),d.multiplyWithOffset(v,-a.scrollX*S,-a.scrollY*A),p.e=D.x,p.f=D.y,d.multiply(p,f),M=(C=D.frame).canvasData,P=-C.halfWidth,L=-C.halfHeight,m.globalAlpha=F,m.save(),f.setToContext(m),T&&(P=Math.round(P),L=Math.round(L)),m.imageSmoothingEnabled=!(!r.antialias||C.source.scaleMode),m.drawImage(C.source.image,M.x,M.y,M.width,M.height,P,L,M.width,M.height),m.restore())}m.restore()}}}}},function(g,b,t){g.exports={DeathZone:t(453),EdgeZone:t(454),RandomZone:t(456)}},function(g,b,t){var h=t(1),n=t(1);h=t(1080),n=t(1081),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(12);g.exports=function(n,s,l,e){l.addToRenderList(s);var r=l.alpha,o=s.renderTarget,a=o.width,i=o.height,u=h.getTintAppendFloatAlpha,c=n.pipelines.set(s.pipeline),d=c.setTexture2D(o.texture);n.pipelines.preBatch(s),c.batchTexture(s,o.texture,a,i,s.x,s.y,a,i,s.scaleX,s.scaleY,s.rotation,s.flipX,!s.flipY,s.scrollFactorX,s.scrollFactorY,s.displayOriginX,s.displayOriginY,0,0,a,i,u(s.tintTopLeft,r*s._alphaTL),u(s.tintTopRight,r*s._alphaTR),u(s.tintBottomLeft,r*s._alphaBL),u(s.tintBottomRight,r*s._alphaBR),s.tintFill,0,0,l,e,!0,d),n.resetTextures(),n.pipelines.postBatch(s)}},function(g,b){g.exports=function(t,h,n,s){n.addToRenderList(h),t.batchSprite(h,h.frame,n,s)}},function(g,b,t){var h=t(1083),n=t(17)(!1,n={Parse:t(1084)},h);g.exports=n},function(g,b){g.exports={TEXT_SET1:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",TEXT_SET2:" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET3:"ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",TEXT_SET4:"ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",TEXT_SET5:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",TEXT_SET6:"ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",TEXT_SET7:"AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",TEXT_SET8:"0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET9:"ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",TEXT_SET10:"ABCDEFGHIJKLMNOPQRSTUVWXYZ",TEXT_SET11:"ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789"}},function(g,b,t){var h=t(6);g.exports=function(n,s){var l=s.width,e=s.height,r=Math.floor(l/2),o=Math.floor(e/2),a=h(s,"chars","");if(""!==a){var i=h(s,"image",""),u=n.sys.textures.getFrame(i),c=u.cutX,d=u.cutY,f=u.source.width,p=u.source.height,v=h(s,"offset.x",0),m=h(s,"offset.y",0),T=h(s,"spacing.x",0),y=h(s,"spacing.y",0),x=h(s,"lineSpacing",0),w=h(s,"charsPerRow",null);null===w&&(w=f/l)>a.length&&(w=a.length);for(var E=v,S=m,A={retroFont:!0,font:i,size:l,lineHeight:e+x,chars:{}},_=0,C=0;C<a.length;C++){var M=a.charCodeAt(C);A.chars[M]={x:E,y:S,width:l,height:e,centerX:r,centerY:o,xOffset:0,yOffset:0,xAdvance:l,data:{},kerning:{},u0:(c+E)/f,v0:(d+S)/p,u1:(c+E+l)/f,v1:(d+S+e)/p},++_===w?(_=0,E=v,S+=e+y):E+=l+T}return{data:A,frame:null,texture:i}}}},function(g,b,t){var h=t(1),n=t(1);h=t(1086),n=t(1087),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(12);g.exports=function(s,l,e,r){e.addToRenderList(l);var o=s.pipelines.set(l.pipeline,l),a=h(l,e,r).calc,i=l.vertices,u=l.uv,c=l.colors,d=l.alphas,f=l.alpha,p=n.getTintAppendFloatAlpha,v=e.roundPixels,m=i.length,T=Math.floor(.5*m);o.flush(),s.pipelines.preBatch(l);var y=o.setGameObject(l),x=o.vertexViewF32,w=o.vertexViewU32,E=o.vertexCount*o.currentShader.vertexComponentCount-1,S=0,A=l.tintFill;l.dirty&&l.updateVertices();for(var _=l.debugCallback,C=[],M=0;M<m;M+=2){var P=i[M+0],L=i[M+1],D=P*a.a+L*a.c+a.e,F=P*a.b+L*a.d+a.f;v&&(D=Math.round(D),F=Math.round(F)),x[++E]=D,x[++E]=F,x[++E]=u[M+0],x[++E]=u[M+1],x[++E]=y,x[++E]=A,w[++E]=p(c[S],e.alpha*(d[S]*f)),S++,_&&(C[M+0]=D,C[M+1]=F)}_&&_.call(l,l,m,C),o.vertexCount+=T,s.pipelines.postBatch(l)}},function(g,b){g.exports=function(){}},function(g,b,t){var h=t(1),n=t(1);h=t(1089),n=t(1090),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(12);g.exports=function(n,s,l,e){var r,o,a,i,u,c;0!==s.width&&0!==s.height&&(l.addToRenderList(s),o=(r=s.frame).width,a=r.height,i=h.getTintAppendFloatAlpha,c=(u=n.pipelines.set(s.pipeline,s)).setTexture2D(r.glTexture,s),n.pipelines.preBatch(s),u.batchTexture(s,r.glTexture,o,a,s.x,s.y,o/s.style.resolution,a/s.style.resolution,s.scaleX,s.scaleY,s.rotation,s.flipX,s.flipY,s.scrollFactorX,s.scrollFactorY,s.displayOriginX,s.displayOriginY,0,0,o,a,i(s.tintTopLeft,l.alpha*s._alphaTL),i(s.tintTopRight,l.alpha*s._alphaTR),i(s.tintBottomLeft,l.alpha*s._alphaBL),i(s.tintBottomRight,l.alpha*s._alphaBR),s.tintFill,0,0,l,e,!1,c),n.pipelines.postBatch(s))}},function(g,b){g.exports=function(t,h,n,s){0!==h.width&&0!==h.height&&(n.addToRenderList(h),t.batchSprite(h,h.frame,n,s))}},function(g,b,t){var h=t(1),n=t(1);h=t(1092),n=t(1093),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(12);g.exports=function(n,s,l,e){s.updateCanvas();var r,o,a,i=s.width,u=s.height;0!==i&&0!==u&&(l.addToRenderList(s),n.pipelines.preBatch(s),r=h.getTintAppendFloatAlpha,a=(o=n.pipelines.set(s.pipeline,s)).setTexture2D(s.fillPattern,s),o.batchTexture(s,s.fillPattern,s.displayFrame.width*s.tileScaleX,s.displayFrame.height*s.tileScaleY,s.x,s.y,i,u,s.scaleX,s.scaleY,s.rotation,s.flipX,s.flipY,s.scrollFactorX,s.scrollFactorY,s.originX*i,s.originY*u,0,0,i,u,r(s.tintTopLeft,l.alpha*s._alphaTL),r(s.tintTopRight,l.alpha*s._alphaTR),r(s.tintBottomLeft,l.alpha*s._alphaBL),r(s.tintBottomRight,l.alpha*s._alphaBR),s.tintFill,s.tilePositionX%s.displayFrame.width/s.displayFrame.width,s.tilePositionY%s.displayFrame.height/s.displayFrame.height,l,e,!1,a),n.pipelines.postBatch(s))}},function(g,b){g.exports=function(t,h,n,s){h.updateCanvas(),n.addToRenderList(h),t.batchSprite(h,h.frame,n,s)}},function(g,b,t){var h=t(1),n=t(1);h=t(1095),n=t(1096),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b){g.exports=function(t,h,n,s){h.videoTexture&&(n.addToRenderList(h),h.pipeline.batchSprite(h,n,s))}},function(g,b){g.exports=function(t,h,n,s){h.videoTexture&&(n.addToRenderList(h),t.batchSprite(h,h.frame,n,s))}},function(g,b,t){var h=t(1),n=t(1);h=t(1098),n=t(1099),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(114),s=t(81);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.pipelines.set(e.pipeline),i=h(e,r,o),u=a.calcMatrix.copyFrom(i.calc),c=e._displayOriginX,d=e._displayOriginY,f=r.alpha*e.alpha;l.pipelines.preBatch(e),e.isFilled&&n(a,u,e,f,c,d),e.isStroked&&s(a,e,f,c,d),l.pipelines.postBatch(e)}},function(g,b,t){var h=t(36),n=t(48),s=t(60),l=t(30);g.exports=function(e,r,o,a){o.addToRenderList(r);var i,u=e.currentContext;l(e,u,r,o,a)&&(i=r.radius,u.beginPath(),u.arc(i-r.originX*(2*i),i-r.originY*(2*i),i,h(r._startAngle),h(r._endAngle),r.anticlockwise),r.closePath&&u.closePath(),r.isFilled&&(n(u,r),u.fill()),r.isStroked&&(s(u,r),u.stroke()),u.restore())}},function(g,b,t){var h=t(1),n=t(1);h=t(1101),n=t(1102),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(114),n=t(19),s=t(81);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.pipelines.set(e.pipeline),i=n(e,r,o),u=a.calcMatrix.copyFrom(i.calc),c=e._displayOriginX+e._curveBounds.x,d=e._displayOriginY+e._curveBounds.y,f=r.alpha*e.alpha;l.pipelines.preBatch(e),e.isFilled&&h(a,u,e,f,c,d),e.isStroked&&s(a,e,f,c,d),l.pipelines.postBatch(e)}},function(g,b,t){var h=t(48),n=t(60),s=t(30);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.currentContext;if(s(l,a,e,r,o)){var i=e._displayOriginX+e._curveBounds.x,u=e._displayOriginY+e._curveBounds.y,c=e.pathData,d=c.length-1,f=c[0]-i,p=c[1]-u;a.beginPath(),a.moveTo(f,p),e.closePath||(d-=2);for(var v=2;v<d;v+=2)a.lineTo(c[v]-i,c[v+1]-u);e.closePath&&a.closePath(),e.isFilled&&(h(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1104),n=t(1105),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(114),n=t(19),s=t(81);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.pipelines.set(e.pipeline),i=n(e,r,o),u=a.calcMatrix.copyFrom(i.calc),c=e._displayOriginX,d=e._displayOriginY,f=r.alpha*e.alpha;l.pipelines.preBatch(e),e.isFilled&&h(a,u,e,f,c,d),e.isStroked&&s(a,e,f,c,d),l.pipelines.postBatch(e)}},function(g,b,t){var h=t(48),n=t(60),s=t(30);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.currentContext;if(s(l,a,e,r,o)){var i=e._displayOriginX,u=e._displayOriginY,c=e.pathData,d=c.length-1,f=c[0]-i,p=c[1]-u;a.beginPath(),a.moveTo(f,p),e.closePath||(d-=2);for(var v=2;v<d;v+=2)a.lineTo(c[v]-i,c[v+1]-u);a.closePath(),e.isFilled&&(h(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1107),n=t(1108),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(12);g.exports=function(s,l,e,r){e.addToRenderList(l);var o=s.pipelines.set(l.pipeline),a=h(l,e,r);o.calcMatrix.copyFrom(a.calc).translate(-l._displayOriginX,-l._displayOriginY);var i,u,c=e.alpha*l.alpha,d=l.width,f=l.height,p=l.cellWidth,v=l.cellHeight,m=Math.ceil(d/p),T=Math.ceil(f/v),y=p,x=v,w=p-(m*p-d),E=v-(T*v-f),S=l.showCells,A=l.showAltCells,_=l.showOutline,C=0,M=0,P=0;if(_&&(y--,x--,w===p&&w--,E===v&&E--),s.pipelines.preBatch(l),S&&0<l.fillAlpha)for(i=o.fillTint,u=n.getTintAppendFloatAlpha(l.fillColor,l.fillAlpha*c),i.TL=u,i.TR=u,i.BL=u,i.BR=u,M=0;M<T;M++)for(A&&(P=M%2),C=0;C<m;C++)A&&P?P=0:(P++,o.batchFillRect(C*p,M*v,C<m-1?y:w,M<T-1?x:E));if(A&&0<l.altFillAlpha)for(i=o.fillTint,u=n.getTintAppendFloatAlpha(l.altFillColor,l.altFillAlpha*c),i.TL=u,i.TR=u,i.BL=u,i.BR=u,M=0;M<T;M++)for(A&&(P=M%2),C=0;C<m;C++)!A||P?(P=0,o.batchFillRect(C*p,M*v,C<m-1?y:w,M<T-1?x:E)):P=1;if(_&&0<l.outlineFillAlpha){var F=o.strokeTint,X=n.getTintAppendFloatAlpha(l.outlineFillColor,l.outlineFillAlpha*c);for(F.TL=X,F.TR=X,F.BL=X,F.BR=X,C=1;C<m;C++){var R=C*p;o.batchLine(R,0,R,f,1,1,1,0,!1)}for(M=1;M<T;M++){var O=M*v;o.batchLine(0,O,d,O,1,1,1,0,!1)}}s.pipelines.postBatch(l)}},function(g,b,t){var h=t(48),n=t(60),s=t(30);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.currentContext;if(s(l,a,e,r,o)){var i=-e._displayOriginX,u=-e._displayOriginY,c=r.alpha*e.alpha,d=e.width,f=e.height,p=e.cellWidth,v=e.cellHeight,m=Math.ceil(d/p),T=Math.ceil(f/v),y=p,x=v,w=p-(m*p-d),E=v-(T*v-f),A=e.showAltCells,_=e.showOutline,C=0,M=0,P=0;if(_&&(y--,x--,w===p&&w--,E===v&&E--),e.showCells&&0<e.fillAlpha)for(h(a,e),M=0;M<T;M++)for(A&&(P=M%2),C=0;C<m;C++)A&&P?P=0:(P++,a.fillRect(i+C*p,u+M*v,C<m-1?y:w,M<T-1?x:E));if(A&&0<e.altFillAlpha)for(h(a,e,e.altFillColor,e.altFillAlpha*c),M=0;M<T;M++)for(A&&(P=M%2),C=0;C<m;C++)!A||P?(P=0,a.fillRect(i+C*p,u+M*v,C<m-1?y:w,M<T-1?x:E)):P=1;if(_&&0<e.outlineFillAlpha){for(n(a,e,e.outlineFillColor,e.outlineFillAlpha*c),C=1;C<m;C++){var F=C*p;a.beginPath(),a.moveTo(F+i,u),a.lineTo(F+i,f+u),a.stroke()}for(M=1;M<T;M++){var X=M*v;a.beginPath(),a.moveTo(i,X+u),a.lineTo(i+d,X+u),a.stroke()}}a.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1110),n=t(1111),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(12);g.exports=function(s,l,e,r){e.addToRenderList(l);var o,a,i,u,c,d,f,p,v,m=s.pipelines.set(l.pipeline),T=h(l,e,r),y=m.calcMatrix.copyFrom(T.calc),x=l.width,w=l.height,E=x/2,S=x/l.projection,A=e.alpha*l.alpha;l.isFilled&&(s.pipelines.preBatch(l),l.showTop&&(o=n.getTintAppendFloatAlpha(l.fillTop,A),a=y.getX(-E,-w),i=y.getY(-E,-w),u=y.getX(0,-S-w),c=y.getY(0,-S-w),d=y.getX(E,-w),f=y.getY(E,-w),p=y.getX(0,S-w),v=y.getY(0,S-w),m.batchQuad(l,a,i,u,c,d,f,p,v,0,0,1,1,o,o,o,o,2)),l.showLeft&&(o=n.getTintAppendFloatAlpha(l.fillLeft,A),a=y.getX(-E,0),i=y.getY(-E,0),u=y.getX(0,S),c=y.getY(0,S),d=y.getX(0,S-w),f=y.getY(0,S-w),p=y.getX(-E,-w),v=y.getY(-E,-w),m.batchQuad(l,a,i,u,c,d,f,p,v,0,0,1,1,o,o,o,o,2)),l.showRight&&(o=n.getTintAppendFloatAlpha(l.fillRight,A),a=y.getX(E,0),i=y.getY(E,0),u=y.getX(0,S),c=y.getY(0,S),d=y.getX(0,S-w),f=y.getY(0,S-w),p=y.getX(E,-w),v=y.getY(E,-w),m.batchQuad(l,a,i,u,c,d,f,p,v,0,0,1,1,o,o,o,o,2)),s.pipelines.postBatch(l))}},function(g,b,t){var h=t(48),n=t(30);g.exports=function(s,l,e,r){e.addToRenderList(l);var o,a,i,u,c=s.currentContext;n(s,c,l,e,r)&&l.isFilled&&(a=l.height,i=(o=l.width)/2,u=o/l.projection,l.showTop&&(h(c,l,l.fillTop),c.beginPath(),c.moveTo(-i,-a),c.lineTo(0,-u-a),c.lineTo(i,-a),c.lineTo(i,-1),c.lineTo(0,u-1),c.lineTo(-i,-1),c.lineTo(-i,-a),c.fill()),l.showLeft&&(h(c,l,l.fillLeft),c.beginPath(),c.moveTo(-i,0),c.lineTo(0,u),c.lineTo(0,u-a),c.lineTo(-i,-a),c.lineTo(-i,0),c.fill()),l.showRight&&(h(c,l,l.fillRight),c.beginPath(),c.moveTo(i,0),c.lineTo(0,u),c.lineTo(0,u-a),c.lineTo(i,-a),c.lineTo(i,0),c.fill()),c.restore())}},function(g,b,t){var h=t(1),n=t(1);h=t(1113),n=t(1114),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(12);g.exports=function(s,l,e,r){e.addToRenderList(l);var o,a,i,u,c,d,f,p,v,m=s.pipelines.set(l.pipeline),T=h(l,e,r),y=m.calcMatrix.copyFrom(T.calc),x=l.width,w=l.height,E=x/2,S=x/l.projection,A=l.isReversed,_=e.alpha*l.alpha;l.isFilled&&(s.pipelines.preBatch(l),l.showTop&&A&&(o=n.getTintAppendFloatAlpha(l.fillTop,_),a=y.getX(-E,-w),i=y.getY(-E,-w),u=y.getX(0,-S-w),c=y.getY(0,-S-w),d=y.getX(E,-w),f=y.getY(E,-w),p=y.getX(0,S-w),v=y.getY(0,S-w),m.batchQuad(l,a,i,u,c,d,f,p,v,0,0,1,1,o,o,o,o,2)),l.showLeft&&(o=n.getTintAppendFloatAlpha(l.fillLeft,_),i=A?(a=y.getX(-E,-w),y.getY(-E,-w)):(a=y.getX(-E,0),y.getY(-E,0)),u=y.getX(0,S),c=y.getY(0,S),d=y.getX(0,S-w),f=y.getY(0,S-w),m.batchTri(l,a,i,u,c,d,f,0,0,1,1,o,o,o,2)),l.showRight&&(o=n.getTintAppendFloatAlpha(l.fillRight,_),i=A?(a=y.getX(E,-w),y.getY(E,-w)):(a=y.getX(E,0),y.getY(E,0)),u=y.getX(0,S),c=y.getY(0,S),d=y.getX(0,S-w),f=y.getY(0,S-w),m.batchTri(l,a,i,u,c,d,f,0,0,1,1,o,o,o,2)),s.pipelines.postBatch(l))}},function(g,b,t){var h=t(48),n=t(30);g.exports=function(s,l,e,r){e.addToRenderList(l);var o,a,i,u,c,d=s.currentContext;n(s,d,l,e,r)&&l.isFilled&&(a=l.height,i=(o=l.width)/2,u=o/l.projection,c=l.isReversed,l.showTop&&c&&(h(d,l,l.fillTop),d.beginPath(),d.moveTo(-i,-a),d.lineTo(0,-u-a),d.lineTo(i,-a),d.lineTo(0,u-a),d.fill()),l.showLeft&&(h(d,l,l.fillLeft),d.beginPath(),d.moveTo(-i,c?-a:0),d.lineTo(0,u),d.lineTo(0,u-a),d.fill()),l.showRight&&(h(d,l,l.fillRight),d.beginPath(),d.moveTo(i,c?-a:0),d.lineTo(0,u),d.lineTo(0,u-a),d.fill()),d.restore())}},function(g,b,t){var h=t(1),n=t(1);h=t(1116),n=t(1117),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(12);g.exports=function(s,l,e,r){e.addToRenderList(l);var o=s.pipelines.set(l.pipeline),a=h(l,e,r);o.calcMatrix.copyFrom(a.calc);var i,u,f=l._displayOriginX,p=l._displayOriginY,v=e.alpha*l.alpha;s.pipelines.preBatch(l),l.isStroked&&(i=o.strokeTint,u=n.getTintAppendFloatAlpha(l.strokeColor,l.strokeAlpha*v),i.TL=u,i.TR=u,i.BL=u,i.BR=u,o.batchLine(l.geom.x1-f,l.geom.y1-p,l.geom.x2-f,l.geom.y2-p,l._startWidth,l._endWidth,1,0,!1,a.sprite,a.camera)),s.pipelines.postBatch(l)}},function(g,b,t){var h=t(60),n=t(30);g.exports=function(s,l,e,r){e.addToRenderList(l);var o,a,i=s.currentContext;n(s,i,l,e,r)&&(o=l._displayOriginX,a=l._displayOriginY,l.isStroked&&(h(i,l),i.beginPath(),i.moveTo(l.geom.x1-o,l.geom.y1-a),i.lineTo(l.geom.x2-o,l.geom.y2-a),i.stroke()),i.restore())}},function(g,b,t){var h=t(1),n=t(1);h=t(1119),n=t(1120),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(114),n=t(19),s=t(81);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.pipelines.set(e.pipeline),i=n(e,r,o),u=a.calcMatrix.copyFrom(i.calc),c=e._displayOriginX,d=e._displayOriginY,f=r.alpha*e.alpha;l.pipelines.preBatch(e),e.isFilled&&h(a,u,e,f,c,d),e.isStroked&&s(a,e,f,c,d),l.pipelines.postBatch(e)}},function(g,b,t){var h=t(48),n=t(60),s=t(30);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.currentContext;if(s(l,a,e,r,o)){var i=e._displayOriginX,u=e._displayOriginY,c=e.pathData,d=c.length-1,f=c[0]-i,p=c[1]-u;a.beginPath(),a.moveTo(f,p),e.closePath||(d-=2);for(var v=2;v<d;v+=2)a.lineTo(c[v]-i,c[v+1]-u);a.closePath(),e.isFilled&&(h(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1122),n=t(1123),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(81),s=t(12);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.pipelines.set(e.pipeline),i=h(e,r,o);a.calcMatrix.copyFrom(i.calc);var u,c,d=e._displayOriginX,f=e._displayOriginY,p=r.alpha*e.alpha;l.pipelines.preBatch(e),e.isFilled&&(u=a.fillTint,c=s.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*p),u.TL=c,u.TR=c,u.BL=c,u.BR=c,a.batchFillRect(-d,-f,e.width,e.height)),e.isStroked&&n(a,e,p,d,f),l.pipelines.postBatch(e)}},function(g,b,t){var h=t(48),n=t(60),s=t(30);g.exports=function(l,e,r,o){r.addToRenderList(e);var a,i,u=l.currentContext;s(l,u,e,r,o)&&(a=e._displayOriginX,i=e._displayOriginY,e.isFilled&&(h(u,e),u.fillRect(-a,-i,e.width,e.height)),e.isStroked&&(n(u,e),u.beginPath(),u.rect(-a,-i,e.width,e.height),u.stroke()),u.restore())}},function(g,b,t){var h=t(1),n=t(1);h=t(1125),n=t(1126),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(114),n=t(19),s=t(81);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.pipelines.set(e.pipeline),i=n(e,r,o),u=a.calcMatrix.copyFrom(i.calc),c=e._displayOriginX,d=e._displayOriginY,f=r.alpha*e.alpha;l.pipelines.preBatch(e),e.isFilled&&h(a,u,e,f,c,d),e.isStroked&&s(a,e,f,c,d),l.pipelines.postBatch(e)}},function(g,b,t){var h=t(48),n=t(60),s=t(30);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.currentContext;if(s(l,a,e,r,o)){var i=e._displayOriginX,u=e._displayOriginY,c=e.pathData,d=c.length-1,f=c[0]-i,p=c[1]-u;a.beginPath(),a.moveTo(f,p),e.closePath||(d-=2);for(var v=2;v<d;v+=2)a.lineTo(c[v]-i,c[v+1]-u);a.closePath(),e.isFilled&&(h(a,e),a.fill()),e.isStroked&&(n(a,e),a.stroke()),a.restore()}}},function(g,b,t){var h=t(1),n=t(1);h=t(1128),n=t(1129),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19),n=t(81),s=t(12);g.exports=function(l,e,r,o){r.addToRenderList(e);var a=l.pipelines.set(e.pipeline),i=h(e,r,o);a.calcMatrix.copyFrom(i.calc);var u,c,y=e._displayOriginX,x=e._displayOriginY,w=r.alpha*e.alpha;l.pipelines.preBatch(e),e.isFilled&&(u=a.fillTint,c=s.getTintAppendFloatAlpha(e.fillColor,e.fillAlpha*w),u.TL=c,u.TR=c,u.BL=c,u.BR=c,a.batchFillTriangle(e.geom.x1-y,e.geom.y1-x,e.geom.x2-y,e.geom.y2-x,e.geom.x3-y,e.geom.y3-x,i.sprite,i.camera)),e.isStroked&&n(a,e,w,y,x),l.pipelines.postBatch(e)}},function(g,b,t){var h=t(48),n=t(60),s=t(30);g.exports=function(l,e,r,o){r.addToRenderList(e);var a,i,u,c,d,f,p,v,m=l.currentContext;s(l,m,e,r,o)&&(u=e.geom.x1-(a=e._displayOriginX),c=e.geom.y1-(i=e._displayOriginY),d=e.geom.x2-a,f=e.geom.y2-i,p=e.geom.x3-a,v=e.geom.y3-i,m.beginPath(),m.moveTo(u,c),m.lineTo(d,f),m.lineTo(p,v),m.closePath(),e.isFilled&&(h(m,e),m.fill()),e.isStroked&&(n(m,e),m.stroke()),m.restore())}},function(g,b,t){var h=t(213);t(5).register("blitter",function(n,s,l,e){return this.displayList.add(new h(this.scene,n,s,l,e))})},function(g,b,t){var h=t(214);t(5).register("container",function(n,s,l){return this.displayList.add(new h(this.scene,n,s,l))})},function(g,b,t){var h=t(442);t(5).register("dom",function(n,s,l,e,r){var o=new h(this.scene,n,s,l,e,r);return this.displayList.add(o),o})},function(g,b,t){var h=t(215);t(5).register("dynamicBitmapText",function(n,s,l,e,r){return this.displayList.add(new h(this.scene,n,s,l,e,r))})},function(g,b,t){var h=t(444);t(5).register("extern",function(){var n=new h(this.scene);return this.displayList.add(n),n})},function(g,b,t){var h=t(216);t(5).register("graphics",function(n){return this.displayList.add(new h(this.scene,n))})},function(g,b,t){var h=t(113);t(5).register("group",function(n,s){return this.updateList.add(new h(this.scene,n,s))})},function(g,b,t){var h=t(125);t(5).register("image",function(n,s,l,e){return this.displayList.add(new h(this.scene,n,s,l,e))})},function(g,b,t){var h=t(219);t(5).register("layer",function(n){return this.displayList.add(new h(this.scene,n))})},function(g,b,t){var h=t(5),n=t(220);h.register("particles",function(s,l,e){return this.displayList.add(new n(this.scene,s,l,e))})},function(g,b,t){var h=t(5),n=t(457);h.register("follower",function(s,l,e,r,o){var a=new n(this.scene,s,l,e,r,o);return this.displayList.add(a),this.updateList.add(a),a})},function(g,b,t){var h=t(5),n=t(221);h.register("renderTexture",function(s,l,e,r,o,a){return this.displayList.add(new n(this.scene,s,l,e,r,o,a))})},function(g,b,t){var h=t(223);t(5).register("rope",function(n,s,l,e,r,o,a,i){return this.displayList.add(new h(this.scene,n,s,l,e,r,o,a,i))})},function(g,b,t){var h=t(5),n=t(73);h.register("sprite",function(s,l,e,r){var o=new n(this.scene,s,l,e,r);return this.displayList.add(o),o})},function(g,b,t){var h=t(148);t(5).register("bitmapText",function(n,s,l,e,r,o){return this.displayList.add(new h(this.scene,n,s,l,e,r,o))})},function(g,b,t){var h=t(224);t(5).register("text",function(n,s,l,e){return this.displayList.add(new h(this.scene,n,s,l,e))})},function(g,b,t){var h=t(225);t(5).register("tileSprite",function(n,s,l,e,r,o){return this.displayList.add(new h(this.scene,n,s,l,e,r,o))})},function(g,b,t){var h=t(129);t(5).register("zone",function(n,s,l,e){return this.displayList.add(new h(this.scene,n,s,l,e))})},function(g,b,t){var h=t(226);t(5).register("video",function(n,s,l){return this.displayList.add(new h(this.scene,n,s,l))})},function(g,b,t){var h=t(461),n=t(5);n.register("arc",function(s,l,e,r,o,a,i,u){return this.displayList.add(new h(this.scene,s,l,e,r,o,a,i,u))}),n.register("circle",function(s,l,e,r,o){return this.displayList.add(new h(this.scene,s,l,e,0,360,!1,r,o))})},function(g,b,t){var h=t(5),n=t(462);h.register("curve",function(s,l,e,r,o){return this.displayList.add(new n(this.scene,s,l,e,r,o))})},function(g,b,t){var h=t(463);t(5).register("ellipse",function(n,s,l,e,r,o){return this.displayList.add(new h(this.scene,n,s,l,e,r,o))})},function(g,b,t){var h=t(5),n=t(464);h.register("grid",function(s,l,e,r,o,a,i,u,c,d){return this.displayList.add(new n(this.scene,s,l,e,r,o,a,i,u,c,d))})},function(g,b,t){var h=t(5),n=t(465);h.register("isobox",function(s,l,e,r,o,a,i){return this.displayList.add(new n(this.scene,s,l,e,r,o,a,i))})},function(g,b,t){var h=t(5),n=t(466);h.register("isotriangle",function(s,l,e,r,o,a,i,u){return this.displayList.add(new n(this.scene,s,l,e,r,o,a,i,u))})},function(g,b,t){var h=t(5),n=t(467);h.register("line",function(s,l,e,r,o,a,i,u){return this.displayList.add(new n(this.scene,s,l,e,r,o,a,i,u))})},function(g,b,t){var h=t(5),n=t(468);h.register("polygon",function(s,l,e,r,o){return this.displayList.add(new n(this.scene,s,l,e,r,o))})},function(g,b,t){var h=t(5),n=t(473);h.register("rectangle",function(s,l,e,r,o,a){return this.displayList.add(new n(this.scene,s,l,e,r,o,a))})},function(g,b,t){var h=t(474);t(5).register("star",function(n,s,l,e,r,o,a){return this.displayList.add(new h(this.scene,n,s,l,e,r,o,a))})},function(g,b,t){var h=t(5),n=t(475);h.register("triangle",function(s,l,e,r,o,a,i,u,c,d){return this.displayList.add(new n(this.scene,s,l,e,r,o,a,i,u,c,d))})},function(g,b,t){var h=t(213),n=t(28),s=t(16),l=t(13);s.register("blitter",function(e,r){void 0===e&&(e={});var o=l(e,"key",null),a=l(e,"frame",null),i=new h(this.scene,0,0,o,a);return void 0!==r&&(e.add=r),n(this.scene,i,e),i})},function(g,b,t){var h=t(28),n=t(214),s=t(16),l=t(13);s.register("container",function(e,r){void 0===e&&(e={});var o=l(e,"x",0),a=l(e,"y",0),i=l(e,"children",null),u=new n(this.scene,o,a,i);return void 0!==r&&(e.add=r),h(this.scene,u,e),u})},function(g,b,t){var h=t(215),n=t(28),s=t(16),l=t(13);s.register("dynamicBitmapText",function(e,r){void 0===e&&(e={});var o=l(e,"font",""),a=l(e,"text",""),i=l(e,"size",!1),u=new h(this.scene,0,0,o,a,i);return void 0!==r&&(e.add=r),n(this.scene,u,e),u})},function(g,b,t){var h=t(16),n=t(216);h.register("graphics",function(s,l){void 0===s&&(s={}),void 0!==l&&(s.add=l);var e=new n(this.scene,s);return s.add&&this.scene.sys.displayList.add(e),e})},function(g,b,t){var h=t(16),n=t(113);h.register("group",function(s){return new n(this.scene,null,s)})},function(g,b,t){var h=t(28),n=t(16),s=t(13),l=t(125);n.register("image",function(e,r){void 0===e&&(e={});var o=s(e,"key",null),a=s(e,"frame",null),i=new l(this.scene,0,0,o,a);return void 0!==r&&(e.add=r),h(this.scene,i,e),i})},function(g,b,t){var h=t(28),n=t(219),s=t(16),l=t(13);s.register("layer",function(e,r){void 0===e&&(e={});var o=l(e,"children",null),a=new n(this.scene,o);return void 0!==r&&(e.add=r),h(this.scene,a,e),a})},function(g,b,t){var h=t(16),n=t(13),s=t(2),l=t(220);h.register("particles",function(e,r){void 0===e&&(e={});var o=n(e,"key",null),a=n(e,"frame",null),i=s(e,"emitters",null),u=new l(this.scene,o,a,i);return void 0!==r&&(e.add=r),s(e,"add",!1)?this.displayList.add(u):this.updateList.add(u),u})},function(g,b,t){var h=t(28),n=t(16),s=t(13),l=t(221);n.register("renderTexture",function(e,r){void 0===e&&(e={});var o=s(e,"x",0),a=s(e,"y",0),i=s(e,"width",32),u=s(e,"height",32),c=s(e,"key",void 0),d=s(e,"frame",void 0),f=new l(this.scene,o,a,i,u,c,d);return void 0!==r&&(e.add=r),h(this.scene,f,e),f})},function(g,b,t){var h=t(28),n=t(16),s=t(13),l=t(6),e=t(223);n.register("rope",function(r,o){void 0===r&&(r={});var a=s(r,"key",null),i=s(r,"frame",null),u=s(r,"horizontal",!0),c=l(r,"points",void 0),d=l(r,"colors",void 0),f=l(r,"alphas",void 0),p=new e(this.scene,0,0,a,i,c,u,d,f);return void 0!==o&&(r.add=o),h(this.scene,p,r),r.add||this.updateList.add(p),p})},function(g,b,t){var h=t(28),n=t(439),s=t(16),l=t(13),e=t(73);s.register("sprite",function(r,o){void 0===r&&(r={});var a=l(r,"key",null),i=l(r,"frame",null),u=new e(this.scene,0,0,a,i);return void 0!==o&&(r.add=o),h(this.scene,u,r),n(u,r),u})},function(g,b,t){var h=t(148),n=t(28),s=t(16),l=t(13),e=t(6);s.register("bitmapText",function(r,o){void 0===r&&(r={});var a=e(r,"font",""),i=l(r,"text",""),u=l(r,"size",!1),c=e(r,"align",0),d=new h(this.scene,0,0,a,i,u,c);return void 0!==o&&(r.add=o),n(this.scene,d,r),d})},function(g,b,t){var h=t(28),n=t(16),s=t(13),l=t(224);n.register("text",function(e,r){void 0===e&&(e={});var o=s(e,"text",""),a=s(e,"style",null),i=s(e,"padding",null);null!==i&&(a.padding=i);var u=new l(this.scene,0,0,o,a);return void 0!==r&&(e.add=r),h(this.scene,u,e),u.autoRound=s(e,"autoRound",!0),u.resolution=s(e,"resolution",1),u})},function(g,b,t){var h=t(28),n=t(16),s=t(13),l=t(225);n.register("tileSprite",function(e,r){void 0===e&&(e={});var o=s(e,"x",0),a=s(e,"y",0),i=s(e,"width",512),u=s(e,"height",512),c=s(e,"key",""),d=s(e,"frame",""),f=new l(this.scene,o,a,i,u,c,d);return void 0!==r&&(e.add=r),h(this.scene,f,e),f})},function(g,b,t){var h=t(16),n=t(13),s=t(129);h.register("zone",function(l){var e=n(l,"x",0),r=n(l,"y",0),o=n(l,"width",1),a=n(l,"height",o);return new s(this.scene,e,r,o,a)})},function(g,b,t){var h=t(28),n=t(16),s=t(13),l=t(226);n.register("video",function(e,r){void 0===e&&(e={});var o=s(e,"key",null),a=new l(this.scene,0,0,o);return void 0!==r&&(e.add=r),h(this.scene,a,e),e.add||this.updateList.add(a),a})},function(g,b,t){var h=t(1),n=t(1);h=t(1177),n=t(1178),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19);g.exports=function(n,s,l,e){var r;s.shader&&(l.addToRenderList(s),n.pipelines.clear(),s.renderToTexture?s.load():(r=h(s,l,e).calc,n.width===s._rendererWidth&&n.height===s._rendererHeight||s.projOrtho(0,n.width,n.height,0),s.load(r.matrix)),s.flush(),n.pipelines.rebind())}},function(g,b){g.exports=function(){}},function(g,b,t){var h=t(1),n=t(1);h=t(1180),n=t(1181),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(19);g.exports=function(n,s,l,e){var r=s.faces,o=r.length;if(0!==o){l.addToRenderList(s);var a=n.pipelines.set(s.pipeline,s),i=h(s,l,e).calc,u=a.setGameObject(s),c=a.vertexViewF32,d=a.vertexViewU32,f=a.vertexCount*a.currentShader.vertexComponentCount-1,p=s.tintFill,v=[],m=s.debugCallback,T=i.a,y=i.b,x=i.c,w=i.d,E=i.e,S=i.f,A=s.viewPosition.z,_=s.hideCCW,C=l.roundPixels,M=l.alpha*s.alpha,P=0;n.pipelines.preBatch(s);for(var L=0;L<o;L++){var D=r[L];D.isInView(l,_,A,M,T,y,x,w,E,S,C)&&(a.shouldFlush(3)&&(a.flush(),f=0),f=D.load(c,d,f,u,p),P++,a.vertexCount+=3,m&&v.push(D))}s.totalFrame+=P,m&&m.call(s,s,v),n.pipelines.postBatch(s)}}},function(g,b){g.exports=function(){}},function(g,b,t){var n=t(1),h=t(1);n=t(1183),g.exports={renderWebGL:n,renderCanvas:h}},function(g,b,t){var h=t(19);g.exports=function(n,s,l,e){l.addToRenderList(s);var r=n.pipelines.set(s.pipeline),o=h(s,l,e).calc,u=-s._radius,c=-s._radius,d=u+s.width,f=c+s.height,p=o.getX(0,0),v=o.getY(0,0),m=o.getX(u,c),T=o.getY(u,c),y=o.getX(u,f),x=o.getY(u,f),w=o.getX(d,f),E=o.getY(d,f),S=o.getX(d,c),A=o.getY(d,c);n.pipelines.preBatch(s),r.batchPointLight(s,l,m,T,y,x,w,E,S,A,p,v),n.pipelines.postBatch(s)}},function(g,b,t){var h=t(229);t(5).register("shader",function(n,s,l,e,r,o,a){return this.displayList.add(new h(this.scene,n,s,l,e,r,o,a))})},function(g,b,t){var h=t(230);t(5).register("mesh",function(n,s,l,e,r,o,a,i,u,c,d){return this.displayList.add(new h(this.scene,n,s,l,e,r,o,a,i,u,c,d))})},function(g,b,t){var h=t(5),n=t(150);h.register("pointlight",function(s,l,e,r,o,a){return this.displayList.add(new n(this.scene,s,l,e,r,o,a))})},function(g,b,t){var h=t(28),n=t(16),s=t(13),l=t(229);n.register("shader",function(e,r){void 0===e&&(e={});var o=s(e,"key",null),a=s(e,"x",0),i=s(e,"y",0),u=s(e,"width",128),c=s(e,"height",128),d=new l(this.scene,o,a,i,u,c);return void 0!==r&&(e.add=r),h(this.scene,d,e),d})},function(g,b,t){var h=t(28),n=t(16),s=t(13),l=t(6),e=t(230);n.register("mesh",function(r,o){void 0===r&&(r={});var a=s(r,"key",null),i=s(r,"frame",null),u=l(r,"vertices",[]),c=l(r,"uvs",[]),d=l(r,"indicies",[]),f=l(r,"containsZ",!1),p=l(r,"normals",[]),v=l(r,"colors",16777215),m=l(r,"alphas",1),T=new e(this.scene,0,0,a,i,u,c,d,f,p,v,m);return void 0!==o&&(r.add=o),h(this.scene,T,r),T})},function(g,b,t){var h=t(28),n=t(16),s=t(13),l=t(150);n.register("pointlight",function(e,r){void 0===e&&(e={});var o=s(e,"color",16777215),a=s(e,"radius",128),i=s(e,"intensity",1),u=s(e,"attenuation",.1),c=new l(this.scene,0,0,o,a,i,u);return void 0!==r&&(e.add=r),h(this.scene,c,e),c})},function(g,b,t){var h=t(0),n=t(482),s=t(24),l=t(20),e=new h({Extends:n,initialize:function(r){this.scene=r,this.systems=r.sys,r.sys.settings.isBooted||r.sys.events.once(l.BOOT,this.boot,this),n.call(this)},boot:function(){var r=this.systems.events;r.on(l.SHUTDOWN,this.shutdown,this),r.on(l.DESTROY,this.destroy,this)},destroy:function(){this.shutdown(),this.scene=void 0,this.systems=void 0}});s.register("LightsPlugin",e,"lights"),g.exports=e},function(g,b,t){var h=t(65);h.Area=t(1192),h.Circumference=t(302),h.CircumferencePoint=t(169),h.Clone=t(1193),h.Contains=t(66),h.ContainsPoint=t(1194),h.ContainsRect=t(1195),h.CopyFrom=t(1196),h.Equals=t(1197),h.GetBounds=t(1198),h.GetPoint=t(300),h.GetPoints=t(301),h.Offset=t(1199),h.OffsetPoint=t(1200),h.Random=t(170),g.exports=h},function(g,b){g.exports=function(t){return 0<t.radius?Math.PI*t.radius*t.radius:0}},function(g,b,t){var h=t(65);g.exports=function(n){return new h(n.x,n.y,n.radius)}},function(g,b,t){var h=t(66);g.exports=function(n,s){return h(n,s.x,s.y)}},function(g,b,t){var h=t(66);g.exports=function(n,s){return h(n,s.x,s.y)&&h(n,s.right,s.y)&&h(n,s.x,s.bottom)&&h(n,s.right,s.bottom)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x,t.y,t.radius)}},function(g,b){g.exports=function(t,h){return t.x===h.x&&t.y===h.y&&t.radius===h.radius}},function(g,b,t){var h=t(10);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=n.left,s.y=n.top,s.width=n.diameter,s.height=n.diameter,s}},function(g,b){g.exports=function(t,h,n){return t.x+=h,t.y+=n,t}},function(g,b){g.exports=function(t,h){return t.x+=h.x,t.y+=h.y,t}},function(g,b,t){var h=t(111);h.Area=t(1202),h.Circumference=t(447),h.CircumferencePoint=t(218),h.Clone=t(1203),h.Contains=t(112),h.ContainsPoint=t(1204),h.ContainsRect=t(1205),h.CopyFrom=t(1206),h.Equals=t(1207),h.GetBounds=t(1208),h.GetPoint=t(445),h.GetPoints=t(446),h.Offset=t(1209),h.OffsetPoint=t(1210),h.Random=t(180),g.exports=h},function(g,b){g.exports=function(t){return t.isEmpty()?0:t.getMajorRadius()*t.getMinorRadius()*Math.PI}},function(g,b,t){var h=t(111);g.exports=function(n){return new h(n.x,n.y,n.width,n.height)}},function(g,b,t){var h=t(112);g.exports=function(n,s){return h(n,s.x,s.y)}},function(g,b,t){var h=t(112);g.exports=function(n,s){return h(n,s.x,s.y)&&h(n,s.right,s.y)&&h(n,s.x,s.bottom)&&h(n,s.right,s.bottom)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x,t.y,t.width,t.height)}},function(g,b){g.exports=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height}},function(g,b,t){var h=t(10);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=n.left,s.y=n.top,s.width=n.width,s.height=n.height,s}},function(g,b){g.exports=function(t,h,n){return t.x+=h,t.y+=n,t}},function(g,b){g.exports=function(t,h){return t.x+=h.x,t.y+=h.y,t}},function(g,b,t){var h=t(4),n=t(231);g.exports=function(s,l,e){var r,o,a,i,u,c,d,f,p,v,m,T;return void 0===e&&(e=[]),n(s,l)&&(r=s.x,a=s.radius,i=l.x,c=l.radius,(o=s.y)===(u=l.y)?0==(T=(m=-2*u)*m-4*(v=1)*(i*i+(d=(c*c-a*a-i*i+r*r)/(2*(r-i)))*d-2*i*d+u*u-c*c))?e.push(new h(d,-m/(2*v))):0<T&&(e.push(new h(d,(-m+Math.sqrt(T))/(2*v))),e.push(new h(d,(-m-Math.sqrt(T))/(2*v)))):0==(T=(m=2*o*(f=(r-i)/(o-u))-2*(p=(c*c-a*a-i*i+r*r-u*u+o*o)/(2*(o-u)))*f-2*r)*m-4*(v=f*f+1)*(r*r+o*o+p*p-a*a-2*o*p))?e.push(new h(d=-m/(2*v),p-d*f)):0<T&&(d=(-m+Math.sqrt(T))/(2*v),e.push(new h(d,p-d*f)),d=(-m-Math.sqrt(T))/(2*v),e.push(new h(d,p-d*f)))),e}},function(g,b,t){var h=t(232),n=t(151);g.exports=function(s,l,e){var r,o,a,i;return void 0===e&&(e=[]),n(s,l)&&(r=l.getLineA(),o=l.getLineB(),a=l.getLineC(),i=l.getLineD(),h(r,s,e),h(o,s,e),h(a,s,e),h(i,s,e)),e}},function(g,b,t){var h=t(140),n=t(487),s=new(t(47));function l(r,o,a,i,u){var c=Math.cos(r),d=Math.sin(r);s.setTo(o,a,o+c,a+d);var f=n(s,i);f&&u.push(new h(f.x,f.y,r,f.w))}function e(r,o){return r.z-o.z}g.exports=function(r,o,a){Array.isArray(a)||(a=[a]);for(var i=[],u=[],c=0;c<a.length;c++)for(var d=a[c].points,f=0;f<d.length;f++){var p=Math.atan2(d[f].y-o,d[f].x-r);-1===u.indexOf(p)&&(l(p,r,o,a,i),l(p-1e-5,r,o,a,i),l(p+1e-5,r,o,a,i),u.push(p))}return i.sort(e)}},function(g,b,t){var h=t(10),n=t(152);g.exports=function(s,l,e){return void 0===e&&(e=new h),n(s,l)&&(e.x=Math.max(s.x,l.x),e.y=Math.max(s.y,l.y),e.width=Math.min(s.right,l.right)-e.x,e.height=Math.min(s.bottom,l.bottom)-e.y),e}},function(g,b,t){var h=t(234),n=t(152);g.exports=function(s,l,e){var r,o,a,i;return void 0===e&&(e=[]),n(s,l)&&(r=s.getLineA(),o=s.getLineB(),a=s.getLineC(),i=s.getLineD(),h(r,l,e),h(o,l,e),h(a,l,e),h(i,l,e)),e}},function(g,b,t){var h=t(489),n=t(234);g.exports=function(s,l,e){var r,o,a;return void 0===e&&(e=[]),h(s,l)&&(r=l.getLineA(),o=l.getLineB(),a=l.getLineC(),n(r,s,e),n(o,s,e),n(a,s,e)),e}},function(g,b,t){var h=t(232),n=t(491);g.exports=function(s,l,e){var r,o,a;return void 0===e&&(e=[]),n(s,l)&&(r=s.getLineA(),o=s.getLineB(),a=s.getLineC(),h(r,l,e),h(o,l,e),h(a,l,e)),e}},function(g,b,t){var h=t(494),n=t(492);g.exports=function(s,l,e){var r,o,a;return void 0===e&&(e=[]),h(s,l)&&(r=l.getLineA(),o=l.getLineB(),a=l.getLineC(),n(s,r,e),n(s,o,e),n(s,a,e)),e}},function(g,b,t){var h=t(496);g.exports=function(n,s){if(!h(n,s))return!1;var l=Math.min(s.x1,s.x2),e=Math.max(s.x1,s.x2),r=Math.min(s.y1,s.y2),o=Math.max(s.y1,s.y2);return n.x>=l&&n.x<=e&&n.y>=r&&n.y<=o}},function(g,b){g.exports=function(t,h,n,s,l,e){return void 0===e&&(e=0),!(h>t.right+e||n<t.left-e||s>t.bottom+e||l<t.top-e)}},function(g,b,t){var h=t(47);h.Angle=t(97),h.BresenhamPoints=t(317),h.CenterOn=t(1222),h.Clone=t(1223),h.CopyFrom=t(1224),h.Equals=t(1225),h.Extend=t(1226),h.GetEasedPoints=t(1227),h.GetMidPoint=t(1228),h.GetNearestPoint=t(1229),h.GetNormal=t(1230),h.GetPoint=t(307),h.GetPoints=t(172),h.GetShortestDistance=t(1231),h.Height=t(1232),h.Length=t(67),h.NormalAngle=t(497),h.NormalX=t(1233),h.NormalY=t(1234),h.Offset=t(1235),h.PerpSlope=t(1236),h.Random=t(173),h.ReflectAngle=t(1237),h.Rotate=t(1238),h.RotateAroundPoint=t(1239),h.RotateAroundXY=t(236),h.SetToAngle=t(1240),h.Slope=t(1241),h.Width=t(1242),g.exports=h},function(g,b){g.exports=function(t,h,n){var s=h-(t.x1+t.x2)/2,l=n-(t.y1+t.y2)/2;return t.x1+=s,t.y1+=l,t.x2+=s,t.y2+=l,t}},function(g,b,t){var h=t(47);g.exports=function(n){return new h(n.x1,n.y1,n.x2,n.y2)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x1,t.y1,t.x2,t.y2)}},function(g,b){g.exports=function(t,h){return t.x1===h.x1&&t.y1===h.y1&&t.x2===h.x2&&t.y2===h.y2}},function(g,b,t){var h=t(67);g.exports=function(n,s,l){void 0===l&&(l=s);var e=h(n),r=n.x2-n.x1,o=n.y2-n.y1;return s&&(n.x1=n.x1-r/e*s,n.y1=n.y1-o/e*s),l&&(n.x2=n.x2+r/e*l,n.y2=n.y2+o/e*l),n}},function(g,b,t){var h=t(352),n=t(80),s=t(4);g.exports=function(l,e,r,o,a){void 0===o&&(o=0),void 0===a&&(a=[]);var i,u=[],c=l.x1,d=l.y1,f=l.x2-c,p=l.y2-d,v=n(e,a),m=r-1;for(x=0;x<m;x++)i=v(x/m),u.push(new s(c+f*i,d+p*i));if(i=v(1),u.push(new s(c+f*i,d+p*i)),0<o){for(var T=u[0],y=[T],x=1;x<u.length-1;x++){var w=u[x];h(T,w)>=o&&(y.push(w),T=w)}var E=u[u.length-1];return h(T,E)<o&&y.pop(),y.push(E),y}return u}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=(n.x1+n.x2)/2,s.y=(n.y1+n.y2)/2,s}},function(g,b,t){var h=t(4);g.exports=function(n,s,l){void 0===l&&(l=new h);var e=n.x1,r=n.y1,o=n.x2,a=n.y2,i=(o-e)*(o-e)+(a-r)*(a-r);if(0==i)return l;var u=((s.x-e)*(o-e)+(s.y-r)*(a-r))/i;return l.x=e+u*(o-e),l.y=r+u*(a-r),l}},function(g,b,t){var h=t(14),n=t(97),s=t(4);g.exports=function(l,e){void 0===e&&(e=new s);var r=n(l)-h.TAU;return e.x=Math.cos(r),e.y=Math.sin(r),e}},function(g,b){g.exports=function(t,h){var n=t.x1,s=t.y1,l=t.x2,e=t.y2,r=(l-n)*(l-n)+(e-s)*(e-s);return 0!=r&&Math.abs(((s-h.y)*(l-n)-(n-h.x)*(e-s))/r)*Math.sqrt(r)}},function(g,b){g.exports=function(t){return Math.abs(t.y1-t.y2)}},function(g,b,t){var h=t(14),n=t(97);g.exports=function(s){return Math.cos(n(s)-h.TAU)}},function(g,b,t){var h=t(14),n=t(97);g.exports=function(s){return Math.sin(n(s)-h.TAU)}},function(g,b){g.exports=function(t,h,n){return t.x1+=h,t.y1+=n,t.x2+=h,t.y2+=n,t}},function(g,b){g.exports=function(t){return-(t.x2-t.x1)/(t.y2-t.y1)}},function(g,b,t){var h=t(97),n=t(497);g.exports=function(s,l){return 2*n(l)-Math.PI-h(s)}},function(g,b,t){var h=t(236);g.exports=function(n,s){return h(n,(n.x1+n.x2)/2,(n.y1+n.y2)/2,s)}},function(g,b,t){var h=t(236);g.exports=function(n,s,l){return h(n,s.x,s.y,l)}},function(g,b){g.exports=function(t,h,n,s,l){return t.x1=h,t.y1=n,t.x2=h+Math.cos(s)*l,t.y2=n+Math.sin(s)*l,t}},function(g,b){g.exports=function(t){return(t.y2-t.y1)/(t.x2-t.x1)}},function(g,b){g.exports=function(t){return Math.abs(t.x1-t.x2)}},function(g,b,t){var h={Face:t(116),GenerateGridVerts:t(1244),GenerateObjVerts:t(480),GenerateVerts:t(479),ParseObj:t(498),ParseObjMaterial:t(499),RotateFace:t(1245),Vertex:t(117)};g.exports=h},function(g,b,t){var h=t(116),n=t(2),s=t(69),l=t(39),e=t(117),r=new l,o=new l,a=new s;g.exports=function(i){var u=n(i,"mesh"),c=n(i,"texture",null),d=n(i,"frame"),f=n(i,"width",1),p=n(i,"height",f),v=n(i,"widthSegments",1),m=n(i,"heightSegments",v),T=n(i,"x",0),y=n(i,"y",0),x=n(i,"z",0),w=n(i,"rotateX",0),E=n(i,"rotateY",0),S=n(i,"rotateZ",0),A=n(i,"zIsUp",!0),_=n(i,"isOrtho",!!u&&u.dirtyCache[11]),C=n(i,"colors",[16777215]),M=n(i,"alphas",[1]),P=n(i,"tile",!1),L=n(i,"flipY",!1),D=n(i,"width",null),F={faces:[],verts:[]};if(r.set(T,y,x),o.set(w,E,S),a.fromRotationXYTranslation(o,r,A),!c&&u)c=u.texture;else{if(!u||"string"!=typeof c)return F;c=u.scene.sys.textures.get(c)}var X=c.get(d);!D&&_&&c&&u&&(f=X.width/u.height,p=X.height/u.height);var R=f/2,O=p/2,N=Math.floor(v),k=Math.floor(m),I=N+1,B=k+1,Y=f/N,U=p/k,G=[],W=[],z=0,V=1,H=0,j=1;X&&(z=X.u0,V=X.u1,j=L?(H=X.v1,X.v0):(H=X.v0,X.v1));for(var q=V-z,Q=j-H,Z=0;Z<B;Z++)for(var J=Z*U-O,K=0;K<I;K++)W.push(K*Y-R,-J),G.push(z+K/N*q,H+Z/k*Q);Array.isArray(C)||(C=[C]),Array.isArray(M)||(M=[M]);var it=0,$=0;for(Z=0;Z<k;Z++)for(K=0;K<N;K++){var at=2*(K+I*Z),nt=2*(K+I*(Z+1)),ht=2*(K+1+I*(Z+1)),ot=2*(K+1+I*Z),lt=C[$],rt=M[it],dt=new e(W[at],W[1+at],0,G[at],G[1+at],lt,rt).transformMat4(a),ut=new e(W[nt],W[1+nt],0,G[nt],G[1+nt],lt,rt).transformMat4(a),ft=new e(W[ot],W[1+ot],0,G[ot],G[1+ot],lt,rt).transformMat4(a),vt=new e(W[nt],W[1+nt],0,G[nt],G[1+nt],lt,rt).transformMat4(a),mt=new e(W[ht],W[1+ht],0,G[ht],G[1+ht],lt,rt).transformMat4(a),yt=new e(W[ot],W[1+ot],0,G[ot],G[1+ot],lt,rt).transformMat4(a);P&&(dt.setUVs(z,j),ut.setUVs(z,H),ft.setUVs(V,j),vt.setUVs(z,H),mt.setUVs(V,H),yt.setUVs(V,j)),++$===C.length&&($=0),++it===M.length&&(it=0),F.verts.push(dt,ut,ft,vt,mt,yt),F.faces.push(new h(dt,ut,ft),new h(vt,mt,yt))}return u&&(u.faces=u.faces.concat(F.faces),u.vertices=u.vertices.concat(F.verts)),F}},function(g,b){g.exports=function(t,h,n,s){var l,e,r;void 0===n&&void 0===s&&(e=(l=t.getInCenter()).x,r=l.y);var o=Math.cos(h),a=Math.sin(h),i=t.vertex1,u=t.vertex2,c=t.vertex3,d=i.x-e,f=i.y-r;i.set(d*o-f*a+e,d*a+f*o+r),u.set((d=u.x-e)*o-(f=u.y-r)*a+e,d*a+f*o+r),c.set((d=c.x-e)*o-(f=c.y-r)*a+e,d*a+f*o+r)}},function(g,b,t){var h=t(4);h.Ceil=t(1247),h.Clone=t(1248),h.CopyFrom=t(1249),h.Equals=t(1250),h.Floor=t(1251),h.GetCentroid=t(1252),h.GetMagnitude=t(500),h.GetMagnitudeSq=t(501),h.GetRectangleFromPoints=t(1253),h.Interpolate=t(1254),h.Invert=t(1255),h.Negative=t(1256),h.Project=t(1257),h.ProjectUnit=t(1258),h.SetMagnitude=t(1259),g.exports=h},function(g,b){g.exports=function(t){return t.setTo(Math.ceil(t.x),Math.ceil(t.y))}},function(g,b,t){var h=t(4);g.exports=function(n){return new h(n.x,n.y)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x,t.y)}},function(g,b){g.exports=function(t,h){return t.x===h.x&&t.y===h.y}},function(g,b){g.exports=function(t){return t.setTo(Math.floor(t.x),Math.floor(t.y))}},function(g,b,t){var h=t(4);g.exports=function(n,s){if(void 0===s&&(s=new h),!Array.isArray(n))throw new Error("GetCentroid points argument must be an array");var l=n.length;if(l<1)throw new Error("GetCentroid points array must not be empty");if(1===l)s.x=n[0].x,s.y=n[0].y;else{for(var e=0;e<l;e++)s.x+=n[e].x,s.y+=n[e].y;s.x/=l,s.y/=l}return s}},function(g,b,t){var h=t(10);g.exports=function(n,s){void 0===s&&(s=new h);for(var l=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=0;a<n.length;a++){var i=n[a];i.x>l&&(l=i.x),i.x<e&&(e=i.x),i.y>r&&(r=i.y),i.y<o&&(o=i.y)}return s.x=e,s.y=o,s.width=l-e,s.height=r-o,s}},function(g,b,t){var h=t(4);g.exports=function(n,s,l,e){return void 0===l&&(l=0),void 0===e&&(e=new h),e.x=n.x+(s.x-n.x)*l,e.y=n.y+(s.y-n.y)*l,e}},function(g,b){g.exports=function(t){return t.setTo(t.y,t.x)}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.setTo(-n.x,-n.y)}},function(g,b,t){var h=t(4),n=t(501);g.exports=function(s,l,e){void 0===e&&(e=new h);var r=(s.x*l.x+s.y*l.y)/n(l);return 0!=r&&(e.x=r*l.x,e.y=r*l.y),e}},function(g,b,t){var h=t(4);g.exports=function(n,s,l){void 0===l&&(l=new h);var e=n.x*s.x+n.y*s.y;return 0!=e&&(l.x=e*s.x,l.y=e*s.y),l}},function(g,b,t){var h=t(500);g.exports=function(n,s){var l;return 0===n.x&&0===n.y||(l=h(n),n.x/=l,n.y/=l),n.x*=s,n.y*=s,n}},function(g,b,t){var h=t(227);h.Clone=t(1261),h.Contains=t(228),h.ContainsPoint=t(1262),h.Earcut=t(59),h.GetAABB=t(469),h.GetNumberArray=t(1263),h.GetPoints=t(470),h.Perimeter=t(471),h.Reverse=t(1264),h.Simplify=t(1265),h.Smooth=t(472),h.Translate=t(1266),g.exports=h},function(g,b,t){var h=t(227);g.exports=function(n){return new h(n.points)}},function(g,b,t){var h=t(228);g.exports=function(n,s){return h(n,s.x,s.y)}},function(g,b){g.exports=function(t,h){void 0===h&&(h=[]);for(var n=0;n<t.points.length;n++)h.push(t.points[n].x),h.push(t.points[n].y);return h}},function(g,b){g.exports=function(t){return t.points.reverse(),t}},function(g,b){g.exports=function(h,n,s){void 0===n&&(n=1),void 0===s&&(s=!1);var l,e=h.points;return 2<e.length&&(l=n*n,s||(e=function(r,o){for(var a,i,u,c,d,f=r[0],p=[f],v=1,m=r.length;v<m;v++)o<(c=(i=a=r[v]).x-(u=f).x)*c+(d=i.y-u.y)*d&&(p.push(a),f=a);return f!==a&&p.push(a),p}(e,l)),h.setTo(function t(h,n){var s=h.length-1,l=[h[0]];return function e(r,o,a,i,u){for(var c,d,f,p,v,m,T,y,x,w=i,E=o+1;E<a;E++){var S=(d=r[E],x=y=T=m=v=void 0,x=(p=r[a]).y-(T=(f=r[o]).y),0==(y=p.x-(m=f.x))&&0===x||(1<(v=((d.x-m)*y+(d.y-T)*x)/(y*y+x*x))?(m=p.x,T=p.y):0<v&&(m+=y*v,T+=x*v)),(y=d.x-m)*y+(x=d.y-T)*x);w<S&&(c=E,w=S)}i<w&&(1<c-o&&e(r,o,c,i,u),u.push(r[c]),1<a-c&&e(r,c,a,i,u))}(h,0,s,n,l),l.push(h[s]),l}(e,l))),h}},function(g,b){g.exports=function(t,h,n){for(var s=t.points,l=0;l<s.length;l++)s[l].x+=h,s[l].y+=n;return t}},function(g,b){g.exports=function(t){return t.width*t.height}},function(g,b){g.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t}},function(g,b){g.exports=function(t){return t.x=Math.ceil(t.x),t.y=Math.ceil(t.y),t.width=Math.ceil(t.width),t.height=Math.ceil(t.height),t}},function(g,b,t){var h=t(10);g.exports=function(n){return new h(n.x,n.y,n.width,n.height)}},function(g,b,t){var h=t(57);g.exports=function(n,s){return h(n,s.x,s.y)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x,t.y,t.width,t.height)}},function(g,b){g.exports=function(t,h){return t.x===h.x&&t.y===h.y&&t.width===h.width&&t.height===h.height}},function(g,b,t){var h=t(237);g.exports=function(n,s){var l=h(n);return l<h(s)?n.setSize(s.height*l,s.height):n.setSize(s.width,s.width/l),n.setPosition(s.centerX-n.width/2,s.centerY-n.height/2)}},function(g,b,t){var h=t(237);g.exports=function(n,s){var l=h(n);return l>h(s)?n.setSize(s.height*l,s.height):n.setSize(s.width,s.width/l),n.setPosition(s.centerX-n.width/2,s.centerY-n.height/2)}},function(g,b){g.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t}},function(g,b){g.exports=function(t){return t.x=Math.floor(t.x),t.y=Math.floor(t.y),t.width=Math.floor(t.width),t.height=Math.floor(t.height),t}},function(g,b,t){var h=t(10);g.exports=function(n,s,l,e,r){return void 0===r&&(r=new h),r.setTo(Math.min(n,l),Math.min(s,e),Math.abs(n-l),Math.abs(s-e))}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=n.centerX,s.y=n.centerY,s}},function(g,b,t){var h=t(4);g.exports=function(n,s){return void 0===s&&(s=new h),s.x=n.width,s.y=n.height,s}},function(g,b,t){var h=t(190);g.exports=function(n,s,l){var e=n.centerX,r=n.centerY;return n.setSize(n.width+2*s,n.height+2*l),h(n,e,r)}},function(g,b,t){var h=t(10),n=t(152);g.exports=function(s,l,e){return void 0===e&&(e=new h),n(s,l)?(e.x=Math.max(s.x,l.x),e.y=Math.max(s.y,l.y),e.width=Math.min(s.right,l.right)-e.x,e.height=Math.min(s.bottom,l.bottom)-e.y):e.setEmpty(),e}},function(g,b){g.exports=function(t,h){for(var n=t.x,s=t.right,l=t.y,e=t.bottom,r=0;r<h.length;r++)n=Math.min(n,h[r].x),s=Math.max(s,h[r].x),l=Math.min(l,h[r].y),e=Math.max(e,h[r].y);return t.x=n,t.y=l,t.width=s-n,t.height=e-l,t}},function(g,b){g.exports=function(t,h){var n=Math.min(t.x,h.x),s=Math.max(t.right,h.right);t.x=n,t.width=s-n;var l=Math.min(t.y,h.y),e=Math.max(t.bottom,h.bottom);return t.y=l,t.height=e-l,t}},function(g,b){g.exports=function(t,h,n){var s=Math.min(t.x,h),l=Math.max(t.right,h);t.x=s,t.width=l-s;var e=Math.min(t.y,n),r=Math.max(t.bottom,n);return t.y=e,t.height=r-e,t}},function(g,b){g.exports=function(t,h,n){return t.x+=h,t.y+=n,t}},function(g,b){g.exports=function(t,h){return t.x+=h.x,t.y+=h.y,t}},function(g,b){g.exports=function(t,h){return t.x<h.right&&t.right>h.x&&t.y<h.bottom&&t.bottom>h.y}},function(g,b,t){var h=t(4),n=t(36);g.exports=function(s,l,e){void 0===e&&(e=new h),l=n(l);var r=Math.sin(l),o=Math.cos(l),a=0<o?s.width/2:s.width/-2,i=0<r?s.height/2:s.height/-2;return Math.abs(a*r)<Math.abs(i*o)?i=a*r/o:a=i*o/r,e.x=a+s.centerX,e.y=i+s.centerY,e}},function(g,b,t){var h=t(195),n=t(503),s=t(4);g.exports=function(l,e,r){if(void 0===r&&(r=new s),n(l,e))switch(h(0,3)){case 0:r.x=l.x+Math.random()*(e.right-l.x),r.y=l.y+Math.random()*(e.top-l.y);break;case 1:r.x=e.x+Math.random()*(l.right-e.x),r.y=e.bottom+Math.random()*(l.bottom-e.bottom);break;case 2:r.x=l.x+Math.random()*(e.x-l.x),r.y=e.y+Math.random()*(l.bottom-e.y);break;case 3:r.x=e.right+Math.random()*(l.right-e.right),r.y=l.y+Math.random()*(e.bottom-l.y)}return r}},function(g,b){g.exports=function(t,h){return t.width===h.width&&t.height===h.height}},function(g,b){g.exports=function(t,h,n){return void 0===n&&(n=h),t.width*=h,t.height*=n,t}},function(g,b,t){var h=t(82);h.Area=t(1294),h.BuildEquilateral=t(1295),h.BuildFromPolygon=t(1296),h.BuildRight=t(1297),h.CenterOn=t(1298),h.Centroid=t(504),h.CircumCenter=t(1299),h.CircumCircle=t(1300),h.Clone=t(1301),h.Contains=t(115),h.ContainsArray=t(235),h.ContainsPoint=t(1302),h.CopyFrom=t(1303),h.Decompose=t(495),h.Equals=t(1304),h.GetPoint=t(476),h.GetPoints=t(477),h.InCenter=t(506),h.Perimeter=t(1305),h.Offset=t(505),h.Random=t(181),h.Rotate=t(1306),h.RotateAroundPoint=t(1307),h.RotateAroundXY=t(238),g.exports=h},function(g,b){g.exports=function(t){var h=t.x1,n=t.y1;return Math.abs(((t.x3-h)*(t.y2-n)-(t.x2-h)*(t.y3-n))/2)}},function(g,b,t){var h=t(82);g.exports=function(n,s,l){var e=l*(Math.sqrt(3)/2);return new h(n,s,n+l/2,s+e,n-l/2,s+e)}},function(g,b,t){var h=t(59),n=t(82);g.exports=function(s,l,e,r,o){void 0===l&&(l=null),void 0===e&&(e=1),void 0===r&&(r=1),void 0===o&&(o=[]);for(var a,i,u,T=h(s,l),y=0;y<T.length;y+=3)o.push(new n(s[2*(a=T[y])]*e,s[2*a+1]*r,s[2*(i=T[y+1])]*e,s[2*i+1]*r,s[2*(u=T[y+2])]*e,s[2*u+1]*r));return o}},function(g,b,t){var h=t(82);g.exports=function(n,s,l,e){return void 0===e&&(e=l),new h(n,s,n,s-e,n+l,s)}},function(g,b,t){var h=t(504),n=t(505);g.exports=function(s,l,e,r){void 0===r&&(r=h);var o=r(s);return n(s,l-o.x,e-o.y)}},function(g,b,t){var h=t(3);g.exports=function(n,s){void 0===s&&(s=new h);var l=n.x3,e=n.y3,r=n.x1-l,o=n.y1-e,a=n.x2-l,i=n.y2-e,u=2*(r*i-o*a),d=r*(a*a+i*i)-(r*r+o*o)*a;return s.x=l-(o*(a*a+i*i)-(r*r+o*o)*i)/u,s.y=e+d/u,s}},function(g,b,t){var h=t(65);g.exports=function(n,s){void 0===s&&(s=new h);var l,e,r,o,a=n.x1,i=n.y1,u=n.x2,c=n.y2,d=n.x3,f=n.y3,p=u-a,v=c-i,m=d-a,T=f-i,y=p*(a+u)+v*(i+c),x=m*(a+d)+T*(i+f),w=2*(p*(f-c)-v*(d-u));return Math.abs(w)<1e-6?(l=Math.min(a,u,d),e=Math.min(i,c,f),r=.5*(Math.max(a,u,d)-l),o=.5*(Math.max(i,c,f)-e),s.x=l+r,s.y=e+o):(s.x=(T*y-v*x)/w,s.y=(p*x-m*y)/w,r=s.x-a,o=s.y-i),s.radius=Math.sqrt(r*r+o*o),s}},function(g,b,t){var h=t(82);g.exports=function(n){return new h(n.x1,n.y1,n.x2,n.y2,n.x3,n.y3)}},function(g,b,t){var h=t(115);g.exports=function(n,s){return h(n,s.x,s.y)}},function(g,b){g.exports=function(t,h){return h.setTo(t.x1,t.y1,t.x2,t.y2,t.x3,t.y3)}},function(g,b){g.exports=function(t,h){return t.x1===h.x1&&t.y1===h.y1&&t.x2===h.x2&&t.y2===h.y2&&t.x3===h.x3&&t.y3===h.y3}},function(g,b,t){var h=t(67);g.exports=function(n){var s=n.getLineA(),l=n.getLineB(),e=n.getLineC();return h(s)+h(l)+h(e)}},function(g,b,t){var h=t(238),n=t(506);g.exports=function(s,l){var e=n(s);return h(s,e.x,e.y,l)}},function(g,b,t){var h=t(238);g.exports=function(n,s,l){return h(n,s.x,s.y,l)}},function(g,b,t){var h=t(203),n=t(17)(!1,n={CreatePixelPerfectHandler:t(507),CreateInteractiveObject:t(508),Events:t(51),Gamepad:t(1309),InputManager:t(409),InputPlugin:t(1321),InputPluginCache:t(153),Keyboard:t(1322),Mouse:t(1336),Pointer:t(412),Touch:t(1337)},h);g.exports=n},function(g,b,t){g.exports={Axis:t(509),Button:t(510),Events:t(239),Gamepad:t(511),GamepadPlugin:t(1316),Configs:t(1317)}},function(g,b){g.exports="down"},function(g,b){g.exports="up"},function(g,b){g.exports="connected"},function(g,b){g.exports="disconnected"},function(g,b){g.exports="down"},function(g,b){g.exports="up"},function(g,b,t){var h=t(0),n=t(9),s=t(239),l=t(511),e=t(6),r=t(153),o=t(51),a=new h({Extends:n,initialize:function(i){n.call(this),this.scene=i.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=i,this.enabled=!0,this.gamepads=[],this.queue=[],i.pluginEvents.once(o.BOOT,this.boot,this),i.pluginEvents.on(o.START,this.start,this)},boot:function(){var i=this.scene.sys.game,u=this.settings.input,c=i.config;this.enabled=e(u,"gamepad",c.inputGamepad)&&i.device.input.gamepads,this.target=e(u,"gamepad.target",c.inputGamepadEventTarget),this.sceneInputPlugin.pluginEvents.once(o.DESTROY,this.destroy,this)},start:function(){this.enabled&&(this.startListeners(),this.refreshPads()),this.sceneInputPlugin.pluginEvents.once(o.SHUTDOWN,this.shutdown,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},startListeners:function(){function i(d){!d.defaultPrevented&&u.isActive()&&(u.refreshPads(),u.queue.push(d))}var u=this,c=this.target;this.onGamepadHandler=i,c.addEventListener("gamepadconnected",i,!1),c.addEventListener("gamepaddisconnected",i,!1),this.sceneInputPlugin.pluginEvents.on(o.UPDATE,this.update,this)},stopListeners:function(){this.target.removeEventListener("gamepadconnected",this.onGamepadHandler),this.target.removeEventListener("gamepaddisconnected",this.onGamepadHandler),this.sceneInputPlugin.pluginEvents.off(o.UPDATE,this.update);for(var i=0;i<this.gamepads.length;i++)this.gamepads[i].removeAllListeners()},disconnectAll:function(){for(var i=0;i<this.gamepads.length;i++)this.gamepads[i].pad.connected=!1},refreshPads:function(){var i=navigator.getGamepads();if(i)for(var u=this.gamepads,c=0;c<i.length;c++){var f,p,v,m=i[c];m&&((p=u[f=m.index])?p.id!==m.id?(p.destroy(),u[f]=new l(this,m)):p.update(m):(v=new l(this,m),u[f]=v,this._pad1?this._pad2?this._pad3?this._pad4||(this._pad4=v):this._pad3=v:this._pad2=v:this._pad1=v))}else this.disconnectAll()},getAll:function(){for(var i=[],u=this.gamepads,c=0;c<u.length;c++)u[c]&&i.push(u[c]);return i},getPad:function(i){for(var u=this.gamepads,c=0;c<u.length;c++)if(u[c]&&u[c].index===i)return u[c]},update:function(){if(this.enabled){this.refreshPads();var i=this.queue.length;if(0!==i)for(var u=this.queue.splice(0,i),c=0;c<i;c++){var d=u[c],f=this.getPad(d.gamepad.index);"gamepadconnected"===d.type?this.emit(s.CONNECTED,f,d):"gamepaddisconnected"===d.type&&this.emit(s.DISCONNECTED,f,d)}}},shutdown:function(){this.stopListeners(),this.removeAllListeners()},destroy:function(){this.shutdown();for(var i=0;i<this.gamepads.length;i++)this.gamepads[i]&&this.gamepads[i].destroy();this.gamepads=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.target=null},total:{get:function(){return this.gamepads.length}},pad1:{get:function(){return this._pad1}},pad2:{get:function(){return this._pad2}},pad3:{get:function(){return this._pad3}},pad4:{get:function(){return this._pad4}}});r.register("GamepadPlugin",a,"gamepad","gamepad","inputGamepad"),g.exports=a},function(g,b,t){g.exports={DUALSHOCK_4:t(1318),SNES_USB:t(1319),XBOX_360:t(1320)}},function(g,b){g.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SHARE:8,OPTIONS:9,PS:16,TOUCHBAR:17,X:0,CIRCLE:1,SQUARE:2,TRIANGLE:3,L1:4,R1:5,L2:6,R2:7,L3:10,R3:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(g,b){g.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,SELECT:8,START:9,B:0,A:1,Y:2,X:3,LEFT_SHOULDER:4,RIGHT_SHOULDER:5}},function(g,b){g.exports={UP:12,DOWN:13,LEFT:14,RIGHT:15,MENU:16,A:0,B:1,X:2,Y:3,LB:4,RB:5,LT:6,RT:7,BACK:8,START:9,LS:10,RS:11,LEFT_STICK_H:0,LEFT_STICK_V:1,RIGHT_STICK_H:2,RIGHT_STICK_V:3}},function(g,b,t){var h=t(65),n=t(66),s=t(0),l=t(203),e=t(508),r=t(507),o=t(50),a=t(111),i=t(112),u=t(51),c=t(9),d=t(2),f=t(56),p=t(153),v=t(7),m=t(24),T=t(10),y=t(57),x=t(20),w=t(82),E=t(115),S=new s({Extends:c,initialize:function(A){c.call(this),this.scene=A,this.systems=A.sys,this.settings=A.sys.settings,this.manager=A.sys.game.input,this.pluginEvents=new c,this.enabled=!0,p.install(this),this.mouse=this.manager.mouse,this.topOnly=!0,this.pollRate=-1,this._pollTimer=0;var _={cancelled:!1};this._eventContainer={stopPropagation:function(){_.cancelled=!0}},this._eventData=_,this.dragDistanceThreshold=0,this.dragTimeThreshold=0,this._temp=[],this._tempZones=[],this._list=[],this._pendingInsertion=[],this._pendingRemoval=[],this._draggable=[],this._drag={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._dragState=[],this._over={0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[],8:[],9:[],10:[]},this._validTypes=["onDown","onUp","onOver","onOut","onMove","onDragStart","onDrag","onDragEnd","onDragEnter","onDragLeave","onDragOver","onDrop"],this._updatedThisFrame=!1,A.sys.events.once(x.BOOT,this.boot,this),A.sys.events.on(x.START,this.start,this)},boot:function(){this.cameras=this.systems.cameras,this.displayList=this.systems.displayList,this.systems.events.once(x.DESTROY,this.destroy,this),this.pluginEvents.emit(u.BOOT)},start:function(){var A=this.systems.events;A.on(x.TRANSITION_START,this.transitionIn,this),A.on(x.TRANSITION_OUT,this.transitionOut,this),A.on(x.TRANSITION_COMPLETE,this.transitionComplete,this),A.on(x.PRE_UPDATE,this.preUpdate,this),A.once(x.SHUTDOWN,this.shutdown,this),this.manager.events.on(u.GAME_OUT,this.onGameOut,this),this.manager.events.on(u.GAME_OVER,this.onGameOver,this),this.enabled=!0,this._dragState=[0,0,0,0,0,0,0,0,0,0],this.pluginEvents.emit(u.START)},onGameOver:function(A){this.isActive()&&this.emit(u.GAME_OVER,A.timeStamp,A)},onGameOut:function(A){this.isActive()&&this.emit(u.GAME_OUT,A.timeStamp,A)},preUpdate:function(){this.pluginEvents.emit(u.PRE_UPDATE);var A=this._pendingRemoval,_=this._pendingInsertion,C=A.length;if(0!==C||0!==_.length){for(var P=this._list,L=0;L<C;L++){var D=A[L],F=P.indexOf(D);-1<F&&(P.splice(F,1),this.clear(D,!0))}A.length=0,this._pendingRemoval.length=0,this._list=P.concat(_.splice(0))}},isActive:function(){return this.enabled&&this.scene.sys.isActive()},updatePoll:function(A,_){if(!this.isActive())return!1;if(this.pluginEvents.emit(u.UPDATE,A,_),this._updatedThisFrame)return this._updatedThisFrame=!1;for(var C=this.manager,M=C.pointers,P=C.pointersTotal,L=0;L<P;L++)M[L].updateMotion();if(0===this._list.length)return!1;var D=this.pollRate;if(-1===D)return!1;if(0<D){if(this._pollTimer-=_,!(this._pollTimer<0))return!1;this._pollTimer=this.pollRate}var F=!1;for(L=0;L<P;L++){var X=0,R=M[L];this._tempZones=[],this._temp=this.hitTestPointer(R),this.sortGameObjects(this._temp,R),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),X+=this.processOverOutEvents(R),2===this.getDragState(R)&&this.processDragThresholdEvent(R,A),0<X&&(F=!0)}return F},update:function(A,_){if(!this.isActive())return!1;for(var C=_.length,M=!1,P=0;P<C;P++){var L=0,D=_[P];switch(this._tempZones=[],this._temp=this.hitTestPointer(D),this.sortGameObjects(this._temp,D),this.sortDropZones(this._tempZones),this.topOnly&&(this._temp.length&&this._temp.splice(1),this._tempZones.length&&this._tempZones.splice(1)),A){case l.MOUSE_DOWN:L+=this.processDragDownEvent(D),L+=this.processDownEvents(D),L+=this.processOverOutEvents(D);break;case l.MOUSE_UP:L+=this.processDragUpEvent(D),L+=this.processUpEvents(D),L+=this.processOverOutEvents(D);break;case l.TOUCH_START:L+=this.processDragDownEvent(D),L+=this.processDownEvents(D),L+=this.processOverEvents(D);break;case l.TOUCH_END:case l.TOUCH_CANCEL:L+=this.processDragUpEvent(D),L+=this.processUpEvents(D),L+=this.processOutEvents(D);break;case l.MOUSE_MOVE:case l.TOUCH_MOVE:L+=this.processDragMoveEvent(D),L+=this.processMoveEvents(D),L+=this.processOverOutEvents(D);break;case l.MOUSE_WHEEL:L+=this.processWheelEvent(D)}0<L&&(M=!0)}return this._updatedThisFrame=!0,M},clear:function(A,_){void 0===_&&(_=!1);var C=A.input;if(C){_||this.queueForRemoval(A),C.gameObject=void 0,C.target=void 0,C.hitArea=void 0,C.hitAreaCallback=void 0,C.callbackContext=void 0,A.input=null;var M=this._draggable.indexOf(A);return-1<M&&this._draggable.splice(M,1),-1<(M=this._drag[0].indexOf(A))&&this._drag[0].splice(M,1),-1<(M=this._over[0].indexOf(A))&&(this._over[0].splice(M,1),this.manager.resetCursor(C)),A}},disable:function(A){A.input.enabled=!1},enable:function(A,_,C,M){return void 0===M&&(M=!1),A.input?A.input.enabled=!0:this.setHitArea(A,_,C),A.input&&M&&!A.input.dropZone&&(A.input.dropZone=M),this},hitTestPointer:function(A){for(var _=this.cameras.getCamerasBelowPointer(A),C=0;C<_.length;C++){for(var M=_[C],P=this.manager.hitTest(A,this._list,M),L=0;L<P.length;L++){var D=P[L];D.input.dropZone&&this._tempZones.push(D)}if(0<P.length)return A.camera=M,P}return A.camera=_[0],[]},processDownEvents:function(A){for(var _=0,C=this._temp,M=this._eventData,P=this._eventContainer,L=M.cancelled=!1,D=0;D<C.length;D++){var F=C[D];if(F.input){if(_++,F.emit(u.GAMEOBJECT_POINTER_DOWN,A,F.input.localX,F.input.localY,P),M.cancelled||!F.input){L=!0;break}if(this.emit(u.GAMEOBJECT_DOWN,A,F,P),M.cancelled||!F.input){L=!0;break}}}return!L&&this.manager&&(A.downElement===this.manager.game.canvas?this.emit(u.POINTER_DOWN,A,C):this.emit(u.POINTER_DOWN_OUTSIDE,A)),_},getDragState:function(A){return this._dragState[A.id]},setDragState:function(A,_){this._dragState[A.id]=_},processDragThresholdEvent:function(A,_){var C=!1,M=this.dragTimeThreshold,P=this.dragDistanceThreshold;if((0<P&&o(A.x,A.y,A.downX,A.downY)>=P||0<M&&_>=A.downTime+M)&&(C=!0),C)return this.setDragState(A,3),this.processDragStartList(A)},processDragStartList:function(A){if(3!==this.getDragState(A))return 0;for(var _=this._drag[A.id],C=0;C<_.length;C++){var M=_[C],P=M.input;P.dragState=2,P.dragStartX=M.x,P.dragStartY=M.y,P.dragStartXGlobal=A.worldX,P.dragStartYGlobal=A.worldY,P.dragX=P.dragStartXGlobal-P.dragStartX,P.dragY=P.dragStartYGlobal-P.dragStartY,M.emit(u.GAMEOBJECT_DRAG_START,A,P.dragX,P.dragY),this.emit(u.DRAG_START,A,M)}return this.setDragState(A,4),_.length},processDragDownEvent:function(A){var _=this._temp;if(0===this._draggable.length||0===_.length||!A.primaryDown||0!==this.getDragState(A))return 0;this.setDragState(A,1);for(var C=[],M=0;M<_.length;M++){var P=_[M];P.input.draggable&&0===P.input.dragState&&C.push(P)}return 0===C.length?(this.setDragState(A,0),0):(1<C.length&&(this.sortGameObjects(C,A),this.topOnly&&C.splice(1)),this._drag[A.id]=C,0===this.dragDistanceThreshold&&0===this.dragTimeThreshold?(this.setDragState(A,3),this.processDragStartList(A)):(this.setDragState(A,2),0))},processDragMoveEvent:function(A){if(2===this.getDragState(A)&&this.processDragThresholdEvent(A,this.manager.game.loop.now),4!==this.getDragState(A))return 0;for(var _=this._tempZones,C=this._drag[A.id],M=0;M<C.length;M++){var P,L,D,F,X,R,O,N,k=C[M],I=k.input,B=I.target;B?0===(P=_.indexOf(B))?(k.emit(u.GAMEOBJECT_DRAG_OVER,A,B),this.emit(u.DRAG_OVER,A,k,B)):0<P?(k.emit(u.GAMEOBJECT_DRAG_LEAVE,A,B),this.emit(u.DRAG_LEAVE,A,k,B),I.target=_[0],k.emit(u.GAMEOBJECT_DRAG_ENTER,A,B=I.target),this.emit(u.DRAG_ENTER,A,k,B)):(k.emit(u.GAMEOBJECT_DRAG_LEAVE,A,B),this.emit(u.DRAG_LEAVE,A,k,B),_[0]?(I.target=_[0],k.emit(u.GAMEOBJECT_DRAG_ENTER,A,B=I.target),this.emit(u.DRAG_ENTER,A,k,B)):I.target=null):!B&&_[0]&&(I.target=_[0],k.emit(u.GAMEOBJECT_DRAG_ENTER,A,B=I.target),this.emit(u.DRAG_ENTER,A,k,B)),D=k.parentContainer?(F=A.worldX-I.dragStartXGlobal,X=A.worldY-I.dragStartYGlobal,R=k.getParentRotation(),O=F*Math.cos(R)+X*Math.sin(R),N=X*Math.cos(R)-F*Math.sin(R),L=(O*=1/k.parentContainer.scaleX)+I.dragStartX,(N*=1/k.parentContainer.scaleY)+I.dragStartY):(L=A.worldX-I.dragX,A.worldY-I.dragY),k.emit(u.GAMEOBJECT_DRAG,A,L,D),this.emit(u.DRAG,A,k,L,D)}return C.length},processDragUpEvent:function(A){for(var _=this._drag[A.id],C=0;C<_.length;C++){var M,P,L=_[C],D=L.input;D&&2===D.dragState&&(D.dragState=0,D.dragX=D.localX-L.displayOriginX,D.dragY=D.localY-L.displayOriginY,M=!1,(P=D.target)&&(L.emit(u.GAMEOBJECT_DROP,A,P),this.emit(u.DROP,A,L,P),M=!(D.target=null)),L.input&&(L.emit(u.GAMEOBJECT_DRAG_END,A,D.dragX,D.dragY,M),this.emit(u.DRAG_END,A,L,M)))}return this.setDragState(A,0),_.splice(0),0},processMoveEvents:function(A){for(var _=0,C=this._temp,M=this._eventData,P=this._eventContainer,L=M.cancelled=!1,D=0;D<C.length;D++){var F=C[D];if(F.input){if(_++,F.emit(u.GAMEOBJECT_POINTER_MOVE,A,F.input.localX,F.input.localY,P),M.cancelled||!F.input){L=!0;break}if(this.emit(u.GAMEOBJECT_MOVE,A,F,P),M.cancelled||!F.input){L=!0;break}if(this.topOnly)break}}return L||this.emit(u.POINTER_MOVE,A,C),_},processWheelEvent:function(A){for(var _=0,C=this._temp,M=this._eventData,P=this._eventContainer,L=M.cancelled=!1,D=A.deltaX,F=A.deltaY,X=A.deltaZ,R=0;R<C.length;R++){var O=C[R];if(O.input){if(_++,O.emit(u.GAMEOBJECT_POINTER_WHEEL,A,D,F,X,P),M.cancelled||!O.input){L=!0;break}if(this.emit(u.GAMEOBJECT_WHEEL,A,O,D,F,X,P),M.cancelled||!O.input){L=!0;break}}}return L||this.emit(u.POINTER_WHEEL,A,C,D,F,X),_},processOverEvents:function(A){var _=this._temp,C=0,M=_.length,P=[];if(0<M){for(var L=this.manager,D=this._eventData,F=this._eventContainer,X=D.cancelled=!1,R=0;R<M;R++){var O=_[R];if(O.input){if(P.push(O),L.setCursor(O.input),O.emit(u.GAMEOBJECT_POINTER_OVER,A,O.input.localX,O.input.localY,F),C++,D.cancelled||!O.input){X=!0;break}if(this.emit(u.GAMEOBJECT_OVER,A,O,F),D.cancelled||!O.input){X=!0;break}}}X||this.emit(u.POINTER_OVER,A,P)}return this._over[A.id]=P,C},processOutEvents:function(A){var _=this._over[A.id],C=0,M=_.length;if(0<M){var P=this.manager,L=this._eventData,D=this._eventContainer,F=L.cancelled=!1;this.sortGameObjects(_,A);for(var X=0;X<M;X++){var R=_[X];if((R=_[X]).input){if(P.resetCursor(R.input),R.emit(u.GAMEOBJECT_POINTER_OUT,A,D),C++,L.cancelled||!R.input){F=!0;break}if(this.emit(u.GAMEOBJECT_OUT,A,R,D),L.cancelled||!R.input){F=!0;break}F||this.emit(u.POINTER_OUT,A,_)}}this._over[A.id]=[]}return C},processOverOutEvents:function(A){for(var _,C=this._temp,M=[],P=[],L=[],D=this._over[A.id],F=this._drag[A.id],X=this.manager,R=0;R<D.length;R++)-1===C.indexOf(_=D[R])&&-1===F.indexOf(_)?M.push(_):L.push(_);for(R=0;R<C.length;R++)-1===D.indexOf(_=C[R])&&P.push(_);var O=M.length,N=0,k=this._eventData,I=this._eventContainer,B=k.cancelled=!1;if(0<O){for(this.sortGameObjects(M,A),R=0;R<O;R++)if((_=M[R]).input){if(X.resetCursor(_.input),_.emit(u.GAMEOBJECT_POINTER_OUT,A,I),N++,k.cancelled||!_.input){B=!0;break}if(this.emit(u.GAMEOBJECT_OUT,A,_,I),k.cancelled||!_.input){B=!0;break}}B||this.emit(u.POINTER_OUT,A,M)}if(O=P.length,B=k.cancelled=!1,0<O){for(this.sortGameObjects(P,A),R=0;R<O;R++)if((_=P[R]).input){if(X.setCursor(_.input),_.emit(u.GAMEOBJECT_POINTER_OVER,A,_.input.localX,_.input.localY,I),N++,k.cancelled||!_.input){B=!0;break}if(this.emit(u.GAMEOBJECT_OVER,A,_,I),k.cancelled||!_.input){B=!0;break}}B||this.emit(u.POINTER_OVER,A,P)}return D=L.concat(P),this._over[A.id]=this.sortGameObjects(D,A),N},processUpEvents:function(A){for(var _=this._temp,C=this._eventData,M=this._eventContainer,P=C.cancelled=!1,L=0;L<_.length;L++){var D=_[L];if(D.input){if(D.emit(u.GAMEOBJECT_POINTER_UP,A,D.input.localX,D.input.localY,M),C.cancelled||!D.input){P=!0;break}if(this.emit(u.GAMEOBJECT_UP,A,D,M),C.cancelled||!D.input){P=!0;break}}}return!P&&this.manager&&(A.upElement===this.manager.game.canvas?this.emit(u.POINTER_UP,A,_):this.emit(u.POINTER_UP_OUTSIDE,A)),_.length},queueForInsertion:function(A){return-1===this._pendingInsertion.indexOf(A)&&-1===this._list.indexOf(A)&&this._pendingInsertion.push(A),this},queueForRemoval:function(A){return this._pendingRemoval.push(A),this},setDraggable:function(A,_){void 0===_&&(_=!0),Array.isArray(A)||(A=[A]);for(var C=0;C<A.length;C++){var M=A[C];M.input.draggable=_;var P=this._draggable.indexOf(M);_&&-1===P?this._draggable.push(M):!_&&-1<P&&this._draggable.splice(P,1)}return this},makePixelPerfect:function(A){return void 0===A&&(A=1),r(this.systems.textures,A)},setHitArea:function(A,_,C){if(void 0===_)return this.setHitAreaFromTexture(A);Array.isArray(A)||(A=[A]);var M,P,L=!1,D=!1,F=!1,X=!1,R=!1,O=!0;v(_)?(_=d(M=_,"hitArea",null),C=d(M,"hitAreaCallback",null),L=d(M,"draggable",!1),D=d(M,"dropZone",!1),F=d(M,"cursor",!1),X=d(M,"useHandCursor",!1),R=d(M,"pixelPerfect",!1),P=d(M,"alphaTolerance",1),R&&(_={},C=this.makePixelPerfect(P)),_&&C||(this.setHitAreaFromTexture(A),O=!1)):"function"!=typeof _||C||(C=_,_={});for(var N=0;N<A.length;N++){var k,I=A[N];R&&"Container"===I.type?console.warn("Cannot pixelPerfect test a Container. Use a custom callback."):((k=I.input?I.input:e(I,_,C)).customHitArea=O,k.dropZone=D,k.cursor=X?"pointer":F,I.input=k,L&&this.setDraggable(I),this.queueForInsertion(I))}return this},setHitAreaCircle:function(A,_,C,M,P){void 0===P&&(P=n);var L=new h(_,C,M);return this.setHitArea(A,L,P)},setHitAreaEllipse:function(A,_,C,M,P,L){void 0===L&&(L=i);var D=new a(_,C,M,P);return this.setHitArea(A,D,L)},setHitAreaFromTexture:function(A,_){void 0===_&&(_=y),Array.isArray(A)||(A=[A]);for(var C=0;C<A.length;C++){var M=A[C],P=M.frame,L=0,D=0;M.width?(L=M.width,D=M.height):P&&(L=P.realWidth,D=P.realHeight),"Container"!==M.type||0!==L&&0!==D?0!==L&&0!==D&&(M.input=e(M,new T(0,0,L,D),_),this.queueForInsertion(M)):console.warn("Container.setInteractive must specify a Shape or call setSize() first")}return this},setHitAreaRectangle:function(A,_,C,M,P,L){void 0===L&&(L=y);var D=new T(_,C,M,P);return this.setHitArea(A,D,L)},setHitAreaTriangle:function(A,_,C,M,P,L,D,F){void 0===F&&(F=E);var X=new w(_,C,M,P,L,D);return this.setHitArea(A,X,F)},enableDebug:function(A,_){void 0===_&&(_=65280);var C=A.input;if(!C||!C.hitArea)return this;var M=C.hitArea,P=M.type,L=C.hitAreaDebug,D=this.systems.add,F=this.systems.updateList;L&&(F.remove(L),L.destroy(),L=null);var X=0,R=0;switch(P){case f.CIRCLE:L=D.arc(0,0,M.radius),X=M.x-M.radius,R=M.y-M.radius;break;case f.ELLIPSE:L=D.ellipse(0,0,M.width,M.height),X=M.x-M.width/2,R=M.y-M.height/2;break;case f.LINE:L=D.line(0,0,M.x1,M.y1,M.x2,M.y2);break;case f.POLYGON:L=D.polygon(0,0,M.points);break;case f.RECTANGLE:L=D.rectangle(0,0,M.width,M.height),X=M.x,R=M.y;break;case f.TRIANGLE:L=D.triangle(0,0,M.x1,M.y1,M.x2,M.y2,M.x3,M.y3)}return L&&(L.isFilled=!1,L.preUpdate=function(){L.setStrokeStyle(1/A.scale,_),L.setDisplayOrigin(A.displayOriginX,A.displayOriginY);var O,N=A.x,k=A.y,I=A.rotation,B=A.scaleX,Y=A.scaleY;A.parentContainer&&(N=(O=A.getWorldTransformMatrix()).tx,k=O.ty,I=O.rotation,B=O.scaleX,Y=O.scaleY),L.setRotation(I),L.setScale(B,Y),L.setPosition(N+X,k+R),L.setScrollFactor(A.scrollFactorX,A.scrollFactorY),L.setDepth(A.depth)},F.add(L),C.hitAreaDebug=L),this},removeDebug:function(A){var _,C=A.input;return C&&C.hitAreaDebug&&(this.systems.updateList.remove(_=C.hitAreaDebug),_.destroy(),C.hitAreaDebug=null),this},setPollAlways:function(){return this.setPollRate(0)},setPollOnMove:function(){return this.setPollRate(-1)},setPollRate:function(A){return this.pollRate=A,this._pollTimer=0,this},setGlobalTopOnly:function(A){return this.manager.globalTopOnly=A,this},setTopOnly:function(A){return this.topOnly=A,this},sortGameObjects:function(A,_){if(A.length<2)return A;var C=_.camera.renderList;return A.sort(function(M,P){return C.indexOf(P)-C.indexOf(M)})},sortDropZones:function(A){return A.length<2?A:(this.scene.sys.depthSort(),A.sort(this.sortDropZoneHandler.bind(this)))},sortDropZoneHandler:function(A,_){if(A.parentContainer||_.parentContainer){if(A.parentContainer===_.parentContainer)return _.parentContainer.getIndex(_)-A.parentContainer.getIndex(A);if(A.parentContainer===_)return-1;if(_.parentContainer===A)return 1;for(var C=A.getIndexList(),M=_.getIndexList(),P=Math.min(C.length,M.length),L=0;L<P;L++){var D=C[L],F=M[L];if(D!==F)return F-D}return M.length-C.length}return this.displayList.getIndex(_)-this.displayList.getIndex(A)},stopPropagation:function(){return this.manager._tempSkip=!0,this},addPointer:function(A){return this.manager.addPointer(A)},setDefaultCursor:function(A){return this.manager.setDefaultCursor(A),this},transitionIn:function(){this.enabled=this.settings.transitionAllowInput},transitionComplete:function(){this.settings.transitionAllowInput||(this.enabled=!0)},transitionOut:function(){this.enabled=this.settings.transitionAllowInput},shutdown:function(){this.pluginEvents.emit(u.SHUTDOWN),this._temp.length=0,this._list.length=0,this._draggable.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;for(var A=this._dragState.length=0;A<10;A++)this._drag[A]=[],this._over[A]=[];this.removeAllListeners();var _=this.manager;_.canvas.style.cursor=_.defaultCursor;var C=this.systems.events;C.off(x.TRANSITION_START,this.transitionIn,this),C.off(x.TRANSITION_OUT,this.transitionOut,this),C.off(x.TRANSITION_COMPLETE,this.transitionComplete,this),C.off(x.PRE_UPDATE,this.preUpdate,this),_.events.off(u.GAME_OUT,this.onGameOut,this),_.events.off(u.GAME_OVER,this.onGameOver,this),C.off(x.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.pluginEvents.emit(u.DESTROY),this.pluginEvents.removeAllListeners(),this.scene.sys.events.off(x.START,this.start,this),this.scene=null,this.cameras=null,this.manager=null,this.events=null,this.mouse=null},x:{get:function(){return this.manager.activePointer.x}},y:{get:function(){return this.manager.activePointer.y}},isOver:{get:function(){return this.manager.isOver}},mousePointer:{get:function(){return this.manager.mousePointer}},activePointer:{get:function(){return this.manager.activePointer}},pointer1:{get:function(){return this.manager.pointers[1]}},pointer2:{get:function(){return this.manager.pointers[2]}},pointer3:{get:function(){return this.manager.pointers[3]}},pointer4:{get:function(){return this.manager.pointers[4]}},pointer5:{get:function(){return this.manager.pointers[5]}},pointer6:{get:function(){return this.manager.pointers[6]}},pointer7:{get:function(){return this.manager.pointers[7]}},pointer8:{get:function(){return this.manager.pointers[8]}},pointer9:{get:function(){return this.manager.pointers[9]}},pointer10:{get:function(){return this.manager.pointers[10]}}});m.register("InputPlugin",S,"input"),g.exports=S},function(g,b,t){g.exports={Events:t(154),KeyboardManager:t(410),KeyboardPlugin:t(1330),Key:t(512),KeyCodes:t(143),KeyCombo:t(513),AdvanceKeyCombo:t(515),ProcessKeyCombo:t(514),ResetKeyCombo:t(516),JustDown:t(1332),JustUp:t(1333),DownDuration:t(1334),UpDuration:t(1335)}},function(g,b){g.exports="keydown"},function(g,b){g.exports="keyup"},function(g,b){g.exports="keycombomatch"},function(g,b){g.exports="down"},function(g,b){g.exports="keydown-"},function(g,b){g.exports="keyup-"},function(g,b){g.exports="up"},function(g,b,t){var h=t(0),n=t(9),s=t(154),l=t(22),e=t(6),r=t(51),o=t(153),a=t(512),i=t(143),u=t(513),c=t(1331),d=t(20),f=t(76),p=new h({Extends:n,initialize:function(v){n.call(this),this.game=v.systems.game,this.scene=v.scene,this.settings=this.scene.sys.settings,this.sceneInputPlugin=v,this.manager=v.manager.keyboard,this.enabled=!0,this.keys=[],this.combos=[],this.prevCode=null,this.prevTime=0,this.prevType=null,v.pluginEvents.once(r.BOOT,this.boot,this),v.pluginEvents.on(r.START,this.start,this)},boot:function(){var v=this.settings.input;this.enabled=e(v,"keyboard",!0);var m=e(v,"keyboard.capture",null);m&&this.addCaptures(m),this.sceneInputPlugin.pluginEvents.once(r.DESTROY,this.destroy,this)},start:function(){this.sceneInputPlugin.manager.events.on(r.MANAGER_PROCESS,this.update,this),this.sceneInputPlugin.pluginEvents.once(r.SHUTDOWN,this.shutdown,this),this.game.events.on(l.BLUR,this.resetKeys,this),this.scene.sys.events.on(d.PAUSE,this.resetKeys,this),this.scene.sys.events.on(d.SLEEP,this.resetKeys,this)},isActive:function(){return this.enabled&&this.scene.sys.isActive()},addCapture:function(v){return this.manager.addCapture(v),this},removeCapture:function(v){return this.manager.removeCapture(v),this},getCaptures:function(){return this.manager.captures},enableGlobalCapture:function(){return this.manager.preventDefault=!0,this},disableGlobalCapture:function(){return this.manager.preventDefault=!1,this},clearCaptures:function(){return this.manager.clearCaptures(),this},createCursorKeys:function(){return this.addKeys({up:i.UP,down:i.DOWN,left:i.LEFT,right:i.RIGHT,space:i.SPACE,shift:i.SHIFT})},addKeys:function(v,m,T){void 0===m&&(m=!0),void 0===T&&(T=!1);var y={};if("string"==typeof v){v=v.split(",");for(var x=0;x<v.length;x++){var w=v[x].trim();w&&(y[w]=this.addKey(w,m,T))}}else for(var E in v)y[E]=this.addKey(v[E],m,T);return y},addKey:function(v,m,T){void 0===m&&(m=!0),void 0===T&&(T=!1);var y=this.keys;if(v instanceof a){var x=y.indexOf(v);return-1<x?y[x]=v:y[v.keyCode]=v,m&&this.addCapture(v.keyCode),v.setEmitOnRepeat(T),v}return"string"==typeof v&&(v=i[v.toUpperCase()]),y[v]||(y[v]=new a(this,v),m&&this.addCapture(v),y[v].setEmitOnRepeat(T)),y[v]},removeKey:function(v,m){void 0===m&&(m=!1);var T,y,x=this.keys;return v instanceof a?-1<(y=x.indexOf(v))&&(T=this.keys[y],this.keys[y]=void 0):"string"==typeof v&&(v=i[v.toUpperCase()]),x[v]&&(T=x[v],x[v]=void 0),T&&(T.plugin=null,m&&T.destroy()),this},removeAllKeys:function(v){for(var m=this.keys,T=0;T<m.length;T++){var y=m[T];y&&(m[T]=void 0,v&&y.destroy())}return this},createCombo:function(v,m){return new u(this,v,m)},checkDown:function(v,m){if(void 0===m&&(m=0),this.enabled&&v.isDown){var T=f(this.time-v.timeDown,m);if(T>v._tick)return v._tick=T,!0}return!1},update:function(){var v=this.manager.queue,m=v.length;if(this.isActive()&&0!==m)for(var T=this.keys,y=0;y<m;y++){var x=v[y],w=x.keyCode,E=T[w],S=!1;void 0===x.cancelled&&(x.cancelled=0,x.stopImmediatePropagation=function(){x.cancelled=1},x.stopPropagation=function(){x.cancelled=-1}),-1!==x.cancelled&&(w===this.prevCode&&x.timeStamp===this.prevTime&&x.type===this.prevType||(this.prevCode=w,this.prevTime=x.timeStamp,this.prevType=x.type,"keydown"===x.type?(E&&(S=E.isDown,E.onDown(x)),x.cancelled||E&&S||(c[w]&&this.emit(s.KEY_DOWN+c[w],x),x.cancelled||this.emit(s.ANY_KEY_DOWN,x))):(E&&E.onUp(x),x.cancelled||(c[w]&&this.emit(s.KEY_UP+c[w],x),x.cancelled||this.emit(s.ANY_KEY_UP,x))),1===x.cancelled&&(x.cancelled=0)))}},resetKeys:function(){for(var v=this.keys,m=0;m<v.length;m++)v[m]&&v[m].reset();return this},shutdown:function(){this.removeAllKeys(!0),this.removeAllListeners(),this.sceneInputPlugin.manager.events.off(r.MANAGER_PROCESS,this.update,this),this.game.events.off(l.BLUR,this.resetKeys),this.scene.sys.events.off(d.PAUSE,this.resetKeys,this),this.scene.sys.events.off(d.SLEEP,this.resetKeys,this),this.queue=[]},destroy:function(){this.shutdown();for(var v=this.keys,m=0;m<v.length;m++)v[m]&&v[m].destroy();this.keys=[],this.combos=[],this.queue=[],this.scene=null,this.settings=null,this.sceneInputPlugin=null,this.manager=null},time:{get:function(){return this.sceneInputPlugin.manager.time}}});o.register("KeyboardPlugin",p,"keyboard","keyboard","inputKeyboard"),g.exports=p},function(g,b,t){var h=t(143),n={};for(var s in h)n[h[s]]=s;g.exports=n},function(g,b){g.exports=function(t){return!!t._justDown&&!(t._justDown=!1)}},function(g,b){g.exports=function(t){return!!t._justUp&&!(t._justUp=!1)}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=50),t.isDown&&t.plugin.game.loop.time-t.timeDown<h}},function(g,b){g.exports=function(t,h){return void 0===h&&(h=50),t.isUp&&t.plugin.game.loop.time-t.timeUp<h}},function(g,b,t){g.exports={MouseManager:t(411)}},function(g,b,t){g.exports={TouchManager:t(413)}},function(g,b,t){var h=t(21),n=t(17)(!1,n={Events:t(95),FileTypes:t(1339),File:t(23),FileTypesManager:t(8),GetURL:t(155),LoaderPlugin:t(1365),MergeXHRSettings:t(240),MultiFile:t(49),XHRLoader:t(517),XHRSettings:t(156)},h);g.exports=n},function(g,b,t){g.exports={AnimationJSONFile:t(1340),AsepriteFile:t(1341),AtlasJSONFile:t(1342),AtlasXMLFile:t(1343),AudioFile:t(518),AudioSpriteFile:t(1344),BinaryFile:t(1345),BitmapFontFile:t(1346),CSSFile:t(1347),GLSLFile:t(1348),HTML5AudioFile:t(519),HTMLFile:t(1349),HTMLTextureFile:t(1350),ImageFile:t(71),JSONFile:t(61),MultiAtlasFile:t(1351),MultiScriptFile:t(1352),OBJFile:t(1353),PackFile:t(1354),PluginFile:t(1355),SceneFile:t(1356),ScenePluginFile:t(1357),ScriptFile:t(520),SpriteSheetFile:t(1358),SVGFile:t(1359),TextFile:t(242),TilemapCSVFile:t(1360),TilemapImpactFile:t(1361),TilemapJSONFile:t(1362),UnityAtlasFile:t(1363),VideoFile:t(1364),XMLFile:t(241)}},function(g,b,t){var h=t(0),n=t(8),s=t(61),l=t(95),e=new h({Extends:s,initialize:function(r,o,a,i,u){s.call(this,r,o,a,i,u),this.type="animationJSON"},onProcess:function(){this.loader.once(l.POST_PROCESS,this.onLoadComplete,this),s.prototype.onProcess.call(this)},onLoadComplete:function(){this.loader.systems.anims.fromJSON(this.data)}});n.register("animation",function(r,o,a,i){if(Array.isArray(r))for(var u=0;u<r.length;u++)this.addFile(new e(this,r[u]));else this.addFile(new e(this,r,o,i,a));return this}),g.exports=e},function(g,b,t){var h=t(0),n=t(8),s=t(2),l=t(71),e=t(7),r=t(61),o=t(49),a=new h({Extends:o,initialize:function(i,u,c,d,f,p){var v,m,T=e(u)?(u=s(m=u,"key"),v=new l(i,{key:u,url:s(m,"textureURL"),extension:s(m,"textureExtension","png"),normalMap:s(m,"normalMap"),xhrSettings:s(m,"textureXhrSettings")}),new r(i,{key:u,url:s(m,"atlasURL"),extension:s(m,"atlasExtension","json"),xhrSettings:s(m,"atlasXhrSettings")})):(v=new l(i,u,c,f),new r(i,u,d,p));o.call(this,i,"atlasjson",u,v.linkFile?[v,T,v.linkFile]:[v,T])},addToCache:function(){var i,u;this.isReadyToProcess()&&(this.loader.textureManager.addAtlas((i=this.files[0]).key,i.data,(u=this.files[1]).data,this.files[2]?this.files[2].data:null),u.addToCache(),this.complete=!0)}});n.register("aseprite",function(i,u,c,d,f){var p;if(Array.isArray(i))for(var v=0;v<i.length;v++)p=new a(this,i[v]),this.addFile(p.files);else p=new a(this,i,u,c,d,f),this.addFile(p.files);return this}),g.exports=a},function(g,b,t){var h=t(0),n=t(8),s=t(2),l=t(71),e=t(7),r=t(61),o=t(49),a=new h({Extends:o,initialize:function(i,u,c,d,f,p){var v,m,T=e(u)?(u=s(m=u,"key"),v=new l(i,{key:u,url:s(m,"textureURL"),extension:s(m,"textureExtension","png"),normalMap:s(m,"normalMap"),xhrSettings:s(m,"textureXhrSettings")}),new r(i,{key:u,url:s(m,"atlasURL"),extension:s(m,"atlasExtension","json"),xhrSettings:s(m,"atlasXhrSettings")})):(v=new l(i,u,c,f),new r(i,u,d,p));o.call(this,i,"atlasjson",u,v.linkFile?[v,T,v.linkFile]:[v,T])},addToCache:function(){var i,u;this.isReadyToProcess()&&(this.loader.textureManager.addAtlas((i=this.files[0]).key,i.data,(u=this.files[1]).data,this.files[2]?this.files[2].data:null),u.pendingDestroy(),this.complete=!0)}});n.register("atlas",function(i,u,c,d,f){var p;if(Array.isArray(i))for(var v=0;v<i.length;v++)p=new a(this,i[v]),this.addFile(p.files);else p=new a(this,i,u,c,d,f),this.addFile(p.files);return this}),g.exports=a},function(g,b,t){var h=t(0),n=t(8),s=t(2),l=t(71),e=t(7),r=t(49),o=t(241),a=new h({Extends:r,initialize:function(i,u,c,d,f,p){var v,m,T=e(u)?(u=s(m=u,"key"),v=new l(i,{key:u,url:s(m,"textureURL"),extension:s(m,"textureExtension","png"),normalMap:s(m,"normalMap"),xhrSettings:s(m,"textureXhrSettings")}),new o(i,{key:u,url:s(m,"atlasURL"),extension:s(m,"atlasExtension","xml"),xhrSettings:s(m,"atlasXhrSettings")})):(v=new l(i,u,c,f),new o(i,u,d,p));r.call(this,i,"atlasxml",u,v.linkFile?[v,T,v.linkFile]:[v,T])},addToCache:function(){var i,u;this.isReadyToProcess()&&(this.loader.textureManager.addAtlasXML((i=this.files[0]).key,i.data,(u=this.files[1]).data,this.files[2]?this.files[2].data:null),u.pendingDestroy(),this.complete=!0)}});n.register("atlasXML",function(i,u,c,d,f){var p;if(Array.isArray(i))for(var v=0;v<i.length;v++)p=new a(this,i[v]),this.addFile(p.files);else p=new a(this,i,u,c,d,f),this.addFile(p.files);return this}),g.exports=a},function(g,b,t){var h=t(518),n=t(0),s=t(8),l=t(2),e=t(7),r=t(61),o=t(49),a=new n({Extends:o,initialize:function(i,u,c,d,f,p,v){var m,T,y;e(u)&&(u=l(m=u,"key"),c=l(m,"jsonURL"),d=l(m,"audioURL"),f=l(m,"audioConfig"),p=l(m,"audioXhrSettings"),v=l(m,"jsonXhrSettings")),d?(y=h.create(i,u,d,f,p))&&(T=new r(i,u,c,v),o.call(this,i,"audiosprite",u,[y,T]),this.config.resourceLoad=!1):(T=new r(i,u,c,v),o.call(this,i,"audiosprite",u,[T]),this.config.resourceLoad=!0,this.config.audioConfig=f,this.config.audioXhrSettings=p)},onFileComplete:function(i){var u,c,d,f;-1!==this.files.indexOf(i)&&(this.pending--,this.config.resourceLoad&&"json"===i.type&&i.data.hasOwnProperty("resources")&&(u=i.data.resources,c=l(this.config,"audioConfig"),d=l(this.config,"audioXhrSettings"),(f=h.create(this.loader,i.key,u,c,d))&&(this.addToMultiFile(f),this.loader.addFile(f))))},addToCache:function(){var u;this.isReadyToProcess()&&(u=this.files[1],this.files[0].addToCache(),u.addToCache(),this.complete=!0)}});s.register("audioSprite",function(i,u,c,d,f,p){var v,m=this.systems.game,T=m.config.audio,y=m.device.audio;if(T&&T.noAudio||!y.webAudio&&!y.audioData)return this;if(Array.isArray(i))for(var x=0;x<i.length;x++)(v=new a(this,i[x])).files&&this.addFile(v.files);else(v=new a(this,i,u,c,d,f,p)).files&&this.addFile(v.files);return this})},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c,d){var f,p="bin";r(i)&&(i=e(f=i,"key"),u=e(f,"url"),c=e(f,"xhrSettings"),p=e(f,"extension",p),d=e(f,"dataType",d)),s.call(this,a,{type:"binary",cache:a.cacheManager.binary,extension:p,responseType:"arraybuffer",key:i,url:u,xhrSettings:c,config:{dataType:d}})},onProcess:function(){this.state=n.FILE_PROCESSING;var a=this.config.dataType;this.data=a?new a(this.xhrLoader.response):this.xhrLoader.response,this.onProcessComplete()}});l.register("binary",function(a,i,u,c){if(Array.isArray(a))for(var d=0;d<a.length;d++)this.addFile(new o(this,a[d]));else this.addFile(new o(this,a,i,c,u));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(8),s=t(2),l=t(71),e=t(7),r=t(49),o=t(212),a=t(241),i=new h({Extends:r,initialize:function(u,c,d,f,p,v){var m,T,y=e(c)?(c=s(T=c,"key"),m=new l(u,{key:c,url:s(T,"textureURL"),extension:s(T,"textureExtension","png"),normalMap:s(T,"normalMap"),xhrSettings:s(T,"textureXhrSettings")}),new a(u,{key:c,url:s(T,"fontDataURL"),extension:s(T,"fontDataExtension","xml"),xhrSettings:s(T,"fontDataXhrSettings")})):(m=new l(u,c,d,p),new a(u,c,f,v));r.call(this,u,"bitmapfont",c,m.linkFile?[m,y,m.linkFile]:[m,y])},addToCache:function(){var u,c,d,f;this.isReadyToProcess()&&(c=this.files[1],(u=this.files[0]).addToCache(),c.pendingDestroy(),d=u.cache.get(u.key),f=o(c.data,u.cache.getFrame(u.key),0,0,d),this.loader.cacheManager.bitmapFont.add(u.key,{data:f,texture:u.key,frame:null}),this.complete=!0)}});n.register("bitmapFont",function(u,c,d,f,p){var v;if(Array.isArray(u))for(var m=0;m<u.length;m++)v=new i(this,u[m]),this.addFile(v.files);else v=new i(this,u,c,d,f,p),this.addFile(v.files);return this}),g.exports=i},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c){var d,f="css";r(i)&&(i=e(d=i,"key"),u=e(d,"url"),c=e(d,"xhrSettings"),f=e(d,"extension",f)),s.call(this,a,{type:"script",cache:!1,extension:f,responseType:"text",key:i,url:u,xhrSettings:c})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=document.createElement("style"),this.data.defer=!1,this.data.innerHTML=this.xhrLoader.responseText,document.head.appendChild(this.data),this.onProcessComplete()}});l.register("css",function(a,i,u){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.addFile(new o(this,a[c]));else this.addFile(new o(this,a,i,u));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=t(396),a=new h({Extends:s,initialize:function(i,u,c,d,f){var p,v="glsl";r(u)?(u=e(p=u,"key"),c=e(p,"url"),d=e(p,"shaderType","fragment"),f=e(p,"xhrSettings"),v=e(p,"extension",v)):void 0===d&&(d="fragment"),s.call(this,i,{type:"glsl",cache:i.cacheManager.shader,extension:v,responseType:"text",key:u,url:c,config:{shaderType:d},xhrSettings:f})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var i=this.data.split("\n"),u=this.extractBlock(i,0);if(u)for(;u;){var c,d=this.getShaderName(u.header),f=this.getShaderType(u.header),p=this.getShaderUniforms(u.header),v=u.shader;this.cache.has(d)?(c=this.cache.get(d),"fragment"===f?c.fragmentSrc=v:c.vertexSrc=v,c.uniforms||(c.uniforms=p)):this.cache.add(d,"fragment"===f?new o(d,v,"",p):new o(d,"",v,p)),u=this.extractBlock(i,u.offset)}else this.cache.add(this.key,"fragment"===this.config.shaderType?new o(this.key,this.data):new o(this.key,"",this.data));this.pendingDestroy()},getShaderName:function(i){for(var u=0;u<i.length;u++){var c=i[u].trim();if("name:"===c.substring(0,5))return c.substring(5).trim()}return this.key},getShaderType:function(i){for(var u=0;u<i.length;u++){var c=i[u].trim();if("type:"===c.substring(0,5))return c.substring(5).trim()}return this.config.shaderType},getShaderUniforms:function(i){for(var u={},c=0;c<i.length;c++){var d=i[c].trim();if("uniform."===d.substring(0,8)){var f=d.indexOf(":");if(f){var p=d.substring(8,f);try{u[p]=JSON.parse(d.substring(f+1))}catch{console.warn("Invalid uniform JSON: "+p)}}}}return u},extractBlock:function(i,u){for(var c=-1,d=-1,f=-1,p=!1,v=!1,m=[],T=[],y=u;y<i.length;y++){var x=i[y].trim();if("---"===x)if(-1===c)c=y,p=!0;else{if(!p){v=!1;break}d=y,v=!(p=!1)}else p?m.push(x):v&&(T.push(x),f=y)}return p||-1===d?null:{header:m,shader:T.join("\n"),offset:f}}});l.register("glsl",function(i,u,c,d){if(Array.isArray(i))for(var f=0;f<i.length;f++)this.addFile(new a(this,i[f]));else this.addFile(new a(this,i,u,c,d));return this}),g.exports=a},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c){var d,f="html";r(i)&&(i=e(d=i,"key"),u=e(d,"url"),c=e(d,"xhrSettings"),f=e(d,"extension",f)),s.call(this,a,{type:"text",cache:a.cacheManager.html,extension:f,responseType:"text",key:i,url:u,xhrSettings:c})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()}});l.register("html",function(a,i,u){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.addFile(new o(this,a[c]));else this.addFile(new o(this,a,i,u));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c,d,f){void 0===c&&(c=512),void 0===d&&(d=512);var p,v="html";r(i)&&(i=e(p=i,"key"),u=e(p,"url"),f=e(p,"xhrSettings"),v=e(p,"extension",v),c=e(p,"width",c),d=e(p,"height",d)),s.call(this,a,{type:"html",cache:a.textureManager,extension:v,responseType:"text",key:i,url:u,xhrSettings:f,config:{width:c,height:d}})},onProcess:function(){this.state=n.FILE_PROCESSING;var a=this.config.width,i=this.config.height,u=[];u.push('<svg width="'+a+'px" height="'+i+'px" viewBox="0 0 '+a+" "+i+'" xmlns="http://www.w3.org/2000/svg">'),u.push('<foreignObject width="100%" height="100%">'),u.push('<body xmlns="http://www.w3.org/1999/xhtml">'),u.push(this.xhrLoader.responseText),u.push("</body>"),u.push("</foreignObject>"),u.push("</svg>");var c=[u.join("\n")],d=this;try{var f=new window.Blob(c,{type:"image/svg+xml;charset=utf-8"})}catch{return d.state=n.FILE_ERRORED,void d.onProcessComplete()}this.data=new Image,this.data.crossOrigin=this.crossOrigin,this.data.onload=function(){s.revokeObjectURL(d.data),d.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(d.data),d.onProcessError()},s.createObjectURL(this.data,f,"image/svg+xml")},addToCache:function(){var a=this.cache.addImage(this.key,this.data);this.pendingDestroy(a)}});l.register("htmlTexture",function(a,i,u,c,d){if(Array.isArray(a))for(var f=0;f<a.length;f++)this.addFile(new o(this,a[f]));else this.addFile(new o(this,a,i,u,c,d));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(8),s=t(2),l=t(71),e=t(7),r=t(61),o=t(49),a=new h({Extends:o,initialize:function(i,u,c,d,f,p,v){var m;e(u)&&(u=s(m=u,"key"),c=s(m,"url",!1)?s(m,"url"):s(m,"atlasURL"),p=s(m,"xhrSettings"),d=s(m,"path"),f=s(m,"baseURL"),v=s(m,"textureXhrSettings"));var T=new r(i,u,c,p);o.call(this,i,"multiatlas",u,[T]),this.config.path=d,this.config.baseURL=f,this.config.textureXhrSettings=v},onFileComplete:function(i){if(-1!==this.files.indexOf(i)&&(this.pending--,"json"===i.type&&i.data.hasOwnProperty("textures"))){var u=i.data.textures,c=this.config,d=this.loader,f=d.baseURL,p=d.path,v=d.prefix,m=s(c,"baseURL",this.baseURL),T=s(c,"path",this.path),y=s(c,"prefix",this.prefix),x=s(c,"textureXhrSettings");d.setBaseURL(m),d.setPath(T),d.setPrefix(y);for(var w=0;w<u.length;w++){var E,S=u[w].image,A="MA"+this.multiKeyIndex+"_"+S,_=new l(d,A,S,x);this.addToMultiFile(_),d.addFile(_),u[w].normalMap&&((E=new l(d,A,u[w].normalMap,x)).type="normalMap",_.setLink(E),this.addToMultiFile(E),d.addFile(E))}d.setBaseURL(f),d.setPath(p),d.setPrefix(v)}},addToCache:function(){if(this.isReadyToProcess()){for(var i=this.files[0],u=[],c=[],d=[],f=1;f<this.files.length;f++){var p=this.files[f];if("normalMap"!==p.type)for(var v=p.key.indexOf("_"),m=p.key.substr(v+1),T=p.data,y=0;y<i.data.textures.length;y++){var x=i.data.textures[y];if(x.image===m){c.push(T),u.push(x),p.linkFile&&d.push(p.linkFile.data);break}}}for(0===d.length&&(d=void 0),this.loader.textureManager.addAtlasJSONArray(this.key,c,u,d),this.complete=!0,f=0;f<this.files.length;f++)this.files[f].pendingDestroy()}}});n.register("multiatlas",function(i,u,c,d,f){var p;if(Array.isArray(i))for(var v=0;v<i.length;v++)p=new a(this,i[v]),this.addFile(p.files);else p=new a(this,i,u,c,d,f),this.addFile(p.files);return this}),g.exports=a},function(g,b,t){var h=t(0),n=t(8),s=t(2),l=t(7),e=t(49),r=t(520),o=new h({Extends:e,initialize:function(a,i,u,c){var d,f="js",p=[];l(i)&&(i=s(d=i,"key"),u=s(d,"url"),c=s(d,"xhrSettings"),f=s(d,"extension",f)),Array.isArray(u)||(u=[u]);for(var v=0;v<u.length;v++){var m=new r(a,{key:i+"_"+v.toString(),url:u[v],extension:f,xhrSettings:c});m.onProcess=function(){this.onProcessComplete()},p.push(m)}e.call(this,a,"scripts",i,p)},addToCache:function(){if(this.isReadyToProcess()){for(var a=0;a<this.files.length;a++){var i=this.files[a];i.data=document.createElement("script"),i.data.language="javascript",i.data.type="text/javascript",i.data.defer=!1,i.data.text=i.xhrLoader.responseText,document.head.appendChild(i.data)}this.complete=!0}}});n.register("scripts",function(a,i,u){var c;if(Array.isArray(a))for(var d=0;d<a.length;d++)c=new o(this,a[d]),this.addFile(c.files);else c=new o(this,a,i,u),this.addFile(c.files);return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(8),s=t(2),l=t(7),e=t(49),r=t(498),o=t(499),a=t(242),i=new h({Extends:e,initialize:function(u,c,d,f,p,v){var m,T,y,x=u.cacheManager.obj;l(c)?(c=s(y=c,"key"),m=new a(u,{key:c,type:"obj",cache:x,url:s(y,"url"),extension:s(y,"extension","obj"),xhrSettings:s(y,"xhrSettings"),config:{flipUV:s(y,"flipUV",p)}}),(f=s(y,"matURL"))&&(T=new a(u,{key:c,type:"mat",cache:x,url:f,extension:s(y,"matExtension","mat"),xhrSettings:s(y,"xhrSettings")}))):(m=new a(u,{key:c,url:d,type:"obj",cache:x,extension:"obj",xhrSettings:v,config:{flipUV:p}}),f&&(T=new a(u,{key:c,url:f,type:"mat",cache:x,extension:"mat",xhrSettings:v}))),e.call(this,u,"obj",c,[m,T])},addToCache:function(){var u,c,d;this.isReadyToProcess()&&(c=this.files[1],d=r((u=this.files[0]).data,u.config.flipUV),c&&(d.materials=o(c.data)),u.cache.add(u.key,d),this.complete=!0)}});n.register("obj",function(u,c,d,f,p){var v;if(Array.isArray(u))for(var m=0;m<u.length;m++)v=new i(this,u[m]),this.addFile(v.files);else v=new i(this,u,c,d,f,p),this.addFile(v.files);return this}),g.exports=i},function(g,b,t){var h=t(0),n=t(21),s=t(8),l=t(61),e=new h({Extends:l,initialize:function(r,o,a,i,u){l.call(this,r,o,a,i,u),this.type="packfile"},onProcess:function(){this.state!==n.FILE_POPULATED&&(this.state=n.FILE_PROCESSING,this.data=JSON.parse(this.xhrLoader.responseText)),this.loader.addPack(this.data,this.config),this.onProcessComplete()}});s.register("pack",function(r,o,a,i){if(Array.isArray(r))for(var u=0;u<r.length;u++)this.addFile(new e(this,r[u]));else this.addFile(new e(this,r,o,i,a));return this}),g.exports=e},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c,d,f){var p,v="js";r(i)&&(i=e(p=i,"key"),u=e(p,"url"),f=e(p,"xhrSettings"),v=e(p,"extension",v),c=e(p,"start"),d=e(p,"mapping")),s.call(this,a,{type:"plugin",cache:!1,extension:v,responseType:"text",key:i,url:u,xhrSettings:f,config:{start:c,mapping:d}}),"function"==typeof u&&(this.data=u,this.state=n.FILE_POPULATED)},onProcess:function(){var a,i=this.loader.systems.plugins,u=this.config,c=e(u,"start",!1),d=e(u,"mapping",null);this.state===n.FILE_POPULATED?i.install(this.key,this.data,c,d):(this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),a=i.install(this.key,window[this.key],c,d),(c||d)&&(this.loader.systems[d]=a,this.loader.scene[d]=a)),this.onProcessComplete()}});l.register("plugin",function(a,i,u,c,d){if(Array.isArray(a))for(var f=0;f<a.length;f++)this.addFile(new o(this,a[f]));else this.addFile(new o(this,a,i,u,c,d));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c){var d,f="js";r(i)&&(i=e(d=i,"key"),u=e(d,"url"),c=e(d,"xhrSettings"),f=e(d,"extension",f)),s.call(this,a,{type:"text",extension:f,responseType:"text",key:i,url:u,xhrSettings:c})},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var a=this.data.concat("(function(){\nreturn new "+this.key+"();\n}).call(this);"),i=eval;this.loader.sceneManager.add(this.key,i(a)),this.complete=!0}});l.register("sceneFile",function(a,i,u){if(Array.isArray(a))for(var c=0;c<a.length;c++)this.addFile(new o(this,a[c]));else this.addFile(new o(this,a,i,u));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c,d,f){var p,v="js";r(i)&&(i=e(p=i,"key"),u=e(p,"url"),f=e(p,"xhrSettings"),v=e(p,"extension",v),c=e(p,"systemKey"),d=e(p,"sceneKey")),s.call(this,a,{type:"scenePlugin",cache:!1,extension:v,responseType:"text",key:i,url:u,xhrSettings:f,config:{systemKey:c,sceneKey:d}}),"function"==typeof u&&(this.data=u,this.state=n.FILE_POPULATED)},onProcess:function(){var a=this.loader.systems.plugins,i=this.config,u=this.key,c=e(i,"systemKey",u),d=e(i,"sceneKey",u);this.state===n.FILE_POPULATED?a.installScenePlugin(c,this.data,d,this.loader.scene,!0):(this.state=n.FILE_PROCESSING,this.data=document.createElement("script"),this.data.language="javascript",this.data.type="text/javascript",this.data.defer=!1,this.data.text=this.xhrLoader.responseText,document.head.appendChild(this.data),a.installScenePlugin(c,window[this.key],d,this.loader.scene,!0)),this.onProcessComplete()}});l.register("scenePlugin",function(a,i,u,c,d){if(Array.isArray(a))for(var f=0;f<a.length;f++)this.addFile(new o(this,a[f]));else this.addFile(new o(this,a,i,u,c,d));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(8),s=t(71),l=new h({Extends:s,initialize:function(e,r,o,a,i){s.call(this,e,r,o,i,a),this.type="spritesheet"},addToCache:function(){var e=this.cache.addSpriteSheet(this.key,this.data,this.config);this.pendingDestroy(e)}});n.register("spritesheet",function(e,r,o,a){if(Array.isArray(e))for(var i=0;i<e.length;i++)this.addFile(new l(this,e[i]));else this.addFile(new l(this,e,r,o,a));return this}),g.exports=l},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=new h({Extends:s,initialize:function(a,i,u,c,d){var f,p="svg";r(i)&&(i=e(f=i,"key"),u=e(f,"url"),c=e(f,"svgConfig",{}),d=e(f,"xhrSettings"),p=e(f,"extension",p));var v={type:"svg",cache:a.textureManager,extension:p,responseType:"text",key:i,url:u,xhrSettings:d,config:{width:e(c,"width"),height:e(c,"height"),scale:e(c,"scale")}};s.call(this,a,v)},onProcess:function(){this.state=n.FILE_PROCESSING;var a=this.xhrLoader.responseText,i=[a],u=this.config.width,c=this.config.height,d=this.config.scale;t:if(u&&c||d){var f,p=(new DOMParser).parseFromString(a,"text/xml").getElementsByTagName("svg")[0],v=p.hasAttribute("viewBox"),m=parseFloat(p.getAttribute("width")),T=parseFloat(p.getAttribute("height"));if(!v&&m&&T?p.setAttribute("viewBox","0  0 "+m+" "+T):!v||m||T||(m=(f=p.getAttribute("viewBox").split(/\s+|,/))[2],T=f[3]),d){if(!m||!T)break t;u=m*d,c=T*d}p.setAttribute("width",u.toString()+"px"),p.setAttribute("height",c.toString()+"px"),i=[(new XMLSerializer).serializeToString(p)]}try{var y=new window.Blob(i,{type:"image/svg+xml;charset=utf-8"})}catch{return void this.onProcessError()}this.data=new Image,this.data.crossOrigin=this.crossOrigin;var x=this,w=!1;this.data.onload=function(){w||s.revokeObjectURL(x.data),x.onProcessComplete()},this.data.onerror=function(){w?x.onProcessError():(w=!0,s.revokeObjectURL(x.data),x.data.src="data:image/svg+xml,"+encodeURIComponent(i.join("")))},s.createObjectURL(this.data,y,"image/svg+xml")},addToCache:function(){var a=this.cache.addImage(this.key,this.data);this.pendingDestroy(a)}});l.register("svg",function(a,i,u,c){if(Array.isArray(a))for(var d=0;d<a.length;d++)this.addFile(new o(this,a[d]));else this.addFile(new o(this,a,i,u,c));return this}),g.exports=o},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(2),r=t(7),o=t(40),a=new h({Extends:s,initialize:function(i,u,c,d){var f,p="csv";r(u)&&(u=e(f=u,"key"),c=e(f,"url"),d=e(f,"xhrSettings"),p=e(f,"extension",p)),s.call(this,i,{type:"tilemapCSV",cache:i.cacheManager.tilemap,extension:p,responseType:"text",key:u,url:c,xhrSettings:d}),this.tilemapFormat=o.CSV},onProcess:function(){this.state=n.FILE_PROCESSING,this.data=this.xhrLoader.responseText,this.onProcessComplete()},addToCache:function(){var i={format:this.tilemapFormat,data:this.data};this.cache.add(this.key,i),this.pendingDestroy(i)}});l.register("tilemapCSV",function(i,u,c){if(Array.isArray(i))for(var d=0;d<i.length;d++)this.addFile(new a(this,i[d]));else this.addFile(new a(this,i,u,c));return this}),g.exports=a},function(g,b,t){var h=t(0),n=t(8),s=t(61),l=t(40),e=new h({Extends:s,initialize:function(r,o,a,i){s.call(this,r,o,a,i),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var r={format:l.WELTMEISTER,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});n.register("tilemapImpact",function(r,o,a){if(Array.isArray(r))for(var i=0;i<r.length;i++)this.addFile(new e(this,r[i]));else this.addFile(new e(this,r,o,a));return this}),g.exports=e},function(g,b,t){var h=t(0),n=t(8),s=t(61),l=t(40),e=new h({Extends:s,initialize:function(r,o,a,i){s.call(this,r,o,a,i),this.type="tilemapJSON",this.cache=r.cacheManager.tilemap},addToCache:function(){var r={format:l.TILED_JSON,data:this.data};this.cache.add(this.key,r),this.pendingDestroy(r)}});n.register("tilemapTiledJSON",function(r,o,a){if(Array.isArray(r))for(var i=0;i<r.length;i++)this.addFile(new e(this,r[i]));else this.addFile(new e(this,r,o,a));return this}),g.exports=e},function(g,b,t){var h=t(0),n=t(8),s=t(2),l=t(71),e=t(7),r=t(49),o=t(242),a=new h({Extends:r,initialize:function(i,u,c,d,f,p){var v,m,T=e(u)?(u=s(m=u,"key"),v=new l(i,{key:u,url:s(m,"textureURL"),extension:s(m,"textureExtension","png"),normalMap:s(m,"normalMap"),xhrSettings:s(m,"textureXhrSettings")}),new o(i,{key:u,url:s(m,"atlasURL"),extension:s(m,"atlasExtension","txt"),xhrSettings:s(m,"atlasXhrSettings")})):(v=new l(i,u,c,f),new o(i,u,d,p));r.call(this,i,"unityatlas",u,v.linkFile?[v,T,v.linkFile]:[v,T])},addToCache:function(){var i,u;this.isReadyToProcess()&&(this.loader.textureManager.addUnityAtlas((i=this.files[0]).key,i.data,(u=this.files[1]).data,this.files[2]?this.files[2].data:null),u.pendingDestroy(),this.complete=!0)}});n.register("unityAtlas",function(i,u,c,d,f){var p;if(Array.isArray(i))for(var v=0;v<i.length;v++)p=new a(this,i[v]),this.addFile(p.files);else p=new a(this,i,u,c,d,f),this.addFile(p.files);return this}),g.exports=a},function(g,b,t){var h=t(0),n=t(21),s=t(23),l=t(8),e=t(155),r=t(2),o=t(7),a=new h({Extends:s,initialize:function(i,u,c,d,f,p,v){void 0===d&&(d="loadeddata"),void 0===f&&(f=!1),void 0===p&&(p=!1),"loadeddata"!==d&&"canplay"!==d&&"canplaythrough"!==d&&(d="loadeddata");var m={type:"video",cache:i.cacheManager.video,extension:c.type,responseType:"blob",key:u,url:c.url,xhrSettings:v,config:{loadEvent:d,asBlob:f,noAudio:p}};this.onLoadCallback=this.onVideoLoadHandler.bind(this),this.onErrorCallback=this.onVideoErrorHandler.bind(this),s.call(this,i,m)},onProcess:function(){var i,u;this.state=n.FILE_PROCESSING,this.config.asBlob?(i=this.createVideoElement(),this.data=i,(u=this).data.onloadeddata=function(){u.onProcessComplete()},this.data.onerror=function(){s.revokeObjectURL(u.data),u.onProcessError()},s.createObjectURL(i,this.xhrLoader.response,""),i.load()):this.onProcessComplete()},createVideoElement:function(){var i=document.createElement("video");return i.controls=!1,i.crossOrigin=this.loader.crossOrigin,this.config.noAudio&&(i.muted=!0,i.defaultMuted=!0,i.setAttribute("autoplay","autoplay")),i.setAttribute("playsinline","playsinline"),i.setAttribute("preload","auto"),i},onVideoLoadHandler:function(i){var u=i.target;u.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),u.removeEventListener("error",this.onErrorCallback,!0),this.data=u,this.resetXHR(),this.loader.nextFile(this,!0)},onVideoErrorHandler:function(i){var u=i.target;u&&(u.removeEventListener(this.config.loadEvent,this.onLoadCallback,!0),u.removeEventListener("error",this.onErrorCallback,!0)),this.resetXHR(),this.loader.nextFile(this,!1)},load:function(){var i,u=this.config.loadEvent;this.config.asBlob?s.prototype.load.call(this):(this.percentComplete=0,(i=this.createVideoElement()).addEventListener(u,this.onLoadCallback,!0),i.addEventListener("error",this.onErrorCallback,!0),i.src=e(this,this.loader.baseURL),i.load())}});a.create=function(i,u,c,d,f,p,v){var m=i.systems.game;o(u)&&(c=r(u,"url",[]),d=r(u,"loadEvent","loadeddata"),f=r(u,"asBlob",!1),p=r(u,"noAudio",!1),v=r(u,"xhrSettings"),u=r(u,"key"));var T=a.getVideoURL(m,c);if(T)return new a(i,u,T,d,f,p,v)},a.getVideoURL=function(i,u){Array.isArray(u)||(u=[u]);for(var c=0;c<u.length;c++){var d,f=r(u[c],"url",u[c]);if(0===f.indexOf("blob:"))return{url:f,type:""};if(d=0===f.indexOf("data:")?f.split(",")[0].match(/\/(.*?);/):f.match(/\.([a-zA-Z0-9]+)($|\?)/),d=r(u[c],"type",d?d[1]:"").toLowerCase(),i.device.video[d])return{url:f,type:d}}return null},l.register("video",function(i,u,c,d,f,p){var v;if(Array.isArray(i))for(var m=0;m<i.length;m++)(v=a.create(this,i[m]))&&this.addFile(v);else(v=a.create(this,i,u,c,d,f,p))&&this.addFile(v);return this}),g.exports=a},function(g,b,t){var h=t(0),n=t(21),s=t(149),l=t(9),e=t(95),r=t(8),o=t(2),a=t(24),i=t(20),u=t(156),c=new h({Extends:l,initialize:function(d){l.call(this);var f=d.sys.game.config,p=d.sys.settings.loader;this.scene=d,this.systems=d.sys,this.cacheManager=d.sys.cache,this.textureManager=d.sys.textures,this.sceneManager=d.sys.game.scene,r.install(this),this.prefix="",this.path="",this.baseURL="",this.setBaseURL(o(p,"baseURL",f.loaderBaseURL)),this.setPath(o(p,"path",f.loaderPath)),this.setPrefix(o(p,"prefix",f.loaderPrefix)),this.maxParallelDownloads=o(p,"maxParallelDownloads",f.loaderMaxParallelDownloads),this.xhr=u(o(p,"responseType",f.loaderResponseType),o(p,"async",f.loaderAsync),o(p,"user",f.loaderUser),o(p,"password",f.loaderPassword),o(p,"timeout",f.loaderTimeout),o(p,"withCredentials",f.loaderWithCredentials)),this.crossOrigin=o(p,"crossOrigin",f.loaderCrossOrigin),this.totalToLoad=0,this.progress=0,this.list=new s,this.inflight=new s,this.queue=new s,this._deleteQueue=new s,this.totalFailed=0,this.totalComplete=0,this.state=n.LOADER_IDLE,this.multiKeyIndex=0,d.sys.events.once(i.BOOT,this.boot,this),d.sys.events.on(i.START,this.pluginStart,this)},boot:function(){this.systems.events.once(i.DESTROY,this.destroy,this)},pluginStart:function(){this.systems.events.once(i.SHUTDOWN,this.shutdown,this)},setBaseURL:function(d){return void 0===d&&(d=""),""!==d&&"/"!==d.substr(-1)&&(d=d.concat("/")),this.baseURL=d,this},setPath:function(d){return void 0===d&&(d=""),""!==d&&"/"!==d.substr(-1)&&(d=d.concat("/")),this.path=d,this},setPrefix:function(d){return void 0===d&&(d=""),this.prefix=d,this},setCORS:function(d){return this.crossOrigin=d,this},addFile:function(d){Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++){var p=d[f];this.keyExists(p)||(this.list.set(p),this.emit(e.ADD,p.key,p.type,this,p),this.isLoading()&&(this.totalToLoad++,this.updateProgress()))}},keyExists:function(d){var f=d.hasCacheConflict();return f||this.list.iterate(function(p){if(p.type===d.type&&p.key===d.key)return!(f=!0)}),!f&&this.isLoading()&&(this.inflight.iterate(function(p){if(p.type===d.type&&p.key===d.key)return!(f=!0)}),this.queue.iterate(function(p){if(p.type===d.type&&p.key===d.key)return!(f=!0)})),f},addPack:function(d,f){f&&d.hasOwnProperty(f)&&(d={packKey:d[f]});var p=0,v=this.baseURL,m=this.path,T=this.prefix;for(var y in d)if(Object.prototype.hasOwnProperty.call(d,y)){var x=d[y],w=o(x,"baseURL",v),E=o(x,"path",m),S=o(x,"prefix",T),A=o(x,"files",null),_=o(x,"defaultType","void");if(Array.isArray(A)){this.setBaseURL(w),this.setPath(E),this.setPrefix(S);for(var C=0;C<A.length;C++){var M=A[C],P=M.hasOwnProperty("type")?M.type:_;this[P]&&(this[P](M),p++)}}}return this.setBaseURL(v),this.setPath(m),this.setPrefix(T),0<p},isLoading:function(){return this.state===n.LOADER_LOADING||this.state===n.LOADER_PROCESSING},isReady:function(){return this.state===n.LOADER_IDLE||this.state===n.LOADER_COMPLETE},start:function(){this.isReady()&&(this.progress=0,this.totalFailed=0,this.totalComplete=0,this.totalToLoad=this.list.size,this.emit(e.START,this),0===this.list.size?this.loadComplete():(this.state=n.LOADER_LOADING,this.inflight.clear(),this.queue.clear(),this.updateProgress(),this.checkLoadQueue(),this.systems.events.on(i.UPDATE,this.update,this)))},updateProgress:function(){this.progress=1-(this.list.size+this.inflight.size)/this.totalToLoad,this.emit(e.PROGRESS,this.progress)},update:function(){this.state===n.LOADER_LOADING&&0<this.list.size&&this.inflight.size<this.maxParallelDownloads&&this.checkLoadQueue()},checkLoadQueue:function(){this.list.each(function(d){if((d.state===n.FILE_POPULATED||d.state===n.FILE_PENDING&&this.inflight.size<this.maxParallelDownloads)&&(this.inflight.set(d),this.list.delete(d),d.crossOrigin||(d.crossOrigin=this.crossOrigin),d.load()),this.inflight.size===this.maxParallelDownloads)return!1},this)},nextFile:function(d,f){this.inflight&&(this.inflight.delete(d),this.updateProgress(),f?(this.totalComplete++,this.queue.set(d),this.emit(e.FILE_LOAD,d),d.onProcess()):(this.totalFailed++,this._deleteQueue.set(d),this.emit(e.FILE_LOAD_ERROR,d),this.fileProcessComplete(d)))},fileProcessComplete:function(d){this.scene&&this.systems&&this.systems.game&&!this.systems.game.pendingDestroy&&(d.state===n.FILE_ERRORED?d.multiFile&&d.multiFile.onFileFailed(d):d.state===n.FILE_COMPLETE&&(d.multiFile?d.multiFile.isReadyToProcess()&&d.multiFile.addToCache():d.addToCache()),this.queue.delete(d),0===this.list.size&&0===this.inflight.size&&0===this.queue.size&&this.loadComplete())},loadComplete:function(){this.emit(e.POST_PROCESS,this),this.list.clear(),this.inflight.clear(),this.queue.clear(),this.progress=1,this.state=n.LOADER_COMPLETE,this.systems.events.off(i.UPDATE,this.update,this),this._deleteQueue.iterateLocal("destroy"),this._deleteQueue.clear(),this.emit(e.COMPLETE,this,this.totalComplete,this.totalFailed)},flagForRemoval:function(d){this._deleteQueue.set(d)},saveJSON:function(d,f){return this.save(JSON.stringify(d),f)},save:function(d,f,p){void 0===f&&(f="file.json"),void 0===p&&(p="application/json");var v=new Blob([d],{type:p}),m=URL.createObjectURL(v),T=document.createElement("a");return T.download=f,T.textContent="Download "+f,T.href=m,T.click(),this},reset:function(){this.list.clear(),this.inflight.clear(),this.queue.clear();var d=this.systems.game.config,f=this.systems.settings.loader;this.setBaseURL(o(f,"baseURL",d.loaderBaseURL)),this.setPath(o(f,"path",d.loaderPath)),this.setPrefix(o(f,"prefix",d.loaderPrefix)),this.state=n.LOADER_IDLE},shutdown:function(){this.reset(),this.state=n.LOADER_SHUTDOWN,this.systems.events.off(i.UPDATE,this.update,this),this.systems.events.off(i.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.state=n.LOADER_DESTROYED,this.systems.events.off(i.UPDATE,this.update,this),this.systems.events.off(i.START,this.pluginStart,this),this.list=null,this.inflight=null,this.queue=null,this.scene=null,this.systems=null,this.textureManager=null,this.cacheManager=null,this.sceneManager=null}});a.register("Loader",c,"load"),g.exports=c},function(g,b,t){var h=t(62),n=t(17)(!1,n={ArcadePhysics:t(1367),Body:t(527),Collider:t(528),Components:t(243),Events:t(245),Factory:t(521),GetOverlapX:t(246),GetOverlapY:t(247),SeparateX:t(537),SeparateY:t(538),Group:t(524),Image:t(522),Sprite:t(157),StaticBody:t(539),StaticGroup:t(525),Tilemap:t(1391),World:t(526)},h);g.exports=n},function(g,b,t){var h=t(0),n=t(36),s=t(50),l=t(353),e=t(521),r=t(2),o=t(127),a=t(523),i=t(244),u=t(24),c=t(20),d=t(3),f=t(526),p=new h({initialize:function(v){this.scene=v,this.systems=v.sys,this.config=this.getConfig(),v.sys.events.once(c.BOOT,this.boot,this),v.sys.events.on(c.START,this.start,this)},boot:function(){this.world=new f(this.scene,this.config),this.add=new e(this.world),this.systems.events.once(c.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new f(this.scene,this.config),this.add=new e(this.world));var v=this.systems.events;r(this.config,"customUpdate",!1)||v.on(c.UPDATE,this.world.update,this.world),v.on(c.POST_UPDATE,this.world.postUpdate,this.world),v.once(c.SHUTDOWN,this.shutdown,this)},enableUpdate:function(){this.systems.events.on(c.UPDATE,this.world.update,this.world)},disableUpdate:function(){this.systems.events.off(c.UPDATE,this.world.update,this.world)},getConfig:function(){var v=this.systems.game.config.physics;return o(r(this.systems.settings.physics,"arcade",{}),r(v,"arcade",{}))},overlap:function(v,m,T,y,x){return void 0===T&&(T=null),void 0===y&&(y=null),void 0===x&&(x=T),this.world.collideObjects(v,m,T,y,x,!0)},collide:function(v,m,T,y,x){return void 0===T&&(T=null),void 0===y&&(y=null),void 0===x&&(x=T),this.world.collideObjects(v,m,T,y,x,!1)},collideTiles:function(v,m,T,y,x){return this.world.collideTiles(v,m,T,y,x)},overlapTiles:function(v,m,T,y,x){return this.world.overlapTiles(v,m,T,y,x)},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},accelerateTo:function(v,m,T,y,x,w){void 0===y&&(y=60);var E=Math.atan2(T-v.y,m-v.x);return v.body.acceleration.setToPolar(E,y),void 0!==x&&void 0!==w&&v.body.maxVelocity.set(x,w),E},accelerateToObject:function(v,m,T,y,x){return this.accelerateTo(v,m.x,m.y,T,y,x)},closest:function(v,m){m=m||this.world.bodies.entries;for(var T=Number.MAX_VALUE,y=null,x=v.x,w=v.y,E=m.length,S=0;S<E;S++){var A,_=m[S],C=_.body||_;v!==_&&v!==C&&v!==C.gameObject&&v!==C.center&&(A=l(x,w,C.center.x,C.center.y))<T&&(y=_,T=A)}return y},furthest:function(v,m){for(var T=-1,y=null,x=v.x,w=v.y,E=(m=m||this.world.bodies.entries).length,S=0;S<E;S++){var A,_=m[S],C=_.body||_;v!==_&&v!==C&&v!==C.gameObject&&v!==C.center&&T<(A=l(x,w,C.center.x,C.center.y))&&(y=_,T=A)}return y},moveTo:function(v,m,T,y,x){void 0===y&&(y=60),void 0===x&&(x=0);var w=Math.atan2(T-v.y,m-v.x);return 0<x&&(y=s(v.x,v.y,m,T)/(x/1e3)),v.body.velocity.setToPolar(w,y),w},moveToObject:function(v,m,T,y){return this.moveTo(v,m.x,m.y,T,y)},velocityFromAngle:function(v,m,T){return void 0===m&&(m=60),void 0===T&&(T=new d),T.setToPolar(n(v),m)},velocityFromRotation:function(v,m,T){return void 0===m&&(m=60),void 0===T&&(T=new d),T.setToPolar(v,m)},overlapRect:function(v,m,T,y,x,w){return i(this.world,v,m,T,y,x,w)},overlapCirc:function(v,m,T,y,x){return a(this.world,v,m,T,y,x)},shutdown:function(){var v;this.world&&((v=this.systems.events).off(c.UPDATE,this.world.update,this.world),v.off(c.POST_UPDATE,this.world.postUpdate,this.world),v.off(c.SHUTDOWN,this.shutdown,this),this.add.destroy(),this.world.destroy(),this.add=null,this.world=null)},destroy:function(){this.shutdown(),this.scene.sys.events.off(c.START,this.start,this),this.scene=null,this.systems=null}});u.register("ArcadePhysics",p,"arcadePhysics"),g.exports=p},function(g,b){g.exports={setAcceleration:function(t,h){return this.body.acceleration.set(t,h),this},setAccelerationX:function(t){return this.body.acceleration.x=t,this},setAccelerationY:function(t){return this.body.acceleration.y=t,this}}},function(g,b){g.exports={setAngularVelocity:function(t){return this.body.angularVelocity=t,this},setAngularAcceleration:function(t){return this.body.angularAcceleration=t,this},setAngularDrag:function(t){return this.body.angularDrag=t,this}}},function(g,b){g.exports={setBounce:function(t,h){return this.body.bounce.set(t,h),this},setBounceX:function(t){return this.body.bounce.x=t,this},setBounceY:function(t){return this.body.bounce.y=t,this},setCollideWorldBounds:function(t,h,n){return this.body.setCollideWorldBounds(t,h,n),this}}},function(g,b){g.exports={setDebug:function(t,h,n){return this.debugShowBody=t,this.debugShowVelocity=h,this.debugBodyColor=n,this},setDebugBodyColor:function(t){return this.body.debugBodyColor=t,this},debugShowBody:{get:function(){return this.body.debugShowBody},set:function(t){this.body.debugShowBody=t}},debugShowVelocity:{get:function(){return this.body.debugShowVelocity},set:function(t){this.body.debugShowVelocity=t}},debugBodyColor:{get:function(){return this.body.debugBodyColor},set:function(t){this.body.debugBodyColor=t}}}},function(g,b){g.exports={setDrag:function(t,h){return this.body.drag.set(t,h),this},setDragX:function(t){return this.body.drag.x=t,this},setDragY:function(t){return this.body.drag.y=t,this},setDamping:function(t){return this.body.useDamping=t,this}}},function(g,b){g.exports={enableBody:function(h,n,s,l,e){return h&&this.body.reset(n,s),l&&(this.body.gameObject.active=!0),e&&(this.body.gameObject.visible=!0),this.body.enable=!0,this},disableBody:function(h,n){return void 0===h&&(h=!1),void 0===n&&(n=!1),this.body.stop(),this.body.enable=!1,h&&(this.body.gameObject.active=!1),n&&(this.body.gameObject.visible=!1),this},refreshBody:function(){return this.body.updateFromGameObject(),this}}},function(g,b){g.exports={setFriction:function(t,h){return this.body.friction.set(t,h),this},setFrictionX:function(t){return this.body.friction.x=t,this},setFrictionY:function(t){return this.body.friction.y=t,this}}},function(g,b){g.exports={setGravity:function(t,h){return this.body.gravity.set(t,h),this},setGravityX:function(t){return this.body.gravity.x=t,this},setGravityY:function(t){return this.body.gravity.y=t,this}}},function(g,b){g.exports={setImmovable:function(h){return void 0===h&&(h=!0),this.body.immovable=h,this}}},function(g,b){g.exports={setMass:function(t){return this.body.mass=t,this}}},function(g,b){g.exports={setPushable:function(h){return void 0===h&&(h=!0),this.body.pushable=h,this}}},function(g,b){g.exports={setOffset:function(t,h){return this.body.setOffset(t,h),this},setSize:function(t,h,n){return this.body.setSize(t,h,n),this},setBodySize:function(t,h,n){return this.body.setSize(t,h,n),this},setCircle:function(t,h,n){return this.body.setCircle(t,h,n),this}}},function(g,b){g.exports={setVelocity:function(t,h){return this.body.setVelocity(t,h),this},setVelocityX:function(t){return this.body.setVelocityX(t),this},setVelocityY:function(t){return this.body.setVelocityY(t),this},setMaxVelocity:function(t,h){return this.body.maxVelocity.set(t,h),this}}},function(g,b){g.exports="collide"},function(g,b){g.exports="overlap"},function(g,b){g.exports="pause"},function(g,b){g.exports="resume"},function(g,b){g.exports="tilecollide"},function(g,b){g.exports="tileoverlap"},function(g,b){g.exports="worldbounds"},function(g,b){g.exports="worldstep"},function(g,b){var t,h,n,s,l,e,r,o,a,i,u,c,d,f,p,v,m,T=function(){return i&&p&&h.blocked.right?(t.processX(-m,r,!1,!0),1):a&&v&&h.blocked.left?(t.processX(m,r,!0),1):d&&v&&t.blocked.right?(h.processX(-m,o,!1,!0),2):c&&p&&t.blocked.left?(h.processX(m,o,!0),2):0},y=function(x){var w;return n&&s?(m*=.5,0===x||3===x?(t.processX(m,l),h.processX(-m,e)):(t.processX(-m,l),h.processX(m,e))):n&&!s?0===x||3===x?t.processX(m,r,!0):t.processX(-m,r,!1,!0):!n&&s?0===x||3===x?h.processX(-m,o,!1,!0):h.processX(m,o,!0):(w=.5*m,0===x?f?(t.processX(m,0,!0),h.processX(0,null,!1,!0)):d?(t.processX(w,0,!0),h.processX(-w,0,!1,!0)):(t.processX(w,h.velocity.x,!0),h.processX(-w,null,!1,!0)):1===x?u?(t.processX(0,null,!1,!0),h.processX(m,0,!0)):i?(t.processX(-w,0,!1,!0),h.processX(w,0,!0)):(t.processX(-w,null,!1,!0),h.processX(w,t.velocity.x,!0)):2===x?f?(t.processX(-m,0,!1,!0),h.processX(0,null,!0)):c?(t.processX(-w,0,!1,!0),h.processX(w,0,!0)):(t.processX(-w,h.velocity.x,!1,!0),h.processX(w,null,!0)):3===x&&(u?(t.processX(0,null,!0),h.processX(-m,0,!1,!0)):a?(t.processX(w,0,!0),h.processX(-w,0,!1,!0)):(t.processX(w,h.velocity.y,!0),h.processX(-w,null,!1,!0)))),!0};g.exports={BlockCheck:T,Check:function(){var x=t.velocity.x,w=h.velocity.x,E=Math.sqrt(w*w*h.mass/t.mass)*(0<w?1:-1),S=Math.sqrt(x*x*t.mass/h.mass)*(0<x?1:-1),A=.5*(E+S);return l=A+(E-=A)*t.bounce.x,e=A+(S-=A)*h.bounce.x,a&&v?y(0):c&&p?y(1):i&&p?y(2):!(!d||!v)&&y(3)},Set:function(x,w,E){var S=(t=x).velocity.x,A=(h=w).velocity.x;return n=t.pushable,a=t._dx<0,i=0<t._dx,u=0===t._dx,p=Math.abs(t.right-h.x)<=Math.abs(h.right-t.x),r=A-S*t.bounce.x,s=h.pushable,c=h._dx<0,d=0<h._dx,f=0===h._dx,v=!p,o=S-A*h.bounce.x,m=Math.abs(E),T()},Run:y,RunImmovableBody1:function(x){1===x?h.velocity.x=0:p?h.processX(m,o,!0):h.processX(-m,o,!1,!0),t.moves&&(h.y+=(t.y-t.prev.y)*t.friction.y,h._dy=h.y-h.prev.y)},RunImmovableBody2:function(x){2===x?t.velocity.x=0:v?t.processX(m,r,!0):t.processX(-m,r,!1,!0),h.moves&&(t.y+=(h.y-h.prev.y)*h.friction.y,t._dy=t.y-t.prev.y)}}},function(g,b){var t,h,n,s,l,e,r,o,a,i,u,c,d,f,p,v,m,T=function(){return i&&p&&h.blocked.down?(t.processY(-m,r,!1,!0),1):a&&v&&h.blocked.up?(t.processY(m,r,!0),1):d&&v&&t.blocked.down?(h.processY(-m,o,!1,!0),2):c&&p&&t.blocked.up?(h.processY(m,o,!0),2):0},y=function(x){var w;return n&&s?(m*=.5,0===x||3===x?(t.processY(m,l),h.processY(-m,e)):(t.processY(-m,l),h.processY(m,e))):n&&!s?0===x||3===x?t.processY(m,r,!0):t.processY(-m,r,!1,!0):!n&&s?0===x||3===x?h.processY(-m,o,!1,!0):h.processY(m,o,!0):(w=.5*m,0===x?f?(t.processY(m,0,!0),h.processY(0,null,!1,!0)):d?(t.processY(w,0,!0),h.processY(-w,0,!1,!0)):(t.processY(w,h.velocity.y,!0),h.processY(-w,null,!1,!0)):1===x?u?(t.processY(0,null,!1,!0),h.processY(m,0,!0)):i?(t.processY(-w,0,!1,!0),h.processY(w,0,!0)):(t.processY(-w,null,!1,!0),h.processY(w,t.velocity.y,!0)):2===x?f?(t.processY(-m,0,!1,!0),h.processY(0,null,!0)):c?(t.processY(-w,0,!1,!0),h.processY(w,0,!0)):(t.processY(-w,h.velocity.y,!1,!0),h.processY(w,null,!0)):3===x&&(u?(t.processY(0,null,!0),h.processY(-m,0,!1,!0)):a?(t.processY(w,0,!0),h.processY(-w,0,!1,!0)):(t.processY(w,h.velocity.y,!0),h.processY(-w,null,!1,!0)))),!0};g.exports={BlockCheck:T,Check:function(){var x=t.velocity.y,w=h.velocity.y,E=Math.sqrt(w*w*h.mass/t.mass)*(0<w?1:-1),S=Math.sqrt(x*x*t.mass/h.mass)*(0<x?1:-1),A=.5*(E+S);return l=A+(E-=A)*t.bounce.y,e=A+(S-=A)*h.bounce.y,a&&v?y(0):c&&p?y(1):i&&p?y(2):!(!d||!v)&&y(3)},Set:function(x,w,E){var S=(t=x).velocity.y,A=(h=w).velocity.y;return n=t.pushable,a=t._dy<0,i=0<t._dy,u=0===t._dy,p=Math.abs(t.bottom-h.y)<=Math.abs(h.bottom-t.y),r=A-S*t.bounce.y,s=h.pushable,c=h._dy<0,d=0<h._dy,f=0===h._dy,v=!p,o=S-A*h.bounce.y,m=Math.abs(E),T()},Run:y,RunImmovableBody1:function(x){1===x?h.velocity.y=0:p?h.processY(m,o,!0):h.processY(-m,o,!1,!0),t.moves&&(h.x+=(t.x-t.prev.x)*t.friction.x,h._dx=h.x-h.prev.x)},RunImmovableBody2:function(x){2===x?t.velocity.y=0:v?t.processY(m,r,!0):t.processY(-m,r,!1,!0),h.moves&&(t.x+=(h.x-h.prev.x)*h.friction.x,t._dx=t.x-t.prev.x)}}},function(g,b,t){var h={ProcessTileCallbacks:t(530),ProcessTileSeparationX:t(534),ProcessTileSeparationY:t(536),SeparateTile:t(532),TileCheckX:t(533),TileCheckY:t(535),TileIntersectsBody:t(248)};g.exports=h},function(g,b,t){var h=t(0),n=t(3),s=new h({initialize:function(){this.boundsCenter=new n,this.centerDiff=new n},parseBody:function(l){if(!(l=l.hasOwnProperty("body")?l.body:l).hasOwnProperty("bounds")||!l.hasOwnProperty("centerOfMass"))return!1;var e=this.boundsCenter,r=this.centerDiff,o=l.bounds.max.x-l.bounds.min.x,a=l.bounds.max.y-l.bounds.min.y,i=o*l.centerOfMass.x,u=a*l.centerOfMass.y;return e.set(o/2,a/2),r.set(i-e.x,u-e.y),!0},getTopLeft:function(l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(l)){var o=this.boundsCenter,a=this.centerDiff;return new n(e+o.x+a.x,r+o.y+a.y)}return!1},getTopCenter:function(l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(l)){var a=this.centerDiff;return new n(e+a.x,r+this.boundsCenter.y+a.y)}return!1},getTopRight:function(l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(l)){var o=this.boundsCenter,a=this.centerDiff;return new n(e-(o.x-a.x),r+o.y+a.y)}return!1},getLeftCenter:function(l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(l)){var a=this.centerDiff;return new n(e+this.boundsCenter.x+a.x,r+a.y)}return!1},getCenter:function(l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(l)){var o=this.centerDiff;return new n(e+o.x,r+o.y)}return!1},getRightCenter:function(l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(l)){var a=this.centerDiff;return new n(e-(this.boundsCenter.x-a.x),r+a.y)}return!1},getBottomLeft:function(l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(l)){var o=this.boundsCenter,a=this.centerDiff;return new n(e+o.x+a.x,r-(o.y-a.y))}return!1},getBottomCenter:function(l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(l)){var a=this.centerDiff;return new n(e+a.x,r-(this.boundsCenter.y-a.y))}return!1},getBottomRight:function(l,e,r){if(void 0===e&&(e=0),void 0===r&&(r=0),this.parseBody(l)){var o=this.boundsCenter,a=this.centerDiff;return new n(e-(o.x-a.x),r-(o.y-a.y))}return!1}});g.exports=s},function(g,b){function t(x,w,E,S){var A=w[0]-x[0],_=w[1]-x[1],C=S[0]-E[0],M=S[1]-E[1];if(C*_-M*A!=0){var P=(A*(E[1]-x[1])+_*(x[0]-E[0]))/(C*_-M*A),L=(C*(x[1]-E[1])+M*(E[0]-x[0]))/(M*A-C*_);return 0<=P&&P<=1&&0<=L&&L<=1}}function h(x,w,E){return(w[0]-x[0])*(E[1]-x[1])-(E[0]-x[0])*(w[1]-x[1])}function n(x,w,E){return 0<h(x,w,E)}function s(x,w,E){return 0<=h(x,w,E)}function l(x,w,E){return h(x,w,E)<0}function e(x,w,E){return h(x,w,E)<=0}g.exports={decomp:function(x){var w=function E(S){for(var A=[],_=[],C=[],M=[],P=Number.MAX_VALUE,L=0;L<S.length;++L)if(c(S,L))for(var D=0;D<S.length;++D)if(p(S,L,D)){_=E(m(S,L,D,M)),C=E(m(S,D,L,M));for(var F=0;F<C.length;F++)_.push(C[F]);_.length<P&&(P=(A=_).length,A.push([i(S,L),i(S,D)]))}return A}(x);return 0<w.length?function E(S,A){if(0===A.length)return[S];if(A instanceof Array&&A.length&&A[0]instanceof Array&&2===A[0].length&&A[0][0]instanceof Array){for(var _=[S],L=0;L<A.length;L++)for(var P=A[L],D=0;D<_.length;D++){var M=E(_[D],P);if(M){_.splice(D,1),_.push(M[0],M[1]);break}}return _}return L=S.indexOf((P=A)[0]),D=S.indexOf(P[1]),-1!==L&&-1!==D&&[m(S,L,D),m(S,D,L)]}(x,w):[x]},quickDecomp:function x(w,E,S,A,_,C,M){M=M||0,_=_||25,E=void 0!==E?E:[],S=S||[],A=A||[];var P=[0,0],L=[0,0],D=[0,0],F=0,X=0,R=0,O=0,N=0,k=0,I=0,B=[],Y=[],U=w,G=w;if(G.length<3)return E;if((C=C||100)<++M)return console.warn("quickDecomp: max level ("+C+") reached."),E;for(var W=0;W<w.length;++W)if(c(U,W)){S.push(U[W]),F=X=Number.MAX_VALUE;for(var z=0;z<w.length;++z)n(i(U,W-1),i(U,W),i(U,z))&&e(i(U,W-1),i(U,W),i(U,z-1))&&(D=T(i(U,W-1),i(U,W),i(U,z),i(U,z-1)),l(i(U,W+1),i(U,W),D)&&(R=a(U[W],D))<X&&(X=R,L=D,k=z)),n(i(U,W+1),i(U,W),i(U,z+1))&&e(i(U,W+1),i(U,W),i(U,z))&&(D=T(i(U,W+1),i(U,W),i(U,z),i(U,z+1)),n(i(U,W-1),i(U,W),D)&&(R=a(U[W],D))<F&&(F=R,P=D,N=z));if(k===(N+1)%w.length)D[0]=(L[0]+P[0])/2,D[1]=(L[1]+P[1])/2,A.push(D),W<N?(u(B,U,W,N+1),B.push(D),Y.push(D),0!==k&&u(Y,U,k,U.length),u(Y,U,0,W+1)):(0!==W&&u(B,U,W,U.length),u(B,U,0,N+1),B.push(D),Y.push(D),u(Y,U,k,W+1));else{if(N<k&&(N+=w.length),O=Number.MAX_VALUE,N<k)return E;for(z=k;z<=N;++z)s(i(U,W-1),i(U,W),i(U,z))&&e(i(U,W+1),i(U,W),i(U,z))&&(R=a(i(U,W),i(U,z)))<O&&v(U,W,z)&&(O=R,I=z%w.length);W<I?(u(B,U,W,I+1),0!==I&&u(Y,U,I,G.length),u(Y,U,0,W+1)):(0!==W&&u(B,U,W,G.length),u(B,U,0,I+1),u(Y,U,I,W+1))}return B.length<Y.length?(x(B,E,S,A,_,C,M),x(Y,E,S,A,_,C,M)):(x(Y,E,S,A,_,C,M),x(B,E,S,A,_,C,M)),E}return E.push(w),E},isSimple:function(x){var w,E=x;for(w=0;w<E.length-1;w++)for(var S=0;S<w-1;S++)if(t(E[w],E[w+1],E[S],E[S+1]))return!1;for(w=1;w<E.length-2;w++)if(t(E[0],E[E.length-1],E[w],E[w+1]))return!1;return!0},removeCollinearPoints:function(x,w){for(var E=0,S=x.length-1;3<x.length&&0<=S;--S)!function(A,_,C,M){if(M){var P=r,L=o;P[0]=_[0]-A[0],P[1]=_[1]-A[1],L[0]=C[0]-_[0],L[1]=C[1]-_[1];var D=P[0]*L[0]+P[1]*L[1],F=Math.sqrt(P[0]*P[0]+P[1]*P[1]),X=Math.sqrt(L[0]*L[0]+L[1]*L[1]);return Math.acos(D/(F*X))<M}return 0===h(A,_,C)}(i(x,S-1),i(x,S),i(x,S+1),w)||(x.splice(S%x.length,1),E++);return E},removeDuplicatePoints:function(x,w){for(var E=x.length-1;1<=E;--E)for(var S=x[E],A=E-1;0<=A;--A)!y((_=S)[0],(C=x[A])[0],M=w)||!y(_[1],C[1],M)||x.splice(E,1);var _,C,M},makeCCW:function(x){for(var w=0,E=x,S=1;S<x.length;++S)(E[S][1]<E[w][1]||E[S][1]===E[w][1]&&E[S][0]>E[w][0])&&(w=S);return!n(i(x,w-1),i(x,w),i(x,w+1))&&(function(A){for(var _=[],C=A.length,M=0;M!==C;M++)_.push(A.pop());for(M=0;M!==C;M++)A[M]=_[M]}(x),!0)}};var r=[],o=[];function a(x,w){var E=w[0]-x[0],S=w[1]-x[1];return E*E+S*S}function i(x,w){var E=x.length;return x[w<0?w%E+E:w%E]}function u(x,w,E,S){for(var A=E;A<S;A++)x.push(w[A])}function c(x,w){return l(i(x,w-1),i(x,w),i(x,w+1))}var d=[],f=[];function p(x,w,E){var S,A,P,L,F,X,R,O,N,k,I,B,_=d,C=f;if(!s(i(x,w+1),i(x,w),i(x,E))||!e(i(x,w-1),i(x,w),i(x,E))){A=a(i(x,w),i(x,E));for(var M=0;M!==x.length;++M)if((M+1)%x.length!==w&&M!==w&&s(i(x,w),i(x,E),i(x,M+1))&&e(i(x,w),i(x,E),i(x,M))&&(_[0]=i(x,w),_[1]=i(x,E),C[0]=i(x,M),C[1]=i(x,M+1),F=void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,F=[0,0],O=(X=(P=_)[1][1]-P[0][1])*P[0][0]+(R=P[0][0]-P[1][0])*P[0][1],I=(N=(L=C)[1][1]-L[0][1])*L[0][0]+(k=L[0][0]-L[1][0])*L[0][1],y(B=X*k-N*R,0,0)||(F[0]=(k*O-R*I)/B,F[1]=(X*I-N*O)/B),S=F,a(i(x,w),S)<A))return;return 1}}function v(x,w,E){for(var S=0;S!==x.length;++S)if(S!==w&&S!==E&&(S+1)%x.length!==w&&(S+1)%x.length!==E&&t(i(x,w),i(x,E),i(x,S),i(x,S+1)))return;return 1}function m(x,w,E,S){var A=S||[];if(A.length=0,w<E)for(var _=w;_<=E;_++)A.push(x[_]);else{for(_=0;_<=E;_++)A.push(x[_]);for(_=w;_<x.length;_++)A.push(x[_])}return A}function T(x,w,E,S,A){var _=w[1]-x[1],C=x[0]-w[0],M=_*x[0]+C*x[1],P=S[1]-E[1],L=E[0]-S[0],D=P*E[0]+L*E[1],F=_*L-P*C;return y(F,0,A=A||0)?[0,0]:[(L*M-C*D)/F,(_*D-P*M)/F]}function y(x,w,E){return E=E||0,Math.abs(x-w)<=E}},function(g,b,t){var h=t(86),n=t(0),s=t(591),l=t(128),e=t(592),r=t(1395),o=t(1396),a=t(1397),i=t(593),u=t(589),c=t(590),d=t(1398),f=t(64),p=new n({initialize:function(v){this.world=v,this.scene=v.scene,this.sys=v.scene.sys},rectangle:function(v,m,T,y,x){var w=h.rectangle(v,m,T,y,x);return this.world.add(w),w},trapezoid:function(v,m,T,y,x,w){var E=h.trapezoid(v,m,T,y,x,w);return this.world.add(E),E},circle:function(v,m,T,y,x){var w=h.circle(v,m,T,y,x);return this.world.add(w),w},polygon:function(v,m,T,y,x){var w=h.polygon(v,m,T,y,x);return this.world.add(w),w},fromVertices:function(v,m,T,y,x,w,E){"string"==typeof T&&(T=f.fromPath(T));var S=h.fromVertices(v,m,T,y,x,w,E);return this.world.add(S),S},fromPhysicsEditor:function(v,m,T,y,x){void 0===x&&(x=!0);var w=u.parseBody(v,m,T,y);return x&&!this.world.has(w)&&this.world.add(w),w},fromSVG:function(v,m,T,y,x,w){void 0===y&&(y=1),void 0===x&&(x={}),void 0===w&&(w=!0);for(var E=T.getElementsByTagName("path"),S=[],A=0;A<E.length;A++){var _=e.pathToVertices(E[A],30);1!==y&&f.scale(_,y,y),S.push(_)}var C=h.fromVertices(v,m,S,x);return w&&this.world.add(C),C},fromJSON:function(v,m,T,y,x){void 0===y&&(y={}),void 0===x&&(x=!0);var w=c.parseBody(v,m,T,y);return w&&x&&this.world.add(w),w},imageStack:function(v,m,T,y,x,w,E,S,A){void 0===E&&(E=0),void 0===S&&(S=0),void 0===A&&(A={});var _=this.world,C=this.sys.displayList;A.addToWorld=!1;var M=s.stack(T,y,x,w,E,S,function(P,L){var D=new o(_,P,L,v,m,A);return C.add(D),D.body});return _.add(M),M},stack:function(v,m,T,y,x,w,E){var S=s.stack(v,m,T,y,x,w,E);return this.world.add(S),S},pyramid:function(v,m,T,y,x,w,E){var S=s.pyramid(v,m,T,y,x,w,E);return this.world.add(S),S},chain:function(v,m,T,y,x,w){return s.chain(v,m,T,y,x,w)},mesh:function(v,m,T,y,x){return s.mesh(v,m,T,y,x)},newtonsCradle:function(v,m,T,y,x){var w=s.newtonsCradle(v,m,T,y,x);return this.world.add(w),w},car:function(v,m,T,y,x){var w=s.car(v,m,T,y,x);return this.world.add(w),w},softBody:function(v,m,T,y,x,w,E,S,A,_){var C=s.softBody(v,m,T,y,x,w,E,S,A,_);return this.world.add(C),C},joint:function(v,m,T,y,x){return this.constraint(v,m,T,y,x)},spring:function(v,m,T,y,x){return this.constraint(v,m,T,y,x)},constraint:function(v,m,T,y,x){void 0===y&&(y=1),void 0===x&&(x={}),x.bodyA="body"===v.type?v:v.body,x.bodyB="body"===m.type?m:m.body,isNaN(T)||(x.length=T),x.stiffness=y;var w=l.create(x);return this.world.add(w),w},worldConstraint:function(v,m,T,y){void 0===T&&(T=1),void 0===y&&(y={}),y.bodyB="body"===v.type?v:v.body,isNaN(m)||(y.length=m),y.stiffness=T;var x=l.create(y);return this.world.add(x),x},mouseSpring:function(v){return this.pointerConstraint(v)},pointerConstraint:function(v){void 0===v&&(v={}),v.hasOwnProperty("render")||(v.render={visible:!1});var m=new d(this.scene,this.world,v);return this.world.add(m.constraint),m},image:function(v,m,T,y,x){var w=new o(this.world,v,m,T,y,x);return this.sys.displayList.add(w),w},tileBody:function(v,m){return new i(this.world,v,m)},sprite:function(v,m,T,y,x){var w=new a(this.world,v,m,T,y,x);return this.sys.displayList.add(w),this.sys.updateList.add(w),w},gameObject:function(v,m,T){return r(this.world,v,m,T)},destroy:function(){this.world=null,this.scene=null,this.sys=null}});g.exports=p},function(g,b,t){var h=t(249),n=t(2),s=t(3);g.exports=function(l,e,r,o){void 0===r&&(r={}),void 0===o&&(o=!0);var a,i=e.x,u=e.y;return e.body={temp:!0,position:{x:i,y:u}},[h.Bounce,h.Collision,h.Force,h.Friction,h.Gravity,h.Mass,h.Sensor,h.SetBody,h.Sleep,h.Static,h.Transform,h.Velocity].forEach(function(c){for(var d in c)(f=c[d]).get&&"function"==typeof f.get||f.set&&"function"==typeof f.set?Object.defineProperty(e,d,{get:c[d].get,set:c[d].set}):Object.defineProperty(e,d,{value:c[d]});var f}),e.world=l,e._tempVec2=new s(i,u),r.hasOwnProperty("type")&&"body"===r.type?e.setExistingBody(r,o):(a=(a=n(r,"shape",null))||"rectangle",r.addToWorld=o,e.setBody(a,r)),e}},function(g,b,t){var h=t(0),n=t(249),s=t(15),l=t(2),e=t(125),r=t(167),o=t(3),a=new h({Extends:e,Mixins:[n.Bounce,n.Collision,n.Force,n.Friction,n.Gravity,n.Mass,n.Sensor,n.SetBody,n.Sleep,n.Static,n.Transform,n.Velocity,r],initialize:function(i,u,c,d,f,p){s.call(this,i.scene,"Image"),this._crop=this.resetCropObject(),this.setTexture(d,f),this.setSizeToFrame(),this.setOrigin(),this.world=i,this._tempVec2=new o(u,c);var v=l(p,"shape",null);v?this.setBody(v,p):this.setRectangle(this.width,this.height,p),this.setPosition(u,c),this.initPipeline()}});g.exports=a},function(g,b,t){var h=t(164),n=t(0),s=t(249),l=t(15),e=t(2),r=t(167),o=t(73),a=t(3),i=new n({Extends:o,Mixins:[s.Bounce,s.Collision,s.Force,s.Friction,s.Gravity,s.Mass,s.Sensor,s.SetBody,s.Sleep,s.Static,s.Transform,s.Velocity,r],initialize:function(u,c,d,f,p,v){l.call(this,u.scene,"Sprite"),this._crop=this.resetCropObject(),this.anims=new h(this),this.setTexture(f,p),this.setSizeToFrame(),this.setOrigin(),this.world=u,this._tempVec2=new a(c,d);var m=e(v,"shape",null);m?this.setBody(m,v):this.setRectangle(this.width,this.height,v),this.setPosition(c,d),this.initPipeline()}});g.exports=i},function(g,b,t){var h=t(84),n=t(0),s=t(118),l=t(128),e=t(273),r=t(272),o=t(51),a=t(127),i=t(165),u=t(3),c=t(64),d=new n({initialize:function(f,p,v){void 0===v&&(v={}),this.scene=f,this.world=p,this.camera=null,this.pointer=null,this.active=!0,this.position=new u,this.body=null,this.part=null,this.constraint=l.create(a(v,{label:"Pointer Constraint",pointA:{x:0,y:0},pointB:{x:0,y:0},length:.01,stiffness:.1,angularStiffness:1,collisionFilter:{category:1,mask:4294967295,group:0}})),this.world.on(r.BEFORE_UPDATE,this.update,this),f.sys.input.on(o.POINTER_DOWN,this.onDown,this),f.sys.input.on(o.POINTER_UP,this.onUp,this)},onDown:function(f){this.pointer||(this.pointer=f,this.camera=f.camera)},onUp:function(f){f===this.pointer&&(this.pointer=null)},getBody:function(f){var p=this.position,v=this.constraint;this.camera.getWorldPoint(f.x,f.y,p);for(var m=s.allBodies(this.world.localWorld),T=0;T<m.length;T++){var y=m[T];if(!y.ignorePointer&&h.contains(y.bounds,p)&&e.canCollide(y.collisionFilter,v.collisionFilter)&&this.hitTestBody(y,p))return this.world.emit(r.DRAG_START,y,this.part,this),!0}return!1},hitTestBody:function(f,p){for(var v=this.constraint,m=f.parts.length,T=1<m?1:0;T<m;T++){var y=f.parts[T];if(c.contains(y.vertices,p))return v.pointA=p,v.pointB={x:p.x-f.position.x,y:p.y-f.position.y},v.bodyB=f,v.angleB=f.angle,i.set(f,!1),this.part=y,this.body=f,!0}return!1},update:function(){var f=this.pointer,p=this.body;if(this.active&&f)if(f.isDown||!p){if(f.isDown){if(!p&&!this.getBody(f))return;p=this.body;var v=this.position,m=this.constraint;this.camera.getWorldPoint(f.x,f.y,v),m.pointA.x=v.x,m.pointA.y=v.y,i.set(p,!1),this.world.emit(r.DRAG,p,this)}}else this.stopDrag();else p&&this.stopDrag()},stopDrag:function(){var f=this.body,p=this.constraint;p.bodyB=null,p.pointB=null,this.pointer=null,this.body=null,this.part=null,f&&this.world.emit(r.DRAG_END,f,this)},destroy:function(){this.world.removeConstraint(this.constraint),this.pointer=null,this.constraint=null,this.body=null,this.part=null,this.world.off(r.BEFORE_UPDATE,this.update),this.scene.sys.input.off(o.POINTER_DOWN,this.onDown,this),this.scene.sys.input.off(o.POINTER_UP,this.onUp,this)}});g.exports=d},function(g,b,t){var h={};g.exports=h;var n=t(595),s=t(32);h.name="matter-js",h.version="0.14.2",h.uses=[],h.used=[],h.use=function(){n.use(h,Array.prototype.slice.call(arguments))},h.before=function(l,e){return l=l.replace(/^Matter./,""),s.chainPathBefore(h,l,e)},h.after=function(l,e){return l=l.replace(/^Matter./,""),s.chainPathAfter(h,l,e)}},function(g,b,t){var h={};g.exports=h;var n=t(83),s=t(274),l=t(84),e=t(86),r=t(64);h.collides=function(o,a){for(var i=[],u=0;u<a.length;u++){var c=a[u];if(o!==c&&l.overlaps(c.bounds,o.bounds))for(var d=1===c.parts.length?0:1;d<c.parts.length;d++){var f=c.parts[d];if(l.overlaps(f.bounds,o.bounds)){var p=s.collides(f,o);if(p.collided){i.push(p);break}}}}return i},h.ray=function(o,a,i,u){u=u||1e-100;for(var c=n.angle(a,i),d=n.magnitude(n.sub(a,i)),v=e.rectangle(.5*(i.x+a.x),.5*(i.y+a.y),d,u,{angle:c}),m=h.collides(v,o),T=0;T<m.length;T+=1){var y=m[T];y.body=y.bodyB=y.bodyA}return m},h.region=function(o,a,i){for(var u=[],c=0;c<o.length;c++){var d=o[c],f=l.overlaps(d.bounds,a);(f&&!i||!f&&i)&&u.push(d)}return u},h.point=function(o,a){for(var i=[],u=0;u<o.length;u++){var c=o[u];if(l.contains(c.bounds,a))for(var d=1===c.parts.length?0:1;d<c.parts.length;d++){var f=c.parts[d];if(l.contains(f.bounds,a)&&r.contains(f.vertices,a)){i.push(c);break}}}return i}},function(g,b,t){var h={};g.exports=h;var n=t(596),s=t(165),l=t(599),e=t(598),r=t(1523),o=t(597),a=t(166),i=t(118),u=t(128),c=t(32),d=t(41);h.create=function(f,p){p=(p=c.isElement(f)?p:f)||{},((f=c.isElement(f)?f:null)||p.render)&&c.warn("Engine.create: engine.render is deprecated (see docs)");var m=c.extend({positionIterations:6,velocityIterations:4,constraintIterations:2,enableSleeping:!1,events:[],plugin:{},timing:{timestamp:0,timeScale:1},broadphase:{controller:o}},p);return m.world=p.world||n.create(m.world),m.pairs=e.create(),m.broadphase=m.broadphase.controller.create(m.broadphase),m.metrics=m.metrics||{extended:!1},m.metrics=r.create(m.metrics),m},h.update=function(f,p,v){v=v||1;var m,w,T=f.world,y=f.timing,x=f.broadphase;y.timestamp+=(p=p||1e3/60)*y.timeScale;var E={timestamp:y.timestamp};a.trigger(f,"beforeUpdate",E);var S=i.allBodies(T),A=i.allConstraints(T);for(r.reset(f.metrics),f.enableSleeping&&s.update(S,y.timeScale),h._bodiesApplyGravity(S,T.gravity),h._bodiesUpdate(S,p,y.timeScale,v,T.bounds),u.preSolveAll(S),m=0;m<f.constraintIterations;m++)u.solveAll(A,y.timeScale);u.postSolveAll(S),w=x.controller?(T.isModified&&x.controller.clear(x),x.controller.update(x,S,f,T.isModified),x.pairsList):S,T.isModified&&i.setModified(T,!1,!1,!0);var _=x.detector(w,f),C=f.pairs,M=y.timestamp;for(e.update(C,_,M),e.removeOld(C,M),f.enableSleeping&&s.afterCollisions(C.list,y.timeScale),0<C.collisionStart.length&&a.trigger(f,"collisionStart",{pairs:C.collisionStart}),l.preSolvePosition(C.list),m=0;m<f.positionIterations;m++)l.solvePosition(C.list,S,y.timeScale);for(l.postSolvePosition(S),u.preSolveAll(S),m=0;m<f.constraintIterations;m++)u.solveAll(A,y.timeScale);for(u.postSolveAll(S),l.preSolveVelocity(C.list),m=0;m<f.velocityIterations;m++)l.solveVelocity(C.list,y.timeScale);return 0<C.collisionActive.length&&a.trigger(f,"collisionActive",{pairs:C.collisionActive}),0<C.collisionEnd.length&&a.trigger(f,"collisionEnd",{pairs:C.collisionEnd}),r.update(f.metrics,f),h._bodiesClearForces(S),a.trigger(f,"afterUpdate",E),f},h.merge=function(f,p){if(c.extend(f,p),p.world){f.world=p.world,h.clear(f);for(var v=i.allBodies(f.world),m=0;m<v.length;m++){var T=v[m];s.set(T,!1),T.id=c.nextId()}}},h.clear=function(f){var p=f.world;e.clear(f.pairs);var v,m=f.broadphase;m.controller&&(v=i.allBodies(p),m.controller.clear(m),m.controller.update(m,v,f,!0))},h._bodiesClearForces=function(f){for(var p=0;p<f.length;p++){var v=f[p];v.force.x=0,v.force.y=0,v.torque=0}},h._bodiesApplyGravity=function(f,p){var v=void 0!==p.scale?p.scale:.001;if((0!==p.x||0!==p.y)&&0!==v)for(var m=0;m<f.length;m++){var T=f[m];T.ignoreGravity||T.isStatic||T.isSleeping||(T.force.x+=T.mass*p.x*v*T.gravityScale.x,T.force.y+=T.mass*p.y*v*T.gravityScale.y)}},h._bodiesUpdate=function(f,p,v,m,T){for(var y=0;y<f.length;y++){var x=f[y];x.isStatic||x.isSleeping||d.update(x,p,v,m)}}},function(g,b,t){var h=t(86),n=t(41),s=t(0),l=t(32),e=t(118),r=t(1401),o=t(9),a=t(272),i=t(2),u=t(6),c=t(41),d=t(166),f=t(593),p=t(596),v=t(83),m=new s({Extends:o,initialize:function(T,y){o.call(this),this.scene=T,this.engine=r.create(y),this.localWorld=this.engine.world;var x=u(y,"gravity",null);x?this.setGravity(x.x,x.y,x.scale):!1===x&&this.setGravity(0,0,0),this.walls={left:null,right:null,top:null,bottom:null},this.enabled=u(y,"enabled",!0),this.correction=u(y,"correction",1),this.getDelta=u(y,"getDelta",this.update60Hz);var w=i(y,"runner",{}),E=i(w,"fps",!1),S=i(w,"fps",60),A=i(w,"delta",1e3/S),_=i(w,"deltaMin",1e3/S),C=i(w,"deltaMax",1e3/(.5*S));E||(S=1e3/A),this.runner={fps:S,correction:i(w,"correction",1),deltaSampleSize:i(w,"deltaSampleSize",60),counterTimestamp:0,frameCounter:0,deltaHistory:[],timePrev:null,timeScalePrev:1,frameRequestId:null,isFixed:i(w,"isFixed",!1),delta:A,deltaMin:_,deltaMax:C},this.autoUpdate=u(y,"autoUpdate",!0);var M,P,L,D,F,X,R,O,N,k,I=u(y,"debug",!1);this.drawDebug="object"==typeof I||I,this.debugConfig={showAxes:i(I,"showAxes",!1),showAngleIndicator:i(I,"showAngleIndicator",!1),angleColor:i(I,"angleColor",15208787),showBroadphase:i(I,"showBroadphase",!1),broadphaseColor:i(I,"broadphaseColor",16757760),showBounds:i(I,"showBounds",!1),boundsColor:i(I,"boundsColor",16777215),showVelocity:i(I,"showVelocity",!1),velocityColor:i(I,"velocityColor",44783),showCollisions:i(I,"showCollisions",!1),collisionColor:i(I,"collisionColor",16094476),showSeparations:i(I,"showSeparations",!1),separationColor:i(I,"separationColor",16753920),showBody:i(I,"showBody",!0),showStaticBody:i(I,"showStaticBody",!0),showInternalEdges:i(I,"showInternalEdges",!1),renderFill:i(I,"renderFill",!1),renderLine:i(I,"renderLine",!0),fillColor:i(I,"fillColor",1075465),fillOpacity:i(I,"fillOpacity",1),lineColor:i(I,"lineColor",2678297),lineOpacity:i(I,"lineOpacity",1),lineThickness:i(I,"lineThickness",1),staticFillColor:i(I,"staticFillColor",857979),staticLineColor:i(I,"staticLineColor",1255396),showSleeping:i(I,"showSleeping",!1),staticBodySleepOpacity:i(I,"staticBodySleepOpacity",.7),sleepFillColor:i(I,"sleepFillColor",4605510),sleepLineColor:i(I,"sleepLineColor",10066585),showSensors:i(I,"showSensors",!0),sensorFillColor:i(I,"sensorFillColor",857979),sensorLineColor:i(I,"sensorLineColor",1255396),showPositions:i(I,"showPositions",!0),positionSize:i(I,"positionSize",4),positionColor:i(I,"positionColor",14697178),showJoint:i(I,"showJoint",!0),jointColor:i(I,"jointColor",14737474),jointLineOpacity:i(I,"jointLineOpacity",1),jointLineThickness:i(I,"jointLineThickness",2),pinSize:i(I,"pinSize",4),pinColor:i(I,"pinColor",4382944),springColor:i(I,"springColor",14697184),anchorColor:i(I,"anchorColor",15724527),anchorSize:i(I,"anchorSize",4),showConvexHulls:i(I,"showConvexHulls",!1),hullColor:i(I,"hullColor",14091216)},this.drawDebug&&this.createDebugGraphic(),this.setEventsProxy(),i(y,"setBounds",!1)&&("boolean"==typeof(M=y.setBounds)?this.setBounds():(P=i(M,"x",0),L=i(M,"y",0),D=i(M,"width",T.sys.scale.width),F=i(M,"height",T.sys.scale.height),X=i(M,"thickness",64),R=i(M,"left",!0),O=i(M,"right",!0),N=i(M,"top",!0),k=i(M,"bottom",!0),this.setBounds(P,L,D,F,X,R,O,N,k)))},setCompositeRenderStyle:function(T){for(var y,x,w=T.bodies,E=T.constraints,S=T.composites,A=0;A<w.length;A++)x=(y=w[A]).render,this.setBodyRenderStyle(y,x.lineColor,x.lineOpacity,x.lineThickness,x.fillColor,x.fillOpacity);for(A=0;A<E.length;A++)x=(y=E[A]).render,this.setConstraintRenderStyle(y,x.lineColor,x.lineOpacity,x.lineThickness,x.pinSize,x.anchorColor,x.anchorSize);for(A=0;A<S.length;A++)this.setCompositeRenderStyle(y=S[A]);return this},setBodyRenderStyle:function(T,y,x,w,E,S){var A=T.render,_=this.debugConfig;return A&&(null==y&&(y=T.isStatic?_.staticLineColor:_.lineColor),null==x&&(x=_.lineOpacity),null==w&&(w=_.lineThickness),null==E&&(E=T.isStatic?_.staticFillColor:_.fillColor),null==S&&(S=_.fillOpacity),!1!==y&&(A.lineColor=y),!1!==x&&(A.lineOpacity=x),!1!==w&&(A.lineThickness=w),!1!==E&&(A.fillColor=E),!1!==S&&(A.fillOpacity=S)),this},setConstraintRenderStyle:function(T,y,x,w,E,S,A){var _,C=T.render,M=this.debugConfig;return C&&(null==y&&("line"===(_=C.type)?y=M.jointColor:"pin"===_?y=M.pinColor:"spring"===_&&(y=M.springColor)),null==x&&(x=M.jointLineOpacity),null==w&&(w=M.jointLineThickness),null==E&&(E=M.pinSize),null==S&&(S=M.anchorColor),null==A&&(A=M.anchorSize),!1!==y&&(C.lineColor=y),!1!==x&&(C.lineOpacity=x),!1!==w&&(C.lineThickness=w),!1!==E&&(C.pinSize=E),!1!==S&&(C.anchorColor=S),!1!==A&&(C.anchorSize=A)),this},setEventsProxy:function(){var T=this,y=this.engine,x=this.localWorld;this.drawDebug&&(d.on(x,"compositeModified",function(w){T.setCompositeRenderStyle(w)}),d.on(x,"beforeAdd",function(w){for(var E=[].concat(w.object),S=0;S<E.length;S++){var A=E[S],_=A.render;"body"===A.type?T.setBodyRenderStyle(A,_.lineColor,_.lineOpacity,_.lineThickness,_.fillColor,_.fillOpacity):"composite"===A.type?T.setCompositeRenderStyle(A):"constraint"===A.type&&T.setConstraintRenderStyle(A,_.lineColor,_.lineOpacity,_.lineThickness,_.pinSize,_.anchorColor,_.anchorSize)}})),d.on(x,"beforeAdd",function(w){T.emit(a.BEFORE_ADD,w)}),d.on(x,"afterAdd",function(w){T.emit(a.AFTER_ADD,w)}),d.on(x,"beforeRemove",function(w){T.emit(a.BEFORE_REMOVE,w)}),d.on(x,"afterRemove",function(w){T.emit(a.AFTER_REMOVE,w)}),d.on(y,"beforeUpdate",function(w){T.emit(a.BEFORE_UPDATE,w)}),d.on(y,"afterUpdate",function(w){T.emit(a.AFTER_UPDATE,w)}),d.on(y,"collisionStart",function(w){var E,S,A=w.pairs;0<A.length&&(E=A[0].bodyA,S=A[0].bodyB),T.emit(a.COLLISION_START,w,E,S)}),d.on(y,"collisionActive",function(w){var E,S,A=w.pairs;0<A.length&&(E=A[0].bodyA,S=A[0].bodyB),T.emit(a.COLLISION_ACTIVE,w,E,S)}),d.on(y,"collisionEnd",function(w){var E,S,A=w.pairs;0<A.length&&(E=A[0].bodyA,S=A[0].bodyB),T.emit(a.COLLISION_END,w,E,S)})},setBounds:function(T,y,x,w,E,S,A,_,C){return void 0===T&&(T=0),void 0===y&&(y=0),void 0===x&&(x=this.scene.sys.scale.width),void 0===w&&(w=this.scene.sys.scale.height),void 0===E&&(E=64),void 0===S&&(S=!0),void 0===A&&(A=!0),void 0===_&&(_=!0),void 0===C&&(C=!0),this.updateWall(S,"left",T-E,y-E,E,w+2*E),this.updateWall(A,"right",T+x,y-E,E,w+2*E),this.updateWall(_,"top",T,y-E,x,E),this.updateWall(C,"bottom",T,y+w,x,E),this},updateWall:function(T,y,x,w,E,S){var A=this.walls[y];T?(A&&p.remove(this.localWorld,A),this.walls[y]=this.create(x+=E/2,w+=S/2,E,S,{isStatic:!0,friction:0,frictionStatic:0})):(A&&p.remove(this.localWorld,A),this.walls[y]=null)},createDebugGraphic:function(){var T=this.scene.sys.add.graphics({x:0,y:0});return T.setDepth(Number.MAX_VALUE),this.debugGraphic=T,this.drawDebug=!0,T},disableGravity:function(){return this.localWorld.gravity.x=0,this.localWorld.gravity.y=0,this.localWorld.gravity.scale=0,this},setGravity:function(T,y,x){return void 0===T&&(T=0),void 0===y&&(y=1),this.localWorld.gravity.x=T,this.localWorld.gravity.y=y,void 0!==x&&(this.localWorld.gravity.scale=x),this},create:function(T,y,x,w,E){var S=h.rectangle(T,y,x,w,E);return p.add(this.localWorld,S),S},add:function(T){return p.add(this.localWorld,T),this},remove:function(T,y){Array.isArray(T)||(T=[T]);for(var x=0;x<T.length;x++){var w=T[x];e.remove(this.localWorld,w.body?w.body:w,y)}return this},removeConstraint:function(T,y){return e.remove(this.localWorld,T,y),this},convertTilemapLayer:function(T,y){var x=T.layer,w=T.getTilesWithin(0,0,x.width,x.height,{isColliding:!0});return this.convertTiles(w,y),this},convertTiles:function(T,y){if(0===T.length)return this;for(var x=0;x<T.length;x++)new f(this,T[x],y);return this},nextGroup:function(T){return c.nextGroup(T)},nextCategory:function(){return c.nextCategory()},pause:function(){return this.enabled=!1,this.emit(a.PAUSE),this},resume:function(){return this.enabled=!0,this.emit(a.RESUME),this},update:function(T,y){var x,w,E,S;this.enabled&&this.autoUpdate&&(E=(x=this.engine).timing,S=this.correction,(w=this.runner).isFixed?y=this.getDelta(T,y):(y=T-w.timePrev||w.delta,w.timePrev=T,w.deltaHistory.push(y),w.deltaHistory=w.deltaHistory.slice(-w.deltaSampleSize),S=(y=(y=(y=Math.min.apply(null,w.deltaHistory))<w.deltaMin?w.deltaMin:y)>w.deltaMax?w.deltaMax:y)/w.delta,w.delta=y),0!==w.timeScalePrev&&(S*=E.timeScale/w.timeScalePrev),0===E.timeScale&&(S=0),w.timeScalePrev=E.timeScale,w.correction=S,w.frameCounter+=1,1e3<=T-w.counterTimestamp&&(w.fps=w.frameCounter*((T-w.counterTimestamp)/1e3),w.counterTimestamp=T,w.frameCounter=0),r.update(x,y,S))},step:function(T,y){r.update(this.engine,T,y)},update60Hz:function(){return 1e3/60},update30Hz:function(){return 1e3/30},has:function(T){var y=T.hasOwnProperty("body")?T.body:T;return null!==e.get(this.localWorld,y.id,y.type)},getAllBodies:function(){return e.allBodies(this.localWorld)},getAllConstraints:function(){return e.allConstraints(this.localWorld)},getAllComposites:function(){return e.allComposites(this.localWorld)},postUpdate:function(){var T,y,x,w;this.drawDebug&&(T=this.debugConfig,y=this.engine,x=this.debugGraphic,w=e.allBodies(this.localWorld),this.debugGraphic.clear(),T.showBroadphase&&y.broadphase.controller&&this.renderGrid(y.broadphase,x,T.broadphaseColor,.5),T.showBounds&&this.renderBodyBounds(w,x,T.boundsColor,.5),(T.showBody||T.showStaticBody)&&this.renderBodies(w),T.showJoint&&this.renderJoints(),(T.showAxes||T.showAngleIndicator)&&this.renderBodyAxes(w,x,T.showAxes,T.angleColor,.5),T.showVelocity&&this.renderBodyVelocity(w,x,T.velocityColor,1,2),T.showSeparations&&this.renderSeparations(y.pairs.list,x,T.separationColor),T.showCollisions&&this.renderCollisions(y.pairs.list,x,T.collisionColor))},renderGrid:function(T,y,x,w){y.lineStyle(1,x,w);for(var E=l.keys(T.buckets),S=0;S<E.length;S++){var A,_=E[S];T.buckets[_].length<2||(A=_.split(/C|R/),y.strokeRect(parseInt(A[1],10)*T.bucketWidth,parseInt(A[2],10)*T.bucketHeight,T.bucketWidth,T.bucketHeight))}return this},renderSeparations:function(T,y,x){y.lineStyle(1,x,1);for(var w=0;w<T.length;w++){var E,S,A,_,C,M,P,L=T[w];L.isActive&&(S=(E=L.collision).bodyA,A=E.bodyB,_=S.position,P=S.isStatic||A.isStatic?1:4,A.isStatic&&(P=0),y.lineBetween((C=A.position).x,C.y,C.x-(M=E.penetration).x*P,C.y-M.y*P),P=S.isStatic||A.isStatic?1:4,S.isStatic&&(P=0),y.lineBetween(_.x,_.y,_.x-M.x*P,_.y-M.y*P))}return this},renderCollisions:function(T,y,x){var w,E,S,A,_,C;for(y.lineStyle(1,x,.5),y.fillStyle(x,1),w=0;w<T.length;w++)if((E=T[w]).isActive)for(var M=0;M<E.activeContacts.length;M++){var P=E.activeContacts[M].vertex;y.fillRect(P.x-2,P.y-2,5,5)}for(w=0;w<T.length;w++)(E=T[w]).isActive&&(S=E.collision,0<(A=E.activeContacts).length&&(_=A[0].vertex.x,C=A[0].vertex.y,2===A.length&&(_=(A[0].vertex.x+A[1].vertex.x)/2,C=(A[0].vertex.y+A[1].vertex.y)/2),S.bodyB===S.supports[0].body||S.bodyA.isStatic?y.lineBetween(_-8*S.normal.x,C-8*S.normal.y,_,C):y.lineBetween(_+8*S.normal.x,C+8*S.normal.y,_,C)));return this},renderBodyBounds:function(T,y,x,w){y.lineStyle(1,x,w);for(var E=0;E<T.length;E++){var S=T[E];if(S.render.visible){var A=S.bounds;if(A)y.strokeRect(A.min.x,A.min.y,A.max.x-A.min.x,A.max.y-A.min.y);else for(var _=S.parts,C=1<_.length?1:0;C<_.length;C++){var M=_[C];y.strokeRect(M.bounds.min.x,M.bounds.min.y,M.bounds.max.x-M.bounds.min.x,M.bounds.max.y-M.bounds.min.y)}}}return this},renderBodyAxes:function(T,y,x,w,E){y.lineStyle(1,w,E);for(var S=0;S<T.length;S++){var A,_,C,M=T[S],P=M.parts;if(M.render.visible)if(x)for(_=1<P.length?1:0;_<P.length;_++)for(A=P[_],C=0;C<A.axes.length;C++){var L=A.axes[C];y.lineBetween(A.position.x,A.position.y,A.position.x+20*L.x,A.position.y+20*L.y)}else for(_=1<P.length?1:0;_<P.length;_++)for(A=P[_],C=0;C<A.axes.length;C++)y.lineBetween(A.position.x,A.position.y,(A.vertices[0].x+A.vertices[A.vertices.length-1].x)/2,(A.vertices[0].y+A.vertices[A.vertices.length-1].y)/2)}return this},renderBodyVelocity:function(T,y,x,w,E){y.lineStyle(E,x,w);for(var S=0;S<T.length;S++){var A=T[S];A.render.visible&&y.lineBetween(A.position.x,A.position.y,A.position.x+2*(A.position.x-A.positionPrev.x),A.position.y+2*(A.position.y-A.positionPrev.y))}return this},renderBodies:function(T){for(var y=this.debugGraphic,x=this.debugConfig,w=x.showBody,E=x.showStaticBody,S=x.showSleeping,A=x.showInternalEdges,_=x.showConvexHulls,C=x.renderFill,M=x.renderLine,P=x.staticBodySleepOpacity,L=x.sleepFillColor,D=x.sleepLineColor,F=x.hullColor,X=0;X<T.length;X++){var R,O,N,k,I,Y=T[X];Y.render.visible&&(!E&&Y.isStatic||!w&&!Y.isStatic||(R=Y.render.lineColor,O=Y.render.lineOpacity,k=Y.render.fillColor,I=Y.render.fillOpacity,S&&Y.isSleeping&&(Y.isStatic?(O*=P,I*=P):(R=D,k=L)),C||(k=null),M||(R=null),this.renderBody(Y,y,A,R,O,N=Y.render.lineThickness,k,I),_&&1<Y.parts.length&&this.renderConvexHull(Y,y,F,N)))}},renderBody:function(T,y,x,w,E,S,A,_){void 0===w&&(w=null),void 0===E&&(E=null),void 0===S&&(S=1),void 0===A&&(A=null),void 0===_&&(_=null);for(var C,M,P,L=this.debugConfig,D=L.sensorFillColor,F=L.sensorLineColor,X=T.parts,R=X.length,O=1<R?1:0;O<R;O++){var N=X[O],k=N.render,I=k.opacity;if(k.visible&&0!==I&&(!N.isSensor||L.showSensors)){var B=N.circleRadius;if(y.beginPath(),N.isSensor?(null!==A&&y.fillStyle(D,_*I),null!==w&&y.lineStyle(S,F,E*I)):(null!==A&&y.fillStyle(A,_*I),null!==w&&y.lineStyle(S,w,E*I)),B)y.arc(N.position.x,N.position.y,B,0,2*Math.PI);else{var Y=N.vertices,U=Y.length;y.moveTo(Y[0].x,Y[0].y);for(var G=1;G<U;G++){var W,z=Y[G];!Y[G-1].isInternal||x?y.lineTo(z.x,z.y):y.moveTo(z.x,z.y),G<U&&z.isInternal&&!x&&y.moveTo(Y[W=(G+1)%U].x,Y[W].y)}y.closePath()}null!==A&&y.fillPath(),null!==w&&y.strokePath()}}return L.showPositions&&!T.isStatic&&(C=T.position.x,M=T.position.y,P=Math.ceil(L.positionSize/2),y.fillStyle(L.positionColor,1),y.fillRect(C-P,M-P,L.positionSize,L.positionSize)),this},renderConvexHull:function(T,y,x,w){if(void 0===w&&(w=1),1<T.parts.length){var E=T.vertices;y.lineStyle(w,x),y.beginPath(),y.moveTo(E[0].x,E[0].y);for(var S=1;S<E.length;S++)y.lineTo(E[S].x,E[S].y);y.lineTo(E[0].x,E[0].y),y.strokePath()}return this},renderJoints:function(){for(var T=this.debugGraphic,y=e.allConstraints(this.localWorld),x=0;x<y.length;x++){var w=y[x].render;this.renderConstraint(y[x],T,w.lineColor,w.lineOpacity,w.lineThickness,w.pinSize,w.anchorColor,w.anchorSize)}},renderConstraint:function(T,y,x,w,E,S,A,_){var C=T.render;if(!C.visible||!T.pointA||!T.pointB)return this;y.lineStyle(E,x,w);var M,P=T.bodyA,L=T.bodyB,D=P?v.add(P.position,T.pointA):T.pointA;if("pin"===C.type)y.strokeCircle(D.x,D.y,S);else{if(M=L?v.add(L.position,T.pointB):T.pointB,y.beginPath(),y.moveTo(D.x,D.y),"spring"===C.type)for(var F,X=v.sub(M,D),R=v.perp(v.normalise(X)),O=Math.ceil(l.clamp(T.length/5,12,20)),N=1;N<O;N+=1)y.lineTo(D.x+X.x*(N/O)+R.x*(F=N%2==0?1:-1)*4,D.y+X.y*(N/O)+R.y*F*4);y.lineTo(M.x,M.y)}return y.strokePath(),C.anchors&&0<_&&(y.fillStyle(A),y.fillCircle(D.x,D.y,_),y.fillCircle(M.x,M.y,_)),this},resetCollisionIDs:function(){return n._nextCollidingGroupId=1,n._nextNonCollidingGroupId=-1,n._nextCategory=1,this},shutdown:function(){d.off(this.engine),this.removeAllListeners(),p.clear(this.localWorld,!1),r.clear(this.engine),this.drawDebug&&this.debugGraphic.destroy()},destroy:function(){this.shutdown()}});g.exports=m},function(g,b,t){g.exports={BasePlugin:t(540),DefaultPlugins:t(197),PluginCache:t(24),PluginManager:t(414),ScenePlugin:t(1404)}},function(g,b,t){var h=t(540),n=t(0),s=t(20),l=new n({Extends:h,initialize:function(e,r,o){h.call(this,r),this.scene=e,this.systems=e.sys,this.pluginKey=o,e.sys.events.once(s.BOOT,this.boot,this)},boot:function(){},destroy:function(){this.pluginManager=null,this.game=null,this.scene=null,this.systems=null}});g.exports=l},function(g,b,t){g.exports={Canvas:t(1406),Events:t(91),Snapshot:t(1407),WebGL:t(1408)}},function(g,b,t){g.exports={CanvasRenderer:t(368),GetBlendModes:t(370),SetTransform:t(30)}},function(g,b,t){g.exports={Canvas:t(369),WebGL:t(383)}},function(g,b,t){var h=t(107),n=t(17)(!1,n={PipelineManager:t(372),Pipelines:t(1409),RenderTarget:t(141),Utils:t(12),WebGLPipeline:t(58),WebGLRenderer:t(371),WebGLShader:t(375)},h);g.exports=n},function(g,b,t){var h=t(92),n=t(17)(!1,n={BitmapMaskPipeline:t(373),Events:t(374),GraphicsPipeline:t(376),LightPipeline:t(377),MultiPipeline:t(108),PointLightPipeline:t(378),PostFXPipeline:t(1410),RopePipeline:t(379),SinglePipeline:t(380),UtilityPipeline:t(381)},h);g.exports=n},function(g,b,t){var h=t(0),n=t(198),s=t(2),l=t(1411),e=t(382),r=t(58),o=new h({Extends:r,initialize:function(a){a.renderTarget=s(a,"renderTarget",1),a.fragShader=s(a,"fragShader",l),a.vertShader=s(a,"vertShader",e),a.attributes=s(a,"attributes",[{name:"inPosition",size:2},{name:"inTexCoord",size:2}]),a.batchSize=1,a.vertices=[-1,-1,0,0,-1,1,0,1,1,1,1,1,-1,-1,0,0,1,1,1,1,1,-1,1,0],r.call(this,a),this.isPostFX=!0,this.colorMatrix=new n,this.renderer.isBooted&&(this.manager=this.renderer.pipelines,this.boot())},boot:function(){r.prototype.boot.call(this);var a=this.manager.UTILITY_PIPELINE;this.fullFrame1=a.fullFrame1,this.fullFrame2=a.fullFrame2,this.halfFrame1=a.halfFrame1,this.halfFrame2=a.halfFrame2,this.set1i("uMainSampler",0)},onDraw:function(a){this.bindAndDraw(a)},copyFrame:function(a,i,u,c,d){this.manager.copyFrame(a,i,u,c,d)},copyToGame:function(a){this.manager.copyToGame(a)},drawFrame:function(a,i,u){this.manager.drawFrame(a,i,u,this.colorMatrix)},blendFrames:function(a,i,u,c,d){this.manager.blendFrames(a,i,u,c,d)},blendFramesAdditive:function(a,i,u,c,d){this.manager.blendFramesAdditive(a,i,u,c,d)},clearFrame:function(a,i){this.manager.clearFrame(a,i)},blitFrame:function(a,i,u,c,d,f){this.manager.blitFrame(a,i,u,c,d,f)},copyFrameRect:function(a,i,u,c,d,f,p,v){this.manager.copyFrameRect(a,i,u,c,d,f,p,v)},bindAndDraw:function(a,i,u,c,d){void 0===u&&(u=!0),void 0===c&&(c=!0);var f=this.gl,p=this.renderer;this.bind(d),this.set1i("uMainSampler",0),i?(f.viewport(0,0,i.width,i.height),f.bindFramebuffer(f.FRAMEBUFFER,i.framebuffer),f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,i.texture,0),u&&(f.clearColor(0,0,0,c?0:1),f.clear(f.COLOR_BUFFER_BIT))):(p.popFramebuffer(!1,!1,!1),p.currentFramebuffer||f.viewport(0,0,p.width,p.height)),f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,a.texture),f.bufferData(f.ARRAY_BUFFER,this.vertexData,f.STATIC_DRAW),f.drawArrays(f.TRIANGLES,0,6),i?(f.bindTexture(f.TEXTURE_2D,null),f.bindFramebuffer(f.FRAMEBUFFER,null)):p.resetTextures()}});g.exports=o},function(g,b){g.exports=["#define SHADER_NAME PHASER_POSTFX_FS","","precision mediump float;","","uniform sampler2D uMainSampler;","","varying vec2 outTexCoord;","","void main ()","{","    gl_FragColor = texture2D(uMainSampler, outTexCoord);","}",""].join("\n")},function(g,b,t){var h=t(17),n=t(201),s=h(!1,s={Center:t(403),Events:t(104),Orientation:t(404),ScaleManager:t(415),ScaleModes:t(405),Zoom:t(406)},n.CENTER);s=h(!1,s,n.ORIENTATION),s=h(!1,s,n.SCALE_MODE),s=h(!1,s,n.ZOOM),g.exports=s},function(g,b,t){var h=t(144),n=t(17)(!1,n={Events:t(20),GetPhysicsPlugins:t(419),GetScenePlugins:t(420),SceneManager:t(417),ScenePlugin:t(1414),Settings:t(421),Systems:t(204)},h);g.exports=n},function(g,b,t){var h=t(18),n=t(0),s=t(20),l=t(2),e=t(24),r=new n({initialize:function(o){this.scene=o,this.systems=o.sys,this.settings=o.sys.settings,this.key=o.sys.settings.key,this.manager=o.sys.game.scene,this.transitionProgress=0,this._elapsed=0,this._target=null,this._duration=0,this._willSleep=!1,this._willRemove=!1,o.sys.events.once(s.BOOT,this.boot,this),o.sys.events.on(s.START,this.pluginStart,this)},boot:function(){this.systems.events.once(s.DESTROY,this.destroy,this)},pluginStart:function(){this._target=null,this.systems.events.once(s.SHUTDOWN,this.shutdown,this)},start:function(o,a){return void 0===o&&(o=this.key),this.manager.queueOp("stop",this.key),this.manager.queueOp("start",o,a),this},restart:function(o){var a=this.key;return this.manager.queueOp("stop",a),this.manager.queueOp("start",a,o),this},transition:function(o){void 0===o&&(o={});var a=l(o,"target",!1),i=this.manager.getScene(a);if(!a||!this.checkValidTransition(i))return!1;var u=l(o,"duration",1e3);this._elapsed=0,this._target=i,this._duration=u,this._willSleep=l(o,"sleep",!1),this._willRemove=l(o,"remove",!1);var c=l(o,"onUpdate",null);c&&(this._onUpdate=c,this._onUpdateScope=l(o,"onUpdateScope",this.scene));var d=l(o,"allowInput",!1);this.settings.transitionAllowInput=d;var f=i.sys.settings;return f.isTransition=!0,f.transitionFrom=this.scene,f.transitionDuration=u,f.transitionAllowInput=d,l(o,"moveAbove",!1)?this.manager.moveAbove(this.key,a):l(o,"moveBelow",!1)&&this.manager.moveBelow(this.key,a),i.sys.isSleeping()?i.sys.wake(l(o,"data")):this.manager.start(a,l(o,"data")),this.systems.events.emit(s.TRANSITION_OUT,i,u),this.systems.events.on(s.UPDATE,this.step,this),!0},checkValidTransition:function(o){return!(!o||o.sys.isActive()||o.sys.isTransitioning()||o===this.scene||this.systems.isTransitioning())},step:function(o,a){this._elapsed+=a,this.transitionProgress=h(this._elapsed/this._duration,0,1),this._onUpdate&&this._onUpdate.call(this._onUpdateScope,this.transitionProgress),this._elapsed>=this._duration&&this.transitionComplete()},transitionComplete:function(){var o=this._target.sys,a=this._target.sys.settings;this.systems.events.off(s.UPDATE,this.step,this),o.events.emit(s.TRANSITION_COMPLETE,this.scene),a.isTransition=!1,a.transitionFrom=null,this._duration=0,this._target=null,this._onUpdate=null,this._onUpdateScope=null,this._willRemove?this.manager.remove(this.key):this._willSleep?this.systems.sleep():this.manager.stop(this.key)},add:function(o,a,i,u){return this.manager.add(o,a,i,u)},launch:function(o,a){return o&&o!==this.key&&this.manager.queueOp("start",o,a),this},run:function(o,a){return o&&o!==this.key&&this.manager.queueOp("run",o,a),this},pause:function(o,a){return void 0===o&&(o=this.key),this.manager.queueOp("pause",o,a),this},resume:function(o,a){return void 0===o&&(o=this.key),this.manager.queueOp("resume",o,a),this},sleep:function(o,a){return void 0===o&&(o=this.key),this.manager.queueOp("sleep",o,a),this},wake:function(o,a){return void 0===o&&(o=this.key),this.manager.queueOp("wake",o,a),this},switch:function(o){return o!==this.key&&this.manager.queueOp("switch",this.key,o),this},stop:function(o,a){return void 0===o&&(o=this.key),this.manager.queueOp("stop",o,a),this},setActive:function(o,a,i){void 0===a&&(a=this.key);var u=this.manager.getScene(a);return u&&u.sys.setActive(o,i),this},setVisible:function(o,a){void 0===a&&(a=this.key);var i=this.manager.getScene(a);return i&&i.sys.setVisible(o),this},isSleeping:function(o){return void 0===o&&(o=this.key),this.manager.isSleeping(o)},isActive:function(o){return void 0===o&&(o=this.key),this.manager.isActive(o)},isPaused:function(o){return void 0===o&&(o=this.key),this.manager.isPaused(o)},isVisible:function(o){return void 0===o&&(o=this.key),this.manager.isVisible(o)},swapPosition:function(o,a){return void 0===a&&(a=this.key),o!==a&&this.manager.swapPosition(o,a),this},moveAbove:function(o,a){return void 0===a&&(a=this.key),o!==a&&this.manager.moveAbove(o,a),this},moveBelow:function(o,a){return void 0===a&&(a=this.key),o!==a&&this.manager.moveBelow(o,a),this},remove:function(o){return void 0===o&&(o=this.key),this.manager.remove(o),this},moveUp:function(o){return void 0===o&&(o=this.key),this.manager.moveUp(o),this},moveDown:function(o){return void 0===o&&(o=this.key),this.manager.moveDown(o),this},bringToTop:function(o){return void 0===o&&(o=this.key),this.manager.bringToTop(o),this},sendToBack:function(o){return void 0===o&&(o=this.key),this.manager.sendToBack(o),this},get:function(o){return this.manager.getScene(o)},getIndex:function(o){return void 0===o&&(o=this.key),this.manager.getIndex(o)},shutdown:function(){var o=this.systems.events;o.off(s.SHUTDOWN,this.shutdown,this),o.off(s.POST_UPDATE,this.step,this),o.off(s.TRANSITION_OUT)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null,this.settings=null,this.manager=null}});e.register("ScenePlugin",r,"scenePlugin"),g.exports=r},function(g,b,t){g.exports={Events:t(438),List:t(110),Map:t(102),ProcessQueue:t(211),RTree:t(531),Set:t(149),Size:t(416)}},function(g,b,t){var h=t(17),n=t(1417),s=h(!1,s={CanvasTexture:t(423),Events:t(106),FilterMode:n,Frame:t(109),Parsers:t(425),Texture:t(206),TextureManager:t(422),TextureSource:t(424)},n);g.exports=s},function(g,b){g.exports={LINEAR:0,NEAREST:1}},function(g,b,t){var h=t(17),n=t(1419),s=h(!1,s={Components:t(251),Parsers:t(1452),Formats:t(40),ImageCollection:t(576),ParseToTilemap:t(262),Tile:t(85),Tilemap:t(580),TilemapCreator:t(1459),TilemapFactory:t(1460),Tileset:t(122),TilemapLayer:t(581),Orientation:t(29),LayerData:t(120),MapData:t(121),ObjectLayer:t(572)},n.ORIENTATION);g.exports=s},function(g,b,t){var h={ORIENTATION:t(29)};g.exports=h},function(g,b,t){var h=t(26),n=t(63);g.exports=function(s,l,e,r,o,a,i,u){void 0===i&&(i=!0),s<0&&(s=0),l<0&&(l=0);for(var c=h(s,l,e,r,null,u),d=o-s,f=a-l,p=0;p<c.length;p++){var v=c[p].x+d,m=c[p].y+f;0<=v&&v<u.width&&0<=m&&m<u.height&&u.data[m][v]&&u.data[m][v].copy(c[p])}i&&n(o-1,a-1,e+2,r+2,u)}},function(g,b,t){var h=t(26),n=t(542);g.exports=function(s,l,e,r,o,a){e=e||{},Array.isArray(s)||(s=[s]);var i=a.tilemapLayer;r=r||i.scene,o=o||r.cameras.main;for(var u=h(0,0,a.width,a.height,null,a),c=[],d=0;d<u.length;d++){var f,p=u[d];-1!==s.indexOf(p.index)&&(f=i.tileToWorldXY(p.x,p.y,void 0,o,a),e.x=f.x,e.y=f.y,c.push(r.make.sprite(e)))}if("number"==typeof l)for(d=0;d<s.length;d++)n(s[d],l,0,0,a.width,a.height,a);else if(Array.isArray(l))for(d=0;d<s.length;d++)n(s[d],l[d],0,0,a.width,a.height,a);return c}},function(g,b,t){var h=t(26),n=t(63),s=t(72);g.exports=function(l,e,r,o,a,i,u){for(var c=-1!==u.collideIndexes.indexOf(l),d=h(e,r,o,a,null,u),f=0;f<d.length;f++)d[f].index=l,s(d[f],c);i&&n(e-1,r-1,o+2,a+2,u)}},function(g,b,t){var h=t(26);g.exports=function(n,s,l,e,r,o,a,i){return h(l,e,r,o,a,i).filter(n,s)}},function(g,b){g.exports=function(t,h,n,s){void 0===h&&(h=0),void 0===n&&(n=!1);var l,e,r,o=0;if(n){for(e=s.height-1;0<=e;e--)for(l=s.width-1;0<=l;l--)if((r=s.data[e][l])&&r.index===t){if(o===h)return r;o+=1}}else for(e=0;e<s.height;e++)for(l=0;l<s.width;l++)if((r=s.data[e][l])&&r.index===t){if(o===h)return r;o+=1}return null}},function(g,b,t){var h=t(26);g.exports=function(n,s,l,e,r,o,a,i){return h(l,e,r,o,a,i).find(n,s)||null}},function(g,b,t){var h=t(26);g.exports=function(n,s,l,e,r,o,a,i){h(l,e,r,o,a,i).forEach(n,s)}},function(g,b,t){var h=t(29),n=t(544),s=t(545),l=t(547),e=t(1),r=t(548);g.exports=function(o){return o===h.ORTHOGONAL?n:o===h.HEXAGONAL?s:o===h.STAGGERED?r:o===h.ISOMETRIC?l:e}},function(g,b,t){var h=t(158),n=new(t(3));g.exports=function(s,l,e,r,o){return o.tilemapLayer.worldToTileXY(s,l,!0,n,r),h(n.x,n.y,e,o)}},function(g,b,t){function h(u,c){return l.RectangleToTriangle(c,u)}var n=t(483),s=t(26),l=t(484),e=t(1),r=t(3),o=new r,a=new r,i=new r;g.exports=function(u,c,d,f){if(void 0===u)return[];var p=e;u instanceof n.Circle?p=l.CircleToRectangle:u instanceof n.Rectangle?p=l.RectangleToRectangle:u instanceof n.Triangle?p=h:u instanceof n.Line&&(p=l.LineToRectangle),f.tilemapLayer.worldToTileXY(u.left,u.top,!0,a,d);var v=a.x,m=a.y;f.tilemapLayer.worldToTileXY(u.right,u.bottom,!0,i,d);var T=Math.ceil(i.x),y=Math.ceil(i.y),x=Math.max(T-v,1),w=Math.max(y-m,1),E=s(v,m,x,w,c,f),S=f.tileWidth,A=f.tileHeight;f.tilemapLayer&&(S*=f.tilemapLayer.scaleX,A*=f.tilemapLayer.scaleY);for(var _=[],C=new n.Rectangle(0,0,S,A),M=0;M<E.length;M++){var P=E[M];f.tilemapLayer.tileToWorldXY(P.x,P.y,o,d),C.x=o.x,C.y=o.y,p(u,C)&&_.push(P)}return _}},function(g,b,t){var h=t(29),n=t(1),s=t(253);g.exports=function(l){return l===h.ORTHOGONAL?s:n}},function(g,b,t){var h=t(29),n=t(550),s=t(551),l=t(1),e=t(552),r=t(553);g.exports=function(o){return o===h.ORTHOGONAL?r:o===h.ISOMETRIC?s:o===h.HEXAGONAL?n:o===h.STAGGERED?e:l}},function(g,b,t){var h=t(29),n=t(554),s=t(1),l=t(555),e=t(254);g.exports=function(r){return r===h.ORTHOGONAL?e:r===h.HEXAGONAL?n:r===h.STAGGERED?l:s}},function(g,b,t){var h=t(29),n=t(1),s=t(255);g.exports=function(l){return l===h.ORTHOGONAL?s:n}},function(g,b,t){var h=t(29),n=t(556),s=t(557),l=t(1),e=t(558),r=t(559);g.exports=function(o){return o===h.ORTHOGONAL?r:o===h.ISOMETRIC?s:o===h.HEXAGONAL?n:o===h.STAGGERED?e:l}},function(g,b,t){var h=t(29),n=t(560),s=t(1),l=t(561),e=t(256);g.exports=function(r){return r===h.ORTHOGONAL?e:r===h.HEXAGONAL?n:r===h.STAGGERED?l:s}},function(g,b,t){var h=t(562),n=new(t(3));g.exports=function(s,l,e,r){return r.tilemapLayer.worldToTileXY(s,l,!0,n,e),h(n.x,n.y,r)}},function(g,b,t){var h=t(257),n=new(t(3));g.exports=function(s,l,e,r,o,a){return a.tilemapLayer.worldToTileXY(l,e,!0,n,o,a),h(s,n.x,n.y,r,a)}},function(g,b,t){var h=t(63),n=t(257);g.exports=function(s,l,e,r,o){if(void 0===r&&(r=!0),!Array.isArray(s))return null;Array.isArray(s[0])||(s=[s]);for(var a=s.length,i=s[0].length,u=0;u<a;u++)for(var c=0;c<i;c++)n(s[u][c],l+c,e+u,!1,o);r&&h(l-1,e-1,i+2,a+2,o)}},function(g,b,t){var h=t(26),n=t(210);g.exports=function(s,l,e,r,o,a){var i,u=h(s,l,e,r,{},a);if(!o)for(o=[],i=0;i<u.length;i++)-1===o.indexOf(u[i].index)&&o.push(u[i].index);for(i=0;i<u.length;i++)u[i].index=n(o)}},function(g,b,t){var h=t(563),n=new(t(3));g.exports=function(s,l,e,r,o,a){return a.tilemapLayer.worldToTileXY(s,l,!0,n,o,a),h(n.x,n.y,e,r,a)}},function(g,b,t){var h=t(26),n=t(397),s=new n(105,210,231,150),l=new n(243,134,48,200),e=new n(40,39,37,150);g.exports=function(r,o,a){void 0===o&&(o={});var i=void 0!==o.tileColor?o.tileColor:s,u=void 0!==o.collidingTileColor?o.collidingTileColor:l,c=void 0!==o.faceColor?o.faceColor:e,d=h(0,0,a.width,a.height,null,a);r.translateCanvas(a.tilemapLayer.x,a.tilemapLayer.y),r.scaleCanvas(a.tilemapLayer.scaleX,a.tilemapLayer.scaleY);for(var f=0;f<d.length;f++){var p=d[f],v=p.width,m=p.height,T=p.pixelX,y=p.pixelY,x=p.collides?u:i;null!==x&&(r.fillStyle(x.color,x.alpha/255),r.fillRect(T,y,v,m)),T+=1,y+=1,v-=2,m-=2,null!==c&&(r.lineStyle(1,c.color,c.alpha/255),p.faceTop&&r.lineBetween(T,y,T+v,y),p.faceRight&&r.lineBetween(T+v,y,T+v,y+m),p.faceBottom&&r.lineBetween(T,y+m,T+v,y+m),p.faceLeft&&r.lineBetween(T,y,T,y+m))}}},function(g,b,t){var h=t(72),n=t(63),s=t(160);g.exports=function(l,e,r,o,a){void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===a&&(a=!0),Array.isArray(l)||(l=[l]);for(var i=0;i<l.length;i++)s(l[i],e,o);if(a)for(var u=0;u<o.height;u++)for(var c=0;c<o.width;c++){var d=o.data[u][c];d&&-1!==l.indexOf(d.index)&&h(d,e)}r&&n(0,0,o.width,o.height,o)}},function(g,b,t){var h=t(72),n=t(63),s=t(160);g.exports=function(l,e,r,o,a,i){if(void 0===r&&(r=!0),void 0===o&&(o=!0),void 0===i&&(i=!0),!(e<l)){for(var u=l;u<=e;u++)s(u,r,a);if(i)for(var c=0;c<a.height;c++)for(var d=0;d<a.width;d++){var f=a.data[c][d];f&&f.index>=l&&f.index<=e&&h(f,r)}o&&n(0,0,a.width,a.height,a)}}},function(g,b,t){var h=t(72),n=t(63),s=t(160);g.exports=function(l,e,r,o){void 0===e&&(e=!0),void 0===r&&(r=!0),Array.isArray(l)||(l=[l]);for(var a=0;a<o.height;a++)for(var i=0;i<o.width;i++){var u=o.data[a][i];u&&-1===l.indexOf(u.index)&&(h(u,e),s(u.index,e,o))}r&&n(0,0,o.width,o.height,o)}},function(g,b,t){var h=t(72),n=t(63),s=t(126);g.exports=function(l,e,r,o){void 0===e&&(e=!0),void 0===r&&(r=!0);for(var a=0;a<o.height;a++)for(var i=0;i<o.width;i++){var u=o.data[a][i];if(u)for(var c in l)if(s(u.properties,c)){var d=l[c];Array.isArray(d)||(d=[d]);for(var f=0;f<d.length;f++)u.properties[c]===d[f]&&h(u,e)}}r&&n(0,0,o.width,o.height,o)}},function(g,b,t){var h=t(72),n=t(63);g.exports=function(s,l,e){void 0===s&&(s=!0),void 0===l&&(l=!0);for(var r=0;r<e.height;r++)for(var o=0;o<e.width;o++){var a,i=e.data[r][o];i&&(a=i.getCollisionGroup())&&a.objects&&0<a.objects.length&&h(i,s)}l&&n(0,0,e.width,e.height,e)}},function(g,b){g.exports=function(t,h,n,s){if("number"==typeof t)s.callbacks[t]=null!==h?{callback:h,callbackContext:n}:void 0;else for(var l=0,e=t.length;l<e;l++)s.callbacks[t[l]]=null!==h?{callback:h,callbackContext:n}:void 0}},function(g,b,t){var h=t(26);g.exports=function(n,s,l,e,r,o,a){for(var i=h(n,s,l,e,null,a),u=0;u<i.length;u++)i[u].setCollisionCallback(r,o)}},function(g,b,t){var h=t(26),n=t(131);g.exports=function(s,l,e,r,o){var a=h(s,l,e,r,null,o),i=a.map(function(c){return c.index});n(i);for(var u=0;u<a.length;u++)a[u].index=i[u]}},function(g,b,t){var h=t(26);g.exports=function(n,s,l,e,r,o,a){for(var i=h(l,e,r,o,null,a),u=0;u<i.length;u++)i[u]&&(i[u].index===n?i[u].index=s:i[u].index===s&&(i[u].index=n))}},function(g,b,t){var h=t(26);g.exports=function(n,s,l,e,r,o){if(r){for(var a=h(n,s,l,e,null,o),i=0,u=0;u<r.length;u++)i+=r[u].weight;if(!(i<=0))for(u=0;u<a.length;u++){for(var c=Math.random()*i,d=0,f=-1,p=0;p<r.length;p++)if(c<=(d+=r[p].weight)){var v=r[p].index;f=Array.isArray(v)?v[Math.floor(Math.random()*v.length)]:v;break}a[u].index=f}}}},function(g,b,t){g.exports={FromOrientationString:t(258),Parse:t(564),Parse2DArray:t(259),ParseCSV:t(565),Impact:t(1454),Tiled:t(1455)}},function(g,b){g.exports=function(t,h){for(var n=0;n<t.length;n++){var s=t[n],l=n;if(s.name&&""!==s.name&&(l=s.name),Array.isArray(s.wangtiles)&&0<s.wangtiles.length){var e,r,o,a={},i={};if(Array.isArray(s.edgecolors))for(e=0;e<s.edgecolors.length;e++)o=1+e,""!==(r=s.edgecolors[e]).name&&(a[o]=r.name);if(Array.isArray(s.cornercolors))for(e=0;e<s.cornercolors.length;e++)o=1+e,""!==(r=s.cornercolors[e]).name&&(i[o]=r.name);if(Array.isArray(s.colors))for(e=0;e<s.colors.length;e++)o=1+e,""!==(r=s.colors[e]).name&&(a[o]=i[o]=r.name);for(var u=[a,i,a,i,a,i,a,i],c=0;c<s.wangtiles.length;c++){for(var d,f=s.wangtiles[c],p=(p=h[f.tileid]||(h[f.tileid]={})).wangid||(p.wangid={}),v=[],m=0;m<Math.min(u.length,f.wangid.length);m++)0!==(r=f.wangid[m])?void 0===(d=u[m][r])?v.push(r):v.push(d):v.push(void 0);p[l]=v}}}}},function(g,b,t){g.exports={ParseTileLayers:t(578),ParseTilesets:t(579),ParseWeltmeister:t(577)}},function(g,b,t){g.exports={AssignTileProperties:t(567),Base64Decode:t(574),BuildTilesetIndex:t(568),CreateGroupLayer:t(161),ParseGID:t(261),ParseImageLayers:t(569),ParseJSONTiled:t(566),ParseObject:t(260),ParseObjectLayers:t(570),ParseTileLayers:t(573),ParseTilesets:t(575)}},function(g,b,t){var h=t(1),n=t(1);h=t(1457),n=t(1458),g.exports={renderWebGL:h,renderCanvas:n}},function(g,b,t){var h=t(12);g.exports=function(n,s,l){var e=s.cull(l),r=e.length,o=l.alpha*s.alpha;if(!(0===r||o<=0)){var a=s.gidMap,i=n.pipelines.set(s.pipeline,s),u=h.getTintAppendFloatAlpha,c=s.scrollFactorX,d=s.scrollFactorY,f=s.x,p=s.y,v=s.scaleX,m=s.scaleY;n.pipelines.preBatch(s);for(var T=0;T<r;T++){var y,x,w,E,S,A,_,C,M,P,L=e[T],D=a[L.index];D&&null!==(y=D.getTileTextureCoordinates(L.index))&&(w=i.setTexture2D(x=D.glTexture,s),E=D.tileWidth,S=D.tileHeight,A=y.x,_=y.y,C=.5*D.tileWidth,M=.5*D.tileHeight,P=u(L.tint,o*L.alpha),i.batchTexture(s,x,x.width,x.height,f+(C+L.pixelX)*v,p+(M+L.pixelY)*m,L.width,L.height,v,m,L.rotation,L.flipX,L.flipY,c,d,C,M,A,_,E,S,P,P,P,P,!1,0,0,l,null,!0,w))}n.pipelines.postBatch(s)}}},function(g,b,t){var h=t(25),n=new h,s=new h,l=new h;g.exports=function(e,r,o,a){var i=r.cull(o),u=i.length,c=o.alpha*r.alpha;if(!(0===u||c<=0)){var d=n,f=s,p=l;f.applyITRS(r.x,r.y,r.rotation,r.scaleX,r.scaleY),d.copyFrom(o.matrix);var v=e.currentContext,m=r.gidMap;v.save(),a?(d.multiplyWithOffset(a,-o.scrollX*r.scrollFactorX,-o.scrollY*r.scrollFactorY),f.e=r.x,f.f=r.y,d.multiply(f,p),p.copyToContext(v)):(f.e-=o.scrollX*r.scrollFactorX,f.f-=o.scrollY*r.scrollFactorY,f.copyToContext(v)),(!e.antialias||1<r.scaleX||1<r.scaleY)&&(v.imageSmoothingEnabled=!1);for(var T=0;T<u;T++){var y,x,w,E,S,A,_=i[T],C=m[_.index];C&&(y=C.image.getSourceImage(),null!==(x=C.getTileTextureCoordinates(_.index))&&(S=.5*(w=C.tileWidth),A=.5*(E=C.tileHeight),v.save(),v.translate(_.pixelX+S,_.pixelY+A),0!==_.rotation&&v.rotate(_.rotation),(_.flipX||_.flipY)&&v.scale(_.flipX?-1:1,_.flipY?-1:1),v.globalAlpha=c*_.alpha,v.drawImage(y,x.x,x.y,w,E,-S,-A,w,E),v.restore()))}v.restore()}}},function(g,b,t){var h=t(16),n=t(262);h.register("tilemap",function(s){var l=void 0!==s?s:{};return n(this.scene,l.key,l.tileWidth,l.tileHeight,l.width,l.height,l.data,l.insertNull)})},function(g,b,t){var h=t(5),n=t(262);h.register("tilemap",function(s,l,e,r,o,a,i){return null===s&&(s=void 0),null===l&&(l=void 0),null===e&&(e=void 0),null===r&&(r=void 0),null===o&&(o=void 0),n(this.scene,s,l,e,r,o,a,i)})},function(g,b,t){g.exports={Clock:t(1462),TimerEvent:t(582)}},function(g,b,t){var h=t(0),n=t(24),s=t(20),l=t(582),e=t(93),r=new h({initialize:function(o){this.scene=o,this.systems=o.sys,this.now=0,this.timeScale=1,this.paused=!1,this._active=[],this._pendingInsertion=[],this._pendingRemoval=[],o.sys.events.once(s.BOOT,this.boot,this),o.sys.events.on(s.START,this.start,this)},boot:function(){this.now=this.systems.game.loop.time,this.systems.events.once(s.DESTROY,this.destroy,this)},start:function(){var o=this.systems.events;o.on(s.PRE_UPDATE,this.preUpdate,this),o.on(s.UPDATE,this.update,this),o.once(s.SHUTDOWN,this.shutdown,this)},addEvent:function(o){var a;return o instanceof l?(this.removeEvent(a=o),a.elapsed=a.startAt,a.hasDispatched=!1,a.repeatCount=-1===a.repeat||a.loop?999999999999:a.repeat):a=new l(o),this._pendingInsertion.push(a),a},delayedCall:function(o,a,i,u){return this.addEvent({delay:o,callback:a,args:i,callbackScope:u})},clearPendingEvents:function(){return this._pendingInsertion=[],this},removeEvent:function(o){Array.isArray(o)||(o=[o]);for(var a=0;a<o.length;a++){var i=o[a];e(this._pendingRemoval,i),e(this._pendingInsertion,i),e(this._active,i)}return this},removeAllEvents:function(){return this._pendingRemoval=this._pendingRemoval.concat(this._active),this},preUpdate:function(){var o=this._pendingRemoval.length,a=this._pendingInsertion.length;if(0!==o||0!==a){for(var i,u=0;u<o;u++){var c=this._active.indexOf(i=this._pendingRemoval[u]);-1<c&&this._active.splice(c,1),i.destroy()}for(u=0;u<a;u++)this._active.push(i=this._pendingInsertion[u]);this._pendingRemoval.length=0,this._pendingInsertion.length=0}},update:function(o,a){if(this.now=o,!this.paused){a*=this.timeScale;for(var i=0;i<this._active.length;i++){var u,c=this._active[i];c.paused||(c.elapsed+=a*c.timeScale,c.elapsed>=c.delay&&(u=c.elapsed-c.delay,c.elapsed=c.delay,!c.hasDispatched&&c.callback&&(c.hasDispatched=!0,c.callback.apply(c.callbackScope,c.args)),0<c.repeatCount?(c.repeatCount--,c.elapsed=u,c.hasDispatched=!1):this._pendingRemoval.push(c)))}}},shutdown:function(){for(var o=0;o<this._pendingInsertion.length;o++)this._pendingInsertion[o].destroy();for(o=0;o<this._active.length;o++)this._active[o].destroy();for(o=0;o<this._pendingRemoval.length;o++)this._pendingRemoval[o].destroy();this._active.length=0,this._pendingRemoval.length=0,this._pendingInsertion.length=0;var a=this.systems.events;a.off(s.PRE_UPDATE,this.preUpdate,this),a.off(s.UPDATE,this.update,this),a.off(s.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(s.START,this.start,this),this.scene=null,this.systems=null}});n.register("Clock",r,"time"),g.exports=r},function(g,b,t){var h=t(100),n=t(17)(!1,n={Builders:t(1464),Events:t(267),TweenManager:t(1480),Tween:t(266),TweenData:t(268),Timeline:t(588)},h);g.exports=n},function(g,b,t){g.exports={GetBoolean:t(99),GetEaseFunction:t(80),GetNewValue:t(162),GetProps:t(583),GetTargets:t(263),GetTweens:t(584),GetValueOp:t(264),NumberTweenBuilder:t(585),StaggerBuilder:t(586),TimelineBuilder:t(587),TweenBuilder:t(163)}},function(g,b){g.exports=["callbackScope","completeDelay","delay","duration","ease","easeParams","flipX","flipY","hold","loop","loopDelay","offset","onActive","onActiveParams","onActiveScope","onComplete","onCompleteParams","onCompleteScope","onLoop","onLoopParams","onLoopScope","onRepeat","onRepeatParams","onRepeatScope","onStart","onStartParams","onStartScope","onStop","onStopParams","onStopScope","onUpdate","onUpdateParams","onUpdateScope","onYoyo","onYoyoParams","onYoyoScope","paused","props","repeat","repeatDelay","targets","useFrames","yoyo"]},function(g,b){g.exports="complete"},function(g,b){g.exports="loop"},function(g,b){g.exports="pause"},function(g,b){g.exports="resume"},function(g,b){g.exports="start"},function(g,b){g.exports="update"},function(g,b){g.exports="active"},function(g,b){g.exports="complete"},function(g,b){g.exports="loop"},function(g,b){g.exports="repeat"},function(g,b){g.exports="start"},function(g,b){g.exports="stop"},function(g,b){g.exports="update"},function(g,b){g.exports="yoyo"},function(g,b,t){var h=t(93),n=t(0),s=t(585),l=t(24),e=t(20),r=t(586),o=t(587),a=t(100),i=t(163),u=new n({initialize:function(c){this.scene=c,this.systems=c.sys,this.timeScale=1,this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0,c.sys.events.once(e.BOOT,this.boot,this),c.sys.events.on(e.START,this.start,this)},boot:function(){this.systems.events.once(e.DESTROY,this.destroy,this)},start:function(){var c=this.systems.events;c.on(e.PRE_UPDATE,this.preUpdate,this),c.on(e.UPDATE,this.update,this),c.once(e.SHUTDOWN,this.shutdown,this),this.timeScale=1},createTimeline:function(c){return o(this,c)},timeline:function(c){var d=o(this,c);return d.paused||(this._add.push(d),this._toProcess++),d},create:function(c){return i(this,c)},add:function(c){var d=i(this,c);return this._add.push(d),this._toProcess++,d},existing:function(c){return this._add.push(c),this._toProcess++,this},addCounter:function(c){var d=s(this,c);return this._add.push(d),this._toProcess++,d},stagger:function(c,d){return r(c,d)},preUpdate:function(){if(0!==this._toProcess){for(var c,d=this._destroy,f=this._active,p=this._pending,v=0;v<d.length;v++){var m=f.indexOf(c=d[v]);-1===m?-1<(m=p.indexOf(c))&&(c.state=a.REMOVED,p.splice(m,1)):(c.state=a.REMOVED,f.splice(m,1))}for(d.length=0,d=this._add,v=0;v<d.length;v++)(c=d[v]).state===a.PENDING_ADD&&(c.init()?(c.play(),this._active.push(c)):this._pending.push(c));d.length=0,this._toProcess=0}},update:function(c,d){var f,p=this._active;d*=this.timeScale;for(var v=0;v<p.length;v++)(f=p[v]).update(c,d)&&(this._destroy.push(f),this._toProcess++)},remove:function(c){return h(this._add,c),h(this._pending,c),h(this._active,c),h(this._destroy,c),c.state=a.REMOVED,this},makeActive:function(c){if(-1!==this._add.indexOf(c)||-1!==this._active.indexOf(c))return this;var d=this._pending.indexOf(c);return-1!==d&&this._pending.splice(d,1),this._add.push(c),c.state=a.PENDING_ADD,this._toProcess++,this},each:function(c,d){for(var f=[null],p=1;p<arguments.length;p++)f.push(arguments[p]);for(var v in this.list)f[0]=this.list[v],c.apply(d,f)},getAllTweens:function(){for(var c=this._active,d=[],f=0;f<c.length;f++)d.push(c[f]);return d},getGlobalTimeScale:function(){return this.timeScale},getTweensOf:function(c,d){void 0===d&&(d=!1);var f,p,v,m=this._active,T=[];for(Array.isArray(c)||(c=[c]),p=0;p<m.length;p++)for(f=m[p],v=0;v<c.length;v++)f.hasTarget(c[v])&&T.push(f);if(d)for(m=this._pending,p=0;p<m.length;p++)for(f=m[p],v=0;v<c.length;v++)f.hasTarget(c[v])&&T.push(f);return T},isTweening:function(c){for(var d,f=this._active,p=0;p<f.length;p++)if((d=f[p]).hasTarget(c)&&d.isPlaying())return!0;return!1},killAll:function(){for(var c=this.getAllTweens(),d=0;d<c.length;d++)c[d].stop();return this},killTweensOf:function(c){for(var d=this.getTweensOf(c),f=0;f<d.length;f++)d[f].stop();return this},pauseAll:function(){for(var c=this._active,d=0;d<c.length;d++)c[d].pause();return this},resumeAll:function(){for(var c=this._active,d=0;d<c.length;d++)c[d].resume();return this},setGlobalTimeScale:function(c){return this.timeScale=c,this},shutdown:function(){this.killAll(),this._add=[],this._pending=[],this._active=[],this._destroy=[],this._toProcess=0;var c=this.systems.events;c.off(e.PRE_UPDATE,this.preUpdate,this),c.off(e.UPDATE,this.update,this),c.off(e.SHUTDOWN,this.shutdown,this)},destroy:function(){this.shutdown(),this.scene.sys.events.off(e.START,this.start,this),this.scene=null,this.systems=null}});l.register("TweenManager",u,"tweens"),g.exports=u},function(g,b,t){g.exports={Array:t(208),Base64:t(1482),Objects:t(1484),String:t(1488),NOOP:t(1)}},function(g,b,t){g.exports={ArrayBufferToBase64:t(1483),Base64ToArrayBuffer:t(433)}},function(g,b){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";g.exports=function(h,n){for(var s=new Uint8Array(h),l=s.length,e=n?"data:"+n+";base64,":"",r=0;r<l;r+=3)e+=t[s[r]>>2],e+=t[(3&s[r])<<4|s[r+1]>>4],e+=t[(15&s[r+1])<<2|s[r+2]>>6],e+=t[63&s[r+2]];return l%3==2?e=e.substring(0,e.length-1)+"=":l%3==1&&(e=e.substring(0,e.length-2)+"=="),e}},function(g,b,t){g.exports={Clone:t(77),DeepCopy:t(175),Extend:t(17),GetAdvancedValue:t(13),GetFastValue:t(2),GetMinMaxValue:t(1485),GetValue:t(6),HasAll:t(1486),HasAny:t(455),HasValue:t(126),IsPlainObject:t(7),Merge:t(127),MergeRight:t(1487),Pick:t(571),SetValue:t(478)}},function(g,b,t){var h=t(6),n=t(18);g.exports=function(s,l,e,r,o){void 0===o&&(o=e);var a=h(s,l,o);return n(a,e,r)}},function(g,b){g.exports=function(t,h){for(var n=0;n<h.length;n++)if(!t.hasOwnProperty(h[n]))return!1;return!0}},function(g,b,t){var h=t(77);g.exports=function(n,s){var l=h(n);for(var e in s)l.hasOwnProperty(e)&&(l[e]=s[e]);return l}},function(g,b,t){g.exports={Format:t(1489),Pad:t(186),RemoveAt:t(1490),Reverse:t(1491),UppercaseFirst:t(205),UUID:t(222)}},function(g,b){g.exports=function(t,h){return t.replace(/%([0-9]+)/g,function(n,s){return h[Number(s)-1]})}},function(g,b){g.exports=function(t,h){return 0===h?t.slice(1):t.slice(0,h-1)+t.slice(h)}},function(g,b){g.exports=function(t){return t.split("").reverse().join("")}},function(g,b,t){g.exports={SoundManagerCreator:t(426),Events:t(70),BaseSound:t(146),BaseSoundManager:t(145),WebAudioSound:t(434),WebAudioSoundManager:t(432),HTML5AudioSound:t(429),HTML5AudioSoundManager:t(427),NoAudioSound:t(431),NoAudioSoundManager:t(430)}},function(g,b,t){g.exports={Arcade:t(1366),Matter:t(1494)}},function(g,b,t){g.exports={BodyBounds:t(1392),Components:t(249),Events:t(272),Factory:t(1394),MatterGameObject:t(1395),Image:t(1396),Matter:t(594),MatterPhysics:t(1524),PolyDecomp:t(1393),Sprite:t(1397),TileBody:t(593),PhysicsEditorParser:t(589),PhysicsJSONParser:t(590),PointerConstraint:t(1398),World:t(1402)}},function(g,b){g.exports={setBounce:function(t){return this.body.restitution=t,this}}},function(g,b){g.exports={setCollisionCategory:function(h){return this.body.collisionFilter.category=h,this},setCollisionGroup:function(h){return this.body.collisionFilter.group=h,this},setCollidesWith:function(h){var n=0;if(Array.isArray(h))for(var s=0;s<h.length;s++)n|=h[s];else n=h;return this.body.collisionFilter.mask=n,this},setOnCollide:function(h){return this.body.onCollideCallback=h,this},setOnCollideEnd:function(h){return this.body.onCollideEndCallback=h,this},setOnCollideActive:function(h){return this.body.onCollideActiveCallback=h,this},setOnCollideWith:function(h,n){Array.isArray(h)||(h=[h]);for(var s=0;s<h.length;s++){var l=h[s].hasOwnProperty("body")?h[s].body:h[s];this.body.setOnCollideWith(l,n)}return this}}},function(g,b,t){var h=t(41);g.exports={applyForce:function(s){return this._tempVec2.set(this.body.position.x,this.body.position.y),h.applyForce(this.body,this._tempVec2,s),this},applyForceFrom:function(s,l){return h.applyForce(this.body,s,l),this},thrust:function(s){var l=this.body.angle;return this._tempVec2.set(s*Math.cos(l),s*Math.sin(l)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustLeft:function(s){var l=this.body.angle-Math.PI/2;return this._tempVec2.set(s*Math.cos(l),s*Math.sin(l)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustRight:function(s){var l=this.body.angle+Math.PI/2;return this._tempVec2.set(s*Math.cos(l),s*Math.sin(l)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this},thrustBack:function(s){var l=this.body.angle-Math.PI;return this._tempVec2.set(s*Math.cos(l),s*Math.sin(l)),h.applyForce(this.body,{x:this.body.position.x,y:this.body.position.y},this._tempVec2),this}}},function(g,b){g.exports={setFriction:function(h,n,s){return this.body.friction=h,void 0!==n&&(this.body.frictionAir=n),void 0!==s&&(this.body.frictionStatic=s),this},setFrictionAir:function(h){return this.body.frictionAir=h,this},setFrictionStatic:function(h){return this.body.frictionStatic=h,this}}},function(g,b){g.exports={setIgnoreGravity:function(t){return this.body.ignoreGravity=t,this}}},function(g,b,t){var h=t(41),n=t(3);g.exports={setMass:function(l){return h.setMass(this.body,l),this},setDensity:function(l){return h.setDensity(this.body,l),this},centerOfMass:{get:function(){return new n(this.body.centerOfMass.x,this.body.centerOfMass.y)}}}},function(g,b){g.exports={setSensor:function(t){return this.body.isSensor=t,this},isSensor:function(){return this.body.isSensor}}},function(g,b,t){var h=t(86),n=t(41),s=t(124),l=t(2),e=t(589),r=t(590),o=t(64);g.exports={setRectangle:function(i,u,c){return this.setBody({type:"rectangle",width:i,height:u},c)},setCircle:function(i,u){return this.setBody({type:"circle",radius:i},u)},setPolygon:function(i,u,c){return this.setBody({type:"polygon",sides:u,radius:i},c)},setTrapezoid:function(i,u,c,d){return this.setBody({type:"trapezoid",width:i,height:u,slope:c},d)},setExistingBody:function(i,u){void 0===u&&(u=!0),this.body&&this.world.remove(this.body,!0),this.body=i;for(var c=0;c<i.parts.length;c++)i.parts[c].gameObject=this;var d,f,v,y=this;return i.destroy=function(){y.world.remove(y.body,!0),y.body.gameObject=null},u&&(this.world.has(i)&&this.world.remove(i,!0),this.world.add(i)),this._originComponent&&(d=i.render.sprite.xOffset,f=i.render.sprite.yOffset,v=i.centerOfMass.y,s(i.centerOfMass.x,.5)&&s(v,.5)?this.setOrigin(d+.5,f+.5):this.setOrigin(d+i.centerOffset.x/this.displayWidth,f+i.centerOffset.y/this.displayHeight)),this},setBody:function(i,u){if(!i)return this;"string"==typeof i&&(i={type:i});var c=l(i,"type","rectangle"),d=l(i,"x",this._tempVec2.x),f=l(i,"y",this._tempVec2.y),p=l(i,"width",this.width),v=l(i,"height",this.height);switch(c){case"rectangle":y=h.rectangle(d,f,p,v,u);break;case"circle":var m=l(i,"radius",Math.max(p,v)/2),T=l(i,"maxSides",25),y=h.circle(d,f,m,u,T);break;case"trapezoid":var x=l(i,"slope",.5);y=h.trapezoid(d,f,p,v,x,u);break;case"polygon":var w=l(i,"sides",5),E=l(i,"radius",Math.max(p,v)/2);y=h.polygon(d,f,w,E,u);break;case"fromVertices":case"fromVerts":var S,A,_,C=l(i,"verts",null);C&&("string"==typeof C&&(C=o.fromPath(C)),y=this.body&&!this.body.hasOwnProperty("temp")?(n.setVertices(this.body,C),this.body):(S=l(i,"flagInternal",!1),A=l(i,"removeCollinear",.01),_=l(i,"minimumArea",10),h.fromVertices(d,f,C,u,S,A,_)));break;case"fromPhysicsEditor":y=e.parseBody(d,f,i,u);break;case"fromPhysicsTracer":y=r.parseBody(d,f,i,u)}return y&&this.setExistingBody(y,i.addToWorld),this}}},function(g,b,t){var h=t(272),n=t(165),s=t(166);g.exports={setToSleep:function(){return n.set(this.body,!0),this},setAwake:function(){return n.set(this.body,!1),this},setSleepThreshold:function(e){return void 0===e&&(e=60),this.body.sleepThreshold=e,this},setSleepEvents:function(e,r){return this.setSleepStartEvent(e),this.setSleepEndEvent(r),this},setSleepStartEvent:function(e){var r;return e?(r=this.world,s.on(this.body,"sleepStart",function(o){r.emit(h.SLEEP_START,o,this)})):s.off(this.body,"sleepStart"),this},setSleepEndEvent:function(e){var r;return e?(r=this.world,s.on(this.body,"sleepEnd",function(o){r.emit(h.SLEEP_END,o,this)})):s.off(this.body,"sleepEnd"),this}}},function(g,b){g.exports="afteradd"},function(g,b){g.exports="afterremove"},function(g,b){g.exports="afterupdate"},function(g,b){g.exports="beforeadd"},function(g,b){g.exports="beforeremove"},function(g,b){g.exports="beforeupdate"},function(g,b){g.exports="collisionactive"},function(g,b){g.exports="collisionend"},function(g,b){g.exports="collisionstart"},function(g,b){g.exports="dragend"},function(g,b){g.exports="drag"},function(g,b){g.exports="dragstart"},function(g,b){g.exports="pause"},function(g,b){g.exports="resume"},function(g,b){g.exports="sleepend"},function(g,b){g.exports="sleepstart"},function(g,b,t){var h=t(41);g.exports={setStatic:function(s){return h.setStatic(this.body,s),this},isStatic:function(){return this.body.isStatic}}},function(g,b,t){var h=t(41),n=t(14),s=t(269),l=t(270);g.exports={x:{get:function(){return this.body.position.x},set:function(r){this._tempVec2.set(r,this.y),h.setPosition(this.body,this._tempVec2)}},y:{get:function(){return this.body.position.y},set:function(r){this._tempVec2.set(this.x,r),h.setPosition(this.body,this._tempVec2)}},scaleX:{get:function(){return this._scaleX},set:function(r){var o=1/this._scaleX,a=1/this._scaleY;this._scaleX=r,0===this._scaleX?this.renderFlags&=-5:this.renderFlags|=4,h.scale(this.body,o,a),h.scale(this.body,r,this._scaleY)}},scaleY:{get:function(){return this._scaleY},set:function(r){var o=1/this._scaleX,a=1/this._scaleY;this._scaleY=r,0===this._scaleY?this.renderFlags&=-5:this.renderFlags|=4,h.scale(this.body,o,a),h.scale(this.body,this._scaleX,r)}},angle:{get:function(){return l(this.body.angle*n.RAD_TO_DEG)},set:function(r){this.rotation=l(r)*n.DEG_TO_RAD}},rotation:{get:function(){return this.body.angle},set:function(r){this._rotation=s(r),h.setAngle(this.body,this._rotation)}},setPosition:function(r,o){return void 0===r&&(r=0),void 0===o&&(o=r),this._tempVec2.set(r,o),h.setPosition(this.body,this._tempVec2),this},setRotation:function(r){return void 0===r&&(r=0),this._rotation=s(r),h.setAngle(this.body,r),this},setFixedRotation:function(){return h.setInertia(this.body,1/0),this},setAngle:function(r){return void 0===r&&(r=0),this.angle=r,h.setAngle(this.body,this.rotation),this},setScale:function(r,o,a){void 0===r&&(r=1),void 0===o&&(o=r);var i=1/this._scaleX,u=1/this._scaleY;return this._scaleX=r,this._scaleY=o,h.scale(this.body,i,u,a),h.scale(this.body,r,o,a),this}}},function(g,b,t){var h=t(41);g.exports={setAngularVelocity:function(s){return h.setAngularVelocity(this.body,s),this},setVelocityX:function(s){return this._tempVec2.set(s,this.body.velocity.y),h.setVelocity(this.body,this._tempVec2),this},setVelocityY:function(s){return this._tempVec2.set(this.body.velocity.x,s),h.setVelocity(this.body,this._tempVec2),this},setVelocity:function(s,l){return this._tempVec2.set(s,l),h.setVelocity(this.body,this._tempVec2),this}}},function(g,b,t){var h={};g.exports=h;var n=t(118),s=t(32);h.create=function(l){return s.extend({extended:!1,narrowDetections:0,narrowphaseTests:0,narrowReuse:0,narrowReuseCount:0,midphaseTests:0,broadphaseTests:0,narrowEff:1e-4,midEff:1e-4,broadEff:1e-4,collisions:0,buckets:0,bodies:0,pairs:0},!1,l)},h.reset=function(l){l.extended&&(l.narrowDetections=0,l.narrowphaseTests=0,l.narrowReuse=0,l.narrowReuseCount=0,l.midphaseTests=0,l.broadphaseTests=0,l.narrowEff=0,l.midEff=0,l.broadEff=0,l.collisions=0,l.buckets=0,l.pairs=0,l.bodies=0)},h.update=function(l,e){var o;l.extended&&(o=n.allBodies(e.world),l.collisions=l.narrowDetections,l.pairs=e.pairs.list.length,l.bodies=o.length,l.midEff=(l.narrowDetections/(l.midphaseTests||1)).toFixed(2),l.narrowEff=(l.narrowDetections/(l.narrowphaseTests||1)).toFixed(2),l.broadEff=(1-l.broadphaseTests/(o.length||1)).toFixed(2),l.narrowReuse=(l.narrowReuseCount/(l.narrowphaseTests||1)).toFixed(2))}},function(g,b,t){var h=t(123),n=t(271),s=t(86),l=t(41),e=t(1392),r=t(84),o=t(0),a=t(118),i=t(591),u=t(128),c=t(273),d=t(50),f=t(1394),p=t(2),v=t(6),m=t(597),T=t(1525),y=t(1526),x=t(1399),w=t(1527),E=t(127),S=t(250),A=t(598),_=t(595),C=t(24),M=t(1400),P=t(599),L=t(274),D=t(20),F=t(592),X=t(83),R=t(64),O=t(1402),N=new o({initialize:function(k){this.scene=k,this.systems=k.sys,this.config=this.getConfig(),this.body=l,this.composite=a,this.detector=c,this.grid=m,this.pair=S,this.pairs=A,this.query=M,this.resolver=P,this.sat=L,this.constraint=u,this.bodies=s,this.composites=i,this.axes=n,this.bounds=r,this.svg=F,this.vector=X,this.vertices=R,this.verts=R,this._tempVec2=X.create(),v(this.config,"plugins.collisionevents",!0)&&this.enableCollisionEventsPlugin(),v(this.config,"plugins.attractors",!1)&&this.enableAttractorPlugin(),v(this.config,"plugins.wrap",!1)&&this.enableWrapPlugin(),P._restingThresh=v(this.config,"restingThresh",4),P._restingThreshTangent=v(this.config,"restingThreshTangent",6),P._positionDampen=v(this.config,"positionDampen",.9),P._positionWarming=v(this.config,"positionWarming",.8),P._frictionNormalMultiplier=v(this.config,"frictionNormalMultiplier",5),k.sys.events.once(D.BOOT,this.boot,this),k.sys.events.on(D.START,this.start,this)},boot:function(){this.world=new O(this.scene,this.config),this.add=new f(this.world),this.bodyBounds=new e,this.systems.events.once(D.DESTROY,this.destroy,this)},start:function(){this.world||(this.world=new O(this.scene,this.config),this.add=new f(this.world));var k=this.systems.events;k.on(D.UPDATE,this.world.update,this.world),k.on(D.POST_UPDATE,this.world.postUpdate,this.world),k.once(D.SHUTDOWN,this.shutdown,this)},getConfig:function(){var k=this.systems.game.config.physics;return E(p(this.systems.settings.physics,"matter",{}),p(k,"matter",{}))},enableAttractorPlugin:function(){return _.register(T),_.use(x,T),this},enableWrapPlugin:function(){return _.register(w),_.use(x,w),this},enableCollisionEventsPlugin:function(){return _.register(y),_.use(x,y),this},pause:function(){return this.world.pause()},resume:function(){return this.world.resume()},set60Hz:function(){return this.world.getDelta=this.world.update60Hz,this.world.autoUpdate=!0,this},set30Hz:function(){return this.world.getDelta=this.world.update30Hz,this.world.autoUpdate=!0,this},step:function(k,I){this.world.step(k,I)},containsPoint:function(k,I,B){k=this.getMatterBodies(k);var Y=X.create(I,B);return 0<M.point(k,Y).length},intersectPoint:function(k,I,B){B=this.getMatterBodies(B);var Y=X.create(k,I),U=[];return M.point(B,Y).forEach(function(G){-1===U.indexOf(G)&&U.push(G)}),U},intersectRect:function(k,I,B,Y,U,G){void 0===U&&(U=!1),G=this.getMatterBodies(G);var z=[];return M.region(G,{min:{x:k,y:I},max:{x:k+B,y:I+Y}},U).forEach(function(V){-1===z.indexOf(V)&&z.push(V)}),z},intersectRay:function(k,I,B,Y,U,G){void 0===U&&(U=1),G=this.getMatterBodies(G);for(var W=[],z=M.ray(G,X.create(k,I),X.create(B,Y),U),V=0;V<z.length;V++)W.push(z[V].body);return W},intersectBody:function(k,I){I=this.getMatterBodies(I);for(var B=[],Y=M.collides(k,I),U=0;U<Y.length;U++){var G=Y[U];B.push(G.bodyA===k?G.bodyB:G.bodyA)}return B},overlap:function(k,I,B,Y,U){void 0===B&&(B=null),void 0===Y&&(Y=null),void 0===U&&(U=B),Array.isArray(k)||(k=[k]),k=this.getMatterBodies(k),I=this.getMatterBodies(I);for(var G=!1,W=0;W<k.length;W++)for(var z=k[W],V=M.collides(z,I),H=0;H<V.length;H++){var j=V[H],q=j.bodyA.id===z.id?j.bodyB:j.bodyA;if(!Y||Y.call(U,z,q,j))if(G=!0,B)B.call(U,z,q,j);else if(!Y)return!0}return G},setCollisionCategory:function(k,I){return(k=this.getMatterBodies(k)).forEach(function(B){B.collisionFilter.category=I}),this},setCollisionGroup:function(k,I){return(k=this.getMatterBodies(k)).forEach(function(B){B.collisionFilter.group=I}),this},setCollidesWith:function(k,I){k=this.getMatterBodies(k);var B=0;if(Array.isArray(I))for(var Y=0;Y<I.length;Y++)B|=I[Y];else B=I;return k.forEach(function(U){U.collisionFilter.mask=B}),this},getMatterBodies:function(k){if(!k)return this.world.getAllBodies();Array.isArray(k)||(k=[k]);for(var I=[],B=0;B<k.length;B++){var Y=k[B].hasOwnProperty("body")?k[B].body:k[B];I.push(Y)}return I},setVelocity:function(k,I,B){k=this.getMatterBodies(k);var Y=this._tempVec2;return Y.x=I,Y.y=B,k.forEach(function(U){l.setVelocity(U,Y)}),this},setVelocityX:function(k,I){k=this.getMatterBodies(k);var B=this._tempVec2;return B.x=I,k.forEach(function(Y){B.y=Y.velocity.y,l.setVelocity(Y,B)}),this},setVelocityY:function(k,I){k=this.getMatterBodies(k);var B=this._tempVec2;return B.y=I,k.forEach(function(Y){B.x=Y.velocity.x,l.setVelocity(Y,B)}),this},setAngularVelocity:function(k,I){return(k=this.getMatterBodies(k)).forEach(function(B){l.setAngularVelocity(B,I)}),this},applyForce:function(k,I){k=this.getMatterBodies(k);var B=this._tempVec2;return k.forEach(function(Y){B.x=Y.position.x,B.y=Y.position.y,l.applyForce(Y,B,I)}),this},applyForceFromPosition:function(k,I,B,Y){k=this.getMatterBodies(k);var U=this._tempVec2;return k.forEach(function(G){void 0===Y&&(Y=G.angle),U.x=B*Math.cos(Y),U.y=B*Math.sin(Y),l.applyForce(G,I,U)}),this},applyForceFromAngle:function(k,I,B){k=this.getMatterBodies(k);var Y=this._tempVec2;return k.forEach(function(U){void 0===B&&(B=U.angle),Y.x=I*Math.cos(B),Y.y=I*Math.sin(B),l.applyForce(U,{x:U.position.x,y:U.position.y},Y)}),this},getConstraintLength:function(k){var I=k.pointA.x,B=k.pointA.y,Y=k.pointB.x,U=k.pointB.y;return k.bodyA&&(I+=k.bodyA.position.x,B+=k.bodyA.position.y),k.bodyB&&(Y+=k.bodyB.position.x,U+=k.bodyB.position.y),d(I,B,Y,U)},alignBody:function(k,I,B,Y){var U;switch(k=k.hasOwnProperty("body")?k.body:k,Y){case h.TOP_LEFT:case h.LEFT_TOP:U=this.bodyBounds.getTopLeft(k,I,B);break;case h.TOP_CENTER:U=this.bodyBounds.getTopCenter(k,I,B);break;case h.TOP_RIGHT:case h.RIGHT_TOP:U=this.bodyBounds.getTopRight(k,I,B);break;case h.LEFT_CENTER:U=this.bodyBounds.getLeftCenter(k,I,B);break;case h.CENTER:U=this.bodyBounds.getCenter(k,I,B);break;case h.RIGHT_CENTER:U=this.bodyBounds.getRightCenter(k,I,B);break;case h.LEFT_BOTTOM:case h.BOTTOM_LEFT:U=this.bodyBounds.getBottomLeft(k,I,B);break;case h.BOTTOM_CENTER:U=this.bodyBounds.getBottomCenter(k,I,B);break;case h.BOTTOM_RIGHT:case h.RIGHT_BOTTOM:U=this.bodyBounds.getBottomRight(k,I,B)}return U&&l.setPosition(k,U),this},shutdown:function(){var k=this.systems.events;this.world&&(k.off(D.UPDATE,this.world.update,this.world),k.off(D.POST_UPDATE,this.world.postUpdate,this.world)),k.off(D.SHUTDOWN,this.shutdown,this),this.add&&this.add.destroy(),this.world&&this.world.destroy(),this.add=null,this.world=null},destroy:function(){this.shutdown(),this.scene.sys.events.off(D.START,this.start,this),this.scene=null,this.systems=null}});C.register("MatterPhysics",N,"matterPhysics"),g.exports=N},function(g,b,t){var h=t(594),n={name:"matter-attractors",version:"0.1.7",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Body.create",function(){n.Body.init(this)}),s.before("Engine.update",function(l){n.Engine.update(l)})},Body:{init:function(s){s.plugin.attractors=s.plugin.attractors||[]}},Engine:{update:function(s){for(var l=h.Composite.allBodies(s.world),e=0;e<l.length;e++){var r=l[e],o=r.plugin.attractors;if(o&&0<o.length)for(var a=0;a<l.length;a++){var i=l[a];if(e!==a)for(var u=0;u<o.length;u++){var c=o[u],d=c;h.Common.isFunction(c)&&(d=c(r,i)),d&&h.Body.applyForce(i,i.position,d)}}}}},Attractors:{gravityConstant:.001,gravity:function(s,l){var e=h.Vector.sub(l.position,s.position),r=h.Vector.magnitudeSquared(e)||1e-4,o=h.Vector.normalise(e),i=h.Vector.mult(o,s.mass*l.mass/r*-n.Attractors.gravityConstant);h.Body.applyForce(s,s.position,h.Vector.neg(i)),h.Body.applyForce(l,l.position,i)}}};g.exports=n},function(g,b){g.exports={name:"matter-collision-events",version:"0.1.6",for:"matter-js@^0.14.2",silent:!0,install:function(t){t.after("Engine.create",function(){t.Events.on(this,"collisionStart",function(h){h.pairs.map(function(n){var s=n.bodyA,l=n.bodyB;s.gameObject&&s.gameObject.emit("collide",s,l,n),l.gameObject&&l.gameObject.emit("collide",l,s,n),t.Events.trigger(s,"onCollide",{pair:n}),t.Events.trigger(l,"onCollide",{pair:n}),s.onCollideCallback&&s.onCollideCallback(n),l.onCollideCallback&&l.onCollideCallback(n),s.onCollideWith[l.id]&&s.onCollideWith[l.id](l,n),l.onCollideWith[s.id]&&l.onCollideWith[s.id](s,n)})}),t.Events.on(this,"collisionActive",function(h){h.pairs.map(function(n){var s=n.bodyA,l=n.bodyB;s.gameObject&&s.gameObject.emit("collideActive",s,l,n),l.gameObject&&l.gameObject.emit("collideActive",l,s,n),t.Events.trigger(s,"onCollideActive",{pair:n}),t.Events.trigger(l,"onCollideActive",{pair:n}),s.onCollideActiveCallback&&s.onCollideActiveCallback(n),l.onCollideActiveCallback&&l.onCollideActiveCallback(n)})}),t.Events.on(this,"collisionEnd",function(h){h.pairs.map(function(n){var s=n.bodyA,l=n.bodyB;s.gameObject&&s.gameObject.emit("collideEnd",s,l,n),l.gameObject&&l.gameObject.emit("collideEnd",l,s,n),t.Events.trigger(s,"onCollideEnd",{pair:n}),t.Events.trigger(l,"onCollideEnd",{pair:n}),s.onCollideEndCallback&&s.onCollideEndCallback(n),l.onCollideEndCallback&&l.onCollideEndCallback(n)})})})}}},function(g,b,t){var h=t(594),n={name:"matter-wrap",version:"0.1.4",for:"matter-js@^0.14.2",silent:!0,install:function(s){s.after("Engine.update",function(){n.Engine.update(this)})},Engine:{update:function(s){for(var l=s.world,e=h.Composite.allBodies(l),r=h.Composite.allComposites(l),o=0;o<e.length;o+=1){var a=e[o];a.plugin.wrap&&n.Body.wrap(a,a.plugin.wrap)}for(o=0;o<r.length;o+=1){var i=r[o];i.plugin.wrap&&n.Composite.wrap(i,i.plugin.wrap)}}},Bounds:{wrap:function(s,l){var e=null,r=null;if(void 0!==l.min.x&&void 0!==l.max.x&&(s.min.x>l.max.x?e=l.min.x-s.max.x:s.max.x<l.min.x&&(e=l.max.x-s.min.x)),void 0!==l.min.y&&void 0!==l.max.y&&(s.min.y>l.max.y?r=l.min.y-s.max.y:s.max.y<l.min.y&&(r=l.max.y-s.min.y)),null!==e||null!==r)return{x:e||0,y:r||0}}},Body:{wrap:function(s,l){var e=n.Bounds.wrap(s.bounds,l);return e&&h.Body.translate(s,e),e}},Composite:{bounds:function(s){for(var l=h.Composite.allBodies(s),e=[],r=0;r<l.length;r+=1){var o=l[r];e.push(o.bounds.min,o.bounds.max)}return h.Bounds.create(e)},wrap:function(s,l){var e=n.Bounds.wrap(n.Composite.bounds(s),l);return e&&h.Composite.translate(s,e),e}}};g.exports=n},function(g,b,t){(function(h){var n=t(33),s=t(17),l={Actions:t(275),Animations:t(723),BlendModes:t(35),Cache:t(735),Cameras:t(738),Core:t(806),Class:t(0),Create:t(888),Curves:t(894),Data:t(896),Display:t(898),DOM:t(917),Events:t(918),Game:t(920),GameObjects:t(1011),Geom:t(483),Input:t(1308),Loader:t(1338),Math:t(193),Physics:t(1493),Plugins:t(1403),Renderer:t(1405),Scale:t(1412),ScaleModes:t(168),Scene:t(418),Scenes:t(1413),Structs:t(1415),Textures:t(1416),Tilemaps:t(1418),Time:t(1461),Tweens:t(1463),Utils:t(1481)};l.Sound=t(1492),l=s(!1,l,n),g.exports=l,h.Phaser=l}).call(this,t(600))}],ct.c=gt,ct.d=function(g,b,t){ct.o(g,b)||Object.defineProperty(g,b,{enumerable:!0,get:t})},ct.r=function(g){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},ct.t=function(g,b){if(1&b&&(g=ct(g)),8&b||4&b&&"object"==typeof g&&g&&g.__esModule)return g;var t=Object.create(null);if(ct.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:g}),2&b&&"string"!=typeof g)for(var h in g)ct.d(t,h,function(n){return g[n]}.bind(null,h));return t},ct.n=function(g){var b=g&&g.__esModule?function(){return g.default}:function(){return g};return ct.d(b,"a",b),b},ct.o=function(g,b){return Object.prototype.hasOwnProperty.call(g,b)},ct.p="",ct(ct.s=1528);function ct(g){if(gt[g])return gt[g].exports;var b=gt[g]={i:g,l:!1,exports:{}};return pt[g].call(b.exports,b,b.exports,ct),b.l=!0,b.exports}var pt,gt});